var Lh=Object.defineProperty;var Hh=(x,d,g)=>d in x?Lh(x,d,{enumerable:!0,configurable:!0,writable:!0,value:g}):x[d]=g;var Fh=(x,d)=>()=>(d||x((d={exports:{}}).exports,d),d.exports);var Qt=(x,d,g)=>Hh(x,typeof d!="symbol"?d+"":d,g);var Bh=Fh((exports,module)=>{function _mergeNamespaces(x,d){for(var g=0;g<d.length;g++){const E=d[g];if(typeof E!="string"&&!Array.isArray(E)){for(const b in E)if(b!=="default"&&!(b in x)){const w=Object.getOwnPropertyDescriptor(E,b);w&&Object.defineProperty(x,b,w.get?w:{enumerable:!0,get:()=>E[b]})}}}return Object.freeze(Object.defineProperty(x,Symbol.toStringTag,{value:"Module"}))}(function(){const d=document.createElement("link").relList;if(d&&d.supports&&d.supports("modulepreload"))return;for(const b of document.querySelectorAll('link[rel="modulepreload"]'))E(b);new MutationObserver(b=>{for(const w of b)if(w.type==="childList")for(const C of w.addedNodes)C.tagName==="LINK"&&C.rel==="modulepreload"&&E(C)}).observe(document,{childList:!0,subtree:!0});function g(b){const w={};return b.integrity&&(w.integrity=b.integrity),b.referrerPolicy&&(w.referrerPolicy=b.referrerPolicy),b.crossOrigin==="use-credentials"?w.credentials="include":b.crossOrigin==="anonymous"?w.credentials="omit":w.credentials="same-origin",w}function E(b){if(b.ep)return;b.ep=!0;const w=g(b);fetch(b.href,w)}})();var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(x){return x&&x.__esModule&&Object.prototype.hasOwnProperty.call(x,"default")?x.default:x}var jsxRuntime={exports:{}},reactJsxRuntime_production_min={},react={exports:{}},react_production_min={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReact_production_min;function requireReact_production_min(){if(hasRequiredReact_production_min)return react_production_min;hasRequiredReact_production_min=1;var x=Symbol.for("react.element"),d=Symbol.for("react.portal"),g=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),b=Symbol.for("react.profiler"),w=Symbol.for("react.provider"),C=Symbol.for("react.context"),S=Symbol.for("react.forward_ref"),P=Symbol.for("react.suspense"),I=Symbol.for("react.memo"),M=Symbol.for("react.lazy"),D=Symbol.iterator;function k(J){return J===null||typeof J!="object"?null:(J=D&&J[D]||J["@@iterator"],typeof J=="function"?J:null)}var H={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},F=Object.assign,j={};function $(J,ue,Te){this.props=J,this.context=ue,this.refs=j,this.updater=Te||H}$.prototype.isReactComponent={},$.prototype.setState=function(J,ue){if(typeof J!="object"&&typeof J!="function"&&J!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,J,ue,"setState")},$.prototype.forceUpdate=function(J){this.updater.enqueueForceUpdate(this,J,"forceUpdate")};function z(){}z.prototype=$.prototype;function U(J,ue,Te){this.props=J,this.context=ue,this.refs=j,this.updater=Te||H}var W=U.prototype=new z;W.constructor=U,F(W,$.prototype),W.isPureReactComponent=!0;var q=Array.isArray,Z=Object.prototype.hasOwnProperty,X={current:null},K={key:!0,ref:!0,__self:!0,__source:!0};function ee(J,ue,Te){var xe,we={},Re=null,De=null;if(ue!=null)for(xe in ue.ref!==void 0&&(De=ue.ref),ue.key!==void 0&&(Re=""+ue.key),ue)Z.call(ue,xe)&&!K.hasOwnProperty(xe)&&(we[xe]=ue[xe]);var Ae=arguments.length-2;if(Ae===1)we.children=Te;else if(1<Ae){for(var Be=Array(Ae),We=0;We<Ae;We++)Be[We]=arguments[We+2];we.children=Be}if(J&&J.defaultProps)for(xe in Ae=J.defaultProps,Ae)we[xe]===void 0&&(we[xe]=Ae[xe]);return{$$typeof:x,type:J,key:Re,ref:De,props:we,_owner:X.current}}function te(J,ue){return{$$typeof:x,type:J.type,key:ue,ref:J.ref,props:J.props,_owner:J._owner}}function ce(J){return typeof J=="object"&&J!==null&&J.$$typeof===x}function Q(J){var ue={"=":"=0",":":"=2"};return"$"+J.replace(/[=:]/g,function(Te){return ue[Te]})}var se=/\/+/g;function ge(J,ue){return typeof J=="object"&&J!==null&&J.key!=null?Q(""+J.key):ue.toString(36)}function Ce(J,ue,Te,xe,we){var Re=typeof J;(Re==="undefined"||Re==="boolean")&&(J=null);var De=!1;if(J===null)De=!0;else switch(Re){case"string":case"number":De=!0;break;case"object":switch(J.$$typeof){case x:case d:De=!0}}if(De)return De=J,we=we(De),J=xe===""?"."+ge(De,0):xe,q(we)?(Te="",J!=null&&(Te=J.replace(se,"$&/")+"/"),Ce(we,ue,Te,"",function(We){return We})):we!=null&&(ce(we)&&(we=te(we,Te+(!we.key||De&&De.key===we.key?"":(""+we.key).replace(se,"$&/")+"/")+J)),ue.push(we)),1;if(De=0,xe=xe===""?".":xe+":",q(J))for(var Ae=0;Ae<J.length;Ae++){Re=J[Ae];var Be=xe+ge(Re,Ae);De+=Ce(Re,ue,Te,Be,we)}else if(Be=k(J),typeof Be=="function")for(J=Be.call(J),Ae=0;!(Re=J.next()).done;)Re=Re.value,Be=xe+ge(Re,Ae++),De+=Ce(Re,ue,Te,Be,we);else if(Re==="object")throw ue=String(J),Error("Objects are not valid as a React child (found: "+(ue==="[object Object]"?"object with keys {"+Object.keys(J).join(", ")+"}":ue)+"). If you meant to render a collection of children, use an array instead.");return De}function oe(J,ue,Te){if(J==null)return J;var xe=[],we=0;return Ce(J,xe,"","",function(Re){return ue.call(Te,Re,we++)}),xe}function he(J){if(J._status===-1){var ue=J._result;ue=ue(),ue.then(function(Te){(J._status===0||J._status===-1)&&(J._status=1,J._result=Te)},function(Te){(J._status===0||J._status===-1)&&(J._status=2,J._result=Te)}),J._status===-1&&(J._status=0,J._result=ue)}if(J._status===1)return J._result.default;throw J._result}var de={current:null},re={transition:null},ae={ReactCurrentDispatcher:de,ReactCurrentBatchConfig:re,ReactCurrentOwner:X};function pe(){throw Error("act(...) is not supported in production builds of React.")}return react_production_min.Children={map:oe,forEach:function(J,ue,Te){oe(J,function(){ue.apply(this,arguments)},Te)},count:function(J){var ue=0;return oe(J,function(){ue++}),ue},toArray:function(J){return oe(J,function(ue){return ue})||[]},only:function(J){if(!ce(J))throw Error("React.Children.only expected to receive a single React element child.");return J}},react_production_min.Component=$,react_production_min.Fragment=g,react_production_min.Profiler=b,react_production_min.PureComponent=U,react_production_min.StrictMode=E,react_production_min.Suspense=P,react_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ae,react_production_min.act=pe,react_production_min.cloneElement=function(J,ue,Te){if(J==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+J+".");var xe=F({},J.props),we=J.key,Re=J.ref,De=J._owner;if(ue!=null){if(ue.ref!==void 0&&(Re=ue.ref,De=X.current),ue.key!==void 0&&(we=""+ue.key),J.type&&J.type.defaultProps)var Ae=J.type.defaultProps;for(Be in ue)Z.call(ue,Be)&&!K.hasOwnProperty(Be)&&(xe[Be]=ue[Be]===void 0&&Ae!==void 0?Ae[Be]:ue[Be])}var Be=arguments.length-2;if(Be===1)xe.children=Te;else if(1<Be){Ae=Array(Be);for(var We=0;We<Be;We++)Ae[We]=arguments[We+2];xe.children=Ae}return{$$typeof:x,type:J.type,key:we,ref:Re,props:xe,_owner:De}},react_production_min.createContext=function(J){return J={$$typeof:C,_currentValue:J,_currentValue2:J,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},J.Provider={$$typeof:w,_context:J},J.Consumer=J},react_production_min.createElement=ee,react_production_min.createFactory=function(J){var ue=ee.bind(null,J);return ue.type=J,ue},react_production_min.createRef=function(){return{current:null}},react_production_min.forwardRef=function(J){return{$$typeof:S,render:J}},react_production_min.isValidElement=ce,react_production_min.lazy=function(J){return{$$typeof:M,_payload:{_status:-1,_result:J},_init:he}},react_production_min.memo=function(J,ue){return{$$typeof:I,type:J,compare:ue===void 0?null:ue}},react_production_min.startTransition=function(J){var ue=re.transition;re.transition={};try{J()}finally{re.transition=ue}},react_production_min.unstable_act=pe,react_production_min.useCallback=function(J,ue){return de.current.useCallback(J,ue)},react_production_min.useContext=function(J){return de.current.useContext(J)},react_production_min.useDebugValue=function(){},react_production_min.useDeferredValue=function(J){return de.current.useDeferredValue(J)},react_production_min.useEffect=function(J,ue){return de.current.useEffect(J,ue)},react_production_min.useId=function(){return de.current.useId()},react_production_min.useImperativeHandle=function(J,ue,Te){return de.current.useImperativeHandle(J,ue,Te)},react_production_min.useInsertionEffect=function(J,ue){return de.current.useInsertionEffect(J,ue)},react_production_min.useLayoutEffect=function(J,ue){return de.current.useLayoutEffect(J,ue)},react_production_min.useMemo=function(J,ue){return de.current.useMemo(J,ue)},react_production_min.useReducer=function(J,ue,Te){return de.current.useReducer(J,ue,Te)},react_production_min.useRef=function(J){return de.current.useRef(J)},react_production_min.useState=function(J){return de.current.useState(J)},react_production_min.useSyncExternalStore=function(J,ue,Te){return de.current.useSyncExternalStore(J,ue,Te)},react_production_min.useTransition=function(){return de.current.useTransition()},react_production_min.version="18.3.1",react_production_min}var hasRequiredReact;function requireReact(){return hasRequiredReact||(hasRequiredReact=1,react.exports=requireReact_production_min()),react.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactJsxRuntime_production_min;function requireReactJsxRuntime_production_min(){if(hasRequiredReactJsxRuntime_production_min)return reactJsxRuntime_production_min;hasRequiredReactJsxRuntime_production_min=1;var x=requireReact(),d=Symbol.for("react.element"),g=Symbol.for("react.fragment"),E=Object.prototype.hasOwnProperty,b=x.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,w={key:!0,ref:!0,__self:!0,__source:!0};function C(S,P,I){var M,D={},k=null,H=null;I!==void 0&&(k=""+I),P.key!==void 0&&(k=""+P.key),P.ref!==void 0&&(H=P.ref);for(M in P)E.call(P,M)&&!w.hasOwnProperty(M)&&(D[M]=P[M]);if(S&&S.defaultProps)for(M in P=S.defaultProps,P)D[M]===void 0&&(D[M]=P[M]);return{$$typeof:d,type:S,key:k,ref:H,props:D,_owner:b.current}}return reactJsxRuntime_production_min.Fragment=g,reactJsxRuntime_production_min.jsx=C,reactJsxRuntime_production_min.jsxs=C,reactJsxRuntime_production_min}var hasRequiredJsxRuntime;function requireJsxRuntime(){return hasRequiredJsxRuntime||(hasRequiredJsxRuntime=1,jsxRuntime.exports=requireReactJsxRuntime_production_min()),jsxRuntime.exports}var jsxRuntimeExports=requireJsxRuntime(),client={},reactDom={exports:{}},reactDom_production_min={},scheduler={exports:{}},scheduler_production_min={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredScheduler_production_min;function requireScheduler_production_min(){return hasRequiredScheduler_production_min||(hasRequiredScheduler_production_min=1,(function(x){function d(re,ae){var pe=re.length;re.push(ae);e:for(;0<pe;){var J=pe-1>>>1,ue=re[J];if(0<b(ue,ae))re[J]=ae,re[pe]=ue,pe=J;else break e}}function g(re){return re.length===0?null:re[0]}function E(re){if(re.length===0)return null;var ae=re[0],pe=re.pop();if(pe!==ae){re[0]=pe;e:for(var J=0,ue=re.length,Te=ue>>>1;J<Te;){var xe=2*(J+1)-1,we=re[xe],Re=xe+1,De=re[Re];if(0>b(we,pe))Re<ue&&0>b(De,we)?(re[J]=De,re[Re]=pe,J=Re):(re[J]=we,re[xe]=pe,J=xe);else if(Re<ue&&0>b(De,pe))re[J]=De,re[Re]=pe,J=Re;else break e}}return ae}function b(re,ae){var pe=re.sortIndex-ae.sortIndex;return pe!==0?pe:re.id-ae.id}if(typeof performance=="object"&&typeof performance.now=="function"){var w=performance;x.unstable_now=function(){return w.now()}}else{var C=Date,S=C.now();x.unstable_now=function(){return C.now()-S}}var P=[],I=[],M=1,D=null,k=3,H=!1,F=!1,j=!1,$=typeof setTimeout=="function"?setTimeout:null,z=typeof clearTimeout=="function"?clearTimeout:null,U=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function W(re){for(var ae=g(I);ae!==null;){if(ae.callback===null)E(I);else if(ae.startTime<=re)E(I),ae.sortIndex=ae.expirationTime,d(P,ae);else break;ae=g(I)}}function q(re){if(j=!1,W(re),!F)if(g(P)!==null)F=!0,he(Z);else{var ae=g(I);ae!==null&&de(q,ae.startTime-re)}}function Z(re,ae){F=!1,j&&(j=!1,z(ee),ee=-1),H=!0;var pe=k;try{for(W(ae),D=g(P);D!==null&&(!(D.expirationTime>ae)||re&&!Q());){var J=D.callback;if(typeof J=="function"){D.callback=null,k=D.priorityLevel;var ue=J(D.expirationTime<=ae);ae=x.unstable_now(),typeof ue=="function"?D.callback=ue:D===g(P)&&E(P),W(ae)}else E(P);D=g(P)}if(D!==null)var Te=!0;else{var xe=g(I);xe!==null&&de(q,xe.startTime-ae),Te=!1}return Te}finally{D=null,k=pe,H=!1}}var X=!1,K=null,ee=-1,te=5,ce=-1;function Q(){return!(x.unstable_now()-ce<te)}function se(){if(K!==null){var re=x.unstable_now();ce=re;var ae=!0;try{ae=K(!0,re)}finally{ae?ge():(X=!1,K=null)}}else X=!1}var ge;if(typeof U=="function")ge=function(){U(se)};else if(typeof MessageChannel<"u"){var Ce=new MessageChannel,oe=Ce.port2;Ce.port1.onmessage=se,ge=function(){oe.postMessage(null)}}else ge=function(){$(se,0)};function he(re){K=re,X||(X=!0,ge())}function de(re,ae){ee=$(function(){re(x.unstable_now())},ae)}x.unstable_IdlePriority=5,x.unstable_ImmediatePriority=1,x.unstable_LowPriority=4,x.unstable_NormalPriority=3,x.unstable_Profiling=null,x.unstable_UserBlockingPriority=2,x.unstable_cancelCallback=function(re){re.callback=null},x.unstable_continueExecution=function(){F||H||(F=!0,he(Z))},x.unstable_forceFrameRate=function(re){0>re||125<re?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):te=0<re?Math.floor(1e3/re):5},x.unstable_getCurrentPriorityLevel=function(){return k},x.unstable_getFirstCallbackNode=function(){return g(P)},x.unstable_next=function(re){switch(k){case 1:case 2:case 3:var ae=3;break;default:ae=k}var pe=k;k=ae;try{return re()}finally{k=pe}},x.unstable_pauseExecution=function(){},x.unstable_requestPaint=function(){},x.unstable_runWithPriority=function(re,ae){switch(re){case 1:case 2:case 3:case 4:case 5:break;default:re=3}var pe=k;k=re;try{return ae()}finally{k=pe}},x.unstable_scheduleCallback=function(re,ae,pe){var J=x.unstable_now();switch(typeof pe=="object"&&pe!==null?(pe=pe.delay,pe=typeof pe=="number"&&0<pe?J+pe:J):pe=J,re){case 1:var ue=-1;break;case 2:ue=250;break;case 5:ue=1073741823;break;case 4:ue=1e4;break;default:ue=5e3}return ue=pe+ue,re={id:M++,callback:ae,priorityLevel:re,startTime:pe,expirationTime:ue,sortIndex:-1},pe>J?(re.sortIndex=pe,d(I,re),g(P)===null&&re===g(I)&&(j?(z(ee),ee=-1):j=!0,de(q,pe-J))):(re.sortIndex=ue,d(P,re),F||H||(F=!0,he(Z))),re},x.unstable_shouldYield=Q,x.unstable_wrapCallback=function(re){var ae=k;return function(){var pe=k;k=ae;try{return re.apply(this,arguments)}finally{k=pe}}}})(scheduler_production_min)),scheduler_production_min}var hasRequiredScheduler;function requireScheduler(){return hasRequiredScheduler||(hasRequiredScheduler=1,scheduler.exports=requireScheduler_production_min()),scheduler.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactDom_production_min;function requireReactDom_production_min(){if(hasRequiredReactDom_production_min)return reactDom_production_min;hasRequiredReactDom_production_min=1;var x=requireReact(),d=requireScheduler();function g(R){for(var A="https://reactjs.org/docs/error-decoder.html?invariant="+R,L=1;L<arguments.length;L++)A+="&args[]="+encodeURIComponent(arguments[L]);return"Minified React error #"+R+"; visit "+A+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var E=new Set,b={};function w(R,A){C(R,A),C(R+"Capture",A)}function C(R,A){for(b[R]=A,R=0;R<A.length;R++)E.add(A[R])}var S=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),P=Object.prototype.hasOwnProperty,I=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,M={},D={};function k(R){return P.call(D,R)?!0:P.call(M,R)?!1:I.test(R)?D[R]=!0:(M[R]=!0,!1)}function H(R,A,L,B){if(L!==null&&L.type===0)return!1;switch(typeof A){case"function":case"symbol":return!0;case"boolean":return B?!1:L!==null?!L.acceptsBooleans:(R=R.toLowerCase().slice(0,5),R!=="data-"&&R!=="aria-");default:return!1}}function F(R,A,L,B){if(A===null||typeof A>"u"||H(R,A,L,B))return!0;if(B)return!1;if(L!==null)switch(L.type){case 3:return!A;case 4:return A===!1;case 5:return isNaN(A);case 6:return isNaN(A)||1>A}return!1}function j(R,A,L,B,V,G,Y){this.acceptsBooleans=A===2||A===3||A===4,this.attributeName=B,this.attributeNamespace=V,this.mustUseProperty=L,this.propertyName=R,this.type=A,this.sanitizeURL=G,this.removeEmptyString=Y}var $={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(R){$[R]=new j(R,0,!1,R,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(R){var A=R[0];$[A]=new j(A,1,!1,R[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(R){$[R]=new j(R,2,!1,R.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(R){$[R]=new j(R,2,!1,R,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(R){$[R]=new j(R,3,!1,R.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(R){$[R]=new j(R,3,!0,R,null,!1,!1)}),["capture","download"].forEach(function(R){$[R]=new j(R,4,!1,R,null,!1,!1)}),["cols","rows","size","span"].forEach(function(R){$[R]=new j(R,6,!1,R,null,!1,!1)}),["rowSpan","start"].forEach(function(R){$[R]=new j(R,5,!1,R.toLowerCase(),null,!1,!1)});var z=/[\-:]([a-z])/g;function U(R){return R[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(R){var A=R.replace(z,U);$[A]=new j(A,1,!1,R,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(R){var A=R.replace(z,U);$[A]=new j(A,1,!1,R,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(R){var A=R.replace(z,U);$[A]=new j(A,1,!1,R,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(R){$[R]=new j(R,1,!1,R.toLowerCase(),null,!1,!1)}),$.xlinkHref=new j("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(R){$[R]=new j(R,1,!1,R.toLowerCase(),null,!0,!0)});function W(R,A,L,B){var V=$.hasOwnProperty(A)?$[A]:null;(V!==null?V.type!==0:B||!(2<A.length)||A[0]!=="o"&&A[0]!=="O"||A[1]!=="n"&&A[1]!=="N")&&(F(A,L,V,B)&&(L=null),B||V===null?k(A)&&(L===null?R.removeAttribute(A):R.setAttribute(A,""+L)):V.mustUseProperty?R[V.propertyName]=L===null?V.type===3?!1:"":L:(A=V.attributeName,B=V.attributeNamespace,L===null?R.removeAttribute(A):(V=V.type,L=V===3||V===4&&L===!0?"":""+L,B?R.setAttributeNS(B,A,L):R.setAttribute(A,L))))}var q=x.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Z=Symbol.for("react.element"),X=Symbol.for("react.portal"),K=Symbol.for("react.fragment"),ee=Symbol.for("react.strict_mode"),te=Symbol.for("react.profiler"),ce=Symbol.for("react.provider"),Q=Symbol.for("react.context"),se=Symbol.for("react.forward_ref"),ge=Symbol.for("react.suspense"),Ce=Symbol.for("react.suspense_list"),oe=Symbol.for("react.memo"),he=Symbol.for("react.lazy"),de=Symbol.for("react.offscreen"),re=Symbol.iterator;function ae(R){return R===null||typeof R!="object"?null:(R=re&&R[re]||R["@@iterator"],typeof R=="function"?R:null)}var pe=Object.assign,J;function ue(R){if(J===void 0)try{throw Error()}catch(L){var A=L.stack.trim().match(/\n( *(at )?)/);J=A&&A[1]||""}return`
`+J+R}var Te=!1;function xe(R,A){if(!R||Te)return"";Te=!0;var L=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(A)if(A=function(){throw Error()},Object.defineProperty(A.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(A,[])}catch(Se){var B=Se}Reflect.construct(R,[],A)}else{try{A.call()}catch(Se){B=Se}R.call(A.prototype)}else{try{throw Error()}catch(Se){B=Se}R()}}catch(Se){if(Se&&B&&typeof Se.stack=="string"){for(var V=Se.stack.split(`
`),G=B.stack.split(`
`),Y=V.length-1,ie=G.length-1;1<=Y&&0<=ie&&V[Y]!==G[ie];)ie--;for(;1<=Y&&0<=ie;Y--,ie--)if(V[Y]!==G[ie]){if(Y!==1||ie!==1)do if(Y--,ie--,0>ie||V[Y]!==G[ie]){var fe=`
`+V[Y].replace(" at new "," at ");return R.displayName&&fe.includes("<anonymous>")&&(fe=fe.replace("<anonymous>",R.displayName)),fe}while(1<=Y&&0<=ie);break}}}finally{Te=!1,Error.prepareStackTrace=L}return(R=R?R.displayName||R.name:"")?ue(R):""}function we(R){switch(R.tag){case 5:return ue(R.type);case 16:return ue("Lazy");case 13:return ue("Suspense");case 19:return ue("SuspenseList");case 0:case 2:case 15:return R=xe(R.type,!1),R;case 11:return R=xe(R.type.render,!1),R;case 1:return R=xe(R.type,!0),R;default:return""}}function Re(R){if(R==null)return null;if(typeof R=="function")return R.displayName||R.name||null;if(typeof R=="string")return R;switch(R){case K:return"Fragment";case X:return"Portal";case te:return"Profiler";case ee:return"StrictMode";case ge:return"Suspense";case Ce:return"SuspenseList"}if(typeof R=="object")switch(R.$$typeof){case Q:return(R.displayName||"Context")+".Consumer";case ce:return(R._context.displayName||"Context")+".Provider";case se:var A=R.render;return R=R.displayName,R||(R=A.displayName||A.name||"",R=R!==""?"ForwardRef("+R+")":"ForwardRef"),R;case oe:return A=R.displayName||null,A!==null?A:Re(R.type)||"Memo";case he:A=R._payload,R=R._init;try{return Re(R(A))}catch{}}return null}function De(R){var A=R.type;switch(R.tag){case 24:return"Cache";case 9:return(A.displayName||"Context")+".Consumer";case 10:return(A._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return R=A.render,R=R.displayName||R.name||"",A.displayName||(R!==""?"ForwardRef("+R+")":"ForwardRef");case 7:return"Fragment";case 5:return A;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Re(A);case 8:return A===ee?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof A=="function")return A.displayName||A.name||null;if(typeof A=="string")return A}return null}function Ae(R){switch(typeof R){case"boolean":case"number":case"string":case"undefined":return R;case"object":return R;default:return""}}function Be(R){var A=R.type;return(R=R.nodeName)&&R.toLowerCase()==="input"&&(A==="checkbox"||A==="radio")}function We(R){var A=Be(R)?"checked":"value",L=Object.getOwnPropertyDescriptor(R.constructor.prototype,A),B=""+R[A];if(!R.hasOwnProperty(A)&&typeof L<"u"&&typeof L.get=="function"&&typeof L.set=="function"){var V=L.get,G=L.set;return Object.defineProperty(R,A,{configurable:!0,get:function(){return V.call(this)},set:function(Y){B=""+Y,G.call(this,Y)}}),Object.defineProperty(R,A,{enumerable:L.enumerable}),{getValue:function(){return B},setValue:function(Y){B=""+Y},stopTracking:function(){R._valueTracker=null,delete R[A]}}}}function Fe(R){R._valueTracker||(R._valueTracker=We(R))}function ze(R){if(!R)return!1;var A=R._valueTracker;if(!A)return!0;var L=A.getValue(),B="";return R&&(B=Be(R)?R.checked?"true":"false":R.value),R=B,R!==L?(A.setValue(R),!0):!1}function ct(R){if(R=R||(typeof document<"u"?document:void 0),typeof R>"u")return null;try{return R.activeElement||R.body}catch{return R.body}}function rt(R,A){var L=A.checked;return pe({},A,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:L??R._wrapperState.initialChecked})}function Le(R,A){var L=A.defaultValue==null?"":A.defaultValue,B=A.checked!=null?A.checked:A.defaultChecked;L=Ae(A.value!=null?A.value:L),R._wrapperState={initialChecked:B,initialValue:L,controlled:A.type==="checkbox"||A.type==="radio"?A.checked!=null:A.value!=null}}function nt(R,A){A=A.checked,A!=null&&W(R,"checked",A,!1)}function qe(R,A){nt(R,A);var L=Ae(A.value),B=A.type;if(L!=null)B==="number"?(L===0&&R.value===""||R.value!=L)&&(R.value=""+L):R.value!==""+L&&(R.value=""+L);else if(B==="submit"||B==="reset"){R.removeAttribute("value");return}A.hasOwnProperty("value")?ht(R,A.type,L):A.hasOwnProperty("defaultValue")&&ht(R,A.type,Ae(A.defaultValue)),A.checked==null&&A.defaultChecked!=null&&(R.defaultChecked=!!A.defaultChecked)}function dt(R,A,L){if(A.hasOwnProperty("value")||A.hasOwnProperty("defaultValue")){var B=A.type;if(!(B!=="submit"&&B!=="reset"||A.value!==void 0&&A.value!==null))return;A=""+R._wrapperState.initialValue,L||A===R.value||(R.value=A),R.defaultValue=A}L=R.name,L!==""&&(R.name=""),R.defaultChecked=!!R._wrapperState.initialChecked,L!==""&&(R.name=L)}function ht(R,A,L){(A!=="number"||ct(R.ownerDocument)!==R)&&(L==null?R.defaultValue=""+R._wrapperState.initialValue:R.defaultValue!==""+L&&(R.defaultValue=""+L))}var st=Array.isArray;function be(R,A,L,B){if(R=R.options,A){A={};for(var V=0;V<L.length;V++)A["$"+L[V]]=!0;for(L=0;L<R.length;L++)V=A.hasOwnProperty("$"+R[L].value),R[L].selected!==V&&(R[L].selected=V),V&&B&&(R[L].defaultSelected=!0)}else{for(L=""+Ae(L),A=null,V=0;V<R.length;V++){if(R[V].value===L){R[V].selected=!0,B&&(R[V].defaultSelected=!0);return}A!==null||R[V].disabled||(A=R[V])}A!==null&&(A.selected=!0)}}function lt(R,A){if(A.dangerouslySetInnerHTML!=null)throw Error(g(91));return pe({},A,{value:void 0,defaultValue:void 0,children:""+R._wrapperState.initialValue})}function et(R,A){var L=A.value;if(L==null){if(L=A.children,A=A.defaultValue,L!=null){if(A!=null)throw Error(g(92));if(st(L)){if(1<L.length)throw Error(g(93));L=L[0]}A=L}A==null&&(A=""),L=A}R._wrapperState={initialValue:Ae(L)}}function tt(R,A){var L=Ae(A.value),B=Ae(A.defaultValue);L!=null&&(L=""+L,L!==R.value&&(R.value=L),A.defaultValue==null&&R.defaultValue!==L&&(R.defaultValue=L)),B!=null&&(R.defaultValue=""+B)}function xt(R){var A=R.textContent;A===R._wrapperState.initialValue&&A!==""&&A!==null&&(R.value=A)}function Ke(R){switch(R){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ft(R,A){return R==null||R==="http://www.w3.org/1999/xhtml"?Ke(A):R==="http://www.w3.org/2000/svg"&&A==="foreignObject"?"http://www.w3.org/1999/xhtml":R}var ot,vt=(function(R){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(A,L,B,V){MSApp.execUnsafeLocalFunction(function(){return R(A,L,B,V)})}:R})(function(R,A){if(R.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in R)R.innerHTML=A;else{for(ot=ot||document.createElement("div"),ot.innerHTML="<svg>"+A.valueOf().toString()+"</svg>",A=ot.firstChild;R.firstChild;)R.removeChild(R.firstChild);for(;A.firstChild;)R.appendChild(A.firstChild)}});function pt(R,A){if(A){var L=R.firstChild;if(L&&L===R.lastChild&&L.nodeType===3){L.nodeValue=A;return}}R.textContent=A}var Ze={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ne=["Webkit","ms","Moz","O"];Object.keys(Ze).forEach(function(R){Ne.forEach(function(A){A=A+R.charAt(0).toUpperCase()+R.substring(1),Ze[A]=Ze[R]})});function He(R,A,L){return A==null||typeof A=="boolean"||A===""?"":L||typeof A!="number"||A===0||Ze.hasOwnProperty(R)&&Ze[R]?(""+A).trim():A+"px"}function Ye(R,A){R=R.style;for(var L in A)if(A.hasOwnProperty(L)){var B=L.indexOf("--")===0,V=He(L,A[L],B);L==="float"&&(L="cssFloat"),B?R.setProperty(L,V):R[L]=V}}var Tt=pe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function bt(R,A){if(A){if(Tt[R]&&(A.children!=null||A.dangerouslySetInnerHTML!=null))throw Error(g(137,R));if(A.dangerouslySetInnerHTML!=null){if(A.children!=null)throw Error(g(60));if(typeof A.dangerouslySetInnerHTML!="object"||!("__html"in A.dangerouslySetInnerHTML))throw Error(g(61))}if(A.style!=null&&typeof A.style!="object")throw Error(g(62))}}function ut(R,A){if(R.indexOf("-")===-1)return typeof A.is=="string";switch(R){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Xe=null;function At(R){return R=R.target||R.srcElement||window,R.correspondingUseElement&&(R=R.correspondingUseElement),R.nodeType===3?R.parentNode:R}var Xt=null,Vt=null,_t=null;function ir(R){if(R=Mr(R)){if(typeof Xt!="function")throw Error(g(280));var A=R.stateNode;A&&(A=Ss(A),Xt(R.stateNode,R.type,A))}}function rr(R){Vt?_t?_t.push(R):_t=[R]:Vt=R}function sr(){if(Vt){var R=Vt,A=_t;if(_t=Vt=null,ir(R),A)for(R=0;R<A.length;R++)ir(A[R])}}function ar(R,A){return R(A)}function or(){}var Si=!1;function lr(R,A,L){if(Si)return R(A,L);Si=!0;try{return ar(R,A,L)}finally{Si=!1,(Vt!==null||_t!==null)&&(or(),sr())}}function cn(R,A){var L=R.stateNode;if(L===null)return null;var B=Ss(L);if(B===null)return null;L=B[A];e:switch(A){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(B=!B.disabled)||(R=R.type,B=!(R==="button"||R==="input"||R==="select"||R==="textarea")),R=!B;break e;default:R=!1}if(R)return null;if(L&&typeof L!="function")throw Error(g(231,A,typeof L));return L}var Ti=!1;if(S)try{var zt={};Object.defineProperty(zt,"passive",{get:function(){Ti=!0}}),window.addEventListener("test",zt,zt),window.removeEventListener("test",zt,zt)}catch{Ti=!1}function Wr(R,A,L,B,V,G,Y,ie,fe){var Se=Array.prototype.slice.call(arguments,3);try{A.apply(L,Se)}catch(Oe){this.onError(Oe)}}var Vn=!1,ii=null,ri=!1,_i=null,Zr={onError:function(R){Vn=!0,ii=R}};function Xr(R,A,L,B,V,G,Y,ie,fe){Vn=!1,ii=null,Wr.apply(Zr,arguments)}function ca(R,A,L,B,V,G,Y,ie,fe){if(Xr.apply(this,arguments),Vn){if(Vn){var Se=ii;Vn=!1,ii=null}else throw Error(g(198));ri||(ri=!0,_i=Se)}}function Nn(R){var A=R,L=R;if(R.alternate)for(;A.return;)A=A.return;else{R=A;do A=R,(A.flags&4098)!==0&&(L=A.return),R=A.return;while(R)}return A.tag===3?L:null}function Kr(R){if(R.tag===13){var A=R.memoizedState;if(A===null&&(R=R.alternate,R!==null&&(A=R.memoizedState)),A!==null)return A.dehydrated}return null}function si(R){if(Nn(R)!==R)throw Error(g(188))}function Yr(R){var A=R.alternate;if(!A){if(A=Nn(R),A===null)throw Error(g(188));return A!==R?null:R}for(var L=R,B=A;;){var V=L.return;if(V===null)break;var G=V.alternate;if(G===null){if(B=V.return,B!==null){L=B;continue}break}if(V.child===G.child){for(G=V.child;G;){if(G===L)return si(V),R;if(G===B)return si(V),A;G=G.sibling}throw Error(g(188))}if(L.return!==B.return)L=V,B=G;else{for(var Y=!1,ie=V.child;ie;){if(ie===L){Y=!0,L=V,B=G;break}if(ie===B){Y=!0,B=V,L=G;break}ie=ie.sibling}if(!Y){for(ie=G.child;ie;){if(ie===L){Y=!0,L=G,B=V;break}if(ie===B){Y=!0,B=G,L=V;break}ie=ie.sibling}if(!Y)throw Error(g(189))}}if(L.alternate!==B)throw Error(g(190))}if(L.tag!==3)throw Error(g(188));return L.stateNode.current===L?R:A}function ur(R){return R=Yr(R),R!==null?cr(R):null}function cr(R){if(R.tag===5||R.tag===6)return R;for(R=R.child;R!==null;){var A=cr(R);if(A!==null)return A;R=R.sibling}return null}var Qr=d.unstable_scheduleCallback,hr=d.unstable_cancelCallback,Jr=d.unstable_shouldYield,es=d.unstable_requestPaint,Pt=d.unstable_now,ha=d.unstable_getCurrentPriorityLevel,dr=d.unstable_ImmediatePriority,ts=d.unstable_UserBlockingPriority,ai=d.unstable_NormalPriority,da=d.unstable_LowPriority,ns=d.unstable_IdlePriority,Ri=null,hn=null;function fa(R){if(hn&&typeof hn.onCommitFiberRoot=="function")try{hn.onCommitFiberRoot(Ri,R,void 0,(R.current.flags&128)===128)}catch{}}var sn=Math.clz32?Math.clz32:ma,pa=Math.log,ga=Math.LN2;function ma(R){return R>>>=0,R===0?32:31-(pa(R)/ga|0)|0}var Pi=64,Ii=4194304;function oi(R){switch(R&-R){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return R&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return R&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return R}}function Oi(R,A){var L=R.pendingLanes;if(L===0)return 0;var B=0,V=R.suspendedLanes,G=R.pingedLanes,Y=L&268435455;if(Y!==0){var ie=Y&~V;ie!==0?B=oi(ie):(G&=Y,G!==0&&(B=oi(G)))}else Y=L&~V,Y!==0?B=oi(Y):G!==0&&(B=oi(G));if(B===0)return 0;if(A!==0&&A!==B&&(A&V)===0&&(V=B&-B,G=A&-A,V>=G||V===16&&(G&4194240)!==0))return A;if((B&4)!==0&&(B|=L&16),A=R.entangledLanes,A!==0)for(R=R.entanglements,A&=B;0<A;)L=31-sn(A),V=1<<L,B|=R[L],A&=~V;return B}function ya(R,A){switch(R){case 1:case 2:case 4:return A+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return A+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function va(R,A){for(var L=R.suspendedLanes,B=R.pingedLanes,V=R.expirationTimes,G=R.pendingLanes;0<G;){var Y=31-sn(G),ie=1<<Y,fe=V[Y];fe===-1?((ie&L)===0||(ie&B)!==0)&&(V[Y]=ya(ie,A)):fe<=A&&(R.expiredLanes|=ie),G&=~ie}}function fr(R){return R=R.pendingLanes&-1073741825,R!==0?R:R&1073741824?1073741824:0}function rs(){var R=Pi;return Pi<<=1,(Pi&4194240)===0&&(Pi=64),R}function pr(R){for(var A=[],L=0;31>L;L++)A.push(R);return A}function li(R,A,L){R.pendingLanes|=A,A!==536870912&&(R.suspendedLanes=0,R.pingedLanes=0),R=R.eventTimes,A=31-sn(A),R[A]=L}function xa(R,A){var L=R.pendingLanes&~A;R.pendingLanes=A,R.suspendedLanes=0,R.pingedLanes=0,R.expiredLanes&=A,R.mutableReadLanes&=A,R.entangledLanes&=A,A=R.entanglements;var B=R.eventTimes;for(R=R.expirationTimes;0<L;){var V=31-sn(L),G=1<<V;A[V]=0,B[V]=-1,R[V]=-1,L&=~G}}function gr(R,A){var L=R.entangledLanes|=A;for(R=R.entanglements;L;){var B=31-sn(L),V=1<<B;V&A|R[B]&A&&(R[B]|=A),L&=~V}}var yt=0;function ss(R){return R&=-R,1<R?4<R?(R&268435455)!==0?16:536870912:4:1}var as,mr,os,ls,us,yr=!1,Ai=[],Tn=null,_n=null,Rn=null,ui=new Map,ci=new Map,Pn=[],Ea="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function cs(R,A){switch(R){case"focusin":case"focusout":Tn=null;break;case"dragenter":case"dragleave":_n=null;break;case"mouseover":case"mouseout":Rn=null;break;case"pointerover":case"pointerout":ui.delete(A.pointerId);break;case"gotpointercapture":case"lostpointercapture":ci.delete(A.pointerId)}}function hi(R,A,L,B,V,G){return R===null||R.nativeEvent!==G?(R={blockedOn:A,domEventName:L,eventSystemFlags:B,nativeEvent:G,targetContainers:[V]},A!==null&&(A=Mr(A),A!==null&&mr(A)),R):(R.eventSystemFlags|=B,A=R.targetContainers,V!==null&&A.indexOf(V)===-1&&A.push(V),R)}function hs(R,A,L,B,V){switch(A){case"focusin":return Tn=hi(Tn,R,A,L,B,V),!0;case"dragenter":return _n=hi(_n,R,A,L,B,V),!0;case"mouseover":return Rn=hi(Rn,R,A,L,B,V),!0;case"pointerover":var G=V.pointerId;return ui.set(G,hi(ui.get(G)||null,R,A,L,B,V)),!0;case"gotpointercapture":return G=V.pointerId,ci.set(G,hi(ci.get(G)||null,R,A,L,B,V)),!0}return!1}function ds(R){var A=di(R.target);if(A!==null){var L=Nn(A);if(L!==null){if(A=L.tag,A===13){if(A=Kr(L),A!==null){R.blockedOn=A,us(R.priority,function(){os(L)});return}}else if(A===3&&L.stateNode.current.memoizedState.isDehydrated){R.blockedOn=L.tag===3?L.stateNode.containerInfo:null;return}}}R.blockedOn=null}function ye(R){if(R.blockedOn!==null)return!1;for(var A=R.targetContainers;0<A.length;){var L=Di(R.domEventName,R.eventSystemFlags,A[0],R.nativeEvent);if(L===null){L=R.nativeEvent;var B=new L.constructor(L.type,L);Xe=B,L.target.dispatchEvent(B),Xe=null}else return A=Mr(L),A!==null&&mr(A),R.blockedOn=L,!1;A.shift()}return!0}function ne(R,A,L){ye(R)&&L.delete(A)}function le(){yr=!1,Tn!==null&&ye(Tn)&&(Tn=null),_n!==null&&ye(_n)&&(_n=null),Rn!==null&&ye(Rn)&&(Rn=null),ui.forEach(ne),ci.forEach(ne)}function _e(R,A){R.blockedOn===A&&(R.blockedOn=null,yr||(yr=!0,d.unstable_scheduleCallback(d.unstable_NormalPriority,le)))}function Pe(R){function A(V){return _e(V,R)}if(0<Ai.length){_e(Ai[0],R);for(var L=1;L<Ai.length;L++){var B=Ai[L];B.blockedOn===R&&(B.blockedOn=null)}}for(Tn!==null&&_e(Tn,R),_n!==null&&_e(_n,R),Rn!==null&&_e(Rn,R),ui.forEach(A),ci.forEach(A),L=0;L<Pn.length;L++)B=Pn[L],B.blockedOn===R&&(B.blockedOn=null);for(;0<Pn.length&&(L=Pn[0],L.blockedOn===null);)ds(L),L.blockedOn===null&&Pn.shift()}var at=q.ReactCurrentBatchConfig,wt=!0;function Gt(R,A,L,B){var V=yt,G=at.transition;at.transition=null;try{yt=1,vr(R,A,L,B)}finally{yt=V,at.transition=G}}function Mi(R,A,L,B){var V=yt,G=at.transition;at.transition=null;try{yt=4,vr(R,A,L,B)}finally{yt=V,at.transition=G}}function vr(R,A,L,B){if(wt){var V=Di(R,A,L,B);if(V===null)Ha(R,A,B,Ni,L),cs(R,B);else if(hs(V,R,A,L,B))B.stopPropagation();else if(cs(R,B),A&4&&-1<Ea.indexOf(R)){for(;V!==null;){var G=Mr(V);if(G!==null&&as(G),G=Di(R,A,L,B),G===null&&Ha(R,A,B,Ni,L),G===V)break;V=G}V!==null&&B.stopPropagation()}else Ha(R,A,B,null,L)}}var Ni=null;function Di(R,A,L,B){if(Ni=null,R=At(B),R=di(R),R!==null)if(A=Nn(R),A===null)R=null;else if(L=A.tag,L===13){if(R=Kr(A),R!==null)return R;R=null}else if(L===3){if(A.stateNode.current.memoizedState.isDehydrated)return A.tag===3?A.stateNode.containerInfo:null;R=null}else A!==R&&(R=null);return Ni=R,null}function xr(R){switch(R){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ha()){case dr:return 1;case ts:return 4;case ai:case da:return 16;case ns:return 536870912;default:return 16}default:return 16}}var vn=null,ki=null,fs=null;function Ko(){if(fs)return fs;var R,A=ki,L=A.length,B,V="value"in vn?vn.value:vn.textContent,G=V.length;for(R=0;R<L&&A[R]===V[R];R++);var Y=L-R;for(B=1;B<=Y&&A[L-B]===V[G-B];B++);return fs=V.slice(R,1<B?1-B:void 0)}function ps(R){var A=R.keyCode;return"charCode"in R?(R=R.charCode,R===0&&A===13&&(R=13)):R=A,R===10&&(R=13),32<=R||R===13?R:0}function gs(){return!0}function Yo(){return!1}function an(R){function A(L,B,V,G,Y){this._reactName=L,this._targetInst=V,this.type=B,this.nativeEvent=G,this.target=Y,this.currentTarget=null;for(var ie in R)R.hasOwnProperty(ie)&&(L=R[ie],this[ie]=L?L(G):G[ie]);return this.isDefaultPrevented=(G.defaultPrevented!=null?G.defaultPrevented:G.returnValue===!1)?gs:Yo,this.isPropagationStopped=Yo,this}return pe(A.prototype,{preventDefault:function(){this.defaultPrevented=!0;var L=this.nativeEvent;L&&(L.preventDefault?L.preventDefault():typeof L.returnValue!="unknown"&&(L.returnValue=!1),this.isDefaultPrevented=gs)},stopPropagation:function(){var L=this.nativeEvent;L&&(L.stopPropagation?L.stopPropagation():typeof L.cancelBubble!="unknown"&&(L.cancelBubble=!0),this.isPropagationStopped=gs)},persist:function(){},isPersistent:gs}),A}var Li={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(R){return R.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ba=an(Li),Er=pe({},Li,{view:0,detail:0}),uc=an(Er),wa,Ca,wr,ms=pe({},Er,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ta,button:0,buttons:0,relatedTarget:function(R){return R.relatedTarget===void 0?R.fromElement===R.srcElement?R.toElement:R.fromElement:R.relatedTarget},movementX:function(R){return"movementX"in R?R.movementX:(R!==wr&&(wr&&R.type==="mousemove"?(wa=R.screenX-wr.screenX,Ca=R.screenY-wr.screenY):Ca=wa=0,wr=R),wa)},movementY:function(R){return"movementY"in R?R.movementY:Ca}}),Qo=an(ms),cc=pe({},ms,{dataTransfer:0}),hc=an(cc),dc=pe({},Er,{relatedTarget:0}),Sa=an(dc),fc=pe({},Li,{animationName:0,elapsedTime:0,pseudoElement:0}),pc=an(fc),gc=pe({},Li,{clipboardData:function(R){return"clipboardData"in R?R.clipboardData:window.clipboardData}}),mc=an(gc),yc=pe({},Li,{data:0}),Jo=an(yc),vc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ec={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function bc(R){var A=this.nativeEvent;return A.getModifierState?A.getModifierState(R):(R=Ec[R])?!!A[R]:!1}function Ta(){return bc}var wc=pe({},Er,{key:function(R){if(R.key){var A=vc[R.key]||R.key;if(A!=="Unidentified")return A}return R.type==="keypress"?(R=ps(R),R===13?"Enter":String.fromCharCode(R)):R.type==="keydown"||R.type==="keyup"?xc[R.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ta,charCode:function(R){return R.type==="keypress"?ps(R):0},keyCode:function(R){return R.type==="keydown"||R.type==="keyup"?R.keyCode:0},which:function(R){return R.type==="keypress"?ps(R):R.type==="keydown"||R.type==="keyup"?R.keyCode:0}}),Cc=an(wc),Sc=pe({},ms,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),el=an(Sc),Tc=pe({},Er,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ta}),_c=an(Tc),Rc=pe({},Li,{propertyName:0,elapsedTime:0,pseudoElement:0}),Pc=an(Rc),Ic=pe({},ms,{deltaX:function(R){return"deltaX"in R?R.deltaX:"wheelDeltaX"in R?-R.wheelDeltaX:0},deltaY:function(R){return"deltaY"in R?R.deltaY:"wheelDeltaY"in R?-R.wheelDeltaY:"wheelDelta"in R?-R.wheelDelta:0},deltaZ:0,deltaMode:0}),Oc=an(Ic),Ac=[9,13,27,32],Ra=S&&"CompositionEvent"in window,Cr=null;S&&"documentMode"in document&&(Cr=document.documentMode);var Mc=S&&"TextEvent"in window&&!Cr,tl=S&&(!Ra||Cr&&8<Cr&&11>=Cr),nl=" ",il=!1;function rl(R,A){switch(R){case"keyup":return Ac.indexOf(A.keyCode)!==-1;case"keydown":return A.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function sl(R){return R=R.detail,typeof R=="object"&&"data"in R?R.data:null}var Hi=!1;function Nc(R,A){switch(R){case"compositionend":return sl(A);case"keypress":return A.which!==32?null:(il=!0,nl);case"textInput":return R=A.data,R===nl&&il?null:R;default:return null}}function Dc(R,A){if(Hi)return R==="compositionend"||!Ra&&rl(R,A)?(R=Ko(),fs=ki=vn=null,Hi=!1,R):null;switch(R){case"paste":return null;case"keypress":if(!(A.ctrlKey||A.altKey||A.metaKey)||A.ctrlKey&&A.altKey){if(A.char&&1<A.char.length)return A.char;if(A.which)return String.fromCharCode(A.which)}return null;case"compositionend":return tl&&A.locale!=="ko"?null:A.data;default:return null}}var kc={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function al(R){var A=R&&R.nodeName&&R.nodeName.toLowerCase();return A==="input"?!!kc[R.type]:A==="textarea"}function ol(R,A,L,B){rr(B),A=bs(A,"onChange"),0<A.length&&(L=new ba("onChange","change",null,L,B),R.push({event:L,listeners:A}))}var Sr=null,Tr=null;function Lc(R){Tl(R,0)}function ys(R){var A=Vi(R);if(ze(A))return R}function Hc(R,A){if(R==="change")return A}var ll=!1;if(S){var Pa;if(S){var Ia="oninput"in document;if(!Ia){var ul=document.createElement("div");ul.setAttribute("oninput","return;"),Ia=typeof ul.oninput=="function"}Pa=Ia}else Pa=!1;ll=Pa&&(!document.documentMode||9<document.documentMode)}function cl(){Sr&&(Sr.detachEvent("onpropertychange",hl),Tr=Sr=null)}function hl(R){if(R.propertyName==="value"&&ys(Tr)){var A=[];ol(A,Tr,R,At(R)),lr(Lc,A)}}function Fc(R,A,L){R==="focusin"?(cl(),Sr=A,Tr=L,Sr.attachEvent("onpropertychange",hl)):R==="focusout"&&cl()}function Bc(R){if(R==="selectionchange"||R==="keyup"||R==="keydown")return ys(Tr)}function jc(R,A){if(R==="click")return ys(A)}function $c(R,A){if(R==="input"||R==="change")return ys(A)}function Vc(R,A){return R===A&&(R!==0||1/R===1/A)||R!==R&&A!==A}var xn=typeof Object.is=="function"?Object.is:Vc;function _r(R,A){if(xn(R,A))return!0;if(typeof R!="object"||R===null||typeof A!="object"||A===null)return!1;var L=Object.keys(R),B=Object.keys(A);if(L.length!==B.length)return!1;for(B=0;B<L.length;B++){var V=L[B];if(!P.call(A,V)||!xn(R[V],A[V]))return!1}return!0}function dl(R){for(;R&&R.firstChild;)R=R.firstChild;return R}function fl(R,A){var L=dl(R);R=0;for(var B;L;){if(L.nodeType===3){if(B=R+L.textContent.length,R<=A&&B>=A)return{node:L,offset:A-R};R=B}e:{for(;L;){if(L.nextSibling){L=L.nextSibling;break e}L=L.parentNode}L=void 0}L=dl(L)}}function pl(R,A){return R&&A?R===A?!0:R&&R.nodeType===3?!1:A&&A.nodeType===3?pl(R,A.parentNode):"contains"in R?R.contains(A):R.compareDocumentPosition?!!(R.compareDocumentPosition(A)&16):!1:!1}function gl(){for(var R=window,A=ct();A instanceof R.HTMLIFrameElement;){try{var L=typeof A.contentWindow.location.href=="string"}catch{L=!1}if(L)R=A.contentWindow;else break;A=ct(R.document)}return A}function Oa(R){var A=R&&R.nodeName&&R.nodeName.toLowerCase();return A&&(A==="input"&&(R.type==="text"||R.type==="search"||R.type==="tel"||R.type==="url"||R.type==="password")||A==="textarea"||R.contentEditable==="true")}function zc(R){var A=gl(),L=R.focusedElem,B=R.selectionRange;if(A!==L&&L&&L.ownerDocument&&pl(L.ownerDocument.documentElement,L)){if(B!==null&&Oa(L)){if(A=B.start,R=B.end,R===void 0&&(R=A),"selectionStart"in L)L.selectionStart=A,L.selectionEnd=Math.min(R,L.value.length);else if(R=(A=L.ownerDocument||document)&&A.defaultView||window,R.getSelection){R=R.getSelection();var V=L.textContent.length,G=Math.min(B.start,V);B=B.end===void 0?G:Math.min(B.end,V),!R.extend&&G>B&&(V=B,B=G,G=V),V=fl(L,G);var Y=fl(L,B);V&&Y&&(R.rangeCount!==1||R.anchorNode!==V.node||R.anchorOffset!==V.offset||R.focusNode!==Y.node||R.focusOffset!==Y.offset)&&(A=A.createRange(),A.setStart(V.node,V.offset),R.removeAllRanges(),G>B?(R.addRange(A),R.extend(Y.node,Y.offset)):(A.setEnd(Y.node,Y.offset),R.addRange(A)))}}for(A=[],R=L;R=R.parentNode;)R.nodeType===1&&A.push({element:R,left:R.scrollLeft,top:R.scrollTop});for(typeof L.focus=="function"&&L.focus(),L=0;L<A.length;L++)R=A[L],R.element.scrollLeft=R.left,R.element.scrollTop=R.top}}var Gc=S&&"documentMode"in document&&11>=document.documentMode,Fi=null,Aa=null,Rr=null,Ma=!1;function ml(R,A,L){var B=L.window===L?L.document:L.nodeType===9?L:L.ownerDocument;Ma||Fi==null||Fi!==ct(B)||(B=Fi,"selectionStart"in B&&Oa(B)?B={start:B.selectionStart,end:B.selectionEnd}:(B=(B.ownerDocument&&B.ownerDocument.defaultView||window).getSelection(),B={anchorNode:B.anchorNode,anchorOffset:B.anchorOffset,focusNode:B.focusNode,focusOffset:B.focusOffset}),Rr&&_r(Rr,B)||(Rr=B,B=bs(Aa,"onSelect"),0<B.length&&(A=new ba("onSelect","select",null,A,L),R.push({event:A,listeners:B}),A.target=Fi)))}function vs(R,A){var L={};return L[R.toLowerCase()]=A.toLowerCase(),L["Webkit"+R]="webkit"+A,L["Moz"+R]="moz"+A,L}var Bi={animationend:vs("Animation","AnimationEnd"),animationiteration:vs("Animation","AnimationIteration"),animationstart:vs("Animation","AnimationStart"),transitionend:vs("Transition","TransitionEnd")},Na={},yl={};S&&(yl=document.createElement("div").style,"AnimationEvent"in window||(delete Bi.animationend.animation,delete Bi.animationiteration.animation,delete Bi.animationstart.animation),"TransitionEvent"in window||delete Bi.transitionend.transition);function xs(R){if(Na[R])return Na[R];if(!Bi[R])return R;var A=Bi[R],L;for(L in A)if(A.hasOwnProperty(L)&&L in yl)return Na[R]=A[L];return R}var vl=xs("animationend"),xl=xs("animationiteration"),El=xs("animationstart"),bl=xs("transitionend"),wl=new Map,Cl="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function zn(R,A){wl.set(R,A),w(A,[R])}for(var Da=0;Da<Cl.length;Da++){var ka=Cl[Da],qc=ka.toLowerCase(),Uc=ka[0].toUpperCase()+ka.slice(1);zn(qc,"on"+Uc)}zn(vl,"onAnimationEnd"),zn(xl,"onAnimationIteration"),zn(El,"onAnimationStart"),zn("dblclick","onDoubleClick"),zn("focusin","onFocus"),zn("focusout","onBlur"),zn(bl,"onTransitionEnd"),C("onMouseEnter",["mouseout","mouseover"]),C("onMouseLeave",["mouseout","mouseover"]),C("onPointerEnter",["pointerout","pointerover"]),C("onPointerLeave",["pointerout","pointerover"]),w("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),w("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),w("onBeforeInput",["compositionend","keypress","textInput","paste"]),w("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),w("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),w("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Pr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Wc=new Set("cancel close invalid load scroll toggle".split(" ").concat(Pr));function Sl(R,A,L){var B=R.type||"unknown-event";R.currentTarget=L,ca(B,A,void 0,R),R.currentTarget=null}function Tl(R,A){A=(A&4)!==0;for(var L=0;L<R.length;L++){var B=R[L],V=B.event;B=B.listeners;e:{var G=void 0;if(A)for(var Y=B.length-1;0<=Y;Y--){var ie=B[Y],fe=ie.instance,Se=ie.currentTarget;if(ie=ie.listener,fe!==G&&V.isPropagationStopped())break e;Sl(V,ie,Se),G=fe}else for(Y=0;Y<B.length;Y++){if(ie=B[Y],fe=ie.instance,Se=ie.currentTarget,ie=ie.listener,fe!==G&&V.isPropagationStopped())break e;Sl(V,ie,Se),G=fe}}}if(ri)throw R=_i,ri=!1,_i=null,R}function Ct(R,A){var L=A[za];L===void 0&&(L=A[za]=new Set);var B=R+"__bubble";L.has(B)||(_l(A,R,2,!1),L.add(B))}function La(R,A,L){var B=0;A&&(B|=4),_l(L,R,B,A)}var Es="_reactListening"+Math.random().toString(36).slice(2);function Ir(R){if(!R[Es]){R[Es]=!0,E.forEach(function(L){L!=="selectionchange"&&(Wc.has(L)||La(L,!1,R),La(L,!0,R))});var A=R.nodeType===9?R:R.ownerDocument;A===null||A[Es]||(A[Es]=!0,La("selectionchange",!1,A))}}function _l(R,A,L,B){switch(xr(A)){case 1:var V=Gt;break;case 4:V=Mi;break;default:V=vr}L=V.bind(null,A,L,R),V=void 0,!Ti||A!=="touchstart"&&A!=="touchmove"&&A!=="wheel"||(V=!0),B?V!==void 0?R.addEventListener(A,L,{capture:!0,passive:V}):R.addEventListener(A,L,!0):V!==void 0?R.addEventListener(A,L,{passive:V}):R.addEventListener(A,L,!1)}function Ha(R,A,L,B,V){var G=B;if((A&1)===0&&(A&2)===0&&B!==null)e:for(;;){if(B===null)return;var Y=B.tag;if(Y===3||Y===4){var ie=B.stateNode.containerInfo;if(ie===V||ie.nodeType===8&&ie.parentNode===V)break;if(Y===4)for(Y=B.return;Y!==null;){var fe=Y.tag;if((fe===3||fe===4)&&(fe=Y.stateNode.containerInfo,fe===V||fe.nodeType===8&&fe.parentNode===V))return;Y=Y.return}for(;ie!==null;){if(Y=di(ie),Y===null)return;if(fe=Y.tag,fe===5||fe===6){B=G=Y;continue e}ie=ie.parentNode}}B=B.return}lr(function(){var Se=G,Oe=At(L),Me=[];e:{var Ie=wl.get(R);if(Ie!==void 0){var je=ba,Ve=R;switch(R){case"keypress":if(ps(L)===0)break e;case"keydown":case"keyup":je=Cc;break;case"focusin":Ve="focus",je=Sa;break;case"focusout":Ve="blur",je=Sa;break;case"beforeblur":case"afterblur":je=Sa;break;case"click":if(L.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":je=Qo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":je=hc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":je=_c;break;case vl:case xl:case El:je=pc;break;case bl:je=Pc;break;case"scroll":je=uc;break;case"wheel":je=Oc;break;case"copy":case"cut":case"paste":je=mc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":je=el}var Ge=(A&4)!==0,Nt=!Ge&&R==="scroll",ve=Ge?Ie!==null?Ie+"Capture":null:Ie;Ge=[];for(var me=Se,Ee;me!==null;){Ee=me;var ke=Ee.stateNode;if(Ee.tag===5&&ke!==null&&(Ee=ke,ve!==null&&(ke=cn(me,ve),ke!=null&&Ge.push(Or(me,ke,Ee)))),Nt)break;me=me.return}0<Ge.length&&(Ie=new je(Ie,Ve,null,L,Oe),Me.push({event:Ie,listeners:Ge}))}}if((A&7)===0){e:{if(Ie=R==="mouseover"||R==="pointerover",je=R==="mouseout"||R==="pointerout",Ie&&L!==Xe&&(Ve=L.relatedTarget||L.fromElement)&&(di(Ve)||Ve[Dn]))break e;if((je||Ie)&&(Ie=Oe.window===Oe?Oe:(Ie=Oe.ownerDocument)?Ie.defaultView||Ie.parentWindow:window,je?(Ve=L.relatedTarget||L.toElement,je=Se,Ve=Ve?di(Ve):null,Ve!==null&&(Nt=Nn(Ve),Ve!==Nt||Ve.tag!==5&&Ve.tag!==6)&&(Ve=null)):(je=null,Ve=Se),je!==Ve)){if(Ge=Qo,ke="onMouseLeave",ve="onMouseEnter",me="mouse",(R==="pointerout"||R==="pointerover")&&(Ge=el,ke="onPointerLeave",ve="onPointerEnter",me="pointer"),Nt=je==null?Ie:Vi(je),Ee=Ve==null?Ie:Vi(Ve),Ie=new Ge(ke,me+"leave",je,L,Oe),Ie.target=Nt,Ie.relatedTarget=Ee,ke=null,di(Oe)===Se&&(Ge=new Ge(ve,me+"enter",Ve,L,Oe),Ge.target=Ee,Ge.relatedTarget=Nt,ke=Ge),Nt=ke,je&&Ve)t:{for(Ge=je,ve=Ve,me=0,Ee=Ge;Ee;Ee=ji(Ee))me++;for(Ee=0,ke=ve;ke;ke=ji(ke))Ee++;for(;0<me-Ee;)Ge=ji(Ge),me--;for(;0<Ee-me;)ve=ji(ve),Ee--;for(;me--;){if(Ge===ve||ve!==null&&Ge===ve.alternate)break t;Ge=ji(Ge),ve=ji(ve)}Ge=null}else Ge=null;je!==null&&Rl(Me,Ie,je,Ge,!1),Ve!==null&&Nt!==null&&Rl(Me,Nt,Ve,Ge,!0)}}e:{if(Ie=Se?Vi(Se):window,je=Ie.nodeName&&Ie.nodeName.toLowerCase(),je==="select"||je==="input"&&Ie.type==="file")var Ue=Hc;else if(al(Ie))if(ll)Ue=$c;else{Ue=Bc;var Qe=Fc}else(je=Ie.nodeName)&&je.toLowerCase()==="input"&&(Ie.type==="checkbox"||Ie.type==="radio")&&(Ue=jc);if(Ue&&(Ue=Ue(R,Se))){ol(Me,Ue,L,Oe);break e}Qe&&Qe(R,Ie,Se),R==="focusout"&&(Qe=Ie._wrapperState)&&Qe.controlled&&Ie.type==="number"&&ht(Ie,"number",Ie.value)}switch(Qe=Se?Vi(Se):window,R){case"focusin":(al(Qe)||Qe.contentEditable==="true")&&(Fi=Qe,Aa=Se,Rr=null);break;case"focusout":Rr=Aa=Fi=null;break;case"mousedown":Ma=!0;break;case"contextmenu":case"mouseup":case"dragend":Ma=!1,ml(Me,L,Oe);break;case"selectionchange":if(Gc)break;case"keydown":case"keyup":ml(Me,L,Oe)}var Je;if(Ra)e:{switch(R){case"compositionstart":var it="onCompositionStart";break e;case"compositionend":it="onCompositionEnd";break e;case"compositionupdate":it="onCompositionUpdate";break e}it=void 0}else Hi?rl(R,L)&&(it="onCompositionEnd"):R==="keydown"&&L.keyCode===229&&(it="onCompositionStart");it&&(tl&&L.locale!=="ko"&&(Hi||it!=="onCompositionStart"?it==="onCompositionEnd"&&Hi&&(Je=Ko()):(vn=Oe,ki="value"in vn?vn.value:vn.textContent,Hi=!0)),Qe=bs(Se,it),0<Qe.length&&(it=new Jo(it,R,null,L,Oe),Me.push({event:it,listeners:Qe}),Je?it.data=Je:(Je=sl(L),Je!==null&&(it.data=Je)))),(Je=Mc?Nc(R,L):Dc(R,L))&&(Se=bs(Se,"onBeforeInput"),0<Se.length&&(Oe=new Jo("onBeforeInput","beforeinput",null,L,Oe),Me.push({event:Oe,listeners:Se}),Oe.data=Je))}Tl(Me,A)})}function Or(R,A,L){return{instance:R,listener:A,currentTarget:L}}function bs(R,A){for(var L=A+"Capture",B=[];R!==null;){var V=R,G=V.stateNode;V.tag===5&&G!==null&&(V=G,G=cn(R,L),G!=null&&B.unshift(Or(R,G,V)),G=cn(R,A),G!=null&&B.push(Or(R,G,V))),R=R.return}return B}function ji(R){if(R===null)return null;do R=R.return;while(R&&R.tag!==5);return R||null}function Rl(R,A,L,B,V){for(var G=A._reactName,Y=[];L!==null&&L!==B;){var ie=L,fe=ie.alternate,Se=ie.stateNode;if(fe!==null&&fe===B)break;ie.tag===5&&Se!==null&&(ie=Se,V?(fe=cn(L,G),fe!=null&&Y.unshift(Or(L,fe,ie))):V||(fe=cn(L,G),fe!=null&&Y.push(Or(L,fe,ie)))),L=L.return}Y.length!==0&&R.push({event:A,listeners:Y})}var Zc=/\r\n?/g,Xc=/\u0000|\uFFFD/g;function Pl(R){return(typeof R=="string"?R:""+R).replace(Zc,`
`).replace(Xc,"")}function ws(R,A,L){if(A=Pl(A),Pl(R)!==A&&L)throw Error(g(425))}function Cs(){}var Fa=null,Ba=null;function ja(R,A){return R==="textarea"||R==="noscript"||typeof A.children=="string"||typeof A.children=="number"||typeof A.dangerouslySetInnerHTML=="object"&&A.dangerouslySetInnerHTML!==null&&A.dangerouslySetInnerHTML.__html!=null}var $a=typeof setTimeout=="function"?setTimeout:void 0,Kc=typeof clearTimeout=="function"?clearTimeout:void 0,Il=typeof Promise=="function"?Promise:void 0,Yc=typeof queueMicrotask=="function"?queueMicrotask:typeof Il<"u"?function(R){return Il.resolve(null).then(R).catch(Qc)}:$a;function Qc(R){setTimeout(function(){throw R})}function Va(R,A){var L=A,B=0;do{var V=L.nextSibling;if(R.removeChild(L),V&&V.nodeType===8)if(L=V.data,L==="/$"){if(B===0){R.removeChild(V),Pe(A);return}B--}else L!=="$"&&L!=="$?"&&L!=="$!"||B++;L=V}while(L);Pe(A)}function Gn(R){for(;R!=null;R=R.nextSibling){var A=R.nodeType;if(A===1||A===3)break;if(A===8){if(A=R.data,A==="$"||A==="$!"||A==="$?")break;if(A==="/$")return null}}return R}function Ol(R){R=R.previousSibling;for(var A=0;R;){if(R.nodeType===8){var L=R.data;if(L==="$"||L==="$!"||L==="$?"){if(A===0)return R;A--}else L==="/$"&&A++}R=R.previousSibling}return null}var $i=Math.random().toString(36).slice(2),In="__reactFiber$"+$i,Ar="__reactProps$"+$i,Dn="__reactContainer$"+$i,za="__reactEvents$"+$i,Jc="__reactListeners$"+$i,eh="__reactHandles$"+$i;function di(R){var A=R[In];if(A)return A;for(var L=R.parentNode;L;){if(A=L[Dn]||L[In]){if(L=A.alternate,A.child!==null||L!==null&&L.child!==null)for(R=Ol(R);R!==null;){if(L=R[In])return L;R=Ol(R)}return A}R=L,L=R.parentNode}return null}function Mr(R){return R=R[In]||R[Dn],!R||R.tag!==5&&R.tag!==6&&R.tag!==13&&R.tag!==3?null:R}function Vi(R){if(R.tag===5||R.tag===6)return R.stateNode;throw Error(g(33))}function Ss(R){return R[Ar]||null}var Ga=[],zi=-1;function qn(R){return{current:R}}function St(R){0>zi||(R.current=Ga[zi],Ga[zi]=null,zi--)}function Et(R,A){zi++,Ga[zi]=R.current,R.current=A}var Un={},qt=qn(Un),Jt=qn(!1),fi=Un;function Gi(R,A){var L=R.type.contextTypes;if(!L)return Un;var B=R.stateNode;if(B&&B.__reactInternalMemoizedUnmaskedChildContext===A)return B.__reactInternalMemoizedMaskedChildContext;var V={},G;for(G in L)V[G]=A[G];return B&&(R=R.stateNode,R.__reactInternalMemoizedUnmaskedChildContext=A,R.__reactInternalMemoizedMaskedChildContext=V),V}function en(R){return R=R.childContextTypes,R!=null}function Ts(){St(Jt),St(qt)}function Al(R,A,L){if(qt.current!==Un)throw Error(g(168));Et(qt,A),Et(Jt,L)}function Ml(R,A,L){var B=R.stateNode;if(A=A.childContextTypes,typeof B.getChildContext!="function")return L;B=B.getChildContext();for(var V in B)if(!(V in A))throw Error(g(108,De(R)||"Unknown",V));return pe({},L,B)}function _s(R){return R=(R=R.stateNode)&&R.__reactInternalMemoizedMergedChildContext||Un,fi=qt.current,Et(qt,R),Et(Jt,Jt.current),!0}function Nl(R,A,L){var B=R.stateNode;if(!B)throw Error(g(169));L?(R=Ml(R,A,fi),B.__reactInternalMemoizedMergedChildContext=R,St(Jt),St(qt),Et(qt,R)):St(Jt),Et(Jt,L)}var kn=null,Rs=!1,qa=!1;function Dl(R){kn===null?kn=[R]:kn.push(R)}function th(R){Rs=!0,Dl(R)}function Wn(){if(!qa&&kn!==null){qa=!0;var R=0,A=yt;try{var L=kn;for(yt=1;R<L.length;R++){var B=L[R];do B=B(!0);while(B!==null)}kn=null,Rs=!1}catch(V){throw kn!==null&&(kn=kn.slice(R+1)),Qr(dr,Wn),V}finally{yt=A,qa=!1}}return null}var qi=[],Ui=0,Ps=null,Is=0,dn=[],fn=0,pi=null,Ln=1,Hn="";function gi(R,A){qi[Ui++]=Is,qi[Ui++]=Ps,Ps=R,Is=A}function kl(R,A,L){dn[fn++]=Ln,dn[fn++]=Hn,dn[fn++]=pi,pi=R;var B=Ln;R=Hn;var V=32-sn(B)-1;B&=~(1<<V),L+=1;var G=32-sn(A)+V;if(30<G){var Y=V-V%5;G=(B&(1<<Y)-1).toString(32),B>>=Y,V-=Y,Ln=1<<32-sn(A)+V|L<<V|B,Hn=G+R}else Ln=1<<G|L<<V|B,Hn=R}function Ua(R){R.return!==null&&(gi(R,1),kl(R,1,0))}function Wa(R){for(;R===Ps;)Ps=qi[--Ui],qi[Ui]=null,Is=qi[--Ui],qi[Ui]=null;for(;R===pi;)pi=dn[--fn],dn[fn]=null,Hn=dn[--fn],dn[fn]=null,Ln=dn[--fn],dn[fn]=null}var on=null,ln=null,Rt=!1,En=null;function Ll(R,A){var L=yn(5,null,null,0);L.elementType="DELETED",L.stateNode=A,L.return=R,A=R.deletions,A===null?(R.deletions=[L],R.flags|=16):A.push(L)}function Hl(R,A){switch(R.tag){case 5:var L=R.type;return A=A.nodeType!==1||L.toLowerCase()!==A.nodeName.toLowerCase()?null:A,A!==null?(R.stateNode=A,on=R,ln=Gn(A.firstChild),!0):!1;case 6:return A=R.pendingProps===""||A.nodeType!==3?null:A,A!==null?(R.stateNode=A,on=R,ln=null,!0):!1;case 13:return A=A.nodeType!==8?null:A,A!==null?(L=pi!==null?{id:Ln,overflow:Hn}:null,R.memoizedState={dehydrated:A,treeContext:L,retryLane:1073741824},L=yn(18,null,null,0),L.stateNode=A,L.return=R,R.child=L,on=R,ln=null,!0):!1;default:return!1}}function Za(R){return(R.mode&1)!==0&&(R.flags&128)===0}function Xa(R){if(Rt){var A=ln;if(A){var L=A;if(!Hl(R,A)){if(Za(R))throw Error(g(418));A=Gn(L.nextSibling);var B=on;A&&Hl(R,A)?Ll(B,L):(R.flags=R.flags&-4097|2,Rt=!1,on=R)}}else{if(Za(R))throw Error(g(418));R.flags=R.flags&-4097|2,Rt=!1,on=R}}}function Fl(R){for(R=R.return;R!==null&&R.tag!==5&&R.tag!==3&&R.tag!==13;)R=R.return;on=R}function Os(R){if(R!==on)return!1;if(!Rt)return Fl(R),Rt=!0,!1;var A;if((A=R.tag!==3)&&!(A=R.tag!==5)&&(A=R.type,A=A!=="head"&&A!=="body"&&!ja(R.type,R.memoizedProps)),A&&(A=ln)){if(Za(R))throw Bl(),Error(g(418));for(;A;)Ll(R,A),A=Gn(A.nextSibling)}if(Fl(R),R.tag===13){if(R=R.memoizedState,R=R!==null?R.dehydrated:null,!R)throw Error(g(317));e:{for(R=R.nextSibling,A=0;R;){if(R.nodeType===8){var L=R.data;if(L==="/$"){if(A===0){ln=Gn(R.nextSibling);break e}A--}else L!=="$"&&L!=="$!"&&L!=="$?"||A++}R=R.nextSibling}ln=null}}else ln=on?Gn(R.stateNode.nextSibling):null;return!0}function Bl(){for(var R=ln;R;)R=Gn(R.nextSibling)}function Wi(){ln=on=null,Rt=!1}function Ka(R){En===null?En=[R]:En.push(R)}var nh=q.ReactCurrentBatchConfig;function Nr(R,A,L){if(R=L.ref,R!==null&&typeof R!="function"&&typeof R!="object"){if(L._owner){if(L=L._owner,L){if(L.tag!==1)throw Error(g(309));var B=L.stateNode}if(!B)throw Error(g(147,R));var V=B,G=""+R;return A!==null&&A.ref!==null&&typeof A.ref=="function"&&A.ref._stringRef===G?A.ref:(A=function(Y){var ie=V.refs;Y===null?delete ie[G]:ie[G]=Y},A._stringRef=G,A)}if(typeof R!="string")throw Error(g(284));if(!L._owner)throw Error(g(290,R))}return R}function As(R,A){throw R=Object.prototype.toString.call(A),Error(g(31,R==="[object Object]"?"object with keys {"+Object.keys(A).join(", ")+"}":R))}function jl(R){var A=R._init;return A(R._payload)}function $l(R){function A(ve,me){if(R){var Ee=ve.deletions;Ee===null?(ve.deletions=[me],ve.flags|=16):Ee.push(me)}}function L(ve,me){if(!R)return null;for(;me!==null;)A(ve,me),me=me.sibling;return null}function B(ve,me){for(ve=new Map;me!==null;)me.key!==null?ve.set(me.key,me):ve.set(me.index,me),me=me.sibling;return ve}function V(ve,me){return ve=ti(ve,me),ve.index=0,ve.sibling=null,ve}function G(ve,me,Ee){return ve.index=Ee,R?(Ee=ve.alternate,Ee!==null?(Ee=Ee.index,Ee<me?(ve.flags|=2,me):Ee):(ve.flags|=2,me)):(ve.flags|=1048576,me)}function Y(ve){return R&&ve.alternate===null&&(ve.flags|=2),ve}function ie(ve,me,Ee,ke){return me===null||me.tag!==6?(me=Vo(Ee,ve.mode,ke),me.return=ve,me):(me=V(me,Ee),me.return=ve,me)}function fe(ve,me,Ee,ke){var Ue=Ee.type;return Ue===K?Oe(ve,me,Ee.props.children,ke,Ee.key):me!==null&&(me.elementType===Ue||typeof Ue=="object"&&Ue!==null&&Ue.$$typeof===he&&jl(Ue)===me.type)?(ke=V(me,Ee.props),ke.ref=Nr(ve,me,Ee),ke.return=ve,ke):(ke=ta(Ee.type,Ee.key,Ee.props,null,ve.mode,ke),ke.ref=Nr(ve,me,Ee),ke.return=ve,ke)}function Se(ve,me,Ee,ke){return me===null||me.tag!==4||me.stateNode.containerInfo!==Ee.containerInfo||me.stateNode.implementation!==Ee.implementation?(me=zo(Ee,ve.mode,ke),me.return=ve,me):(me=V(me,Ee.children||[]),me.return=ve,me)}function Oe(ve,me,Ee,ke,Ue){return me===null||me.tag!==7?(me=Ci(Ee,ve.mode,ke,Ue),me.return=ve,me):(me=V(me,Ee),me.return=ve,me)}function Me(ve,me,Ee){if(typeof me=="string"&&me!==""||typeof me=="number")return me=Vo(""+me,ve.mode,Ee),me.return=ve,me;if(typeof me=="object"&&me!==null){switch(me.$$typeof){case Z:return Ee=ta(me.type,me.key,me.props,null,ve.mode,Ee),Ee.ref=Nr(ve,null,me),Ee.return=ve,Ee;case X:return me=zo(me,ve.mode,Ee),me.return=ve,me;case he:var ke=me._init;return Me(ve,ke(me._payload),Ee)}if(st(me)||ae(me))return me=Ci(me,ve.mode,Ee,null),me.return=ve,me;As(ve,me)}return null}function Ie(ve,me,Ee,ke){var Ue=me!==null?me.key:null;if(typeof Ee=="string"&&Ee!==""||typeof Ee=="number")return Ue!==null?null:ie(ve,me,""+Ee,ke);if(typeof Ee=="object"&&Ee!==null){switch(Ee.$$typeof){case Z:return Ee.key===Ue?fe(ve,me,Ee,ke):null;case X:return Ee.key===Ue?Se(ve,me,Ee,ke):null;case he:return Ue=Ee._init,Ie(ve,me,Ue(Ee._payload),ke)}if(st(Ee)||ae(Ee))return Ue!==null?null:Oe(ve,me,Ee,ke,null);As(ve,Ee)}return null}function je(ve,me,Ee,ke,Ue){if(typeof ke=="string"&&ke!==""||typeof ke=="number")return ve=ve.get(Ee)||null,ie(me,ve,""+ke,Ue);if(typeof ke=="object"&&ke!==null){switch(ke.$$typeof){case Z:return ve=ve.get(ke.key===null?Ee:ke.key)||null,fe(me,ve,ke,Ue);case X:return ve=ve.get(ke.key===null?Ee:ke.key)||null,Se(me,ve,ke,Ue);case he:var Qe=ke._init;return je(ve,me,Ee,Qe(ke._payload),Ue)}if(st(ke)||ae(ke))return ve=ve.get(Ee)||null,Oe(me,ve,ke,Ue,null);As(me,ke)}return null}function Ve(ve,me,Ee,ke){for(var Ue=null,Qe=null,Je=me,it=me=0,Bt=null;Je!==null&&it<Ee.length;it++){Je.index>it?(Bt=Je,Je=null):Bt=Je.sibling;var mt=Ie(ve,Je,Ee[it],ke);if(mt===null){Je===null&&(Je=Bt);break}R&&Je&&mt.alternate===null&&A(ve,Je),me=G(mt,me,it),Qe===null?Ue=mt:Qe.sibling=mt,Qe=mt,Je=Bt}if(it===Ee.length)return L(ve,Je),Rt&&gi(ve,it),Ue;if(Je===null){for(;it<Ee.length;it++)Je=Me(ve,Ee[it],ke),Je!==null&&(me=G(Je,me,it),Qe===null?Ue=Je:Qe.sibling=Je,Qe=Je);return Rt&&gi(ve,it),Ue}for(Je=B(ve,Je);it<Ee.length;it++)Bt=je(Je,ve,it,Ee[it],ke),Bt!==null&&(R&&Bt.alternate!==null&&Je.delete(Bt.key===null?it:Bt.key),me=G(Bt,me,it),Qe===null?Ue=Bt:Qe.sibling=Bt,Qe=Bt);return R&&Je.forEach(function(ni){return A(ve,ni)}),Rt&&gi(ve,it),Ue}function Ge(ve,me,Ee,ke){var Ue=ae(Ee);if(typeof Ue!="function")throw Error(g(150));if(Ee=Ue.call(Ee),Ee==null)throw Error(g(151));for(var Qe=Ue=null,Je=me,it=me=0,Bt=null,mt=Ee.next();Je!==null&&!mt.done;it++,mt=Ee.next()){Je.index>it?(Bt=Je,Je=null):Bt=Je.sibling;var ni=Ie(ve,Je,mt.value,ke);if(ni===null){Je===null&&(Je=Bt);break}R&&Je&&ni.alternate===null&&A(ve,Je),me=G(ni,me,it),Qe===null?Ue=ni:Qe.sibling=ni,Qe=ni,Je=Bt}if(mt.done)return L(ve,Je),Rt&&gi(ve,it),Ue;if(Je===null){for(;!mt.done;it++,mt=Ee.next())mt=Me(ve,mt.value,ke),mt!==null&&(me=G(mt,me,it),Qe===null?Ue=mt:Qe.sibling=mt,Qe=mt);return Rt&&gi(ve,it),Ue}for(Je=B(ve,Je);!mt.done;it++,mt=Ee.next())mt=je(Je,ve,it,mt.value,ke),mt!==null&&(R&&mt.alternate!==null&&Je.delete(mt.key===null?it:mt.key),me=G(mt,me,it),Qe===null?Ue=mt:Qe.sibling=mt,Qe=mt);return R&&Je.forEach(function(kh){return A(ve,kh)}),Rt&&gi(ve,it),Ue}function Nt(ve,me,Ee,ke){if(typeof Ee=="object"&&Ee!==null&&Ee.type===K&&Ee.key===null&&(Ee=Ee.props.children),typeof Ee=="object"&&Ee!==null){switch(Ee.$$typeof){case Z:e:{for(var Ue=Ee.key,Qe=me;Qe!==null;){if(Qe.key===Ue){if(Ue=Ee.type,Ue===K){if(Qe.tag===7){L(ve,Qe.sibling),me=V(Qe,Ee.props.children),me.return=ve,ve=me;break e}}else if(Qe.elementType===Ue||typeof Ue=="object"&&Ue!==null&&Ue.$$typeof===he&&jl(Ue)===Qe.type){L(ve,Qe.sibling),me=V(Qe,Ee.props),me.ref=Nr(ve,Qe,Ee),me.return=ve,ve=me;break e}L(ve,Qe);break}else A(ve,Qe);Qe=Qe.sibling}Ee.type===K?(me=Ci(Ee.props.children,ve.mode,ke,Ee.key),me.return=ve,ve=me):(ke=ta(Ee.type,Ee.key,Ee.props,null,ve.mode,ke),ke.ref=Nr(ve,me,Ee),ke.return=ve,ve=ke)}return Y(ve);case X:e:{for(Qe=Ee.key;me!==null;){if(me.key===Qe)if(me.tag===4&&me.stateNode.containerInfo===Ee.containerInfo&&me.stateNode.implementation===Ee.implementation){L(ve,me.sibling),me=V(me,Ee.children||[]),me.return=ve,ve=me;break e}else{L(ve,me);break}else A(ve,me);me=me.sibling}me=zo(Ee,ve.mode,ke),me.return=ve,ve=me}return Y(ve);case he:return Qe=Ee._init,Nt(ve,me,Qe(Ee._payload),ke)}if(st(Ee))return Ve(ve,me,Ee,ke);if(ae(Ee))return Ge(ve,me,Ee,ke);As(ve,Ee)}return typeof Ee=="string"&&Ee!==""||typeof Ee=="number"?(Ee=""+Ee,me!==null&&me.tag===6?(L(ve,me.sibling),me=V(me,Ee),me.return=ve,ve=me):(L(ve,me),me=Vo(Ee,ve.mode,ke),me.return=ve,ve=me),Y(ve)):L(ve,me)}return Nt}var Zi=$l(!0),Vl=$l(!1),Ms=qn(null),Ns=null,Xi=null,Ya=null;function Qa(){Ya=Xi=Ns=null}function Ja(R){var A=Ms.current;St(Ms),R._currentValue=A}function eo(R,A,L){for(;R!==null;){var B=R.alternate;if((R.childLanes&A)!==A?(R.childLanes|=A,B!==null&&(B.childLanes|=A)):B!==null&&(B.childLanes&A)!==A&&(B.childLanes|=A),R===L)break;R=R.return}}function Ki(R,A){Ns=R,Ya=Xi=null,R=R.dependencies,R!==null&&R.firstContext!==null&&((R.lanes&A)!==0&&(tn=!0),R.firstContext=null)}function pn(R){var A=R._currentValue;if(Ya!==R)if(R={context:R,memoizedValue:A,next:null},Xi===null){if(Ns===null)throw Error(g(308));Xi=R,Ns.dependencies={lanes:0,firstContext:R}}else Xi=Xi.next=R;return A}var mi=null;function to(R){mi===null?mi=[R]:mi.push(R)}function zl(R,A,L,B){var V=A.interleaved;return V===null?(L.next=L,to(A)):(L.next=V.next,V.next=L),A.interleaved=L,Fn(R,B)}function Fn(R,A){R.lanes|=A;var L=R.alternate;for(L!==null&&(L.lanes|=A),L=R,R=R.return;R!==null;)R.childLanes|=A,L=R.alternate,L!==null&&(L.childLanes|=A),L=R,R=R.return;return L.tag===3?L.stateNode:null}var Zn=!1;function no(R){R.updateQueue={baseState:R.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Gl(R,A){R=R.updateQueue,A.updateQueue===R&&(A.updateQueue={baseState:R.baseState,firstBaseUpdate:R.firstBaseUpdate,lastBaseUpdate:R.lastBaseUpdate,shared:R.shared,effects:R.effects})}function Bn(R,A){return{eventTime:R,lane:A,tag:0,payload:null,callback:null,next:null}}function Xn(R,A,L){var B=R.updateQueue;if(B===null)return null;if(B=B.shared,(gt&2)!==0){var V=B.pending;return V===null?A.next=A:(A.next=V.next,V.next=A),B.pending=A,Fn(R,L)}return V=B.interleaved,V===null?(A.next=A,to(B)):(A.next=V.next,V.next=A),B.interleaved=A,Fn(R,L)}function Ds(R,A,L){if(A=A.updateQueue,A!==null&&(A=A.shared,(L&4194240)!==0)){var B=A.lanes;B&=R.pendingLanes,L|=B,A.lanes=L,gr(R,L)}}function ql(R,A){var L=R.updateQueue,B=R.alternate;if(B!==null&&(B=B.updateQueue,L===B)){var V=null,G=null;if(L=L.firstBaseUpdate,L!==null){do{var Y={eventTime:L.eventTime,lane:L.lane,tag:L.tag,payload:L.payload,callback:L.callback,next:null};G===null?V=G=Y:G=G.next=Y,L=L.next}while(L!==null);G===null?V=G=A:G=G.next=A}else V=G=A;L={baseState:B.baseState,firstBaseUpdate:V,lastBaseUpdate:G,shared:B.shared,effects:B.effects},R.updateQueue=L;return}R=L.lastBaseUpdate,R===null?L.firstBaseUpdate=A:R.next=A,L.lastBaseUpdate=A}function ks(R,A,L,B){var V=R.updateQueue;Zn=!1;var G=V.firstBaseUpdate,Y=V.lastBaseUpdate,ie=V.shared.pending;if(ie!==null){V.shared.pending=null;var fe=ie,Se=fe.next;fe.next=null,Y===null?G=Se:Y.next=Se,Y=fe;var Oe=R.alternate;Oe!==null&&(Oe=Oe.updateQueue,ie=Oe.lastBaseUpdate,ie!==Y&&(ie===null?Oe.firstBaseUpdate=Se:ie.next=Se,Oe.lastBaseUpdate=fe))}if(G!==null){var Me=V.baseState;Y=0,Oe=Se=fe=null,ie=G;do{var Ie=ie.lane,je=ie.eventTime;if((B&Ie)===Ie){Oe!==null&&(Oe=Oe.next={eventTime:je,lane:0,tag:ie.tag,payload:ie.payload,callback:ie.callback,next:null});e:{var Ve=R,Ge=ie;switch(Ie=A,je=L,Ge.tag){case 1:if(Ve=Ge.payload,typeof Ve=="function"){Me=Ve.call(je,Me,Ie);break e}Me=Ve;break e;case 3:Ve.flags=Ve.flags&-65537|128;case 0:if(Ve=Ge.payload,Ie=typeof Ve=="function"?Ve.call(je,Me,Ie):Ve,Ie==null)break e;Me=pe({},Me,Ie);break e;case 2:Zn=!0}}ie.callback!==null&&ie.lane!==0&&(R.flags|=64,Ie=V.effects,Ie===null?V.effects=[ie]:Ie.push(ie))}else je={eventTime:je,lane:Ie,tag:ie.tag,payload:ie.payload,callback:ie.callback,next:null},Oe===null?(Se=Oe=je,fe=Me):Oe=Oe.next=je,Y|=Ie;if(ie=ie.next,ie===null){if(ie=V.shared.pending,ie===null)break;Ie=ie,ie=Ie.next,Ie.next=null,V.lastBaseUpdate=Ie,V.shared.pending=null}}while(!0);if(Oe===null&&(fe=Me),V.baseState=fe,V.firstBaseUpdate=Se,V.lastBaseUpdate=Oe,A=V.shared.interleaved,A!==null){V=A;do Y|=V.lane,V=V.next;while(V!==A)}else G===null&&(V.shared.lanes=0);xi|=Y,R.lanes=Y,R.memoizedState=Me}}function Ul(R,A,L){if(R=A.effects,A.effects=null,R!==null)for(A=0;A<R.length;A++){var B=R[A],V=B.callback;if(V!==null){if(B.callback=null,B=L,typeof V!="function")throw Error(g(191,V));V.call(B)}}}var Dr={},On=qn(Dr),kr=qn(Dr),Lr=qn(Dr);function yi(R){if(R===Dr)throw Error(g(174));return R}function io(R,A){switch(Et(Lr,A),Et(kr,R),Et(On,Dr),R=A.nodeType,R){case 9:case 11:A=(A=A.documentElement)?A.namespaceURI:ft(null,"");break;default:R=R===8?A.parentNode:A,A=R.namespaceURI||null,R=R.tagName,A=ft(A,R)}St(On),Et(On,A)}function Yi(){St(On),St(kr),St(Lr)}function Wl(R){yi(Lr.current);var A=yi(On.current),L=ft(A,R.type);A!==L&&(Et(kr,R),Et(On,L))}function ro(R){kr.current===R&&(St(On),St(kr))}var It=qn(0);function Ls(R){for(var A=R;A!==null;){if(A.tag===13){var L=A.memoizedState;if(L!==null&&(L=L.dehydrated,L===null||L.data==="$?"||L.data==="$!"))return A}else if(A.tag===19&&A.memoizedProps.revealOrder!==void 0){if((A.flags&128)!==0)return A}else if(A.child!==null){A.child.return=A,A=A.child;continue}if(A===R)break;for(;A.sibling===null;){if(A.return===null||A.return===R)return null;A=A.return}A.sibling.return=A.return,A=A.sibling}return null}var so=[];function ao(){for(var R=0;R<so.length;R++)so[R]._workInProgressVersionPrimary=null;so.length=0}var Hs=q.ReactCurrentDispatcher,oo=q.ReactCurrentBatchConfig,vi=0,Ot=null,kt=null,Ht=null,Fs=!1,Hr=!1,Fr=0,ih=0;function Ut(){throw Error(g(321))}function lo(R,A){if(A===null)return!1;for(var L=0;L<A.length&&L<R.length;L++)if(!xn(R[L],A[L]))return!1;return!0}function uo(R,A,L,B,V,G){if(vi=G,Ot=A,A.memoizedState=null,A.updateQueue=null,A.lanes=0,Hs.current=R===null||R.memoizedState===null?oh:lh,R=L(B,V),Hr){G=0;do{if(Hr=!1,Fr=0,25<=G)throw Error(g(301));G+=1,Ht=kt=null,A.updateQueue=null,Hs.current=uh,R=L(B,V)}while(Hr)}if(Hs.current=$s,A=kt!==null&&kt.next!==null,vi=0,Ht=kt=Ot=null,Fs=!1,A)throw Error(g(300));return R}function co(){var R=Fr!==0;return Fr=0,R}function An(){var R={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ht===null?Ot.memoizedState=Ht=R:Ht=Ht.next=R,Ht}function gn(){if(kt===null){var R=Ot.alternate;R=R!==null?R.memoizedState:null}else R=kt.next;var A=Ht===null?Ot.memoizedState:Ht.next;if(A!==null)Ht=A,kt=R;else{if(R===null)throw Error(g(310));kt=R,R={memoizedState:kt.memoizedState,baseState:kt.baseState,baseQueue:kt.baseQueue,queue:kt.queue,next:null},Ht===null?Ot.memoizedState=Ht=R:Ht=Ht.next=R}return Ht}function Br(R,A){return typeof A=="function"?A(R):A}function ho(R){var A=gn(),L=A.queue;if(L===null)throw Error(g(311));L.lastRenderedReducer=R;var B=kt,V=B.baseQueue,G=L.pending;if(G!==null){if(V!==null){var Y=V.next;V.next=G.next,G.next=Y}B.baseQueue=V=G,L.pending=null}if(V!==null){G=V.next,B=B.baseState;var ie=Y=null,fe=null,Se=G;do{var Oe=Se.lane;if((vi&Oe)===Oe)fe!==null&&(fe=fe.next={lane:0,action:Se.action,hasEagerState:Se.hasEagerState,eagerState:Se.eagerState,next:null}),B=Se.hasEagerState?Se.eagerState:R(B,Se.action);else{var Me={lane:Oe,action:Se.action,hasEagerState:Se.hasEagerState,eagerState:Se.eagerState,next:null};fe===null?(ie=fe=Me,Y=B):fe=fe.next=Me,Ot.lanes|=Oe,xi|=Oe}Se=Se.next}while(Se!==null&&Se!==G);fe===null?Y=B:fe.next=ie,xn(B,A.memoizedState)||(tn=!0),A.memoizedState=B,A.baseState=Y,A.baseQueue=fe,L.lastRenderedState=B}if(R=L.interleaved,R!==null){V=R;do G=V.lane,Ot.lanes|=G,xi|=G,V=V.next;while(V!==R)}else V===null&&(L.lanes=0);return[A.memoizedState,L.dispatch]}function fo(R){var A=gn(),L=A.queue;if(L===null)throw Error(g(311));L.lastRenderedReducer=R;var B=L.dispatch,V=L.pending,G=A.memoizedState;if(V!==null){L.pending=null;var Y=V=V.next;do G=R(G,Y.action),Y=Y.next;while(Y!==V);xn(G,A.memoizedState)||(tn=!0),A.memoizedState=G,A.baseQueue===null&&(A.baseState=G),L.lastRenderedState=G}return[G,B]}function Zl(){}function Xl(R,A){var L=Ot,B=gn(),V=A(),G=!xn(B.memoizedState,V);if(G&&(B.memoizedState=V,tn=!0),B=B.queue,po(Ql.bind(null,L,B,R),[R]),B.getSnapshot!==A||G||Ht!==null&&Ht.memoizedState.tag&1){if(L.flags|=2048,jr(9,Yl.bind(null,L,B,V,A),void 0,null),Ft===null)throw Error(g(349));(vi&30)!==0||Kl(L,A,V)}return V}function Kl(R,A,L){R.flags|=16384,R={getSnapshot:A,value:L},A=Ot.updateQueue,A===null?(A={lastEffect:null,stores:null},Ot.updateQueue=A,A.stores=[R]):(L=A.stores,L===null?A.stores=[R]:L.push(R))}function Yl(R,A,L,B){A.value=L,A.getSnapshot=B,Jl(A)&&eu(R)}function Ql(R,A,L){return L(function(){Jl(A)&&eu(R)})}function Jl(R){var A=R.getSnapshot;R=R.value;try{var L=A();return!xn(R,L)}catch{return!0}}function eu(R){var A=Fn(R,1);A!==null&&Sn(A,R,1,-1)}function tu(R){var A=An();return typeof R=="function"&&(R=R()),A.memoizedState=A.baseState=R,R={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Br,lastRenderedState:R},A.queue=R,R=R.dispatch=ah.bind(null,Ot,R),[A.memoizedState,R]}function jr(R,A,L,B){return R={tag:R,create:A,destroy:L,deps:B,next:null},A=Ot.updateQueue,A===null?(A={lastEffect:null,stores:null},Ot.updateQueue=A,A.lastEffect=R.next=R):(L=A.lastEffect,L===null?A.lastEffect=R.next=R:(B=L.next,L.next=R,R.next=B,A.lastEffect=R)),R}function nu(){return gn().memoizedState}function Bs(R,A,L,B){var V=An();Ot.flags|=R,V.memoizedState=jr(1|A,L,void 0,B===void 0?null:B)}function js(R,A,L,B){var V=gn();B=B===void 0?null:B;var G=void 0;if(kt!==null){var Y=kt.memoizedState;if(G=Y.destroy,B!==null&&lo(B,Y.deps)){V.memoizedState=jr(A,L,G,B);return}}Ot.flags|=R,V.memoizedState=jr(1|A,L,G,B)}function iu(R,A){return Bs(8390656,8,R,A)}function po(R,A){return js(2048,8,R,A)}function ru(R,A){return js(4,2,R,A)}function su(R,A){return js(4,4,R,A)}function au(R,A){if(typeof A=="function")return R=R(),A(R),function(){A(null)};if(A!=null)return R=R(),A.current=R,function(){A.current=null}}function ou(R,A,L){return L=L!=null?L.concat([R]):null,js(4,4,au.bind(null,A,R),L)}function go(){}function lu(R,A){var L=gn();A=A===void 0?null:A;var B=L.memoizedState;return B!==null&&A!==null&&lo(A,B[1])?B[0]:(L.memoizedState=[R,A],R)}function uu(R,A){var L=gn();A=A===void 0?null:A;var B=L.memoizedState;return B!==null&&A!==null&&lo(A,B[1])?B[0]:(R=R(),L.memoizedState=[R,A],R)}function cu(R,A,L){return(vi&21)===0?(R.baseState&&(R.baseState=!1,tn=!0),R.memoizedState=L):(xn(L,A)||(L=rs(),Ot.lanes|=L,xi|=L,R.baseState=!0),A)}function rh(R,A){var L=yt;yt=L!==0&&4>L?L:4,R(!0);var B=oo.transition;oo.transition={};try{R(!1),A()}finally{yt=L,oo.transition=B}}function hu(){return gn().memoizedState}function sh(R,A,L){var B=Jn(R);if(L={lane:B,action:L,hasEagerState:!1,eagerState:null,next:null},du(R))fu(A,L);else if(L=zl(R,A,L,B),L!==null){var V=Yt();Sn(L,R,B,V),pu(L,A,B)}}function ah(R,A,L){var B=Jn(R),V={lane:B,action:L,hasEagerState:!1,eagerState:null,next:null};if(du(R))fu(A,V);else{var G=R.alternate;if(R.lanes===0&&(G===null||G.lanes===0)&&(G=A.lastRenderedReducer,G!==null))try{var Y=A.lastRenderedState,ie=G(Y,L);if(V.hasEagerState=!0,V.eagerState=ie,xn(ie,Y)){var fe=A.interleaved;fe===null?(V.next=V,to(A)):(V.next=fe.next,fe.next=V),A.interleaved=V;return}}catch{}finally{}L=zl(R,A,V,B),L!==null&&(V=Yt(),Sn(L,R,B,V),pu(L,A,B))}}function du(R){var A=R.alternate;return R===Ot||A!==null&&A===Ot}function fu(R,A){Hr=Fs=!0;var L=R.pending;L===null?A.next=A:(A.next=L.next,L.next=A),R.pending=A}function pu(R,A,L){if((L&4194240)!==0){var B=A.lanes;B&=R.pendingLanes,L|=B,A.lanes=L,gr(R,L)}}var $s={readContext:pn,useCallback:Ut,useContext:Ut,useEffect:Ut,useImperativeHandle:Ut,useInsertionEffect:Ut,useLayoutEffect:Ut,useMemo:Ut,useReducer:Ut,useRef:Ut,useState:Ut,useDebugValue:Ut,useDeferredValue:Ut,useTransition:Ut,useMutableSource:Ut,useSyncExternalStore:Ut,useId:Ut,unstable_isNewReconciler:!1},oh={readContext:pn,useCallback:function(R,A){return An().memoizedState=[R,A===void 0?null:A],R},useContext:pn,useEffect:iu,useImperativeHandle:function(R,A,L){return L=L!=null?L.concat([R]):null,Bs(4194308,4,au.bind(null,A,R),L)},useLayoutEffect:function(R,A){return Bs(4194308,4,R,A)},useInsertionEffect:function(R,A){return Bs(4,2,R,A)},useMemo:function(R,A){var L=An();return A=A===void 0?null:A,R=R(),L.memoizedState=[R,A],R},useReducer:function(R,A,L){var B=An();return A=L!==void 0?L(A):A,B.memoizedState=B.baseState=A,R={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:R,lastRenderedState:A},B.queue=R,R=R.dispatch=sh.bind(null,Ot,R),[B.memoizedState,R]},useRef:function(R){var A=An();return R={current:R},A.memoizedState=R},useState:tu,useDebugValue:go,useDeferredValue:function(R){return An().memoizedState=R},useTransition:function(){var R=tu(!1),A=R[0];return R=rh.bind(null,R[1]),An().memoizedState=R,[A,R]},useMutableSource:function(){},useSyncExternalStore:function(R,A,L){var B=Ot,V=An();if(Rt){if(L===void 0)throw Error(g(407));L=L()}else{if(L=A(),Ft===null)throw Error(g(349));(vi&30)!==0||Kl(B,A,L)}V.memoizedState=L;var G={value:L,getSnapshot:A};return V.queue=G,iu(Ql.bind(null,B,G,R),[R]),B.flags|=2048,jr(9,Yl.bind(null,B,G,L,A),void 0,null),L},useId:function(){var R=An(),A=Ft.identifierPrefix;if(Rt){var L=Hn,B=Ln;L=(B&~(1<<32-sn(B)-1)).toString(32)+L,A=":"+A+"R"+L,L=Fr++,0<L&&(A+="H"+L.toString(32)),A+=":"}else L=ih++,A=":"+A+"r"+L.toString(32)+":";return R.memoizedState=A},unstable_isNewReconciler:!1},lh={readContext:pn,useCallback:lu,useContext:pn,useEffect:po,useImperativeHandle:ou,useInsertionEffect:ru,useLayoutEffect:su,useMemo:uu,useReducer:ho,useRef:nu,useState:function(){return ho(Br)},useDebugValue:go,useDeferredValue:function(R){var A=gn();return cu(A,kt.memoizedState,R)},useTransition:function(){var R=ho(Br)[0],A=gn().memoizedState;return[R,A]},useMutableSource:Zl,useSyncExternalStore:Xl,useId:hu,unstable_isNewReconciler:!1},uh={readContext:pn,useCallback:lu,useContext:pn,useEffect:po,useImperativeHandle:ou,useInsertionEffect:ru,useLayoutEffect:su,useMemo:uu,useReducer:fo,useRef:nu,useState:function(){return fo(Br)},useDebugValue:go,useDeferredValue:function(R){var A=gn();return kt===null?A.memoizedState=R:cu(A,kt.memoizedState,R)},useTransition:function(){var R=fo(Br)[0],A=gn().memoizedState;return[R,A]},useMutableSource:Zl,useSyncExternalStore:Xl,useId:hu,unstable_isNewReconciler:!1};function bn(R,A){if(R&&R.defaultProps){A=pe({},A),R=R.defaultProps;for(var L in R)A[L]===void 0&&(A[L]=R[L]);return A}return A}function mo(R,A,L,B){A=R.memoizedState,L=L(B,A),L=L==null?A:pe({},A,L),R.memoizedState=L,R.lanes===0&&(R.updateQueue.baseState=L)}var Vs={isMounted:function(R){return(R=R._reactInternals)?Nn(R)===R:!1},enqueueSetState:function(R,A,L){R=R._reactInternals;var B=Yt(),V=Jn(R),G=Bn(B,V);G.payload=A,L!=null&&(G.callback=L),A=Xn(R,G,V),A!==null&&(Sn(A,R,V,B),Ds(A,R,V))},enqueueReplaceState:function(R,A,L){R=R._reactInternals;var B=Yt(),V=Jn(R),G=Bn(B,V);G.tag=1,G.payload=A,L!=null&&(G.callback=L),A=Xn(R,G,V),A!==null&&(Sn(A,R,V,B),Ds(A,R,V))},enqueueForceUpdate:function(R,A){R=R._reactInternals;var L=Yt(),B=Jn(R),V=Bn(L,B);V.tag=2,A!=null&&(V.callback=A),A=Xn(R,V,B),A!==null&&(Sn(A,R,B,L),Ds(A,R,B))}};function gu(R,A,L,B,V,G,Y){return R=R.stateNode,typeof R.shouldComponentUpdate=="function"?R.shouldComponentUpdate(B,G,Y):A.prototype&&A.prototype.isPureReactComponent?!_r(L,B)||!_r(V,G):!0}function mu(R,A,L){var B=!1,V=Un,G=A.contextType;return typeof G=="object"&&G!==null?G=pn(G):(V=en(A)?fi:qt.current,B=A.contextTypes,G=(B=B!=null)?Gi(R,V):Un),A=new A(L,G),R.memoizedState=A.state!==null&&A.state!==void 0?A.state:null,A.updater=Vs,R.stateNode=A,A._reactInternals=R,B&&(R=R.stateNode,R.__reactInternalMemoizedUnmaskedChildContext=V,R.__reactInternalMemoizedMaskedChildContext=G),A}function yu(R,A,L,B){R=A.state,typeof A.componentWillReceiveProps=="function"&&A.componentWillReceiveProps(L,B),typeof A.UNSAFE_componentWillReceiveProps=="function"&&A.UNSAFE_componentWillReceiveProps(L,B),A.state!==R&&Vs.enqueueReplaceState(A,A.state,null)}function yo(R,A,L,B){var V=R.stateNode;V.props=L,V.state=R.memoizedState,V.refs={},no(R);var G=A.contextType;typeof G=="object"&&G!==null?V.context=pn(G):(G=en(A)?fi:qt.current,V.context=Gi(R,G)),V.state=R.memoizedState,G=A.getDerivedStateFromProps,typeof G=="function"&&(mo(R,A,G,L),V.state=R.memoizedState),typeof A.getDerivedStateFromProps=="function"||typeof V.getSnapshotBeforeUpdate=="function"||typeof V.UNSAFE_componentWillMount!="function"&&typeof V.componentWillMount!="function"||(A=V.state,typeof V.componentWillMount=="function"&&V.componentWillMount(),typeof V.UNSAFE_componentWillMount=="function"&&V.UNSAFE_componentWillMount(),A!==V.state&&Vs.enqueueReplaceState(V,V.state,null),ks(R,L,V,B),V.state=R.memoizedState),typeof V.componentDidMount=="function"&&(R.flags|=4194308)}function Qi(R,A){try{var L="",B=A;do L+=we(B),B=B.return;while(B);var V=L}catch(G){V=`
Error generating stack: `+G.message+`
`+G.stack}return{value:R,source:A,stack:V,digest:null}}function vo(R,A,L){return{value:R,source:null,stack:L??null,digest:A??null}}function xo(R,A){try{console.error(A.value)}catch(L){setTimeout(function(){throw L})}}var ch=typeof WeakMap=="function"?WeakMap:Map;function vu(R,A,L){L=Bn(-1,L),L.tag=3,L.payload={element:null};var B=A.value;return L.callback=function(){Xs||(Xs=!0,Do=B),xo(R,A)},L}function xu(R,A,L){L=Bn(-1,L),L.tag=3;var B=R.type.getDerivedStateFromError;if(typeof B=="function"){var V=A.value;L.payload=function(){return B(V)},L.callback=function(){xo(R,A)}}var G=R.stateNode;return G!==null&&typeof G.componentDidCatch=="function"&&(L.callback=function(){xo(R,A),typeof B!="function"&&(Yn===null?Yn=new Set([this]):Yn.add(this));var Y=A.stack;this.componentDidCatch(A.value,{componentStack:Y!==null?Y:""})}),L}function Eu(R,A,L){var B=R.pingCache;if(B===null){B=R.pingCache=new ch;var V=new Set;B.set(A,V)}else V=B.get(A),V===void 0&&(V=new Set,B.set(A,V));V.has(L)||(V.add(L),R=Sh.bind(null,R,A,L),A.then(R,R))}function bu(R){do{var A;if((A=R.tag===13)&&(A=R.memoizedState,A=A!==null?A.dehydrated!==null:!0),A)return R;R=R.return}while(R!==null);return null}function wu(R,A,L,B,V){return(R.mode&1)===0?(R===A?R.flags|=65536:(R.flags|=128,L.flags|=131072,L.flags&=-52805,L.tag===1&&(L.alternate===null?L.tag=17:(A=Bn(-1,1),A.tag=2,Xn(L,A,1))),L.lanes|=1),R):(R.flags|=65536,R.lanes=V,R)}var hh=q.ReactCurrentOwner,tn=!1;function Kt(R,A,L,B){A.child=R===null?Vl(A,null,L,B):Zi(A,R.child,L,B)}function Cu(R,A,L,B,V){L=L.render;var G=A.ref;return Ki(A,V),B=uo(R,A,L,B,G,V),L=co(),R!==null&&!tn?(A.updateQueue=R.updateQueue,A.flags&=-2053,R.lanes&=~V,jn(R,A,V)):(Rt&&L&&Ua(A),A.flags|=1,Kt(R,A,B,V),A.child)}function Su(R,A,L,B,V){if(R===null){var G=L.type;return typeof G=="function"&&!$o(G)&&G.defaultProps===void 0&&L.compare===null&&L.defaultProps===void 0?(A.tag=15,A.type=G,Tu(R,A,G,B,V)):(R=ta(L.type,null,B,A,A.mode,V),R.ref=A.ref,R.return=A,A.child=R)}if(G=R.child,(R.lanes&V)===0){var Y=G.memoizedProps;if(L=L.compare,L=L!==null?L:_r,L(Y,B)&&R.ref===A.ref)return jn(R,A,V)}return A.flags|=1,R=ti(G,B),R.ref=A.ref,R.return=A,A.child=R}function Tu(R,A,L,B,V){if(R!==null){var G=R.memoizedProps;if(_r(G,B)&&R.ref===A.ref)if(tn=!1,A.pendingProps=B=G,(R.lanes&V)!==0)(R.flags&131072)!==0&&(tn=!0);else return A.lanes=R.lanes,jn(R,A,V)}return Eo(R,A,L,B,V)}function _u(R,A,L){var B=A.pendingProps,V=B.children,G=R!==null?R.memoizedState:null;if(B.mode==="hidden")if((A.mode&1)===0)A.memoizedState={baseLanes:0,cachePool:null,transitions:null},Et(er,un),un|=L;else{if((L&1073741824)===0)return R=G!==null?G.baseLanes|L:L,A.lanes=A.childLanes=1073741824,A.memoizedState={baseLanes:R,cachePool:null,transitions:null},A.updateQueue=null,Et(er,un),un|=R,null;A.memoizedState={baseLanes:0,cachePool:null,transitions:null},B=G!==null?G.baseLanes:L,Et(er,un),un|=B}else G!==null?(B=G.baseLanes|L,A.memoizedState=null):B=L,Et(er,un),un|=B;return Kt(R,A,V,L),A.child}function Ru(R,A){var L=A.ref;(R===null&&L!==null||R!==null&&R.ref!==L)&&(A.flags|=512,A.flags|=2097152)}function Eo(R,A,L,B,V){var G=en(L)?fi:qt.current;return G=Gi(A,G),Ki(A,V),L=uo(R,A,L,B,G,V),B=co(),R!==null&&!tn?(A.updateQueue=R.updateQueue,A.flags&=-2053,R.lanes&=~V,jn(R,A,V)):(Rt&&B&&Ua(A),A.flags|=1,Kt(R,A,L,V),A.child)}function Pu(R,A,L,B,V){if(en(L)){var G=!0;_s(A)}else G=!1;if(Ki(A,V),A.stateNode===null)Gs(R,A),mu(A,L,B),yo(A,L,B,V),B=!0;else if(R===null){var Y=A.stateNode,ie=A.memoizedProps;Y.props=ie;var fe=Y.context,Se=L.contextType;typeof Se=="object"&&Se!==null?Se=pn(Se):(Se=en(L)?fi:qt.current,Se=Gi(A,Se));var Oe=L.getDerivedStateFromProps,Me=typeof Oe=="function"||typeof Y.getSnapshotBeforeUpdate=="function";Me||typeof Y.UNSAFE_componentWillReceiveProps!="function"&&typeof Y.componentWillReceiveProps!="function"||(ie!==B||fe!==Se)&&yu(A,Y,B,Se),Zn=!1;var Ie=A.memoizedState;Y.state=Ie,ks(A,B,Y,V),fe=A.memoizedState,ie!==B||Ie!==fe||Jt.current||Zn?(typeof Oe=="function"&&(mo(A,L,Oe,B),fe=A.memoizedState),(ie=Zn||gu(A,L,ie,B,Ie,fe,Se))?(Me||typeof Y.UNSAFE_componentWillMount!="function"&&typeof Y.componentWillMount!="function"||(typeof Y.componentWillMount=="function"&&Y.componentWillMount(),typeof Y.UNSAFE_componentWillMount=="function"&&Y.UNSAFE_componentWillMount()),typeof Y.componentDidMount=="function"&&(A.flags|=4194308)):(typeof Y.componentDidMount=="function"&&(A.flags|=4194308),A.memoizedProps=B,A.memoizedState=fe),Y.props=B,Y.state=fe,Y.context=Se,B=ie):(typeof Y.componentDidMount=="function"&&(A.flags|=4194308),B=!1)}else{Y=A.stateNode,Gl(R,A),ie=A.memoizedProps,Se=A.type===A.elementType?ie:bn(A.type,ie),Y.props=Se,Me=A.pendingProps,Ie=Y.context,fe=L.contextType,typeof fe=="object"&&fe!==null?fe=pn(fe):(fe=en(L)?fi:qt.current,fe=Gi(A,fe));var je=L.getDerivedStateFromProps;(Oe=typeof je=="function"||typeof Y.getSnapshotBeforeUpdate=="function")||typeof Y.UNSAFE_componentWillReceiveProps!="function"&&typeof Y.componentWillReceiveProps!="function"||(ie!==Me||Ie!==fe)&&yu(A,Y,B,fe),Zn=!1,Ie=A.memoizedState,Y.state=Ie,ks(A,B,Y,V);var Ve=A.memoizedState;ie!==Me||Ie!==Ve||Jt.current||Zn?(typeof je=="function"&&(mo(A,L,je,B),Ve=A.memoizedState),(Se=Zn||gu(A,L,Se,B,Ie,Ve,fe)||!1)?(Oe||typeof Y.UNSAFE_componentWillUpdate!="function"&&typeof Y.componentWillUpdate!="function"||(typeof Y.componentWillUpdate=="function"&&Y.componentWillUpdate(B,Ve,fe),typeof Y.UNSAFE_componentWillUpdate=="function"&&Y.UNSAFE_componentWillUpdate(B,Ve,fe)),typeof Y.componentDidUpdate=="function"&&(A.flags|=4),typeof Y.getSnapshotBeforeUpdate=="function"&&(A.flags|=1024)):(typeof Y.componentDidUpdate!="function"||ie===R.memoizedProps&&Ie===R.memoizedState||(A.flags|=4),typeof Y.getSnapshotBeforeUpdate!="function"||ie===R.memoizedProps&&Ie===R.memoizedState||(A.flags|=1024),A.memoizedProps=B,A.memoizedState=Ve),Y.props=B,Y.state=Ve,Y.context=fe,B=Se):(typeof Y.componentDidUpdate!="function"||ie===R.memoizedProps&&Ie===R.memoizedState||(A.flags|=4),typeof Y.getSnapshotBeforeUpdate!="function"||ie===R.memoizedProps&&Ie===R.memoizedState||(A.flags|=1024),B=!1)}return bo(R,A,L,B,G,V)}function bo(R,A,L,B,V,G){Ru(R,A);var Y=(A.flags&128)!==0;if(!B&&!Y)return V&&Nl(A,L,!1),jn(R,A,G);B=A.stateNode,hh.current=A;var ie=Y&&typeof L.getDerivedStateFromError!="function"?null:B.render();return A.flags|=1,R!==null&&Y?(A.child=Zi(A,R.child,null,G),A.child=Zi(A,null,ie,G)):Kt(R,A,ie,G),A.memoizedState=B.state,V&&Nl(A,L,!0),A.child}function Iu(R){var A=R.stateNode;A.pendingContext?Al(R,A.pendingContext,A.pendingContext!==A.context):A.context&&Al(R,A.context,!1),io(R,A.containerInfo)}function Ou(R,A,L,B,V){return Wi(),Ka(V),A.flags|=256,Kt(R,A,L,B),A.child}var wo={dehydrated:null,treeContext:null,retryLane:0};function Co(R){return{baseLanes:R,cachePool:null,transitions:null}}function Au(R,A,L){var B=A.pendingProps,V=It.current,G=!1,Y=(A.flags&128)!==0,ie;if((ie=Y)||(ie=R!==null&&R.memoizedState===null?!1:(V&2)!==0),ie?(G=!0,A.flags&=-129):(R===null||R.memoizedState!==null)&&(V|=1),Et(It,V&1),R===null)return Xa(A),R=A.memoizedState,R!==null&&(R=R.dehydrated,R!==null)?((A.mode&1)===0?A.lanes=1:R.data==="$!"?A.lanes=8:A.lanes=1073741824,null):(Y=B.children,R=B.fallback,G?(B=A.mode,G=A.child,Y={mode:"hidden",children:Y},(B&1)===0&&G!==null?(G.childLanes=0,G.pendingProps=Y):G=na(Y,B,0,null),R=Ci(R,B,L,null),G.return=A,R.return=A,G.sibling=R,A.child=G,A.child.memoizedState=Co(L),A.memoizedState=wo,R):So(A,Y));if(V=R.memoizedState,V!==null&&(ie=V.dehydrated,ie!==null))return dh(R,A,Y,B,ie,V,L);if(G){G=B.fallback,Y=A.mode,V=R.child,ie=V.sibling;var fe={mode:"hidden",children:B.children};return(Y&1)===0&&A.child!==V?(B=A.child,B.childLanes=0,B.pendingProps=fe,A.deletions=null):(B=ti(V,fe),B.subtreeFlags=V.subtreeFlags&14680064),ie!==null?G=ti(ie,G):(G=Ci(G,Y,L,null),G.flags|=2),G.return=A,B.return=A,B.sibling=G,A.child=B,B=G,G=A.child,Y=R.child.memoizedState,Y=Y===null?Co(L):{baseLanes:Y.baseLanes|L,cachePool:null,transitions:Y.transitions},G.memoizedState=Y,G.childLanes=R.childLanes&~L,A.memoizedState=wo,B}return G=R.child,R=G.sibling,B=ti(G,{mode:"visible",children:B.children}),(A.mode&1)===0&&(B.lanes=L),B.return=A,B.sibling=null,R!==null&&(L=A.deletions,L===null?(A.deletions=[R],A.flags|=16):L.push(R)),A.child=B,A.memoizedState=null,B}function So(R,A){return A=na({mode:"visible",children:A},R.mode,0,null),A.return=R,R.child=A}function zs(R,A,L,B){return B!==null&&Ka(B),Zi(A,R.child,null,L),R=So(A,A.pendingProps.children),R.flags|=2,A.memoizedState=null,R}function dh(R,A,L,B,V,G,Y){if(L)return A.flags&256?(A.flags&=-257,B=vo(Error(g(422))),zs(R,A,Y,B)):A.memoizedState!==null?(A.child=R.child,A.flags|=128,null):(G=B.fallback,V=A.mode,B=na({mode:"visible",children:B.children},V,0,null),G=Ci(G,V,Y,null),G.flags|=2,B.return=A,G.return=A,B.sibling=G,A.child=B,(A.mode&1)!==0&&Zi(A,R.child,null,Y),A.child.memoizedState=Co(Y),A.memoizedState=wo,G);if((A.mode&1)===0)return zs(R,A,Y,null);if(V.data==="$!"){if(B=V.nextSibling&&V.nextSibling.dataset,B)var ie=B.dgst;return B=ie,G=Error(g(419)),B=vo(G,B,void 0),zs(R,A,Y,B)}if(ie=(Y&R.childLanes)!==0,tn||ie){if(B=Ft,B!==null){switch(Y&-Y){case 4:V=2;break;case 16:V=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:V=32;break;case 536870912:V=268435456;break;default:V=0}V=(V&(B.suspendedLanes|Y))!==0?0:V,V!==0&&V!==G.retryLane&&(G.retryLane=V,Fn(R,V),Sn(B,R,V,-1))}return jo(),B=vo(Error(g(421))),zs(R,A,Y,B)}return V.data==="$?"?(A.flags|=128,A.child=R.child,A=Th.bind(null,R),V._reactRetry=A,null):(R=G.treeContext,ln=Gn(V.nextSibling),on=A,Rt=!0,En=null,R!==null&&(dn[fn++]=Ln,dn[fn++]=Hn,dn[fn++]=pi,Ln=R.id,Hn=R.overflow,pi=A),A=So(A,B.children),A.flags|=4096,A)}function Mu(R,A,L){R.lanes|=A;var B=R.alternate;B!==null&&(B.lanes|=A),eo(R.return,A,L)}function To(R,A,L,B,V){var G=R.memoizedState;G===null?R.memoizedState={isBackwards:A,rendering:null,renderingStartTime:0,last:B,tail:L,tailMode:V}:(G.isBackwards=A,G.rendering=null,G.renderingStartTime=0,G.last=B,G.tail=L,G.tailMode=V)}function Nu(R,A,L){var B=A.pendingProps,V=B.revealOrder,G=B.tail;if(Kt(R,A,B.children,L),B=It.current,(B&2)!==0)B=B&1|2,A.flags|=128;else{if(R!==null&&(R.flags&128)!==0)e:for(R=A.child;R!==null;){if(R.tag===13)R.memoizedState!==null&&Mu(R,L,A);else if(R.tag===19)Mu(R,L,A);else if(R.child!==null){R.child.return=R,R=R.child;continue}if(R===A)break e;for(;R.sibling===null;){if(R.return===null||R.return===A)break e;R=R.return}R.sibling.return=R.return,R=R.sibling}B&=1}if(Et(It,B),(A.mode&1)===0)A.memoizedState=null;else switch(V){case"forwards":for(L=A.child,V=null;L!==null;)R=L.alternate,R!==null&&Ls(R)===null&&(V=L),L=L.sibling;L=V,L===null?(V=A.child,A.child=null):(V=L.sibling,L.sibling=null),To(A,!1,V,L,G);break;case"backwards":for(L=null,V=A.child,A.child=null;V!==null;){if(R=V.alternate,R!==null&&Ls(R)===null){A.child=V;break}R=V.sibling,V.sibling=L,L=V,V=R}To(A,!0,L,null,G);break;case"together":To(A,!1,null,null,void 0);break;default:A.memoizedState=null}return A.child}function Gs(R,A){(A.mode&1)===0&&R!==null&&(R.alternate=null,A.alternate=null,A.flags|=2)}function jn(R,A,L){if(R!==null&&(A.dependencies=R.dependencies),xi|=A.lanes,(L&A.childLanes)===0)return null;if(R!==null&&A.child!==R.child)throw Error(g(153));if(A.child!==null){for(R=A.child,L=ti(R,R.pendingProps),A.child=L,L.return=A;R.sibling!==null;)R=R.sibling,L=L.sibling=ti(R,R.pendingProps),L.return=A;L.sibling=null}return A.child}function fh(R,A,L){switch(A.tag){case 3:Iu(A),Wi();break;case 5:Wl(A);break;case 1:en(A.type)&&_s(A);break;case 4:io(A,A.stateNode.containerInfo);break;case 10:var B=A.type._context,V=A.memoizedProps.value;Et(Ms,B._currentValue),B._currentValue=V;break;case 13:if(B=A.memoizedState,B!==null)return B.dehydrated!==null?(Et(It,It.current&1),A.flags|=128,null):(L&A.child.childLanes)!==0?Au(R,A,L):(Et(It,It.current&1),R=jn(R,A,L),R!==null?R.sibling:null);Et(It,It.current&1);break;case 19:if(B=(L&A.childLanes)!==0,(R.flags&128)!==0){if(B)return Nu(R,A,L);A.flags|=128}if(V=A.memoizedState,V!==null&&(V.rendering=null,V.tail=null,V.lastEffect=null),Et(It,It.current),B)break;return null;case 22:case 23:return A.lanes=0,_u(R,A,L)}return jn(R,A,L)}var Du,_o,ku,Lu;Du=function(R,A){for(var L=A.child;L!==null;){if(L.tag===5||L.tag===6)R.appendChild(L.stateNode);else if(L.tag!==4&&L.child!==null){L.child.return=L,L=L.child;continue}if(L===A)break;for(;L.sibling===null;){if(L.return===null||L.return===A)return;L=L.return}L.sibling.return=L.return,L=L.sibling}},_o=function(){},ku=function(R,A,L,B){var V=R.memoizedProps;if(V!==B){R=A.stateNode,yi(On.current);var G=null;switch(L){case"input":V=rt(R,V),B=rt(R,B),G=[];break;case"select":V=pe({},V,{value:void 0}),B=pe({},B,{value:void 0}),G=[];break;case"textarea":V=lt(R,V),B=lt(R,B),G=[];break;default:typeof V.onClick!="function"&&typeof B.onClick=="function"&&(R.onclick=Cs)}bt(L,B);var Y;L=null;for(Se in V)if(!B.hasOwnProperty(Se)&&V.hasOwnProperty(Se)&&V[Se]!=null)if(Se==="style"){var ie=V[Se];for(Y in ie)ie.hasOwnProperty(Y)&&(L||(L={}),L[Y]="")}else Se!=="dangerouslySetInnerHTML"&&Se!=="children"&&Se!=="suppressContentEditableWarning"&&Se!=="suppressHydrationWarning"&&Se!=="autoFocus"&&(b.hasOwnProperty(Se)?G||(G=[]):(G=G||[]).push(Se,null));for(Se in B){var fe=B[Se];if(ie=V!=null?V[Se]:void 0,B.hasOwnProperty(Se)&&fe!==ie&&(fe!=null||ie!=null))if(Se==="style")if(ie){for(Y in ie)!ie.hasOwnProperty(Y)||fe&&fe.hasOwnProperty(Y)||(L||(L={}),L[Y]="");for(Y in fe)fe.hasOwnProperty(Y)&&ie[Y]!==fe[Y]&&(L||(L={}),L[Y]=fe[Y])}else L||(G||(G=[]),G.push(Se,L)),L=fe;else Se==="dangerouslySetInnerHTML"?(fe=fe?fe.__html:void 0,ie=ie?ie.__html:void 0,fe!=null&&ie!==fe&&(G=G||[]).push(Se,fe)):Se==="children"?typeof fe!="string"&&typeof fe!="number"||(G=G||[]).push(Se,""+fe):Se!=="suppressContentEditableWarning"&&Se!=="suppressHydrationWarning"&&(b.hasOwnProperty(Se)?(fe!=null&&Se==="onScroll"&&Ct("scroll",R),G||ie===fe||(G=[])):(G=G||[]).push(Se,fe))}L&&(G=G||[]).push("style",L);var Se=G;(A.updateQueue=Se)&&(A.flags|=4)}},Lu=function(R,A,L,B){L!==B&&(A.flags|=4)};function $r(R,A){if(!Rt)switch(R.tailMode){case"hidden":A=R.tail;for(var L=null;A!==null;)A.alternate!==null&&(L=A),A=A.sibling;L===null?R.tail=null:L.sibling=null;break;case"collapsed":L=R.tail;for(var B=null;L!==null;)L.alternate!==null&&(B=L),L=L.sibling;B===null?A||R.tail===null?R.tail=null:R.tail.sibling=null:B.sibling=null}}function Wt(R){var A=R.alternate!==null&&R.alternate.child===R.child,L=0,B=0;if(A)for(var V=R.child;V!==null;)L|=V.lanes|V.childLanes,B|=V.subtreeFlags&14680064,B|=V.flags&14680064,V.return=R,V=V.sibling;else for(V=R.child;V!==null;)L|=V.lanes|V.childLanes,B|=V.subtreeFlags,B|=V.flags,V.return=R,V=V.sibling;return R.subtreeFlags|=B,R.childLanes=L,A}function ph(R,A,L){var B=A.pendingProps;switch(Wa(A),A.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Wt(A),null;case 1:return en(A.type)&&Ts(),Wt(A),null;case 3:return B=A.stateNode,Yi(),St(Jt),St(qt),ao(),B.pendingContext&&(B.context=B.pendingContext,B.pendingContext=null),(R===null||R.child===null)&&(Os(A)?A.flags|=4:R===null||R.memoizedState.isDehydrated&&(A.flags&256)===0||(A.flags|=1024,En!==null&&(Ho(En),En=null))),_o(R,A),Wt(A),null;case 5:ro(A);var V=yi(Lr.current);if(L=A.type,R!==null&&A.stateNode!=null)ku(R,A,L,B,V),R.ref!==A.ref&&(A.flags|=512,A.flags|=2097152);else{if(!B){if(A.stateNode===null)throw Error(g(166));return Wt(A),null}if(R=yi(On.current),Os(A)){B=A.stateNode,L=A.type;var G=A.memoizedProps;switch(B[In]=A,B[Ar]=G,R=(A.mode&1)!==0,L){case"dialog":Ct("cancel",B),Ct("close",B);break;case"iframe":case"object":case"embed":Ct("load",B);break;case"video":case"audio":for(V=0;V<Pr.length;V++)Ct(Pr[V],B);break;case"source":Ct("error",B);break;case"img":case"image":case"link":Ct("error",B),Ct("load",B);break;case"details":Ct("toggle",B);break;case"input":Le(B,G),Ct("invalid",B);break;case"select":B._wrapperState={wasMultiple:!!G.multiple},Ct("invalid",B);break;case"textarea":et(B,G),Ct("invalid",B)}bt(L,G),V=null;for(var Y in G)if(G.hasOwnProperty(Y)){var ie=G[Y];Y==="children"?typeof ie=="string"?B.textContent!==ie&&(G.suppressHydrationWarning!==!0&&ws(B.textContent,ie,R),V=["children",ie]):typeof ie=="number"&&B.textContent!==""+ie&&(G.suppressHydrationWarning!==!0&&ws(B.textContent,ie,R),V=["children",""+ie]):b.hasOwnProperty(Y)&&ie!=null&&Y==="onScroll"&&Ct("scroll",B)}switch(L){case"input":Fe(B),dt(B,G,!0);break;case"textarea":Fe(B),xt(B);break;case"select":case"option":break;default:typeof G.onClick=="function"&&(B.onclick=Cs)}B=V,A.updateQueue=B,B!==null&&(A.flags|=4)}else{Y=V.nodeType===9?V:V.ownerDocument,R==="http://www.w3.org/1999/xhtml"&&(R=Ke(L)),R==="http://www.w3.org/1999/xhtml"?L==="script"?(R=Y.createElement("div"),R.innerHTML="<script><\/script>",R=R.removeChild(R.firstChild)):typeof B.is=="string"?R=Y.createElement(L,{is:B.is}):(R=Y.createElement(L),L==="select"&&(Y=R,B.multiple?Y.multiple=!0:B.size&&(Y.size=B.size))):R=Y.createElementNS(R,L),R[In]=A,R[Ar]=B,Du(R,A,!1,!1),A.stateNode=R;e:{switch(Y=ut(L,B),L){case"dialog":Ct("cancel",R),Ct("close",R),V=B;break;case"iframe":case"object":case"embed":Ct("load",R),V=B;break;case"video":case"audio":for(V=0;V<Pr.length;V++)Ct(Pr[V],R);V=B;break;case"source":Ct("error",R),V=B;break;case"img":case"image":case"link":Ct("error",R),Ct("load",R),V=B;break;case"details":Ct("toggle",R),V=B;break;case"input":Le(R,B),V=rt(R,B),Ct("invalid",R);break;case"option":V=B;break;case"select":R._wrapperState={wasMultiple:!!B.multiple},V=pe({},B,{value:void 0}),Ct("invalid",R);break;case"textarea":et(R,B),V=lt(R,B),Ct("invalid",R);break;default:V=B}bt(L,V),ie=V;for(G in ie)if(ie.hasOwnProperty(G)){var fe=ie[G];G==="style"?Ye(R,fe):G==="dangerouslySetInnerHTML"?(fe=fe?fe.__html:void 0,fe!=null&&vt(R,fe)):G==="children"?typeof fe=="string"?(L!=="textarea"||fe!=="")&&pt(R,fe):typeof fe=="number"&&pt(R,""+fe):G!=="suppressContentEditableWarning"&&G!=="suppressHydrationWarning"&&G!=="autoFocus"&&(b.hasOwnProperty(G)?fe!=null&&G==="onScroll"&&Ct("scroll",R):fe!=null&&W(R,G,fe,Y))}switch(L){case"input":Fe(R),dt(R,B,!1);break;case"textarea":Fe(R),xt(R);break;case"option":B.value!=null&&R.setAttribute("value",""+Ae(B.value));break;case"select":R.multiple=!!B.multiple,G=B.value,G!=null?be(R,!!B.multiple,G,!1):B.defaultValue!=null&&be(R,!!B.multiple,B.defaultValue,!0);break;default:typeof V.onClick=="function"&&(R.onclick=Cs)}switch(L){case"button":case"input":case"select":case"textarea":B=!!B.autoFocus;break e;case"img":B=!0;break e;default:B=!1}}B&&(A.flags|=4)}A.ref!==null&&(A.flags|=512,A.flags|=2097152)}return Wt(A),null;case 6:if(R&&A.stateNode!=null)Lu(R,A,R.memoizedProps,B);else{if(typeof B!="string"&&A.stateNode===null)throw Error(g(166));if(L=yi(Lr.current),yi(On.current),Os(A)){if(B=A.stateNode,L=A.memoizedProps,B[In]=A,(G=B.nodeValue!==L)&&(R=on,R!==null))switch(R.tag){case 3:ws(B.nodeValue,L,(R.mode&1)!==0);break;case 5:R.memoizedProps.suppressHydrationWarning!==!0&&ws(B.nodeValue,L,(R.mode&1)!==0)}G&&(A.flags|=4)}else B=(L.nodeType===9?L:L.ownerDocument).createTextNode(B),B[In]=A,A.stateNode=B}return Wt(A),null;case 13:if(St(It),B=A.memoizedState,R===null||R.memoizedState!==null&&R.memoizedState.dehydrated!==null){if(Rt&&ln!==null&&(A.mode&1)!==0&&(A.flags&128)===0)Bl(),Wi(),A.flags|=98560,G=!1;else if(G=Os(A),B!==null&&B.dehydrated!==null){if(R===null){if(!G)throw Error(g(318));if(G=A.memoizedState,G=G!==null?G.dehydrated:null,!G)throw Error(g(317));G[In]=A}else Wi(),(A.flags&128)===0&&(A.memoizedState=null),A.flags|=4;Wt(A),G=!1}else En!==null&&(Ho(En),En=null),G=!0;if(!G)return A.flags&65536?A:null}return(A.flags&128)!==0?(A.lanes=L,A):(B=B!==null,B!==(R!==null&&R.memoizedState!==null)&&B&&(A.child.flags|=8192,(A.mode&1)!==0&&(R===null||(It.current&1)!==0?Lt===0&&(Lt=3):jo())),A.updateQueue!==null&&(A.flags|=4),Wt(A),null);case 4:return Yi(),_o(R,A),R===null&&Ir(A.stateNode.containerInfo),Wt(A),null;case 10:return Ja(A.type._context),Wt(A),null;case 17:return en(A.type)&&Ts(),Wt(A),null;case 19:if(St(It),G=A.memoizedState,G===null)return Wt(A),null;if(B=(A.flags&128)!==0,Y=G.rendering,Y===null)if(B)$r(G,!1);else{if(Lt!==0||R!==null&&(R.flags&128)!==0)for(R=A.child;R!==null;){if(Y=Ls(R),Y!==null){for(A.flags|=128,$r(G,!1),B=Y.updateQueue,B!==null&&(A.updateQueue=B,A.flags|=4),A.subtreeFlags=0,B=L,L=A.child;L!==null;)G=L,R=B,G.flags&=14680066,Y=G.alternate,Y===null?(G.childLanes=0,G.lanes=R,G.child=null,G.subtreeFlags=0,G.memoizedProps=null,G.memoizedState=null,G.updateQueue=null,G.dependencies=null,G.stateNode=null):(G.childLanes=Y.childLanes,G.lanes=Y.lanes,G.child=Y.child,G.subtreeFlags=0,G.deletions=null,G.memoizedProps=Y.memoizedProps,G.memoizedState=Y.memoizedState,G.updateQueue=Y.updateQueue,G.type=Y.type,R=Y.dependencies,G.dependencies=R===null?null:{lanes:R.lanes,firstContext:R.firstContext}),L=L.sibling;return Et(It,It.current&1|2),A.child}R=R.sibling}G.tail!==null&&Pt()>tr&&(A.flags|=128,B=!0,$r(G,!1),A.lanes=4194304)}else{if(!B)if(R=Ls(Y),R!==null){if(A.flags|=128,B=!0,L=R.updateQueue,L!==null&&(A.updateQueue=L,A.flags|=4),$r(G,!0),G.tail===null&&G.tailMode==="hidden"&&!Y.alternate&&!Rt)return Wt(A),null}else 2*Pt()-G.renderingStartTime>tr&&L!==1073741824&&(A.flags|=128,B=!0,$r(G,!1),A.lanes=4194304);G.isBackwards?(Y.sibling=A.child,A.child=Y):(L=G.last,L!==null?L.sibling=Y:A.child=Y,G.last=Y)}return G.tail!==null?(A=G.tail,G.rendering=A,G.tail=A.sibling,G.renderingStartTime=Pt(),A.sibling=null,L=It.current,Et(It,B?L&1|2:L&1),A):(Wt(A),null);case 22:case 23:return Bo(),B=A.memoizedState!==null,R!==null&&R.memoizedState!==null!==B&&(A.flags|=8192),B&&(A.mode&1)!==0?(un&1073741824)!==0&&(Wt(A),A.subtreeFlags&6&&(A.flags|=8192)):Wt(A),null;case 24:return null;case 25:return null}throw Error(g(156,A.tag))}function gh(R,A){switch(Wa(A),A.tag){case 1:return en(A.type)&&Ts(),R=A.flags,R&65536?(A.flags=R&-65537|128,A):null;case 3:return Yi(),St(Jt),St(qt),ao(),R=A.flags,(R&65536)!==0&&(R&128)===0?(A.flags=R&-65537|128,A):null;case 5:return ro(A),null;case 13:if(St(It),R=A.memoizedState,R!==null&&R.dehydrated!==null){if(A.alternate===null)throw Error(g(340));Wi()}return R=A.flags,R&65536?(A.flags=R&-65537|128,A):null;case 19:return St(It),null;case 4:return Yi(),null;case 10:return Ja(A.type._context),null;case 22:case 23:return Bo(),null;case 24:return null;default:return null}}var qs=!1,Zt=!1,mh=typeof WeakSet=="function"?WeakSet:Set,$e=null;function Ji(R,A){var L=R.ref;if(L!==null)if(typeof L=="function")try{L(null)}catch(B){Mt(R,A,B)}else L.current=null}function Ro(R,A,L){try{L()}catch(B){Mt(R,A,B)}}var Hu=!1;function yh(R,A){if(Fa=wt,R=gl(),Oa(R)){if("selectionStart"in R)var L={start:R.selectionStart,end:R.selectionEnd};else e:{L=(L=R.ownerDocument)&&L.defaultView||window;var B=L.getSelection&&L.getSelection();if(B&&B.rangeCount!==0){L=B.anchorNode;var V=B.anchorOffset,G=B.focusNode;B=B.focusOffset;try{L.nodeType,G.nodeType}catch{L=null;break e}var Y=0,ie=-1,fe=-1,Se=0,Oe=0,Me=R,Ie=null;t:for(;;){for(var je;Me!==L||V!==0&&Me.nodeType!==3||(ie=Y+V),Me!==G||B!==0&&Me.nodeType!==3||(fe=Y+B),Me.nodeType===3&&(Y+=Me.nodeValue.length),(je=Me.firstChild)!==null;)Ie=Me,Me=je;for(;;){if(Me===R)break t;if(Ie===L&&++Se===V&&(ie=Y),Ie===G&&++Oe===B&&(fe=Y),(je=Me.nextSibling)!==null)break;Me=Ie,Ie=Me.parentNode}Me=je}L=ie===-1||fe===-1?null:{start:ie,end:fe}}else L=null}L=L||{start:0,end:0}}else L=null;for(Ba={focusedElem:R,selectionRange:L},wt=!1,$e=A;$e!==null;)if(A=$e,R=A.child,(A.subtreeFlags&1028)!==0&&R!==null)R.return=A,$e=R;else for(;$e!==null;){A=$e;try{var Ve=A.alternate;if((A.flags&1024)!==0)switch(A.tag){case 0:case 11:case 15:break;case 1:if(Ve!==null){var Ge=Ve.memoizedProps,Nt=Ve.memoizedState,ve=A.stateNode,me=ve.getSnapshotBeforeUpdate(A.elementType===A.type?Ge:bn(A.type,Ge),Nt);ve.__reactInternalSnapshotBeforeUpdate=me}break;case 3:var Ee=A.stateNode.containerInfo;Ee.nodeType===1?Ee.textContent="":Ee.nodeType===9&&Ee.documentElement&&Ee.removeChild(Ee.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(g(163))}}catch(ke){Mt(A,A.return,ke)}if(R=A.sibling,R!==null){R.return=A.return,$e=R;break}$e=A.return}return Ve=Hu,Hu=!1,Ve}function Vr(R,A,L){var B=A.updateQueue;if(B=B!==null?B.lastEffect:null,B!==null){var V=B=B.next;do{if((V.tag&R)===R){var G=V.destroy;V.destroy=void 0,G!==void 0&&Ro(A,L,G)}V=V.next}while(V!==B)}}function Us(R,A){if(A=A.updateQueue,A=A!==null?A.lastEffect:null,A!==null){var L=A=A.next;do{if((L.tag&R)===R){var B=L.create;L.destroy=B()}L=L.next}while(L!==A)}}function Po(R){var A=R.ref;if(A!==null){var L=R.stateNode;switch(R.tag){case 5:R=L;break;default:R=L}typeof A=="function"?A(R):A.current=R}}function Fu(R){var A=R.alternate;A!==null&&(R.alternate=null,Fu(A)),R.child=null,R.deletions=null,R.sibling=null,R.tag===5&&(A=R.stateNode,A!==null&&(delete A[In],delete A[Ar],delete A[za],delete A[Jc],delete A[eh])),R.stateNode=null,R.return=null,R.dependencies=null,R.memoizedProps=null,R.memoizedState=null,R.pendingProps=null,R.stateNode=null,R.updateQueue=null}function Bu(R){return R.tag===5||R.tag===3||R.tag===4}function ju(R){e:for(;;){for(;R.sibling===null;){if(R.return===null||Bu(R.return))return null;R=R.return}for(R.sibling.return=R.return,R=R.sibling;R.tag!==5&&R.tag!==6&&R.tag!==18;){if(R.flags&2||R.child===null||R.tag===4)continue e;R.child.return=R,R=R.child}if(!(R.flags&2))return R.stateNode}}function Io(R,A,L){var B=R.tag;if(B===5||B===6)R=R.stateNode,A?L.nodeType===8?L.parentNode.insertBefore(R,A):L.insertBefore(R,A):(L.nodeType===8?(A=L.parentNode,A.insertBefore(R,L)):(A=L,A.appendChild(R)),L=L._reactRootContainer,L!=null||A.onclick!==null||(A.onclick=Cs));else if(B!==4&&(R=R.child,R!==null))for(Io(R,A,L),R=R.sibling;R!==null;)Io(R,A,L),R=R.sibling}function Oo(R,A,L){var B=R.tag;if(B===5||B===6)R=R.stateNode,A?L.insertBefore(R,A):L.appendChild(R);else if(B!==4&&(R=R.child,R!==null))for(Oo(R,A,L),R=R.sibling;R!==null;)Oo(R,A,L),R=R.sibling}var jt=null,wn=!1;function Kn(R,A,L){for(L=L.child;L!==null;)$u(R,A,L),L=L.sibling}function $u(R,A,L){if(hn&&typeof hn.onCommitFiberUnmount=="function")try{hn.onCommitFiberUnmount(Ri,L)}catch{}switch(L.tag){case 5:Zt||Ji(L,A);case 6:var B=jt,V=wn;jt=null,Kn(R,A,L),jt=B,wn=V,jt!==null&&(wn?(R=jt,L=L.stateNode,R.nodeType===8?R.parentNode.removeChild(L):R.removeChild(L)):jt.removeChild(L.stateNode));break;case 18:jt!==null&&(wn?(R=jt,L=L.stateNode,R.nodeType===8?Va(R.parentNode,L):R.nodeType===1&&Va(R,L),Pe(R)):Va(jt,L.stateNode));break;case 4:B=jt,V=wn,jt=L.stateNode.containerInfo,wn=!0,Kn(R,A,L),jt=B,wn=V;break;case 0:case 11:case 14:case 15:if(!Zt&&(B=L.updateQueue,B!==null&&(B=B.lastEffect,B!==null))){V=B=B.next;do{var G=V,Y=G.destroy;G=G.tag,Y!==void 0&&((G&2)!==0||(G&4)!==0)&&Ro(L,A,Y),V=V.next}while(V!==B)}Kn(R,A,L);break;case 1:if(!Zt&&(Ji(L,A),B=L.stateNode,typeof B.componentWillUnmount=="function"))try{B.props=L.memoizedProps,B.state=L.memoizedState,B.componentWillUnmount()}catch(ie){Mt(L,A,ie)}Kn(R,A,L);break;case 21:Kn(R,A,L);break;case 22:L.mode&1?(Zt=(B=Zt)||L.memoizedState!==null,Kn(R,A,L),Zt=B):Kn(R,A,L);break;default:Kn(R,A,L)}}function Vu(R){var A=R.updateQueue;if(A!==null){R.updateQueue=null;var L=R.stateNode;L===null&&(L=R.stateNode=new mh),A.forEach(function(B){var V=_h.bind(null,R,B);L.has(B)||(L.add(B),B.then(V,V))})}}function Cn(R,A){var L=A.deletions;if(L!==null)for(var B=0;B<L.length;B++){var V=L[B];try{var G=R,Y=A,ie=Y;e:for(;ie!==null;){switch(ie.tag){case 5:jt=ie.stateNode,wn=!1;break e;case 3:jt=ie.stateNode.containerInfo,wn=!0;break e;case 4:jt=ie.stateNode.containerInfo,wn=!0;break e}ie=ie.return}if(jt===null)throw Error(g(160));$u(G,Y,V),jt=null,wn=!1;var fe=V.alternate;fe!==null&&(fe.return=null),V.return=null}catch(Se){Mt(V,A,Se)}}if(A.subtreeFlags&12854)for(A=A.child;A!==null;)zu(A,R),A=A.sibling}function zu(R,A){var L=R.alternate,B=R.flags;switch(R.tag){case 0:case 11:case 14:case 15:if(Cn(A,R),Mn(R),B&4){try{Vr(3,R,R.return),Us(3,R)}catch(Ge){Mt(R,R.return,Ge)}try{Vr(5,R,R.return)}catch(Ge){Mt(R,R.return,Ge)}}break;case 1:Cn(A,R),Mn(R),B&512&&L!==null&&Ji(L,L.return);break;case 5:if(Cn(A,R),Mn(R),B&512&&L!==null&&Ji(L,L.return),R.flags&32){var V=R.stateNode;try{pt(V,"")}catch(Ge){Mt(R,R.return,Ge)}}if(B&4&&(V=R.stateNode,V!=null)){var G=R.memoizedProps,Y=L!==null?L.memoizedProps:G,ie=R.type,fe=R.updateQueue;if(R.updateQueue=null,fe!==null)try{ie==="input"&&G.type==="radio"&&G.name!=null&&nt(V,G),ut(ie,Y);var Se=ut(ie,G);for(Y=0;Y<fe.length;Y+=2){var Oe=fe[Y],Me=fe[Y+1];Oe==="style"?Ye(V,Me):Oe==="dangerouslySetInnerHTML"?vt(V,Me):Oe==="children"?pt(V,Me):W(V,Oe,Me,Se)}switch(ie){case"input":qe(V,G);break;case"textarea":tt(V,G);break;case"select":var Ie=V._wrapperState.wasMultiple;V._wrapperState.wasMultiple=!!G.multiple;var je=G.value;je!=null?be(V,!!G.multiple,je,!1):Ie!==!!G.multiple&&(G.defaultValue!=null?be(V,!!G.multiple,G.defaultValue,!0):be(V,!!G.multiple,G.multiple?[]:"",!1))}V[Ar]=G}catch(Ge){Mt(R,R.return,Ge)}}break;case 6:if(Cn(A,R),Mn(R),B&4){if(R.stateNode===null)throw Error(g(162));V=R.stateNode,G=R.memoizedProps;try{V.nodeValue=G}catch(Ge){Mt(R,R.return,Ge)}}break;case 3:if(Cn(A,R),Mn(R),B&4&&L!==null&&L.memoizedState.isDehydrated)try{Pe(A.containerInfo)}catch(Ge){Mt(R,R.return,Ge)}break;case 4:Cn(A,R),Mn(R);break;case 13:Cn(A,R),Mn(R),V=R.child,V.flags&8192&&(G=V.memoizedState!==null,V.stateNode.isHidden=G,!G||V.alternate!==null&&V.alternate.memoizedState!==null||(No=Pt())),B&4&&Vu(R);break;case 22:if(Oe=L!==null&&L.memoizedState!==null,R.mode&1?(Zt=(Se=Zt)||Oe,Cn(A,R),Zt=Se):Cn(A,R),Mn(R),B&8192){if(Se=R.memoizedState!==null,(R.stateNode.isHidden=Se)&&!Oe&&(R.mode&1)!==0)for($e=R,Oe=R.child;Oe!==null;){for(Me=$e=Oe;$e!==null;){switch(Ie=$e,je=Ie.child,Ie.tag){case 0:case 11:case 14:case 15:Vr(4,Ie,Ie.return);break;case 1:Ji(Ie,Ie.return);var Ve=Ie.stateNode;if(typeof Ve.componentWillUnmount=="function"){B=Ie,L=Ie.return;try{A=B,Ve.props=A.memoizedProps,Ve.state=A.memoizedState,Ve.componentWillUnmount()}catch(Ge){Mt(B,L,Ge)}}break;case 5:Ji(Ie,Ie.return);break;case 22:if(Ie.memoizedState!==null){Uu(Me);continue}}je!==null?(je.return=Ie,$e=je):Uu(Me)}Oe=Oe.sibling}e:for(Oe=null,Me=R;;){if(Me.tag===5){if(Oe===null){Oe=Me;try{V=Me.stateNode,Se?(G=V.style,typeof G.setProperty=="function"?G.setProperty("display","none","important"):G.display="none"):(ie=Me.stateNode,fe=Me.memoizedProps.style,Y=fe!=null&&fe.hasOwnProperty("display")?fe.display:null,ie.style.display=He("display",Y))}catch(Ge){Mt(R,R.return,Ge)}}}else if(Me.tag===6){if(Oe===null)try{Me.stateNode.nodeValue=Se?"":Me.memoizedProps}catch(Ge){Mt(R,R.return,Ge)}}else if((Me.tag!==22&&Me.tag!==23||Me.memoizedState===null||Me===R)&&Me.child!==null){Me.child.return=Me,Me=Me.child;continue}if(Me===R)break e;for(;Me.sibling===null;){if(Me.return===null||Me.return===R)break e;Oe===Me&&(Oe=null),Me=Me.return}Oe===Me&&(Oe=null),Me.sibling.return=Me.return,Me=Me.sibling}}break;case 19:Cn(A,R),Mn(R),B&4&&Vu(R);break;case 21:break;default:Cn(A,R),Mn(R)}}function Mn(R){var A=R.flags;if(A&2){try{e:{for(var L=R.return;L!==null;){if(Bu(L)){var B=L;break e}L=L.return}throw Error(g(160))}switch(B.tag){case 5:var V=B.stateNode;B.flags&32&&(pt(V,""),B.flags&=-33);var G=ju(R);Oo(R,G,V);break;case 3:case 4:var Y=B.stateNode.containerInfo,ie=ju(R);Io(R,ie,Y);break;default:throw Error(g(161))}}catch(fe){Mt(R,R.return,fe)}R.flags&=-3}A&4096&&(R.flags&=-4097)}function vh(R,A,L){$e=R,Gu(R)}function Gu(R,A,L){for(var B=(R.mode&1)!==0;$e!==null;){var V=$e,G=V.child;if(V.tag===22&&B){var Y=V.memoizedState!==null||qs;if(!Y){var ie=V.alternate,fe=ie!==null&&ie.memoizedState!==null||Zt;ie=qs;var Se=Zt;if(qs=Y,(Zt=fe)&&!Se)for($e=V;$e!==null;)Y=$e,fe=Y.child,Y.tag===22&&Y.memoizedState!==null?Wu(V):fe!==null?(fe.return=Y,$e=fe):Wu(V);for(;G!==null;)$e=G,Gu(G),G=G.sibling;$e=V,qs=ie,Zt=Se}qu(R)}else(V.subtreeFlags&8772)!==0&&G!==null?(G.return=V,$e=G):qu(R)}}function qu(R){for(;$e!==null;){var A=$e;if((A.flags&8772)!==0){var L=A.alternate;try{if((A.flags&8772)!==0)switch(A.tag){case 0:case 11:case 15:Zt||Us(5,A);break;case 1:var B=A.stateNode;if(A.flags&4&&!Zt)if(L===null)B.componentDidMount();else{var V=A.elementType===A.type?L.memoizedProps:bn(A.type,L.memoizedProps);B.componentDidUpdate(V,L.memoizedState,B.__reactInternalSnapshotBeforeUpdate)}var G=A.updateQueue;G!==null&&Ul(A,G,B);break;case 3:var Y=A.updateQueue;if(Y!==null){if(L=null,A.child!==null)switch(A.child.tag){case 5:L=A.child.stateNode;break;case 1:L=A.child.stateNode}Ul(A,Y,L)}break;case 5:var ie=A.stateNode;if(L===null&&A.flags&4){L=ie;var fe=A.memoizedProps;switch(A.type){case"button":case"input":case"select":case"textarea":fe.autoFocus&&L.focus();break;case"img":fe.src&&(L.src=fe.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(A.memoizedState===null){var Se=A.alternate;if(Se!==null){var Oe=Se.memoizedState;if(Oe!==null){var Me=Oe.dehydrated;Me!==null&&Pe(Me)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(g(163))}Zt||A.flags&512&&Po(A)}catch(Ie){Mt(A,A.return,Ie)}}if(A===R){$e=null;break}if(L=A.sibling,L!==null){L.return=A.return,$e=L;break}$e=A.return}}function Uu(R){for(;$e!==null;){var A=$e;if(A===R){$e=null;break}var L=A.sibling;if(L!==null){L.return=A.return,$e=L;break}$e=A.return}}function Wu(R){for(;$e!==null;){var A=$e;try{switch(A.tag){case 0:case 11:case 15:var L=A.return;try{Us(4,A)}catch(fe){Mt(A,L,fe)}break;case 1:var B=A.stateNode;if(typeof B.componentDidMount=="function"){var V=A.return;try{B.componentDidMount()}catch(fe){Mt(A,V,fe)}}var G=A.return;try{Po(A)}catch(fe){Mt(A,G,fe)}break;case 5:var Y=A.return;try{Po(A)}catch(fe){Mt(A,Y,fe)}}}catch(fe){Mt(A,A.return,fe)}if(A===R){$e=null;break}var ie=A.sibling;if(ie!==null){ie.return=A.return,$e=ie;break}$e=A.return}}var xh=Math.ceil,Ws=q.ReactCurrentDispatcher,Ao=q.ReactCurrentOwner,mn=q.ReactCurrentBatchConfig,gt=0,Ft=null,Dt=null,$t=0,un=0,er=qn(0),Lt=0,zr=null,xi=0,Zs=0,Mo=0,Gr=null,nn=null,No=0,tr=1/0,$n=null,Xs=!1,Do=null,Yn=null,Ks=!1,Qn=null,Ys=0,qr=0,ko=null,Qs=-1,Js=0;function Yt(){return(gt&6)!==0?Pt():Qs!==-1?Qs:Qs=Pt()}function Jn(R){return(R.mode&1)===0?1:(gt&2)!==0&&$t!==0?$t&-$t:nh.transition!==null?(Js===0&&(Js=rs()),Js):(R=yt,R!==0||(R=window.event,R=R===void 0?16:xr(R.type)),R)}function Sn(R,A,L,B){if(50<qr)throw qr=0,ko=null,Error(g(185));li(R,L,B),((gt&2)===0||R!==Ft)&&(R===Ft&&((gt&2)===0&&(Zs|=L),Lt===4&&ei(R,$t)),rn(R,B),L===1&&gt===0&&(A.mode&1)===0&&(tr=Pt()+500,Rs&&Wn()))}function rn(R,A){var L=R.callbackNode;va(R,A);var B=Oi(R,R===Ft?$t:0);if(B===0)L!==null&&hr(L),R.callbackNode=null,R.callbackPriority=0;else if(A=B&-B,R.callbackPriority!==A){if(L!=null&&hr(L),A===1)R.tag===0?th(Xu.bind(null,R)):Dl(Xu.bind(null,R)),Yc(function(){(gt&6)===0&&Wn()}),L=null;else{switch(ss(B)){case 1:L=dr;break;case 4:L=ts;break;case 16:L=ai;break;case 536870912:L=ns;break;default:L=ai}L=ic(L,Zu.bind(null,R))}R.callbackPriority=A,R.callbackNode=L}}function Zu(R,A){if(Qs=-1,Js=0,(gt&6)!==0)throw Error(g(327));var L=R.callbackNode;if(nr()&&R.callbackNode!==L)return null;var B=Oi(R,R===Ft?$t:0);if(B===0)return null;if((B&30)!==0||(B&R.expiredLanes)!==0||A)A=ea(R,B);else{A=B;var V=gt;gt|=2;var G=Yu();(Ft!==R||$t!==A)&&($n=null,tr=Pt()+500,bi(R,A));do try{wh();break}catch(ie){Ku(R,ie)}while(!0);Qa(),Ws.current=G,gt=V,Dt!==null?A=0:(Ft=null,$t=0,A=Lt)}if(A!==0){if(A===2&&(V=fr(R),V!==0&&(B=V,A=Lo(R,V))),A===1)throw L=zr,bi(R,0),ei(R,B),rn(R,Pt()),L;if(A===6)ei(R,B);else{if(V=R.current.alternate,(B&30)===0&&!Eh(V)&&(A=ea(R,B),A===2&&(G=fr(R),G!==0&&(B=G,A=Lo(R,G))),A===1))throw L=zr,bi(R,0),ei(R,B),rn(R,Pt()),L;switch(R.finishedWork=V,R.finishedLanes=B,A){case 0:case 1:throw Error(g(345));case 2:wi(R,nn,$n);break;case 3:if(ei(R,B),(B&130023424)===B&&(A=No+500-Pt(),10<A)){if(Oi(R,0)!==0)break;if(V=R.suspendedLanes,(V&B)!==B){Yt(),R.pingedLanes|=R.suspendedLanes&V;break}R.timeoutHandle=$a(wi.bind(null,R,nn,$n),A);break}wi(R,nn,$n);break;case 4:if(ei(R,B),(B&4194240)===B)break;for(A=R.eventTimes,V=-1;0<B;){var Y=31-sn(B);G=1<<Y,Y=A[Y],Y>V&&(V=Y),B&=~G}if(B=V,B=Pt()-B,B=(120>B?120:480>B?480:1080>B?1080:1920>B?1920:3e3>B?3e3:4320>B?4320:1960*xh(B/1960))-B,10<B){R.timeoutHandle=$a(wi.bind(null,R,nn,$n),B);break}wi(R,nn,$n);break;case 5:wi(R,nn,$n);break;default:throw Error(g(329))}}}return rn(R,Pt()),R.callbackNode===L?Zu.bind(null,R):null}function Lo(R,A){var L=Gr;return R.current.memoizedState.isDehydrated&&(bi(R,A).flags|=256),R=ea(R,A),R!==2&&(A=nn,nn=L,A!==null&&Ho(A)),R}function Ho(R){nn===null?nn=R:nn.push.apply(nn,R)}function Eh(R){for(var A=R;;){if(A.flags&16384){var L=A.updateQueue;if(L!==null&&(L=L.stores,L!==null))for(var B=0;B<L.length;B++){var V=L[B],G=V.getSnapshot;V=V.value;try{if(!xn(G(),V))return!1}catch{return!1}}}if(L=A.child,A.subtreeFlags&16384&&L!==null)L.return=A,A=L;else{if(A===R)break;for(;A.sibling===null;){if(A.return===null||A.return===R)return!0;A=A.return}A.sibling.return=A.return,A=A.sibling}}return!0}function ei(R,A){for(A&=~Mo,A&=~Zs,R.suspendedLanes|=A,R.pingedLanes&=~A,R=R.expirationTimes;0<A;){var L=31-sn(A),B=1<<L;R[L]=-1,A&=~B}}function Xu(R){if((gt&6)!==0)throw Error(g(327));nr();var A=Oi(R,0);if((A&1)===0)return rn(R,Pt()),null;var L=ea(R,A);if(R.tag!==0&&L===2){var B=fr(R);B!==0&&(A=B,L=Lo(R,B))}if(L===1)throw L=zr,bi(R,0),ei(R,A),rn(R,Pt()),L;if(L===6)throw Error(g(345));return R.finishedWork=R.current.alternate,R.finishedLanes=A,wi(R,nn,$n),rn(R,Pt()),null}function Fo(R,A){var L=gt;gt|=1;try{return R(A)}finally{gt=L,gt===0&&(tr=Pt()+500,Rs&&Wn())}}function Ei(R){Qn!==null&&Qn.tag===0&&(gt&6)===0&&nr();var A=gt;gt|=1;var L=mn.transition,B=yt;try{if(mn.transition=null,yt=1,R)return R()}finally{yt=B,mn.transition=L,gt=A,(gt&6)===0&&Wn()}}function Bo(){un=er.current,St(er)}function bi(R,A){R.finishedWork=null,R.finishedLanes=0;var L=R.timeoutHandle;if(L!==-1&&(R.timeoutHandle=-1,Kc(L)),Dt!==null)for(L=Dt.return;L!==null;){var B=L;switch(Wa(B),B.tag){case 1:B=B.type.childContextTypes,B!=null&&Ts();break;case 3:Yi(),St(Jt),St(qt),ao();break;case 5:ro(B);break;case 4:Yi();break;case 13:St(It);break;case 19:St(It);break;case 10:Ja(B.type._context);break;case 22:case 23:Bo()}L=L.return}if(Ft=R,Dt=R=ti(R.current,null),$t=un=A,Lt=0,zr=null,Mo=Zs=xi=0,nn=Gr=null,mi!==null){for(A=0;A<mi.length;A++)if(L=mi[A],B=L.interleaved,B!==null){L.interleaved=null;var V=B.next,G=L.pending;if(G!==null){var Y=G.next;G.next=V,B.next=Y}L.pending=B}mi=null}return R}function Ku(R,A){do{var L=Dt;try{if(Qa(),Hs.current=$s,Fs){for(var B=Ot.memoizedState;B!==null;){var V=B.queue;V!==null&&(V.pending=null),B=B.next}Fs=!1}if(vi=0,Ht=kt=Ot=null,Hr=!1,Fr=0,Ao.current=null,L===null||L.return===null){Lt=1,zr=A,Dt=null;break}e:{var G=R,Y=L.return,ie=L,fe=A;if(A=$t,ie.flags|=32768,fe!==null&&typeof fe=="object"&&typeof fe.then=="function"){var Se=fe,Oe=ie,Me=Oe.tag;if((Oe.mode&1)===0&&(Me===0||Me===11||Me===15)){var Ie=Oe.alternate;Ie?(Oe.updateQueue=Ie.updateQueue,Oe.memoizedState=Ie.memoizedState,Oe.lanes=Ie.lanes):(Oe.updateQueue=null,Oe.memoizedState=null)}var je=bu(Y);if(je!==null){je.flags&=-257,wu(je,Y,ie,G,A),je.mode&1&&Eu(G,Se,A),A=je,fe=Se;var Ve=A.updateQueue;if(Ve===null){var Ge=new Set;Ge.add(fe),A.updateQueue=Ge}else Ve.add(fe);break e}else{if((A&1)===0){Eu(G,Se,A),jo();break e}fe=Error(g(426))}}else if(Rt&&ie.mode&1){var Nt=bu(Y);if(Nt!==null){(Nt.flags&65536)===0&&(Nt.flags|=256),wu(Nt,Y,ie,G,A),Ka(Qi(fe,ie));break e}}G=fe=Qi(fe,ie),Lt!==4&&(Lt=2),Gr===null?Gr=[G]:Gr.push(G),G=Y;do{switch(G.tag){case 3:G.flags|=65536,A&=-A,G.lanes|=A;var ve=vu(G,fe,A);ql(G,ve);break e;case 1:ie=fe;var me=G.type,Ee=G.stateNode;if((G.flags&128)===0&&(typeof me.getDerivedStateFromError=="function"||Ee!==null&&typeof Ee.componentDidCatch=="function"&&(Yn===null||!Yn.has(Ee)))){G.flags|=65536,A&=-A,G.lanes|=A;var ke=xu(G,ie,A);ql(G,ke);break e}}G=G.return}while(G!==null)}Ju(L)}catch(Ue){A=Ue,Dt===L&&L!==null&&(Dt=L=L.return);continue}break}while(!0)}function Yu(){var R=Ws.current;return Ws.current=$s,R===null?$s:R}function jo(){(Lt===0||Lt===3||Lt===2)&&(Lt=4),Ft===null||(xi&268435455)===0&&(Zs&268435455)===0||ei(Ft,$t)}function ea(R,A){var L=gt;gt|=2;var B=Yu();(Ft!==R||$t!==A)&&($n=null,bi(R,A));do try{bh();break}catch(V){Ku(R,V)}while(!0);if(Qa(),gt=L,Ws.current=B,Dt!==null)throw Error(g(261));return Ft=null,$t=0,Lt}function bh(){for(;Dt!==null;)Qu(Dt)}function wh(){for(;Dt!==null&&!Jr();)Qu(Dt)}function Qu(R){var A=nc(R.alternate,R,un);R.memoizedProps=R.pendingProps,A===null?Ju(R):Dt=A,Ao.current=null}function Ju(R){var A=R;do{var L=A.alternate;if(R=A.return,(A.flags&32768)===0){if(L=ph(L,A,un),L!==null){Dt=L;return}}else{if(L=gh(L,A),L!==null){L.flags&=32767,Dt=L;return}if(R!==null)R.flags|=32768,R.subtreeFlags=0,R.deletions=null;else{Lt=6,Dt=null;return}}if(A=A.sibling,A!==null){Dt=A;return}Dt=A=R}while(A!==null);Lt===0&&(Lt=5)}function wi(R,A,L){var B=yt,V=mn.transition;try{mn.transition=null,yt=1,Ch(R,A,L,B)}finally{mn.transition=V,yt=B}return null}function Ch(R,A,L,B){do nr();while(Qn!==null);if((gt&6)!==0)throw Error(g(327));L=R.finishedWork;var V=R.finishedLanes;if(L===null)return null;if(R.finishedWork=null,R.finishedLanes=0,L===R.current)throw Error(g(177));R.callbackNode=null,R.callbackPriority=0;var G=L.lanes|L.childLanes;if(xa(R,G),R===Ft&&(Dt=Ft=null,$t=0),(L.subtreeFlags&2064)===0&&(L.flags&2064)===0||Ks||(Ks=!0,ic(ai,function(){return nr(),null})),G=(L.flags&15990)!==0,(L.subtreeFlags&15990)!==0||G){G=mn.transition,mn.transition=null;var Y=yt;yt=1;var ie=gt;gt|=4,Ao.current=null,yh(R,L),zu(L,R),zc(Ba),wt=!!Fa,Ba=Fa=null,R.current=L,vh(L),es(),gt=ie,yt=Y,mn.transition=G}else R.current=L;if(Ks&&(Ks=!1,Qn=R,Ys=V),G=R.pendingLanes,G===0&&(Yn=null),fa(L.stateNode),rn(R,Pt()),A!==null)for(B=R.onRecoverableError,L=0;L<A.length;L++)V=A[L],B(V.value,{componentStack:V.stack,digest:V.digest});if(Xs)throw Xs=!1,R=Do,Do=null,R;return(Ys&1)!==0&&R.tag!==0&&nr(),G=R.pendingLanes,(G&1)!==0?R===ko?qr++:(qr=0,ko=R):qr=0,Wn(),null}function nr(){if(Qn!==null){var R=ss(Ys),A=mn.transition,L=yt;try{if(mn.transition=null,yt=16>R?16:R,Qn===null)var B=!1;else{if(R=Qn,Qn=null,Ys=0,(gt&6)!==0)throw Error(g(331));var V=gt;for(gt|=4,$e=R.current;$e!==null;){var G=$e,Y=G.child;if(($e.flags&16)!==0){var ie=G.deletions;if(ie!==null){for(var fe=0;fe<ie.length;fe++){var Se=ie[fe];for($e=Se;$e!==null;){var Oe=$e;switch(Oe.tag){case 0:case 11:case 15:Vr(8,Oe,G)}var Me=Oe.child;if(Me!==null)Me.return=Oe,$e=Me;else for(;$e!==null;){Oe=$e;var Ie=Oe.sibling,je=Oe.return;if(Fu(Oe),Oe===Se){$e=null;break}if(Ie!==null){Ie.return=je,$e=Ie;break}$e=je}}}var Ve=G.alternate;if(Ve!==null){var Ge=Ve.child;if(Ge!==null){Ve.child=null;do{var Nt=Ge.sibling;Ge.sibling=null,Ge=Nt}while(Ge!==null)}}$e=G}}if((G.subtreeFlags&2064)!==0&&Y!==null)Y.return=G,$e=Y;else e:for(;$e!==null;){if(G=$e,(G.flags&2048)!==0)switch(G.tag){case 0:case 11:case 15:Vr(9,G,G.return)}var ve=G.sibling;if(ve!==null){ve.return=G.return,$e=ve;break e}$e=G.return}}var me=R.current;for($e=me;$e!==null;){Y=$e;var Ee=Y.child;if((Y.subtreeFlags&2064)!==0&&Ee!==null)Ee.return=Y,$e=Ee;else e:for(Y=me;$e!==null;){if(ie=$e,(ie.flags&2048)!==0)try{switch(ie.tag){case 0:case 11:case 15:Us(9,ie)}}catch(Ue){Mt(ie,ie.return,Ue)}if(ie===Y){$e=null;break e}var ke=ie.sibling;if(ke!==null){ke.return=ie.return,$e=ke;break e}$e=ie.return}}if(gt=V,Wn(),hn&&typeof hn.onPostCommitFiberRoot=="function")try{hn.onPostCommitFiberRoot(Ri,R)}catch{}B=!0}return B}finally{yt=L,mn.transition=A}}return!1}function ec(R,A,L){A=Qi(L,A),A=vu(R,A,1),R=Xn(R,A,1),A=Yt(),R!==null&&(li(R,1,A),rn(R,A))}function Mt(R,A,L){if(R.tag===3)ec(R,R,L);else for(;A!==null;){if(A.tag===3){ec(A,R,L);break}else if(A.tag===1){var B=A.stateNode;if(typeof A.type.getDerivedStateFromError=="function"||typeof B.componentDidCatch=="function"&&(Yn===null||!Yn.has(B))){R=Qi(L,R),R=xu(A,R,1),A=Xn(A,R,1),R=Yt(),A!==null&&(li(A,1,R),rn(A,R));break}}A=A.return}}function Sh(R,A,L){var B=R.pingCache;B!==null&&B.delete(A),A=Yt(),R.pingedLanes|=R.suspendedLanes&L,Ft===R&&($t&L)===L&&(Lt===4||Lt===3&&($t&130023424)===$t&&500>Pt()-No?bi(R,0):Mo|=L),rn(R,A)}function tc(R,A){A===0&&((R.mode&1)===0?A=1:(A=Ii,Ii<<=1,(Ii&130023424)===0&&(Ii=4194304)));var L=Yt();R=Fn(R,A),R!==null&&(li(R,A,L),rn(R,L))}function Th(R){var A=R.memoizedState,L=0;A!==null&&(L=A.retryLane),tc(R,L)}function _h(R,A){var L=0;switch(R.tag){case 13:var B=R.stateNode,V=R.memoizedState;V!==null&&(L=V.retryLane);break;case 19:B=R.stateNode;break;default:throw Error(g(314))}B!==null&&B.delete(A),tc(R,L)}var nc;nc=function(R,A,L){if(R!==null)if(R.memoizedProps!==A.pendingProps||Jt.current)tn=!0;else{if((R.lanes&L)===0&&(A.flags&128)===0)return tn=!1,fh(R,A,L);tn=(R.flags&131072)!==0}else tn=!1,Rt&&(A.flags&1048576)!==0&&kl(A,Is,A.index);switch(A.lanes=0,A.tag){case 2:var B=A.type;Gs(R,A),R=A.pendingProps;var V=Gi(A,qt.current);Ki(A,L),V=uo(null,A,B,R,V,L);var G=co();return A.flags|=1,typeof V=="object"&&V!==null&&typeof V.render=="function"&&V.$$typeof===void 0?(A.tag=1,A.memoizedState=null,A.updateQueue=null,en(B)?(G=!0,_s(A)):G=!1,A.memoizedState=V.state!==null&&V.state!==void 0?V.state:null,no(A),V.updater=Vs,A.stateNode=V,V._reactInternals=A,yo(A,B,R,L),A=bo(null,A,B,!0,G,L)):(A.tag=0,Rt&&G&&Ua(A),Kt(null,A,V,L),A=A.child),A;case 16:B=A.elementType;e:{switch(Gs(R,A),R=A.pendingProps,V=B._init,B=V(B._payload),A.type=B,V=A.tag=Ph(B),R=bn(B,R),V){case 0:A=Eo(null,A,B,R,L);break e;case 1:A=Pu(null,A,B,R,L);break e;case 11:A=Cu(null,A,B,R,L);break e;case 14:A=Su(null,A,B,bn(B.type,R),L);break e}throw Error(g(306,B,""))}return A;case 0:return B=A.type,V=A.pendingProps,V=A.elementType===B?V:bn(B,V),Eo(R,A,B,V,L);case 1:return B=A.type,V=A.pendingProps,V=A.elementType===B?V:bn(B,V),Pu(R,A,B,V,L);case 3:e:{if(Iu(A),R===null)throw Error(g(387));B=A.pendingProps,G=A.memoizedState,V=G.element,Gl(R,A),ks(A,B,null,L);var Y=A.memoizedState;if(B=Y.element,G.isDehydrated)if(G={element:B,isDehydrated:!1,cache:Y.cache,pendingSuspenseBoundaries:Y.pendingSuspenseBoundaries,transitions:Y.transitions},A.updateQueue.baseState=G,A.memoizedState=G,A.flags&256){V=Qi(Error(g(423)),A),A=Ou(R,A,B,L,V);break e}else if(B!==V){V=Qi(Error(g(424)),A),A=Ou(R,A,B,L,V);break e}else for(ln=Gn(A.stateNode.containerInfo.firstChild),on=A,Rt=!0,En=null,L=Vl(A,null,B,L),A.child=L;L;)L.flags=L.flags&-3|4096,L=L.sibling;else{if(Wi(),B===V){A=jn(R,A,L);break e}Kt(R,A,B,L)}A=A.child}return A;case 5:return Wl(A),R===null&&Xa(A),B=A.type,V=A.pendingProps,G=R!==null?R.memoizedProps:null,Y=V.children,ja(B,V)?Y=null:G!==null&&ja(B,G)&&(A.flags|=32),Ru(R,A),Kt(R,A,Y,L),A.child;case 6:return R===null&&Xa(A),null;case 13:return Au(R,A,L);case 4:return io(A,A.stateNode.containerInfo),B=A.pendingProps,R===null?A.child=Zi(A,null,B,L):Kt(R,A,B,L),A.child;case 11:return B=A.type,V=A.pendingProps,V=A.elementType===B?V:bn(B,V),Cu(R,A,B,V,L);case 7:return Kt(R,A,A.pendingProps,L),A.child;case 8:return Kt(R,A,A.pendingProps.children,L),A.child;case 12:return Kt(R,A,A.pendingProps.children,L),A.child;case 10:e:{if(B=A.type._context,V=A.pendingProps,G=A.memoizedProps,Y=V.value,Et(Ms,B._currentValue),B._currentValue=Y,G!==null)if(xn(G.value,Y)){if(G.children===V.children&&!Jt.current){A=jn(R,A,L);break e}}else for(G=A.child,G!==null&&(G.return=A);G!==null;){var ie=G.dependencies;if(ie!==null){Y=G.child;for(var fe=ie.firstContext;fe!==null;){if(fe.context===B){if(G.tag===1){fe=Bn(-1,L&-L),fe.tag=2;var Se=G.updateQueue;if(Se!==null){Se=Se.shared;var Oe=Se.pending;Oe===null?fe.next=fe:(fe.next=Oe.next,Oe.next=fe),Se.pending=fe}}G.lanes|=L,fe=G.alternate,fe!==null&&(fe.lanes|=L),eo(G.return,L,A),ie.lanes|=L;break}fe=fe.next}}else if(G.tag===10)Y=G.type===A.type?null:G.child;else if(G.tag===18){if(Y=G.return,Y===null)throw Error(g(341));Y.lanes|=L,ie=Y.alternate,ie!==null&&(ie.lanes|=L),eo(Y,L,A),Y=G.sibling}else Y=G.child;if(Y!==null)Y.return=G;else for(Y=G;Y!==null;){if(Y===A){Y=null;break}if(G=Y.sibling,G!==null){G.return=Y.return,Y=G;break}Y=Y.return}G=Y}Kt(R,A,V.children,L),A=A.child}return A;case 9:return V=A.type,B=A.pendingProps.children,Ki(A,L),V=pn(V),B=B(V),A.flags|=1,Kt(R,A,B,L),A.child;case 14:return B=A.type,V=bn(B,A.pendingProps),V=bn(B.type,V),Su(R,A,B,V,L);case 15:return Tu(R,A,A.type,A.pendingProps,L);case 17:return B=A.type,V=A.pendingProps,V=A.elementType===B?V:bn(B,V),Gs(R,A),A.tag=1,en(B)?(R=!0,_s(A)):R=!1,Ki(A,L),mu(A,B,V),yo(A,B,V,L),bo(null,A,B,!0,R,L);case 19:return Nu(R,A,L);case 22:return _u(R,A,L)}throw Error(g(156,A.tag))};function ic(R,A){return Qr(R,A)}function Rh(R,A,L,B){this.tag=R,this.key=L,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=A,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=B,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function yn(R,A,L,B){return new Rh(R,A,L,B)}function $o(R){return R=R.prototype,!(!R||!R.isReactComponent)}function Ph(R){if(typeof R=="function")return $o(R)?1:0;if(R!=null){if(R=R.$$typeof,R===se)return 11;if(R===oe)return 14}return 2}function ti(R,A){var L=R.alternate;return L===null?(L=yn(R.tag,A,R.key,R.mode),L.elementType=R.elementType,L.type=R.type,L.stateNode=R.stateNode,L.alternate=R,R.alternate=L):(L.pendingProps=A,L.type=R.type,L.flags=0,L.subtreeFlags=0,L.deletions=null),L.flags=R.flags&14680064,L.childLanes=R.childLanes,L.lanes=R.lanes,L.child=R.child,L.memoizedProps=R.memoizedProps,L.memoizedState=R.memoizedState,L.updateQueue=R.updateQueue,A=R.dependencies,L.dependencies=A===null?null:{lanes:A.lanes,firstContext:A.firstContext},L.sibling=R.sibling,L.index=R.index,L.ref=R.ref,L}function ta(R,A,L,B,V,G){var Y=2;if(B=R,typeof R=="function")$o(R)&&(Y=1);else if(typeof R=="string")Y=5;else e:switch(R){case K:return Ci(L.children,V,G,A);case ee:Y=8,V|=8;break;case te:return R=yn(12,L,A,V|2),R.elementType=te,R.lanes=G,R;case ge:return R=yn(13,L,A,V),R.elementType=ge,R.lanes=G,R;case Ce:return R=yn(19,L,A,V),R.elementType=Ce,R.lanes=G,R;case de:return na(L,V,G,A);default:if(typeof R=="object"&&R!==null)switch(R.$$typeof){case ce:Y=10;break e;case Q:Y=9;break e;case se:Y=11;break e;case oe:Y=14;break e;case he:Y=16,B=null;break e}throw Error(g(130,R==null?R:typeof R,""))}return A=yn(Y,L,A,V),A.elementType=R,A.type=B,A.lanes=G,A}function Ci(R,A,L,B){return R=yn(7,R,B,A),R.lanes=L,R}function na(R,A,L,B){return R=yn(22,R,B,A),R.elementType=de,R.lanes=L,R.stateNode={isHidden:!1},R}function Vo(R,A,L){return R=yn(6,R,null,A),R.lanes=L,R}function zo(R,A,L){return A=yn(4,R.children!==null?R.children:[],R.key,A),A.lanes=L,A.stateNode={containerInfo:R.containerInfo,pendingChildren:null,implementation:R.implementation},A}function Ih(R,A,L,B,V){this.tag=A,this.containerInfo=R,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=pr(0),this.expirationTimes=pr(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=pr(0),this.identifierPrefix=B,this.onRecoverableError=V,this.mutableSourceEagerHydrationData=null}function Go(R,A,L,B,V,G,Y,ie,fe){return R=new Ih(R,A,L,ie,fe),A===1?(A=1,G===!0&&(A|=8)):A=0,G=yn(3,null,null,A),R.current=G,G.stateNode=R,G.memoizedState={element:B,isDehydrated:L,cache:null,transitions:null,pendingSuspenseBoundaries:null},no(G),R}function Oh(R,A,L){var B=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:X,key:B==null?null:""+B,children:R,containerInfo:A,implementation:L}}function rc(R){if(!R)return Un;R=R._reactInternals;e:{if(Nn(R)!==R||R.tag!==1)throw Error(g(170));var A=R;do{switch(A.tag){case 3:A=A.stateNode.context;break e;case 1:if(en(A.type)){A=A.stateNode.__reactInternalMemoizedMergedChildContext;break e}}A=A.return}while(A!==null);throw Error(g(171))}if(R.tag===1){var L=R.type;if(en(L))return Ml(R,L,A)}return A}function sc(R,A,L,B,V,G,Y,ie,fe){return R=Go(L,B,!0,R,V,G,Y,ie,fe),R.context=rc(null),L=R.current,B=Yt(),V=Jn(L),G=Bn(B,V),G.callback=A??null,Xn(L,G,V),R.current.lanes=V,li(R,V,B),rn(R,B),R}function ia(R,A,L,B){var V=A.current,G=Yt(),Y=Jn(V);return L=rc(L),A.context===null?A.context=L:A.pendingContext=L,A=Bn(G,Y),A.payload={element:R},B=B===void 0?null:B,B!==null&&(A.callback=B),R=Xn(V,A,Y),R!==null&&(Sn(R,V,Y,G),Ds(R,V,Y)),Y}function ra(R){if(R=R.current,!R.child)return null;switch(R.child.tag){case 5:return R.child.stateNode;default:return R.child.stateNode}}function ac(R,A){if(R=R.memoizedState,R!==null&&R.dehydrated!==null){var L=R.retryLane;R.retryLane=L!==0&&L<A?L:A}}function qo(R,A){ac(R,A),(R=R.alternate)&&ac(R,A)}function Ah(){return null}var oc=typeof reportError=="function"?reportError:function(R){console.error(R)};function Uo(R){this._internalRoot=R}sa.prototype.render=Uo.prototype.render=function(R){var A=this._internalRoot;if(A===null)throw Error(g(409));ia(R,A,null,null)},sa.prototype.unmount=Uo.prototype.unmount=function(){var R=this._internalRoot;if(R!==null){this._internalRoot=null;var A=R.containerInfo;Ei(function(){ia(null,R,null,null)}),A[Dn]=null}};function sa(R){this._internalRoot=R}sa.prototype.unstable_scheduleHydration=function(R){if(R){var A=ls();R={blockedOn:null,target:R,priority:A};for(var L=0;L<Pn.length&&A!==0&&A<Pn[L].priority;L++);Pn.splice(L,0,R),L===0&&ds(R)}};function Wo(R){return!(!R||R.nodeType!==1&&R.nodeType!==9&&R.nodeType!==11)}function aa(R){return!(!R||R.nodeType!==1&&R.nodeType!==9&&R.nodeType!==11&&(R.nodeType!==8||R.nodeValue!==" react-mount-point-unstable "))}function lc(){}function Mh(R,A,L,B,V){if(V){if(typeof B=="function"){var G=B;B=function(){var Se=ra(Y);G.call(Se)}}var Y=sc(A,B,R,0,null,!1,!1,"",lc);return R._reactRootContainer=Y,R[Dn]=Y.current,Ir(R.nodeType===8?R.parentNode:R),Ei(),Y}for(;V=R.lastChild;)R.removeChild(V);if(typeof B=="function"){var ie=B;B=function(){var Se=ra(fe);ie.call(Se)}}var fe=Go(R,0,!1,null,null,!1,!1,"",lc);return R._reactRootContainer=fe,R[Dn]=fe.current,Ir(R.nodeType===8?R.parentNode:R),Ei(function(){ia(A,fe,L,B)}),fe}function oa(R,A,L,B,V){var G=L._reactRootContainer;if(G){var Y=G;if(typeof V=="function"){var ie=V;V=function(){var fe=ra(Y);ie.call(fe)}}ia(A,Y,R,V)}else Y=Mh(L,A,R,V,B);return ra(Y)}as=function(R){switch(R.tag){case 3:var A=R.stateNode;if(A.current.memoizedState.isDehydrated){var L=oi(A.pendingLanes);L!==0&&(gr(A,L|1),rn(A,Pt()),(gt&6)===0&&(tr=Pt()+500,Wn()))}break;case 13:Ei(function(){var B=Fn(R,1);if(B!==null){var V=Yt();Sn(B,R,1,V)}}),qo(R,1)}},mr=function(R){if(R.tag===13){var A=Fn(R,134217728);if(A!==null){var L=Yt();Sn(A,R,134217728,L)}qo(R,134217728)}},os=function(R){if(R.tag===13){var A=Jn(R),L=Fn(R,A);if(L!==null){var B=Yt();Sn(L,R,A,B)}qo(R,A)}},ls=function(){return yt},us=function(R,A){var L=yt;try{return yt=R,A()}finally{yt=L}},Xt=function(R,A,L){switch(A){case"input":if(qe(R,L),A=L.name,L.type==="radio"&&A!=null){for(L=R;L.parentNode;)L=L.parentNode;for(L=L.querySelectorAll("input[name="+JSON.stringify(""+A)+'][type="radio"]'),A=0;A<L.length;A++){var B=L[A];if(B!==R&&B.form===R.form){var V=Ss(B);if(!V)throw Error(g(90));ze(B),qe(B,V)}}}break;case"textarea":tt(R,L);break;case"select":A=L.value,A!=null&&be(R,!!L.multiple,A,!1)}},ar=Fo,or=Ei;var Nh={usingClientEntryPoint:!1,Events:[Mr,Vi,Ss,rr,sr,Fo]},Ur={findFiberByHostInstance:di,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Dh={bundleType:Ur.bundleType,version:Ur.version,rendererPackageName:Ur.rendererPackageName,rendererConfig:Ur.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:q.ReactCurrentDispatcher,findHostInstanceByFiber:function(R){return R=ur(R),R===null?null:R.stateNode},findFiberByHostInstance:Ur.findFiberByHostInstance||Ah,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var la=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!la.isDisabled&&la.supportsFiber)try{Ri=la.inject(Dh),hn=la}catch{}}return reactDom_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Nh,reactDom_production_min.createPortal=function(R,A){var L=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Wo(A))throw Error(g(200));return Oh(R,A,null,L)},reactDom_production_min.createRoot=function(R,A){if(!Wo(R))throw Error(g(299));var L=!1,B="",V=oc;return A!=null&&(A.unstable_strictMode===!0&&(L=!0),A.identifierPrefix!==void 0&&(B=A.identifierPrefix),A.onRecoverableError!==void 0&&(V=A.onRecoverableError)),A=Go(R,1,!1,null,null,L,!1,B,V),R[Dn]=A.current,Ir(R.nodeType===8?R.parentNode:R),new Uo(A)},reactDom_production_min.findDOMNode=function(R){if(R==null)return null;if(R.nodeType===1)return R;var A=R._reactInternals;if(A===void 0)throw typeof R.render=="function"?Error(g(188)):(R=Object.keys(R).join(","),Error(g(268,R)));return R=ur(A),R=R===null?null:R.stateNode,R},reactDom_production_min.flushSync=function(R){return Ei(R)},reactDom_production_min.hydrate=function(R,A,L){if(!aa(A))throw Error(g(200));return oa(null,R,A,!0,L)},reactDom_production_min.hydrateRoot=function(R,A,L){if(!Wo(R))throw Error(g(405));var B=L!=null&&L.hydratedSources||null,V=!1,G="",Y=oc;if(L!=null&&(L.unstable_strictMode===!0&&(V=!0),L.identifierPrefix!==void 0&&(G=L.identifierPrefix),L.onRecoverableError!==void 0&&(Y=L.onRecoverableError)),A=sc(A,null,R,1,L??null,V,!1,G,Y),R[Dn]=A.current,Ir(R),B)for(R=0;R<B.length;R++)L=B[R],V=L._getVersion,V=V(L._source),A.mutableSourceEagerHydrationData==null?A.mutableSourceEagerHydrationData=[L,V]:A.mutableSourceEagerHydrationData.push(L,V);return new sa(A)},reactDom_production_min.render=function(R,A,L){if(!aa(A))throw Error(g(200));return oa(null,R,A,!1,L)},reactDom_production_min.unmountComponentAtNode=function(R){if(!aa(R))throw Error(g(40));return R._reactRootContainer?(Ei(function(){oa(null,null,R,!1,function(){R._reactRootContainer=null,R[Dn]=null})}),!0):!1},reactDom_production_min.unstable_batchedUpdates=Fo,reactDom_production_min.unstable_renderSubtreeIntoContainer=function(R,A,L,B){if(!aa(L))throw Error(g(200));if(R==null||R._reactInternals===void 0)throw Error(g(38));return oa(R,A,L,!1,B)},reactDom_production_min.version="18.3.1-next-f1338f8080-20240426",reactDom_production_min}var hasRequiredReactDom;function requireReactDom(){if(hasRequiredReactDom)return reactDom.exports;hasRequiredReactDom=1;function x(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(x)}catch(d){console.error(d)}}return x(),reactDom.exports=requireReactDom_production_min(),reactDom.exports}var hasRequiredClient;function requireClient(){if(hasRequiredClient)return client;hasRequiredClient=1;var x=requireReactDom();return client.createRoot=x.createRoot,client.hydrateRoot=x.hydrateRoot,client}var clientExports=requireClient();const ReactDOM$1=getDefaultExportFromCjs(clientExports);var reactExports=requireReact();const React=getDefaultExportFromCjs(reactExports),React$1=_mergeNamespaces({__proto__:null,default:React},[reactExports]);var reactDomExports=requireReactDom();const ReactDOM=getDefaultExportFromCjs(reactDomExports);/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _extends$d(){return _extends$d=Object.assign?Object.assign.bind():function(x){for(var d=1;d<arguments.length;d++){var g=arguments[d];for(var E in g)Object.prototype.hasOwnProperty.call(g,E)&&(x[E]=g[E])}return x},_extends$d.apply(this,arguments)}var Action;(function(x){x.Pop="POP",x.Push="PUSH",x.Replace="REPLACE"})(Action||(Action={}));const PopStateEventType="popstate";function createBrowserHistory(x){x===void 0&&(x={});function d(E,b){let{pathname:w,search:C,hash:S}=E.location;return createLocation("",{pathname:w,search:C,hash:S},b.state&&b.state.usr||null,b.state&&b.state.key||"default")}function g(E,b){return typeof b=="string"?b:createPath(b)}return getUrlBasedHistory(d,g,null,x)}function invariant(x,d){if(x===!1||x===null||typeof x>"u")throw new Error(d)}function warning$1(x,d){if(!x){typeof console<"u"&&console.warn(d);try{throw new Error(d)}catch{}}}function createKey(){return Math.random().toString(36).substr(2,8)}function getHistoryState(x,d){return{usr:x.state,key:x.key,idx:d}}function createLocation(x,d,g,E){return g===void 0&&(g=null),_extends$d({pathname:typeof x=="string"?x:x.pathname,search:"",hash:""},typeof d=="string"?parsePath(d):d,{state:g,key:d&&d.key||E||createKey()})}function createPath(x){let{pathname:d="/",search:g="",hash:E=""}=x;return g&&g!=="?"&&(d+=g.charAt(0)==="?"?g:"?"+g),E&&E!=="#"&&(d+=E.charAt(0)==="#"?E:"#"+E),d}function parsePath(x){let d={};if(x){let g=x.indexOf("#");g>=0&&(d.hash=x.substr(g),x=x.substr(0,g));let E=x.indexOf("?");E>=0&&(d.search=x.substr(E),x=x.substr(0,E)),x&&(d.pathname=x)}return d}function getUrlBasedHistory(x,d,g,E){E===void 0&&(E={});let{window:b=document.defaultView,v5Compat:w=!1}=E,C=b.history,S=Action.Pop,P=null,I=M();I==null&&(I=0,C.replaceState(_extends$d({},C.state,{idx:I}),""));function M(){return(C.state||{idx:null}).idx}function D(){S=Action.Pop;let $=M(),z=$==null?null:$-I;I=$,P&&P({action:S,location:j.location,delta:z})}function k($,z){S=Action.Push;let U=createLocation(j.location,$,z);I=M()+1;let W=getHistoryState(U,I),q=j.createHref(U);try{C.pushState(W,"",q)}catch(Z){if(Z instanceof DOMException&&Z.name==="DataCloneError")throw Z;b.location.assign(q)}w&&P&&P({action:S,location:j.location,delta:1})}function H($,z){S=Action.Replace;let U=createLocation(j.location,$,z);I=M();let W=getHistoryState(U,I),q=j.createHref(U);C.replaceState(W,"",q),w&&P&&P({action:S,location:j.location,delta:0})}function F($){let z=b.location.origin!=="null"?b.location.origin:b.location.href,U=typeof $=="string"?$:createPath($);return U=U.replace(/ $/,"%20"),invariant(z,"No window.location.(origin|href) available to create URL for href: "+U),new URL(U,z)}let j={get action(){return S},get location(){return x(b,C)},listen($){if(P)throw new Error("A history only accepts one active listener");return b.addEventListener(PopStateEventType,D),P=$,()=>{b.removeEventListener(PopStateEventType,D),P=null}},createHref($){return d(b,$)},createURL:F,encodeLocation($){let z=F($);return{pathname:z.pathname,search:z.search,hash:z.hash}},push:k,replace:H,go($){return C.go($)}};return j}var ResultType;(function(x){x.data="data",x.deferred="deferred",x.redirect="redirect",x.error="error"})(ResultType||(ResultType={}));function matchRoutes(x,d,g){return g===void 0&&(g="/"),matchRoutesImpl(x,d,g)}function matchRoutesImpl(x,d,g,E){let b=typeof d=="string"?parsePath(d):d,w=stripBasename(b.pathname||"/",g);if(w==null)return null;let C=flattenRoutes(x);rankRouteBranches(C);let S=null;for(let P=0;S==null&&P<C.length;++P){let I=decodePath(w);S=matchRouteBranch(C[P],I)}return S}function flattenRoutes(x,d,g,E){d===void 0&&(d=[]),g===void 0&&(g=[]),E===void 0&&(E="");let b=(w,C,S)=>{let P={relativePath:S===void 0?w.path||"":S,caseSensitive:w.caseSensitive===!0,childrenIndex:C,route:w};P.relativePath.startsWith("/")&&(invariant(P.relativePath.startsWith(E),'Absolute route path "'+P.relativePath+'" nested under path '+('"'+E+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),P.relativePath=P.relativePath.slice(E.length));let I=joinPaths([E,P.relativePath]),M=g.concat(P);w.children&&w.children.length>0&&(invariant(w.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+I+'".')),flattenRoutes(w.children,d,M,I)),!(w.path==null&&!w.index)&&d.push({path:I,score:computeScore(I,w.index),routesMeta:M})};return x.forEach((w,C)=>{var S;if(w.path===""||!((S=w.path)!=null&&S.includes("?")))b(w,C);else for(let P of explodeOptionalSegments(w.path))b(w,C,P)}),d}function explodeOptionalSegments(x){let d=x.split("/");if(d.length===0)return[];let[g,...E]=d,b=g.endsWith("?"),w=g.replace(/\?$/,"");if(E.length===0)return b?[w,""]:[w];let C=explodeOptionalSegments(E.join("/")),S=[];return S.push(...C.map(P=>P===""?w:[w,P].join("/"))),b&&S.push(...C),S.map(P=>x.startsWith("/")&&P===""?"/":P)}function rankRouteBranches(x){x.sort((d,g)=>d.score!==g.score?g.score-d.score:compareIndexes(d.routesMeta.map(E=>E.childrenIndex),g.routesMeta.map(E=>E.childrenIndex)))}const paramRe=/^:[\w-]+$/,dynamicSegmentValue=3,indexRouteValue=2,emptySegmentValue=1,staticSegmentValue=10,splatPenalty=-2,isSplat=x=>x==="*";function computeScore(x,d){let g=x.split("/"),E=g.length;return g.some(isSplat)&&(E+=splatPenalty),d&&(E+=indexRouteValue),g.filter(b=>!isSplat(b)).reduce((b,w)=>b+(paramRe.test(w)?dynamicSegmentValue:w===""?emptySegmentValue:staticSegmentValue),E)}function compareIndexes(x,d){return x.length===d.length&&x.slice(0,-1).every((E,b)=>E===d[b])?x[x.length-1]-d[d.length-1]:0}function matchRouteBranch(x,d,g){let{routesMeta:E}=x,b={},w="/",C=[];for(let S=0;S<E.length;++S){let P=E[S],I=S===E.length-1,M=w==="/"?d:d.slice(w.length)||"/",D=matchPath({path:P.relativePath,caseSensitive:P.caseSensitive,end:I},M),k=P.route;if(!D)return null;Object.assign(b,D.params),C.push({params:b,pathname:joinPaths([w,D.pathname]),pathnameBase:normalizePathname(joinPaths([w,D.pathnameBase])),route:k}),D.pathnameBase!=="/"&&(w=joinPaths([w,D.pathnameBase]))}return C}function matchPath(x,d){typeof x=="string"&&(x={path:x,caseSensitive:!1,end:!0});let[g,E]=compilePath(x.path,x.caseSensitive,x.end),b=d.match(g);if(!b)return null;let w=b[0],C=w.replace(/(.)\/+$/,"$1"),S=b.slice(1);return{params:E.reduce((I,M,D)=>{let{paramName:k,isOptional:H}=M;if(k==="*"){let j=S[D]||"";C=w.slice(0,w.length-j.length).replace(/(.)\/+$/,"$1")}const F=S[D];return H&&!F?I[k]=void 0:I[k]=(F||"").replace(/%2F/g,"/"),I},{}),pathname:w,pathnameBase:C,pattern:x}}function compilePath(x,d,g){d===void 0&&(d=!1),g===void 0&&(g=!0),warning$1(x==="*"||!x.endsWith("*")||x.endsWith("/*"),'Route path "'+x+'" will be treated as if it were '+('"'+x.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+x.replace(/\*$/,"/*")+'".'));let E=[],b="^"+x.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(C,S,P)=>(E.push({paramName:S,isOptional:P!=null}),P?"/?([^\\/]+)?":"/([^\\/]+)"));return x.endsWith("*")?(E.push({paramName:"*"}),b+=x==="*"||x==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):g?b+="\\/*$":x!==""&&x!=="/"&&(b+="(?:(?=\\/|$))"),[new RegExp(b,d?void 0:"i"),E]}function decodePath(x){try{return x.split("/").map(d=>decodeURIComponent(d).replace(/\//g,"%2F")).join("/")}catch(d){return warning$1(!1,'The URL path "'+x+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+d+").")),x}}function stripBasename(x,d){if(d==="/")return x;if(!x.toLowerCase().startsWith(d.toLowerCase()))return null;let g=d.endsWith("/")?d.length-1:d.length,E=x.charAt(g);return E&&E!=="/"?null:x.slice(g)||"/"}function resolvePath(x,d){d===void 0&&(d="/");let{pathname:g,search:E="",hash:b=""}=typeof x=="string"?parsePath(x):x;return{pathname:g?g.startsWith("/")?g:resolvePathname(g,d):d,search:normalizeSearch(E),hash:normalizeHash(b)}}function resolvePathname(x,d){let g=d.replace(/\/+$/,"").split("/");return x.split("/").forEach(b=>{b===".."?g.length>1&&g.pop():b!=="."&&g.push(b)}),g.length>1?g.join("/"):"/"}function getInvalidPathError(x,d,g,E){return"Cannot include a '"+x+"' character in a manually specified "+("`to."+d+"` field ["+JSON.stringify(E)+"].  Please separate it out to the ")+("`to."+g+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function getPathContributingMatches(x){return x.filter((d,g)=>g===0||d.route.path&&d.route.path.length>0)}function getResolveToMatches(x,d){let g=getPathContributingMatches(x);return d?g.map((E,b)=>b===g.length-1?E.pathname:E.pathnameBase):g.map(E=>E.pathnameBase)}function resolveTo(x,d,g,E){E===void 0&&(E=!1);let b;typeof x=="string"?b=parsePath(x):(b=_extends$d({},x),invariant(!b.pathname||!b.pathname.includes("?"),getInvalidPathError("?","pathname","search",b)),invariant(!b.pathname||!b.pathname.includes("#"),getInvalidPathError("#","pathname","hash",b)),invariant(!b.search||!b.search.includes("#"),getInvalidPathError("#","search","hash",b)));let w=x===""||b.pathname==="",C=w?"/":b.pathname,S;if(C==null)S=g;else{let D=d.length-1;if(!E&&C.startsWith("..")){let k=C.split("/");for(;k[0]==="..";)k.shift(),D-=1;b.pathname=k.join("/")}S=D>=0?d[D]:"/"}let P=resolvePath(b,S),I=C&&C!=="/"&&C.endsWith("/"),M=(w||C===".")&&g.endsWith("/");return!P.pathname.endsWith("/")&&(I||M)&&(P.pathname+="/"),P}const joinPaths=x=>x.join("/").replace(/\/\/+/g,"/"),normalizePathname=x=>x.replace(/\/+$/,"").replace(/^\/*/,"/"),normalizeSearch=x=>!x||x==="?"?"":x.startsWith("?")?x:"?"+x,normalizeHash=x=>!x||x==="#"?"":x.startsWith("#")?x:"#"+x;function isRouteErrorResponse(x){return x!=null&&typeof x.status=="number"&&typeof x.statusText=="string"&&typeof x.internal=="boolean"&&"data"in x}const validMutationMethodsArr=["post","put","patch","delete"];new Set(validMutationMethodsArr);const validRequestMethodsArr=["get",...validMutationMethodsArr];new Set(validRequestMethodsArr);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _extends$c(){return _extends$c=Object.assign?Object.assign.bind():function(x){for(var d=1;d<arguments.length;d++){var g=arguments[d];for(var E in g)Object.prototype.hasOwnProperty.call(g,E)&&(x[E]=g[E])}return x},_extends$c.apply(this,arguments)}const DataRouterContext=reactExports.createContext(null),DataRouterStateContext=reactExports.createContext(null),NavigationContext=reactExports.createContext(null),LocationContext=reactExports.createContext(null),RouteContext=reactExports.createContext({outlet:null,matches:[],isDataRoute:!1}),RouteErrorContext=reactExports.createContext(null);function useHref(x,d){let{relative:g}=d===void 0?{}:d;useInRouterContext()||invariant(!1);let{basename:E,navigator:b}=reactExports.useContext(NavigationContext),{hash:w,pathname:C,search:S}=useResolvedPath(x,{relative:g}),P=C;return E!=="/"&&(P=C==="/"?E:joinPaths([E,C])),b.createHref({pathname:P,search:S,hash:w})}function useInRouterContext(){return reactExports.useContext(LocationContext)!=null}function useLocation(){return useInRouterContext()||invariant(!1),reactExports.useContext(LocationContext).location}function useIsomorphicLayoutEffect(x){reactExports.useContext(NavigationContext).static||reactExports.useLayoutEffect(x)}function useNavigate(){let{isDataRoute:x}=reactExports.useContext(RouteContext);return x?useNavigateStable():useNavigateUnstable()}function useNavigateUnstable(){useInRouterContext()||invariant(!1);let x=reactExports.useContext(DataRouterContext),{basename:d,future:g,navigator:E}=reactExports.useContext(NavigationContext),{matches:b}=reactExports.useContext(RouteContext),{pathname:w}=useLocation(),C=JSON.stringify(getResolveToMatches(b,g.v7_relativeSplatPath)),S=reactExports.useRef(!1);return useIsomorphicLayoutEffect(()=>{S.current=!0}),reactExports.useCallback(function(I,M){if(M===void 0&&(M={}),!S.current)return;if(typeof I=="number"){E.go(I);return}let D=resolveTo(I,JSON.parse(C),w,M.relative==="path");x==null&&d!=="/"&&(D.pathname=D.pathname==="/"?d:joinPaths([d,D.pathname])),(M.replace?E.replace:E.push)(D,M.state,M)},[d,E,C,w,x])}function useResolvedPath(x,d){let{relative:g}=d===void 0?{}:d,{future:E}=reactExports.useContext(NavigationContext),{matches:b}=reactExports.useContext(RouteContext),{pathname:w}=useLocation(),C=JSON.stringify(getResolveToMatches(b,E.v7_relativeSplatPath));return reactExports.useMemo(()=>resolveTo(x,JSON.parse(C),w,g==="path"),[x,C,w,g])}function useRoutes(x,d){return useRoutesImpl(x,d)}function useRoutesImpl(x,d,g,E){useInRouterContext()||invariant(!1);let{navigator:b}=reactExports.useContext(NavigationContext),{matches:w}=reactExports.useContext(RouteContext),C=w[w.length-1],S=C?C.params:{};C&&C.pathname;let P=C?C.pathnameBase:"/";C&&C.route;let I=useLocation(),M;if(d){var D;let $=typeof d=="string"?parsePath(d):d;P==="/"||(D=$.pathname)!=null&&D.startsWith(P)||invariant(!1),M=$}else M=I;let k=M.pathname||"/",H=k;if(P!=="/"){let $=P.replace(/^\//,"").split("/");H="/"+k.replace(/^\//,"").split("/").slice($.length).join("/")}let F=matchRoutes(x,{pathname:H}),j=_renderMatches(F&&F.map($=>Object.assign({},$,{params:Object.assign({},S,$.params),pathname:joinPaths([P,b.encodeLocation?b.encodeLocation($.pathname).pathname:$.pathname]),pathnameBase:$.pathnameBase==="/"?P:joinPaths([P,b.encodeLocation?b.encodeLocation($.pathnameBase).pathname:$.pathnameBase])})),w,g,E);return d&&j?reactExports.createElement(LocationContext.Provider,{value:{location:_extends$c({pathname:"/",search:"",hash:"",state:null,key:"default"},M),navigationType:Action.Pop}},j):j}function DefaultErrorComponent(){let x=useRouteError(),d=isRouteErrorResponse(x)?x.status+" "+x.statusText:x instanceof Error?x.message:JSON.stringify(x),g=x instanceof Error?x.stack:null,b={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return reactExports.createElement(reactExports.Fragment,null,reactExports.createElement("h2",null,"Unexpected Application Error!"),reactExports.createElement("h3",{style:{fontStyle:"italic"}},d),g?reactExports.createElement("pre",{style:b},g):null,null)}const defaultErrorElement=reactExports.createElement(DefaultErrorComponent,null);class RenderErrorBoundary extends reactExports.Component{constructor(d){super(d),this.state={location:d.location,revalidation:d.revalidation,error:d.error}}static getDerivedStateFromError(d){return{error:d}}static getDerivedStateFromProps(d,g){return g.location!==d.location||g.revalidation!=="idle"&&d.revalidation==="idle"?{error:d.error,location:d.location,revalidation:d.revalidation}:{error:d.error!==void 0?d.error:g.error,location:g.location,revalidation:d.revalidation||g.revalidation}}componentDidCatch(d,g){console.error("React Router caught the following error during render",d,g)}render(){return this.state.error!==void 0?reactExports.createElement(RouteContext.Provider,{value:this.props.routeContext},reactExports.createElement(RouteErrorContext.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function RenderedRoute(x){let{routeContext:d,match:g,children:E}=x,b=reactExports.useContext(DataRouterContext);return b&&b.static&&b.staticContext&&(g.route.errorElement||g.route.ErrorBoundary)&&(b.staticContext._deepestRenderedBoundaryId=g.route.id),reactExports.createElement(RouteContext.Provider,{value:d},E)}function _renderMatches(x,d,g,E){var b;if(d===void 0&&(d=[]),g===void 0&&(g=null),E===void 0&&(E=null),x==null){var w;if(!g)return null;if(g.errors)x=g.matches;else if((w=E)!=null&&w.v7_partialHydration&&d.length===0&&!g.initialized&&g.matches.length>0)x=g.matches;else return null}let C=x,S=(b=g)==null?void 0:b.errors;if(S!=null){let M=C.findIndex(D=>D.route.id&&(S==null?void 0:S[D.route.id])!==void 0);M>=0||invariant(!1),C=C.slice(0,Math.min(C.length,M+1))}let P=!1,I=-1;if(g&&E&&E.v7_partialHydration)for(let M=0;M<C.length;M++){let D=C[M];if((D.route.HydrateFallback||D.route.hydrateFallbackElement)&&(I=M),D.route.id){let{loaderData:k,errors:H}=g,F=D.route.loader&&k[D.route.id]===void 0&&(!H||H[D.route.id]===void 0);if(D.route.lazy||F){P=!0,I>=0?C=C.slice(0,I+1):C=[C[0]];break}}}return C.reduceRight((M,D,k)=>{let H,F=!1,j=null,$=null;g&&(H=S&&D.route.id?S[D.route.id]:void 0,j=D.route.errorElement||defaultErrorElement,P&&(I<0&&k===0?(warningOnce("route-fallback"),F=!0,$=null):I===k&&(F=!0,$=D.route.hydrateFallbackElement||null)));let z=d.concat(C.slice(0,k+1)),U=()=>{let W;return H?W=j:F?W=$:D.route.Component?W=reactExports.createElement(D.route.Component,null):D.route.element?W=D.route.element:W=M,reactExports.createElement(RenderedRoute,{match:D,routeContext:{outlet:M,matches:z,isDataRoute:g!=null},children:W})};return g&&(D.route.ErrorBoundary||D.route.errorElement||k===0)?reactExports.createElement(RenderErrorBoundary,{location:g.location,revalidation:g.revalidation,component:j,error:H,children:U(),routeContext:{outlet:null,matches:z,isDataRoute:!0}}):U()},null)}var DataRouterHook$1=(function(x){return x.UseBlocker="useBlocker",x.UseRevalidator="useRevalidator",x.UseNavigateStable="useNavigate",x})(DataRouterHook$1||{}),DataRouterStateHook$1=(function(x){return x.UseBlocker="useBlocker",x.UseLoaderData="useLoaderData",x.UseActionData="useActionData",x.UseRouteError="useRouteError",x.UseNavigation="useNavigation",x.UseRouteLoaderData="useRouteLoaderData",x.UseMatches="useMatches",x.UseRevalidator="useRevalidator",x.UseNavigateStable="useNavigate",x.UseRouteId="useRouteId",x})(DataRouterStateHook$1||{});function useDataRouterContext(x){let d=reactExports.useContext(DataRouterContext);return d||invariant(!1),d}function useDataRouterState(x){let d=reactExports.useContext(DataRouterStateContext);return d||invariant(!1),d}function useRouteContext(x){let d=reactExports.useContext(RouteContext);return d||invariant(!1),d}function useCurrentRouteId(x){let d=useRouteContext(),g=d.matches[d.matches.length-1];return g.route.id||invariant(!1),g.route.id}function useRouteError(){var x;let d=reactExports.useContext(RouteErrorContext),g=useDataRouterState(),E=useCurrentRouteId();return d!==void 0?d:(x=g.errors)==null?void 0:x[E]}function useNavigateStable(){let{router:x}=useDataRouterContext(DataRouterHook$1.UseNavigateStable),d=useCurrentRouteId(DataRouterStateHook$1.UseNavigateStable),g=reactExports.useRef(!1);return useIsomorphicLayoutEffect(()=>{g.current=!0}),reactExports.useCallback(function(b,w){w===void 0&&(w={}),g.current&&(typeof b=="number"?x.navigate(b):x.navigate(b,_extends$c({fromRouteId:d},w)))},[x,d])}const alreadyWarned$1={};function warningOnce(x,d,g){alreadyWarned$1[x]||(alreadyWarned$1[x]=!0)}function logV6DeprecationWarnings(x,d){x==null||x.v7_startTransition,x==null||x.v7_relativeSplatPath}function Route(x){invariant(!1)}function Router(x){let{basename:d="/",children:g=null,location:E,navigationType:b=Action.Pop,navigator:w,static:C=!1,future:S}=x;useInRouterContext()&&invariant(!1);let P=d.replace(/^\/*/,"/"),I=reactExports.useMemo(()=>({basename:P,navigator:w,static:C,future:_extends$c({v7_relativeSplatPath:!1},S)}),[P,S,w,C]);typeof E=="string"&&(E=parsePath(E));let{pathname:M="/",search:D="",hash:k="",state:H=null,key:F="default"}=E,j=reactExports.useMemo(()=>{let $=stripBasename(M,P);return $==null?null:{location:{pathname:$,search:D,hash:k,state:H,key:F},navigationType:b}},[P,M,D,k,H,F,b]);return j==null?null:reactExports.createElement(NavigationContext.Provider,{value:I},reactExports.createElement(LocationContext.Provider,{children:g,value:j}))}function Routes(x){let{children:d,location:g}=x;return useRoutes(createRoutesFromChildren(d),g)}new Promise(()=>{});function createRoutesFromChildren(x,d){d===void 0&&(d=[]);let g=[];return reactExports.Children.forEach(x,(E,b)=>{if(!reactExports.isValidElement(E))return;let w=[...d,b];if(E.type===reactExports.Fragment){g.push.apply(g,createRoutesFromChildren(E.props.children,w));return}E.type!==Route&&invariant(!1),!E.props.index||!E.props.children||invariant(!1);let C={id:E.props.id||w.join("-"),caseSensitive:E.props.caseSensitive,element:E.props.element,Component:E.props.Component,index:E.props.index,path:E.props.path,loader:E.props.loader,action:E.props.action,errorElement:E.props.errorElement,ErrorBoundary:E.props.ErrorBoundary,hasErrorBoundary:E.props.ErrorBoundary!=null||E.props.errorElement!=null,shouldRevalidate:E.props.shouldRevalidate,handle:E.props.handle,lazy:E.props.lazy};E.props.children&&(C.children=createRoutesFromChildren(E.props.children,w)),g.push(C)}),g}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _extends$b(){return _extends$b=Object.assign?Object.assign.bind():function(x){for(var d=1;d<arguments.length;d++){var g=arguments[d];for(var E in g)Object.prototype.hasOwnProperty.call(g,E)&&(x[E]=g[E])}return x},_extends$b.apply(this,arguments)}function _objectWithoutPropertiesLoose$d(x,d){if(x==null)return{};var g={},E=Object.keys(x),b,w;for(w=0;w<E.length;w++)b=E[w],!(d.indexOf(b)>=0)&&(g[b]=x[b]);return g}function isModifiedEvent$1(x){return!!(x.metaKey||x.altKey||x.ctrlKey||x.shiftKey)}function shouldProcessLinkClick(x,d){return x.button===0&&(!d||d==="_self")&&!isModifiedEvent$1(x)}const _excluded$c=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],REACT_ROUTER_VERSION="6";try{window.__reactRouterVersion=REACT_ROUTER_VERSION}catch{}const START_TRANSITION="startTransition",startTransitionImpl=React$1[START_TRANSITION];function BrowserRouter(x){let{basename:d,children:g,future:E,window:b}=x,w=reactExports.useRef();w.current==null&&(w.current=createBrowserHistory({window:b,v5Compat:!0}));let C=w.current,[S,P]=reactExports.useState({action:C.action,location:C.location}),{v7_startTransition:I}=E||{},M=reactExports.useCallback(D=>{I&&startTransitionImpl?startTransitionImpl(()=>P(D)):P(D)},[P,I]);return reactExports.useLayoutEffect(()=>C.listen(M),[C,M]),reactExports.useEffect(()=>logV6DeprecationWarnings(E),[E]),reactExports.createElement(Router,{basename:d,children:g,location:S.location,navigationType:S.action,navigator:C,future:E})}const isBrowser=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",ABSOLUTE_URL_REGEX=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Link=reactExports.forwardRef(function(d,g){let{onClick:E,relative:b,reloadDocument:w,replace:C,state:S,target:P,to:I,preventScrollReset:M,viewTransition:D}=d,k=_objectWithoutPropertiesLoose$d(d,_excluded$c),{basename:H}=reactExports.useContext(NavigationContext),F,j=!1;if(typeof I=="string"&&ABSOLUTE_URL_REGEX.test(I)&&(F=I,isBrowser))try{let W=new URL(window.location.href),q=I.startsWith("//")?new URL(W.protocol+I):new URL(I),Z=stripBasename(q.pathname,H);q.origin===W.origin&&Z!=null?I=Z+q.search+q.hash:j=!0}catch{}let $=useHref(I,{relative:b}),z=useLinkClickHandler(I,{replace:C,state:S,target:P,preventScrollReset:M,relative:b,viewTransition:D});function U(W){E&&E(W),W.defaultPrevented||z(W)}return reactExports.createElement("a",_extends$b({},k,{href:F||$,onClick:j||w?E:U,ref:g,target:P}))});var DataRouterHook;(function(x){x.UseScrollRestoration="useScrollRestoration",x.UseSubmit="useSubmit",x.UseSubmitFetcher="useSubmitFetcher",x.UseFetcher="useFetcher",x.useViewTransitionState="useViewTransitionState"})(DataRouterHook||(DataRouterHook={}));var DataRouterStateHook;(function(x){x.UseFetcher="useFetcher",x.UseFetchers="useFetchers",x.UseScrollRestoration="useScrollRestoration"})(DataRouterStateHook||(DataRouterStateHook={}));function useLinkClickHandler(x,d){let{target:g,replace:E,state:b,preventScrollReset:w,relative:C,viewTransition:S}=d===void 0?{}:d,P=useNavigate(),I=useLocation(),M=useResolvedPath(x,{relative:C});return reactExports.useCallback(D=>{if(shouldProcessLinkClick(D,g)){D.preventDefault();let k=E!==void 0?E:createPath(I)===createPath(M);P(x,{replace:k,state:b,preventScrollReset:w,relative:C,viewTransition:S})}},[I,P,M,E,b,g,x,w,C,S])}const WelcomeHeader=()=>jsxRuntimeExports.jsx("div",{className:"mb-auto"}),WelcomeFooter=({name:x,destination:d})=>jsxRuntimeExports.jsx("div",{className:"text-center mt-auto",children:jsxRuntimeExports.jsxs("p",{children:[jsxRuntimeExports.jsx(Link,{to:`/${d}`,className:"text-decoration-none",children:x}),"|",jsxRuntimeExports.jsx(Link,{to:"/papers/usermanual.pdf",target:"_blank",className:"text-decoration-none",children:"User Manual"})]})});var classnames={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/var hasRequiredClassnames;function requireClassnames(){return hasRequiredClassnames||(hasRequiredClassnames=1,(function(x){(function(){var d={}.hasOwnProperty;function g(){for(var w="",C=0;C<arguments.length;C++){var S=arguments[C];S&&(w=b(w,E(S)))}return w}function E(w){if(typeof w=="string"||typeof w=="number")return w;if(typeof w!="object")return"";if(Array.isArray(w))return g.apply(null,w);if(w.toString!==Object.prototype.toString&&!w.toString.toString().includes("[native code]"))return w.toString();var C="";for(var S in w)d.call(w,S)&&w[S]&&(C=b(C,S));return C}function b(w,C){return C?w?w+" "+C:w+C:w}x.exports?(g.default=g,x.exports=g):window.classNames=g})()})(classnames)),classnames.exports}var classnamesExports=requireClassnames();const classNames=getDefaultExportFromCjs(classnamesExports),_excluded$b=["as","disabled"];function _objectWithoutPropertiesLoose$c(x,d){if(x==null)return{};var g={};for(var E in x)if({}.hasOwnProperty.call(x,E)){if(d.indexOf(E)>=0)continue;g[E]=x[E]}return g}function isTrivialHref$1(x){return!x||x.trim()==="#"}function useButtonProps({tagName:x,disabled:d,href:g,target:E,rel:b,role:w,onClick:C,tabIndex:S=0,type:P}){x||(g!=null||E!=null||b!=null?x="a":x="button");const I={tagName:x};if(x==="button")return[{type:P||"button",disabled:d},I];const M=k=>{if((d||x==="a"&&isTrivialHref$1(g))&&k.preventDefault(),d){k.stopPropagation();return}C==null||C(k)},D=k=>{k.key===" "&&(k.preventDefault(),M(k))};return x==="a"&&(g||(g="#"),d&&(g=void 0)),[{role:w??"button",disabled:void 0,tabIndex:d?void 0:S,href:g,target:x==="a"?E:void 0,"aria-disabled":d||void 0,rel:x==="a"?b:void 0,onClick:M,onKeyDown:D},I]}const Button$1=reactExports.forwardRef((x,d)=>{let{as:g,disabled:E}=x,b=_objectWithoutPropertiesLoose$c(x,_excluded$b);const[w,{tagName:C}]=useButtonProps(Object.assign({tagName:g,disabled:E},b));return jsxRuntimeExports.jsx(C,Object.assign({},b,w,{ref:d}))});Button$1.displayName="Button";const DEFAULT_BREAKPOINTS=["xxl","xl","lg","md","sm","xs"],DEFAULT_MIN_BREAKPOINT="xs",ThemeContext=reactExports.createContext({prefixes:{},breakpoints:DEFAULT_BREAKPOINTS,minBreakpoint:DEFAULT_MIN_BREAKPOINT}),{Consumer,Provider}=ThemeContext;function useBootstrapPrefix(x,d){const{prefixes:g}=reactExports.useContext(ThemeContext);return x||g[d]||d}function useBootstrapBreakpoints(){const{breakpoints:x}=reactExports.useContext(ThemeContext);return x}function useBootstrapMinBreakpoint(){const{minBreakpoint:x}=reactExports.useContext(ThemeContext);return x}function useIsRTL(){const{dir:x}=reactExports.useContext(ThemeContext);return x==="rtl"}const Button=reactExports.forwardRef(({as:x,bsPrefix:d,variant:g="primary",size:E,active:b=!1,disabled:w=!1,className:C,...S},P)=>{const I=useBootstrapPrefix(d,"btn"),[M,{tagName:D}]=useButtonProps({tagName:x,disabled:w,...S}),k=D;return jsxRuntimeExports.jsx(k,{...M,...S,ref:P,disabled:w,className:classNames(C,I,b&&"active",g&&`${I}-${g}`,E&&`${I}-${E}`,S.href&&w&&"disabled")})});Button.displayName="Button";var util;(function(x){x.assertEqual=b=>{};function d(b){}x.assertIs=d;function g(b){throw new Error}x.assertNever=g,x.arrayToEnum=b=>{const w={};for(const C of b)w[C]=C;return w},x.getValidEnumValues=b=>{const w=x.objectKeys(b).filter(S=>typeof b[b[S]]!="number"),C={};for(const S of w)C[S]=b[S];return x.objectValues(C)},x.objectValues=b=>x.objectKeys(b).map(function(w){return b[w]}),x.objectKeys=typeof Object.keys=="function"?b=>Object.keys(b):b=>{const w=[];for(const C in b)Object.prototype.hasOwnProperty.call(b,C)&&w.push(C);return w},x.find=(b,w)=>{for(const C of b)if(w(C))return C},x.isInteger=typeof Number.isInteger=="function"?b=>Number.isInteger(b):b=>typeof b=="number"&&Number.isFinite(b)&&Math.floor(b)===b;function E(b,w=" | "){return b.map(C=>typeof C=="string"?`'${C}'`:C).join(w)}x.joinValues=E,x.jsonStringifyReplacer=(b,w)=>typeof w=="bigint"?w.toString():w})(util||(util={}));var objectUtil;(function(x){x.mergeShapes=(d,g)=>({...d,...g})})(objectUtil||(objectUtil={}));const ZodParsedType=util.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),getParsedType=x=>{switch(typeof x){case"undefined":return ZodParsedType.undefined;case"string":return ZodParsedType.string;case"number":return Number.isNaN(x)?ZodParsedType.nan:ZodParsedType.number;case"boolean":return ZodParsedType.boolean;case"function":return ZodParsedType.function;case"bigint":return ZodParsedType.bigint;case"symbol":return ZodParsedType.symbol;case"object":return Array.isArray(x)?ZodParsedType.array:x===null?ZodParsedType.null:x.then&&typeof x.then=="function"&&x.catch&&typeof x.catch=="function"?ZodParsedType.promise:typeof Map<"u"&&x instanceof Map?ZodParsedType.map:typeof Set<"u"&&x instanceof Set?ZodParsedType.set:typeof Date<"u"&&x instanceof Date?ZodParsedType.date:ZodParsedType.object;default:return ZodParsedType.unknown}},ZodIssueCode=util.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class ZodError extends Error{get errors(){return this.issues}constructor(d){super(),this.issues=[],this.addIssue=E=>{this.issues=[...this.issues,E]},this.addIssues=(E=[])=>{this.issues=[...this.issues,...E]};const g=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,g):this.__proto__=g,this.name="ZodError",this.issues=d}format(d){const g=d||function(w){return w.message},E={_errors:[]},b=w=>{for(const C of w.issues)if(C.code==="invalid_union")C.unionErrors.map(b);else if(C.code==="invalid_return_type")b(C.returnTypeError);else if(C.code==="invalid_arguments")b(C.argumentsError);else if(C.path.length===0)E._errors.push(g(C));else{let S=E,P=0;for(;P<C.path.length;){const I=C.path[P];P===C.path.length-1?(S[I]=S[I]||{_errors:[]},S[I]._errors.push(g(C))):S[I]=S[I]||{_errors:[]},S=S[I],P++}}};return b(this),E}static assert(d){if(!(d instanceof ZodError))throw new Error(`Not a ZodError: ${d}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,util.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(d=g=>g.message){const g={},E=[];for(const b of this.issues)if(b.path.length>0){const w=b.path[0];g[w]=g[w]||[],g[w].push(d(b))}else E.push(d(b));return{formErrors:E,fieldErrors:g}}get formErrors(){return this.flatten()}}ZodError.create=x=>new ZodError(x);const errorMap=(x,d)=>{let g;switch(x.code){case ZodIssueCode.invalid_type:x.received===ZodParsedType.undefined?g="Required":g=`Expected ${x.expected}, received ${x.received}`;break;case ZodIssueCode.invalid_literal:g=`Invalid literal value, expected ${JSON.stringify(x.expected,util.jsonStringifyReplacer)}`;break;case ZodIssueCode.unrecognized_keys:g=`Unrecognized key(s) in object: ${util.joinValues(x.keys,", ")}`;break;case ZodIssueCode.invalid_union:g="Invalid input";break;case ZodIssueCode.invalid_union_discriminator:g=`Invalid discriminator value. Expected ${util.joinValues(x.options)}`;break;case ZodIssueCode.invalid_enum_value:g=`Invalid enum value. Expected ${util.joinValues(x.options)}, received '${x.received}'`;break;case ZodIssueCode.invalid_arguments:g="Invalid function arguments";break;case ZodIssueCode.invalid_return_type:g="Invalid function return type";break;case ZodIssueCode.invalid_date:g="Invalid date";break;case ZodIssueCode.invalid_string:typeof x.validation=="object"?"includes"in x.validation?(g=`Invalid input: must include "${x.validation.includes}"`,typeof x.validation.position=="number"&&(g=`${g} at one or more positions greater than or equal to ${x.validation.position}`)):"startsWith"in x.validation?g=`Invalid input: must start with "${x.validation.startsWith}"`:"endsWith"in x.validation?g=`Invalid input: must end with "${x.validation.endsWith}"`:util.assertNever(x.validation):x.validation!=="regex"?g=`Invalid ${x.validation}`:g="Invalid";break;case ZodIssueCode.too_small:x.type==="array"?g=`Array must contain ${x.exact?"exactly":x.inclusive?"at least":"more than"} ${x.minimum} element(s)`:x.type==="string"?g=`String must contain ${x.exact?"exactly":x.inclusive?"at least":"over"} ${x.minimum} character(s)`:x.type==="number"?g=`Number must be ${x.exact?"exactly equal to ":x.inclusive?"greater than or equal to ":"greater than "}${x.minimum}`:x.type==="bigint"?g=`Number must be ${x.exact?"exactly equal to ":x.inclusive?"greater than or equal to ":"greater than "}${x.minimum}`:x.type==="date"?g=`Date must be ${x.exact?"exactly equal to ":x.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(x.minimum))}`:g="Invalid input";break;case ZodIssueCode.too_big:x.type==="array"?g=`Array must contain ${x.exact?"exactly":x.inclusive?"at most":"less than"} ${x.maximum} element(s)`:x.type==="string"?g=`String must contain ${x.exact?"exactly":x.inclusive?"at most":"under"} ${x.maximum} character(s)`:x.type==="number"?g=`Number must be ${x.exact?"exactly":x.inclusive?"less than or equal to":"less than"} ${x.maximum}`:x.type==="bigint"?g=`BigInt must be ${x.exact?"exactly":x.inclusive?"less than or equal to":"less than"} ${x.maximum}`:x.type==="date"?g=`Date must be ${x.exact?"exactly":x.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(x.maximum))}`:g="Invalid input";break;case ZodIssueCode.custom:g="Invalid input";break;case ZodIssueCode.invalid_intersection_types:g="Intersection results could not be merged";break;case ZodIssueCode.not_multiple_of:g=`Number must be a multiple of ${x.multipleOf}`;break;case ZodIssueCode.not_finite:g="Number must be finite";break;default:g=d.defaultError,util.assertNever(x)}return{message:g}};let overrideErrorMap=errorMap;function getErrorMap(){return overrideErrorMap}const makeIssue=x=>{const{data:d,path:g,errorMaps:E,issueData:b}=x,w=[...g,...b.path||[]],C={...b,path:w};if(b.message!==void 0)return{...b,path:w,message:b.message};let S="";const P=E.filter(I=>!!I).slice().reverse();for(const I of P)S=I(C,{data:d,defaultError:S}).message;return{...b,path:w,message:S}};function addIssueToContext(x,d){const g=getErrorMap(),E=makeIssue({issueData:d,data:x.data,path:x.path,errorMaps:[x.common.contextualErrorMap,x.schemaErrorMap,g,g===errorMap?void 0:errorMap].filter(b=>!!b)});x.common.issues.push(E)}class ParseStatus{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(d,g){const E=[];for(const b of g){if(b.status==="aborted")return INVALID;b.status==="dirty"&&d.dirty(),E.push(b.value)}return{status:d.value,value:E}}static async mergeObjectAsync(d,g){const E=[];for(const b of g){const w=await b.key,C=await b.value;E.push({key:w,value:C})}return ParseStatus.mergeObjectSync(d,E)}static mergeObjectSync(d,g){const E={};for(const b of g){const{key:w,value:C}=b;if(w.status==="aborted"||C.status==="aborted")return INVALID;w.status==="dirty"&&d.dirty(),C.status==="dirty"&&d.dirty(),w.value!=="__proto__"&&(typeof C.value<"u"||b.alwaysSet)&&(E[w.value]=C.value)}return{status:d.value,value:E}}}const INVALID=Object.freeze({status:"aborted"}),DIRTY=x=>({status:"dirty",value:x}),OK=x=>({status:"valid",value:x}),isAborted=x=>x.status==="aborted",isDirty=x=>x.status==="dirty",isValid=x=>x.status==="valid",isAsync=x=>typeof Promise<"u"&&x instanceof Promise;var errorUtil;(function(x){x.errToObj=d=>typeof d=="string"?{message:d}:d||{},x.toString=d=>typeof d=="string"?d:d==null?void 0:d.message})(errorUtil||(errorUtil={}));class ParseInputLazyPath{constructor(d,g,E,b){this._cachedPath=[],this.parent=d,this.data=g,this._path=E,this._key=b}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const handleResult=(x,d)=>{if(isValid(d))return{success:!0,data:d.value};if(!x.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const g=new ZodError(x.common.issues);return this._error=g,this._error}}};function processCreateParams(x){if(!x)return{};const{errorMap:d,invalid_type_error:g,required_error:E,description:b}=x;if(d&&(g||E))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return d?{errorMap:d,description:b}:{errorMap:(C,S)=>{const{message:P}=x;return C.code==="invalid_enum_value"?{message:P??S.defaultError}:typeof S.data>"u"?{message:P??E??S.defaultError}:C.code!=="invalid_type"?{message:S.defaultError}:{message:P??g??S.defaultError}},description:b}}class ZodType{get description(){return this._def.description}_getType(d){return getParsedType(d.data)}_getOrReturnCtx(d,g){return g||{common:d.parent.common,data:d.data,parsedType:getParsedType(d.data),schemaErrorMap:this._def.errorMap,path:d.path,parent:d.parent}}_processInputParams(d){return{status:new ParseStatus,ctx:{common:d.parent.common,data:d.data,parsedType:getParsedType(d.data),schemaErrorMap:this._def.errorMap,path:d.path,parent:d.parent}}}_parseSync(d){const g=this._parse(d);if(isAsync(g))throw new Error("Synchronous parse encountered promise.");return g}_parseAsync(d){const g=this._parse(d);return Promise.resolve(g)}parse(d,g){const E=this.safeParse(d,g);if(E.success)return E.data;throw E.error}safeParse(d,g){const E={common:{issues:[],async:(g==null?void 0:g.async)??!1,contextualErrorMap:g==null?void 0:g.errorMap},path:(g==null?void 0:g.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:d,parsedType:getParsedType(d)},b=this._parseSync({data:d,path:E.path,parent:E});return handleResult(E,b)}"~validate"(d){var E,b;const g={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:d,parsedType:getParsedType(d)};if(!this["~standard"].async)try{const w=this._parseSync({data:d,path:[],parent:g});return isValid(w)?{value:w.value}:{issues:g.common.issues}}catch(w){(b=(E=w==null?void 0:w.message)==null?void 0:E.toLowerCase())!=null&&b.includes("encountered")&&(this["~standard"].async=!0),g.common={issues:[],async:!0}}return this._parseAsync({data:d,path:[],parent:g}).then(w=>isValid(w)?{value:w.value}:{issues:g.common.issues})}async parseAsync(d,g){const E=await this.safeParseAsync(d,g);if(E.success)return E.data;throw E.error}async safeParseAsync(d,g){const E={common:{issues:[],contextualErrorMap:g==null?void 0:g.errorMap,async:!0},path:(g==null?void 0:g.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:d,parsedType:getParsedType(d)},b=this._parse({data:d,path:E.path,parent:E}),w=await(isAsync(b)?b:Promise.resolve(b));return handleResult(E,w)}refine(d,g){const E=b=>typeof g=="string"||typeof g>"u"?{message:g}:typeof g=="function"?g(b):g;return this._refinement((b,w)=>{const C=d(b),S=()=>w.addIssue({code:ZodIssueCode.custom,...E(b)});return typeof Promise<"u"&&C instanceof Promise?C.then(P=>P?!0:(S(),!1)):C?!0:(S(),!1)})}refinement(d,g){return this._refinement((E,b)=>d(E)?!0:(b.addIssue(typeof g=="function"?g(E,b):g),!1))}_refinement(d){return new ZodEffects({schema:this,typeName:ZodFirstPartyTypeKind.ZodEffects,effect:{type:"refinement",refinement:d}})}superRefine(d){return this._refinement(d)}constructor(d){this.spa=this.safeParseAsync,this._def=d,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:g=>this["~validate"](g)}}optional(){return ZodOptional.create(this,this._def)}nullable(){return ZodNullable.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return ZodArray.create(this)}promise(){return ZodPromise.create(this,this._def)}or(d){return ZodUnion.create([this,d],this._def)}and(d){return ZodIntersection.create(this,d,this._def)}transform(d){return new ZodEffects({...processCreateParams(this._def),schema:this,typeName:ZodFirstPartyTypeKind.ZodEffects,effect:{type:"transform",transform:d}})}default(d){const g=typeof d=="function"?d:()=>d;return new ZodDefault({...processCreateParams(this._def),innerType:this,defaultValue:g,typeName:ZodFirstPartyTypeKind.ZodDefault})}brand(){return new ZodBranded({typeName:ZodFirstPartyTypeKind.ZodBranded,type:this,...processCreateParams(this._def)})}catch(d){const g=typeof d=="function"?d:()=>d;return new ZodCatch({...processCreateParams(this._def),innerType:this,catchValue:g,typeName:ZodFirstPartyTypeKind.ZodCatch})}describe(d){const g=this.constructor;return new g({...this._def,description:d})}pipe(d){return ZodPipeline.create(this,d)}readonly(){return ZodReadonly.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const cuidRegex=/^c[^\s-]{8,}$/i,cuid2Regex=/^[0-9a-z]+$/,ulidRegex=/^[0-9A-HJKMNP-TV-Z]{26}$/i,uuidRegex=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,nanoidRegex=/^[a-z0-9_-]{21}$/i,jwtRegex=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,durationRegex=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,emailRegex=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,_emojiRegex="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let emojiRegex;const ipv4Regex=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv4CidrRegex=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ipv6Regex=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,ipv6CidrRegex=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,base64Regex=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,base64urlRegex=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,dateRegexSource="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",dateRegex=new RegExp(`^${dateRegexSource}$`);function timeRegexSource(x){let d="[0-5]\\d";x.precision?d=`${d}\\.\\d{${x.precision}}`:x.precision==null&&(d=`${d}(\\.\\d+)?`);const g=x.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${d})${g}`}function timeRegex(x){return new RegExp(`^${timeRegexSource(x)}$`)}function datetimeRegex(x){let d=`${dateRegexSource}T${timeRegexSource(x)}`;const g=[];return g.push(x.local?"Z?":"Z"),x.offset&&g.push("([+-]\\d{2}:?\\d{2})"),d=`${d}(${g.join("|")})`,new RegExp(`^${d}$`)}function isValidIP(x,d){return!!((d==="v4"||!d)&&ipv4Regex.test(x)||(d==="v6"||!d)&&ipv6Regex.test(x))}function isValidJWT(x,d){if(!jwtRegex.test(x))return!1;try{const[g]=x.split(".");if(!g)return!1;const E=g.replace(/-/g,"+").replace(/_/g,"/").padEnd(g.length+(4-g.length%4)%4,"="),b=JSON.parse(atob(E));return!(typeof b!="object"||b===null||"typ"in b&&(b==null?void 0:b.typ)!=="JWT"||!b.alg||d&&b.alg!==d)}catch{return!1}}function isValidCidr(x,d){return!!((d==="v4"||!d)&&ipv4CidrRegex.test(x)||(d==="v6"||!d)&&ipv6CidrRegex.test(x))}class ZodString extends ZodType{_parse(d){if(this._def.coerce&&(d.data=String(d.data)),this._getType(d)!==ZodParsedType.string){const w=this._getOrReturnCtx(d);return addIssueToContext(w,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.string,received:w.parsedType}),INVALID}const E=new ParseStatus;let b;for(const w of this._def.checks)if(w.kind==="min")d.data.length<w.value&&(b=this._getOrReturnCtx(d,b),addIssueToContext(b,{code:ZodIssueCode.too_small,minimum:w.value,type:"string",inclusive:!0,exact:!1,message:w.message}),E.dirty());else if(w.kind==="max")d.data.length>w.value&&(b=this._getOrReturnCtx(d,b),addIssueToContext(b,{code:ZodIssueCode.too_big,maximum:w.value,type:"string",inclusive:!0,exact:!1,message:w.message}),E.dirty());else if(w.kind==="length"){const C=d.data.length>w.value,S=d.data.length<w.value;(C||S)&&(b=this._getOrReturnCtx(d,b),C?addIssueToContext(b,{code:ZodIssueCode.too_big,maximum:w.value,type:"string",inclusive:!0,exact:!0,message:w.message}):S&&addIssueToContext(b,{code:ZodIssueCode.too_small,minimum:w.value,type:"string",inclusive:!0,exact:!0,message:w.message}),E.dirty())}else if(w.kind==="email")emailRegex.test(d.data)||(b=this._getOrReturnCtx(d,b),addIssueToContext(b,{validation:"email",code:ZodIssueCode.invalid_string,message:w.message}),E.dirty());else if(w.kind==="emoji")emojiRegex||(emojiRegex=new RegExp(_emojiRegex,"u")),emojiRegex.test(d.data)||(b=this._getOrReturnCtx(d,b),addIssueToContext(b,{validation:"emoji",code:ZodIssueCode.invalid_string,message:w.message}),E.dirty());else if(w.kind==="uuid")uuidRegex.test(d.data)||(b=this._getOrReturnCtx(d,b),addIssueToContext(b,{validation:"uuid",code:ZodIssueCode.invalid_string,message:w.message}),E.dirty());else if(w.kind==="nanoid")nanoidRegex.test(d.data)||(b=this._getOrReturnCtx(d,b),addIssueToContext(b,{validation:"nanoid",code:ZodIssueCode.invalid_string,message:w.message}),E.dirty());else if(w.kind==="cuid")cuidRegex.test(d.data)||(b=this._getOrReturnCtx(d,b),addIssueToContext(b,{validation:"cuid",code:ZodIssueCode.invalid_string,message:w.message}),E.dirty());else if(w.kind==="cuid2")cuid2Regex.test(d.data)||(b=this._getOrReturnCtx(d,b),addIssueToContext(b,{validation:"cuid2",code:ZodIssueCode.invalid_string,message:w.message}),E.dirty());else if(w.kind==="ulid")ulidRegex.test(d.data)||(b=this._getOrReturnCtx(d,b),addIssueToContext(b,{validation:"ulid",code:ZodIssueCode.invalid_string,message:w.message}),E.dirty());else if(w.kind==="url")try{new URL(d.data)}catch{b=this._getOrReturnCtx(d,b),addIssueToContext(b,{validation:"url",code:ZodIssueCode.invalid_string,message:w.message}),E.dirty()}else w.kind==="regex"?(w.regex.lastIndex=0,w.regex.test(d.data)||(b=this._getOrReturnCtx(d,b),addIssueToContext(b,{validation:"regex",code:ZodIssueCode.invalid_string,message:w.message}),E.dirty())):w.kind==="trim"?d.data=d.data.trim():w.kind==="includes"?d.data.includes(w.value,w.position)||(b=this._getOrReturnCtx(d,b),addIssueToContext(b,{code:ZodIssueCode.invalid_string,validation:{includes:w.value,position:w.position},message:w.message}),E.dirty()):w.kind==="toLowerCase"?d.data=d.data.toLowerCase():w.kind==="toUpperCase"?d.data=d.data.toUpperCase():w.kind==="startsWith"?d.data.startsWith(w.value)||(b=this._getOrReturnCtx(d,b),addIssueToContext(b,{code:ZodIssueCode.invalid_string,validation:{startsWith:w.value},message:w.message}),E.dirty()):w.kind==="endsWith"?d.data.endsWith(w.value)||(b=this._getOrReturnCtx(d,b),addIssueToContext(b,{code:ZodIssueCode.invalid_string,validation:{endsWith:w.value},message:w.message}),E.dirty()):w.kind==="datetime"?datetimeRegex(w).test(d.data)||(b=this._getOrReturnCtx(d,b),addIssueToContext(b,{code:ZodIssueCode.invalid_string,validation:"datetime",message:w.message}),E.dirty()):w.kind==="date"?dateRegex.test(d.data)||(b=this._getOrReturnCtx(d,b),addIssueToContext(b,{code:ZodIssueCode.invalid_string,validation:"date",message:w.message}),E.dirty()):w.kind==="time"?timeRegex(w).test(d.data)||(b=this._getOrReturnCtx(d,b),addIssueToContext(b,{code:ZodIssueCode.invalid_string,validation:"time",message:w.message}),E.dirty()):w.kind==="duration"?durationRegex.test(d.data)||(b=this._getOrReturnCtx(d,b),addIssueToContext(b,{validation:"duration",code:ZodIssueCode.invalid_string,message:w.message}),E.dirty()):w.kind==="ip"?isValidIP(d.data,w.version)||(b=this._getOrReturnCtx(d,b),addIssueToContext(b,{validation:"ip",code:ZodIssueCode.invalid_string,message:w.message}),E.dirty()):w.kind==="jwt"?isValidJWT(d.data,w.alg)||(b=this._getOrReturnCtx(d,b),addIssueToContext(b,{validation:"jwt",code:ZodIssueCode.invalid_string,message:w.message}),E.dirty()):w.kind==="cidr"?isValidCidr(d.data,w.version)||(b=this._getOrReturnCtx(d,b),addIssueToContext(b,{validation:"cidr",code:ZodIssueCode.invalid_string,message:w.message}),E.dirty()):w.kind==="base64"?base64Regex.test(d.data)||(b=this._getOrReturnCtx(d,b),addIssueToContext(b,{validation:"base64",code:ZodIssueCode.invalid_string,message:w.message}),E.dirty()):w.kind==="base64url"?base64urlRegex.test(d.data)||(b=this._getOrReturnCtx(d,b),addIssueToContext(b,{validation:"base64url",code:ZodIssueCode.invalid_string,message:w.message}),E.dirty()):util.assertNever(w);return{status:E.value,value:d.data}}_regex(d,g,E){return this.refinement(b=>d.test(b),{validation:g,code:ZodIssueCode.invalid_string,...errorUtil.errToObj(E)})}_addCheck(d){return new ZodString({...this._def,checks:[...this._def.checks,d]})}email(d){return this._addCheck({kind:"email",...errorUtil.errToObj(d)})}url(d){return this._addCheck({kind:"url",...errorUtil.errToObj(d)})}emoji(d){return this._addCheck({kind:"emoji",...errorUtil.errToObj(d)})}uuid(d){return this._addCheck({kind:"uuid",...errorUtil.errToObj(d)})}nanoid(d){return this._addCheck({kind:"nanoid",...errorUtil.errToObj(d)})}cuid(d){return this._addCheck({kind:"cuid",...errorUtil.errToObj(d)})}cuid2(d){return this._addCheck({kind:"cuid2",...errorUtil.errToObj(d)})}ulid(d){return this._addCheck({kind:"ulid",...errorUtil.errToObj(d)})}base64(d){return this._addCheck({kind:"base64",...errorUtil.errToObj(d)})}base64url(d){return this._addCheck({kind:"base64url",...errorUtil.errToObj(d)})}jwt(d){return this._addCheck({kind:"jwt",...errorUtil.errToObj(d)})}ip(d){return this._addCheck({kind:"ip",...errorUtil.errToObj(d)})}cidr(d){return this._addCheck({kind:"cidr",...errorUtil.errToObj(d)})}datetime(d){return typeof d=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:d}):this._addCheck({kind:"datetime",precision:typeof(d==null?void 0:d.precision)>"u"?null:d==null?void 0:d.precision,offset:(d==null?void 0:d.offset)??!1,local:(d==null?void 0:d.local)??!1,...errorUtil.errToObj(d==null?void 0:d.message)})}date(d){return this._addCheck({kind:"date",message:d})}time(d){return typeof d=="string"?this._addCheck({kind:"time",precision:null,message:d}):this._addCheck({kind:"time",precision:typeof(d==null?void 0:d.precision)>"u"?null:d==null?void 0:d.precision,...errorUtil.errToObj(d==null?void 0:d.message)})}duration(d){return this._addCheck({kind:"duration",...errorUtil.errToObj(d)})}regex(d,g){return this._addCheck({kind:"regex",regex:d,...errorUtil.errToObj(g)})}includes(d,g){return this._addCheck({kind:"includes",value:d,position:g==null?void 0:g.position,...errorUtil.errToObj(g==null?void 0:g.message)})}startsWith(d,g){return this._addCheck({kind:"startsWith",value:d,...errorUtil.errToObj(g)})}endsWith(d,g){return this._addCheck({kind:"endsWith",value:d,...errorUtil.errToObj(g)})}min(d,g){return this._addCheck({kind:"min",value:d,...errorUtil.errToObj(g)})}max(d,g){return this._addCheck({kind:"max",value:d,...errorUtil.errToObj(g)})}length(d,g){return this._addCheck({kind:"length",value:d,...errorUtil.errToObj(g)})}nonempty(d){return this.min(1,errorUtil.errToObj(d))}trim(){return new ZodString({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new ZodString({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new ZodString({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(d=>d.kind==="datetime")}get isDate(){return!!this._def.checks.find(d=>d.kind==="date")}get isTime(){return!!this._def.checks.find(d=>d.kind==="time")}get isDuration(){return!!this._def.checks.find(d=>d.kind==="duration")}get isEmail(){return!!this._def.checks.find(d=>d.kind==="email")}get isURL(){return!!this._def.checks.find(d=>d.kind==="url")}get isEmoji(){return!!this._def.checks.find(d=>d.kind==="emoji")}get isUUID(){return!!this._def.checks.find(d=>d.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(d=>d.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(d=>d.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(d=>d.kind==="cuid2")}get isULID(){return!!this._def.checks.find(d=>d.kind==="ulid")}get isIP(){return!!this._def.checks.find(d=>d.kind==="ip")}get isCIDR(){return!!this._def.checks.find(d=>d.kind==="cidr")}get isBase64(){return!!this._def.checks.find(d=>d.kind==="base64")}get isBase64url(){return!!this._def.checks.find(d=>d.kind==="base64url")}get minLength(){let d=null;for(const g of this._def.checks)g.kind==="min"&&(d===null||g.value>d)&&(d=g.value);return d}get maxLength(){let d=null;for(const g of this._def.checks)g.kind==="max"&&(d===null||g.value<d)&&(d=g.value);return d}}ZodString.create=x=>new ZodString({checks:[],typeName:ZodFirstPartyTypeKind.ZodString,coerce:(x==null?void 0:x.coerce)??!1,...processCreateParams(x)});function floatSafeRemainder(x,d){const g=(x.toString().split(".")[1]||"").length,E=(d.toString().split(".")[1]||"").length,b=g>E?g:E,w=Number.parseInt(x.toFixed(b).replace(".","")),C=Number.parseInt(d.toFixed(b).replace(".",""));return w%C/10**b}class ZodNumber extends ZodType{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(d){if(this._def.coerce&&(d.data=Number(d.data)),this._getType(d)!==ZodParsedType.number){const w=this._getOrReturnCtx(d);return addIssueToContext(w,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.number,received:w.parsedType}),INVALID}let E;const b=new ParseStatus;for(const w of this._def.checks)w.kind==="int"?util.isInteger(d.data)||(E=this._getOrReturnCtx(d,E),addIssueToContext(E,{code:ZodIssueCode.invalid_type,expected:"integer",received:"float",message:w.message}),b.dirty()):w.kind==="min"?(w.inclusive?d.data<w.value:d.data<=w.value)&&(E=this._getOrReturnCtx(d,E),addIssueToContext(E,{code:ZodIssueCode.too_small,minimum:w.value,type:"number",inclusive:w.inclusive,exact:!1,message:w.message}),b.dirty()):w.kind==="max"?(w.inclusive?d.data>w.value:d.data>=w.value)&&(E=this._getOrReturnCtx(d,E),addIssueToContext(E,{code:ZodIssueCode.too_big,maximum:w.value,type:"number",inclusive:w.inclusive,exact:!1,message:w.message}),b.dirty()):w.kind==="multipleOf"?floatSafeRemainder(d.data,w.value)!==0&&(E=this._getOrReturnCtx(d,E),addIssueToContext(E,{code:ZodIssueCode.not_multiple_of,multipleOf:w.value,message:w.message}),b.dirty()):w.kind==="finite"?Number.isFinite(d.data)||(E=this._getOrReturnCtx(d,E),addIssueToContext(E,{code:ZodIssueCode.not_finite,message:w.message}),b.dirty()):util.assertNever(w);return{status:b.value,value:d.data}}gte(d,g){return this.setLimit("min",d,!0,errorUtil.toString(g))}gt(d,g){return this.setLimit("min",d,!1,errorUtil.toString(g))}lte(d,g){return this.setLimit("max",d,!0,errorUtil.toString(g))}lt(d,g){return this.setLimit("max",d,!1,errorUtil.toString(g))}setLimit(d,g,E,b){return new ZodNumber({...this._def,checks:[...this._def.checks,{kind:d,value:g,inclusive:E,message:errorUtil.toString(b)}]})}_addCheck(d){return new ZodNumber({...this._def,checks:[...this._def.checks,d]})}int(d){return this._addCheck({kind:"int",message:errorUtil.toString(d)})}positive(d){return this._addCheck({kind:"min",value:0,inclusive:!1,message:errorUtil.toString(d)})}negative(d){return this._addCheck({kind:"max",value:0,inclusive:!1,message:errorUtil.toString(d)})}nonpositive(d){return this._addCheck({kind:"max",value:0,inclusive:!0,message:errorUtil.toString(d)})}nonnegative(d){return this._addCheck({kind:"min",value:0,inclusive:!0,message:errorUtil.toString(d)})}multipleOf(d,g){return this._addCheck({kind:"multipleOf",value:d,message:errorUtil.toString(g)})}finite(d){return this._addCheck({kind:"finite",message:errorUtil.toString(d)})}safe(d){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:errorUtil.toString(d)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:errorUtil.toString(d)})}get minValue(){let d=null;for(const g of this._def.checks)g.kind==="min"&&(d===null||g.value>d)&&(d=g.value);return d}get maxValue(){let d=null;for(const g of this._def.checks)g.kind==="max"&&(d===null||g.value<d)&&(d=g.value);return d}get isInt(){return!!this._def.checks.find(d=>d.kind==="int"||d.kind==="multipleOf"&&util.isInteger(d.value))}get isFinite(){let d=null,g=null;for(const E of this._def.checks){if(E.kind==="finite"||E.kind==="int"||E.kind==="multipleOf")return!0;E.kind==="min"?(g===null||E.value>g)&&(g=E.value):E.kind==="max"&&(d===null||E.value<d)&&(d=E.value)}return Number.isFinite(g)&&Number.isFinite(d)}}ZodNumber.create=x=>new ZodNumber({checks:[],typeName:ZodFirstPartyTypeKind.ZodNumber,coerce:(x==null?void 0:x.coerce)||!1,...processCreateParams(x)});class ZodBigInt extends ZodType{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(d){if(this._def.coerce)try{d.data=BigInt(d.data)}catch{return this._getInvalidInput(d)}if(this._getType(d)!==ZodParsedType.bigint)return this._getInvalidInput(d);let E;const b=new ParseStatus;for(const w of this._def.checks)w.kind==="min"?(w.inclusive?d.data<w.value:d.data<=w.value)&&(E=this._getOrReturnCtx(d,E),addIssueToContext(E,{code:ZodIssueCode.too_small,type:"bigint",minimum:w.value,inclusive:w.inclusive,message:w.message}),b.dirty()):w.kind==="max"?(w.inclusive?d.data>w.value:d.data>=w.value)&&(E=this._getOrReturnCtx(d,E),addIssueToContext(E,{code:ZodIssueCode.too_big,type:"bigint",maximum:w.value,inclusive:w.inclusive,message:w.message}),b.dirty()):w.kind==="multipleOf"?d.data%w.value!==BigInt(0)&&(E=this._getOrReturnCtx(d,E),addIssueToContext(E,{code:ZodIssueCode.not_multiple_of,multipleOf:w.value,message:w.message}),b.dirty()):util.assertNever(w);return{status:b.value,value:d.data}}_getInvalidInput(d){const g=this._getOrReturnCtx(d);return addIssueToContext(g,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.bigint,received:g.parsedType}),INVALID}gte(d,g){return this.setLimit("min",d,!0,errorUtil.toString(g))}gt(d,g){return this.setLimit("min",d,!1,errorUtil.toString(g))}lte(d,g){return this.setLimit("max",d,!0,errorUtil.toString(g))}lt(d,g){return this.setLimit("max",d,!1,errorUtil.toString(g))}setLimit(d,g,E,b){return new ZodBigInt({...this._def,checks:[...this._def.checks,{kind:d,value:g,inclusive:E,message:errorUtil.toString(b)}]})}_addCheck(d){return new ZodBigInt({...this._def,checks:[...this._def.checks,d]})}positive(d){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:errorUtil.toString(d)})}negative(d){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:errorUtil.toString(d)})}nonpositive(d){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:errorUtil.toString(d)})}nonnegative(d){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:errorUtil.toString(d)})}multipleOf(d,g){return this._addCheck({kind:"multipleOf",value:d,message:errorUtil.toString(g)})}get minValue(){let d=null;for(const g of this._def.checks)g.kind==="min"&&(d===null||g.value>d)&&(d=g.value);return d}get maxValue(){let d=null;for(const g of this._def.checks)g.kind==="max"&&(d===null||g.value<d)&&(d=g.value);return d}}ZodBigInt.create=x=>new ZodBigInt({checks:[],typeName:ZodFirstPartyTypeKind.ZodBigInt,coerce:(x==null?void 0:x.coerce)??!1,...processCreateParams(x)});class ZodBoolean extends ZodType{_parse(d){if(this._def.coerce&&(d.data=!!d.data),this._getType(d)!==ZodParsedType.boolean){const E=this._getOrReturnCtx(d);return addIssueToContext(E,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.boolean,received:E.parsedType}),INVALID}return OK(d.data)}}ZodBoolean.create=x=>new ZodBoolean({typeName:ZodFirstPartyTypeKind.ZodBoolean,coerce:(x==null?void 0:x.coerce)||!1,...processCreateParams(x)});class ZodDate extends ZodType{_parse(d){if(this._def.coerce&&(d.data=new Date(d.data)),this._getType(d)!==ZodParsedType.date){const w=this._getOrReturnCtx(d);return addIssueToContext(w,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.date,received:w.parsedType}),INVALID}if(Number.isNaN(d.data.getTime())){const w=this._getOrReturnCtx(d);return addIssueToContext(w,{code:ZodIssueCode.invalid_date}),INVALID}const E=new ParseStatus;let b;for(const w of this._def.checks)w.kind==="min"?d.data.getTime()<w.value&&(b=this._getOrReturnCtx(d,b),addIssueToContext(b,{code:ZodIssueCode.too_small,message:w.message,inclusive:!0,exact:!1,minimum:w.value,type:"date"}),E.dirty()):w.kind==="max"?d.data.getTime()>w.value&&(b=this._getOrReturnCtx(d,b),addIssueToContext(b,{code:ZodIssueCode.too_big,message:w.message,inclusive:!0,exact:!1,maximum:w.value,type:"date"}),E.dirty()):util.assertNever(w);return{status:E.value,value:new Date(d.data.getTime())}}_addCheck(d){return new ZodDate({...this._def,checks:[...this._def.checks,d]})}min(d,g){return this._addCheck({kind:"min",value:d.getTime(),message:errorUtil.toString(g)})}max(d,g){return this._addCheck({kind:"max",value:d.getTime(),message:errorUtil.toString(g)})}get minDate(){let d=null;for(const g of this._def.checks)g.kind==="min"&&(d===null||g.value>d)&&(d=g.value);return d!=null?new Date(d):null}get maxDate(){let d=null;for(const g of this._def.checks)g.kind==="max"&&(d===null||g.value<d)&&(d=g.value);return d!=null?new Date(d):null}}ZodDate.create=x=>new ZodDate({checks:[],coerce:(x==null?void 0:x.coerce)||!1,typeName:ZodFirstPartyTypeKind.ZodDate,...processCreateParams(x)});class ZodSymbol extends ZodType{_parse(d){if(this._getType(d)!==ZodParsedType.symbol){const E=this._getOrReturnCtx(d);return addIssueToContext(E,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.symbol,received:E.parsedType}),INVALID}return OK(d.data)}}ZodSymbol.create=x=>new ZodSymbol({typeName:ZodFirstPartyTypeKind.ZodSymbol,...processCreateParams(x)});class ZodUndefined extends ZodType{_parse(d){if(this._getType(d)!==ZodParsedType.undefined){const E=this._getOrReturnCtx(d);return addIssueToContext(E,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.undefined,received:E.parsedType}),INVALID}return OK(d.data)}}ZodUndefined.create=x=>new ZodUndefined({typeName:ZodFirstPartyTypeKind.ZodUndefined,...processCreateParams(x)});class ZodNull extends ZodType{_parse(d){if(this._getType(d)!==ZodParsedType.null){const E=this._getOrReturnCtx(d);return addIssueToContext(E,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.null,received:E.parsedType}),INVALID}return OK(d.data)}}ZodNull.create=x=>new ZodNull({typeName:ZodFirstPartyTypeKind.ZodNull,...processCreateParams(x)});class ZodAny extends ZodType{constructor(){super(...arguments),this._any=!0}_parse(d){return OK(d.data)}}ZodAny.create=x=>new ZodAny({typeName:ZodFirstPartyTypeKind.ZodAny,...processCreateParams(x)});class ZodUnknown extends ZodType{constructor(){super(...arguments),this._unknown=!0}_parse(d){return OK(d.data)}}ZodUnknown.create=x=>new ZodUnknown({typeName:ZodFirstPartyTypeKind.ZodUnknown,...processCreateParams(x)});class ZodNever extends ZodType{_parse(d){const g=this._getOrReturnCtx(d);return addIssueToContext(g,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.never,received:g.parsedType}),INVALID}}ZodNever.create=x=>new ZodNever({typeName:ZodFirstPartyTypeKind.ZodNever,...processCreateParams(x)});class ZodVoid extends ZodType{_parse(d){if(this._getType(d)!==ZodParsedType.undefined){const E=this._getOrReturnCtx(d);return addIssueToContext(E,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.void,received:E.parsedType}),INVALID}return OK(d.data)}}ZodVoid.create=x=>new ZodVoid({typeName:ZodFirstPartyTypeKind.ZodVoid,...processCreateParams(x)});class ZodArray extends ZodType{_parse(d){const{ctx:g,status:E}=this._processInputParams(d),b=this._def;if(g.parsedType!==ZodParsedType.array)return addIssueToContext(g,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.array,received:g.parsedType}),INVALID;if(b.exactLength!==null){const C=g.data.length>b.exactLength.value,S=g.data.length<b.exactLength.value;(C||S)&&(addIssueToContext(g,{code:C?ZodIssueCode.too_big:ZodIssueCode.too_small,minimum:S?b.exactLength.value:void 0,maximum:C?b.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:b.exactLength.message}),E.dirty())}if(b.minLength!==null&&g.data.length<b.minLength.value&&(addIssueToContext(g,{code:ZodIssueCode.too_small,minimum:b.minLength.value,type:"array",inclusive:!0,exact:!1,message:b.minLength.message}),E.dirty()),b.maxLength!==null&&g.data.length>b.maxLength.value&&(addIssueToContext(g,{code:ZodIssueCode.too_big,maximum:b.maxLength.value,type:"array",inclusive:!0,exact:!1,message:b.maxLength.message}),E.dirty()),g.common.async)return Promise.all([...g.data].map((C,S)=>b.type._parseAsync(new ParseInputLazyPath(g,C,g.path,S)))).then(C=>ParseStatus.mergeArray(E,C));const w=[...g.data].map((C,S)=>b.type._parseSync(new ParseInputLazyPath(g,C,g.path,S)));return ParseStatus.mergeArray(E,w)}get element(){return this._def.type}min(d,g){return new ZodArray({...this._def,minLength:{value:d,message:errorUtil.toString(g)}})}max(d,g){return new ZodArray({...this._def,maxLength:{value:d,message:errorUtil.toString(g)}})}length(d,g){return new ZodArray({...this._def,exactLength:{value:d,message:errorUtil.toString(g)}})}nonempty(d){return this.min(1,d)}}ZodArray.create=(x,d)=>new ZodArray({type:x,minLength:null,maxLength:null,exactLength:null,typeName:ZodFirstPartyTypeKind.ZodArray,...processCreateParams(d)});function deepPartialify(x){if(x instanceof ZodObject){const d={};for(const g in x.shape){const E=x.shape[g];d[g]=ZodOptional.create(deepPartialify(E))}return new ZodObject({...x._def,shape:()=>d})}else return x instanceof ZodArray?new ZodArray({...x._def,type:deepPartialify(x.element)}):x instanceof ZodOptional?ZodOptional.create(deepPartialify(x.unwrap())):x instanceof ZodNullable?ZodNullable.create(deepPartialify(x.unwrap())):x instanceof ZodTuple?ZodTuple.create(x.items.map(d=>deepPartialify(d))):x}class ZodObject extends ZodType{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const d=this._def.shape(),g=util.objectKeys(d);return this._cached={shape:d,keys:g},this._cached}_parse(d){if(this._getType(d)!==ZodParsedType.object){const I=this._getOrReturnCtx(d);return addIssueToContext(I,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.object,received:I.parsedType}),INVALID}const{status:E,ctx:b}=this._processInputParams(d),{shape:w,keys:C}=this._getCached(),S=[];if(!(this._def.catchall instanceof ZodNever&&this._def.unknownKeys==="strip"))for(const I in b.data)C.includes(I)||S.push(I);const P=[];for(const I of C){const M=w[I],D=b.data[I];P.push({key:{status:"valid",value:I},value:M._parse(new ParseInputLazyPath(b,D,b.path,I)),alwaysSet:I in b.data})}if(this._def.catchall instanceof ZodNever){const I=this._def.unknownKeys;if(I==="passthrough")for(const M of S)P.push({key:{status:"valid",value:M},value:{status:"valid",value:b.data[M]}});else if(I==="strict")S.length>0&&(addIssueToContext(b,{code:ZodIssueCode.unrecognized_keys,keys:S}),E.dirty());else if(I!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const I=this._def.catchall;for(const M of S){const D=b.data[M];P.push({key:{status:"valid",value:M},value:I._parse(new ParseInputLazyPath(b,D,b.path,M)),alwaysSet:M in b.data})}}return b.common.async?Promise.resolve().then(async()=>{const I=[];for(const M of P){const D=await M.key,k=await M.value;I.push({key:D,value:k,alwaysSet:M.alwaysSet})}return I}).then(I=>ParseStatus.mergeObjectSync(E,I)):ParseStatus.mergeObjectSync(E,P)}get shape(){return this._def.shape()}strict(d){return errorUtil.errToObj,new ZodObject({...this._def,unknownKeys:"strict",...d!==void 0?{errorMap:(g,E)=>{var w,C;const b=((C=(w=this._def).errorMap)==null?void 0:C.call(w,g,E).message)??E.defaultError;return g.code==="unrecognized_keys"?{message:errorUtil.errToObj(d).message??b}:{message:b}}}:{}})}strip(){return new ZodObject({...this._def,unknownKeys:"strip"})}passthrough(){return new ZodObject({...this._def,unknownKeys:"passthrough"})}extend(d){return new ZodObject({...this._def,shape:()=>({...this._def.shape(),...d})})}merge(d){return new ZodObject({unknownKeys:d._def.unknownKeys,catchall:d._def.catchall,shape:()=>({...this._def.shape(),...d._def.shape()}),typeName:ZodFirstPartyTypeKind.ZodObject})}setKey(d,g){return this.augment({[d]:g})}catchall(d){return new ZodObject({...this._def,catchall:d})}pick(d){const g={};for(const E of util.objectKeys(d))d[E]&&this.shape[E]&&(g[E]=this.shape[E]);return new ZodObject({...this._def,shape:()=>g})}omit(d){const g={};for(const E of util.objectKeys(this.shape))d[E]||(g[E]=this.shape[E]);return new ZodObject({...this._def,shape:()=>g})}deepPartial(){return deepPartialify(this)}partial(d){const g={};for(const E of util.objectKeys(this.shape)){const b=this.shape[E];d&&!d[E]?g[E]=b:g[E]=b.optional()}return new ZodObject({...this._def,shape:()=>g})}required(d){const g={};for(const E of util.objectKeys(this.shape))if(d&&!d[E])g[E]=this.shape[E];else{let w=this.shape[E];for(;w instanceof ZodOptional;)w=w._def.innerType;g[E]=w}return new ZodObject({...this._def,shape:()=>g})}keyof(){return createZodEnum(util.objectKeys(this.shape))}}ZodObject.create=(x,d)=>new ZodObject({shape:()=>x,unknownKeys:"strip",catchall:ZodNever.create(),typeName:ZodFirstPartyTypeKind.ZodObject,...processCreateParams(d)});ZodObject.strictCreate=(x,d)=>new ZodObject({shape:()=>x,unknownKeys:"strict",catchall:ZodNever.create(),typeName:ZodFirstPartyTypeKind.ZodObject,...processCreateParams(d)});ZodObject.lazycreate=(x,d)=>new ZodObject({shape:x,unknownKeys:"strip",catchall:ZodNever.create(),typeName:ZodFirstPartyTypeKind.ZodObject,...processCreateParams(d)});class ZodUnion extends ZodType{_parse(d){const{ctx:g}=this._processInputParams(d),E=this._def.options;function b(w){for(const S of w)if(S.result.status==="valid")return S.result;for(const S of w)if(S.result.status==="dirty")return g.common.issues.push(...S.ctx.common.issues),S.result;const C=w.map(S=>new ZodError(S.ctx.common.issues));return addIssueToContext(g,{code:ZodIssueCode.invalid_union,unionErrors:C}),INVALID}if(g.common.async)return Promise.all(E.map(async w=>{const C={...g,common:{...g.common,issues:[]},parent:null};return{result:await w._parseAsync({data:g.data,path:g.path,parent:C}),ctx:C}})).then(b);{let w;const C=[];for(const P of E){const I={...g,common:{...g.common,issues:[]},parent:null},M=P._parseSync({data:g.data,path:g.path,parent:I});if(M.status==="valid")return M;M.status==="dirty"&&!w&&(w={result:M,ctx:I}),I.common.issues.length&&C.push(I.common.issues)}if(w)return g.common.issues.push(...w.ctx.common.issues),w.result;const S=C.map(P=>new ZodError(P));return addIssueToContext(g,{code:ZodIssueCode.invalid_union,unionErrors:S}),INVALID}}get options(){return this._def.options}}ZodUnion.create=(x,d)=>new ZodUnion({options:x,typeName:ZodFirstPartyTypeKind.ZodUnion,...processCreateParams(d)});function mergeValues(x,d){const g=getParsedType(x),E=getParsedType(d);if(x===d)return{valid:!0,data:x};if(g===ZodParsedType.object&&E===ZodParsedType.object){const b=util.objectKeys(d),w=util.objectKeys(x).filter(S=>b.indexOf(S)!==-1),C={...x,...d};for(const S of w){const P=mergeValues(x[S],d[S]);if(!P.valid)return{valid:!1};C[S]=P.data}return{valid:!0,data:C}}else if(g===ZodParsedType.array&&E===ZodParsedType.array){if(x.length!==d.length)return{valid:!1};const b=[];for(let w=0;w<x.length;w++){const C=x[w],S=d[w],P=mergeValues(C,S);if(!P.valid)return{valid:!1};b.push(P.data)}return{valid:!0,data:b}}else return g===ZodParsedType.date&&E===ZodParsedType.date&&+x==+d?{valid:!0,data:x}:{valid:!1}}class ZodIntersection extends ZodType{_parse(d){const{status:g,ctx:E}=this._processInputParams(d),b=(w,C)=>{if(isAborted(w)||isAborted(C))return INVALID;const S=mergeValues(w.value,C.value);return S.valid?((isDirty(w)||isDirty(C))&&g.dirty(),{status:g.value,value:S.data}):(addIssueToContext(E,{code:ZodIssueCode.invalid_intersection_types}),INVALID)};return E.common.async?Promise.all([this._def.left._parseAsync({data:E.data,path:E.path,parent:E}),this._def.right._parseAsync({data:E.data,path:E.path,parent:E})]).then(([w,C])=>b(w,C)):b(this._def.left._parseSync({data:E.data,path:E.path,parent:E}),this._def.right._parseSync({data:E.data,path:E.path,parent:E}))}}ZodIntersection.create=(x,d,g)=>new ZodIntersection({left:x,right:d,typeName:ZodFirstPartyTypeKind.ZodIntersection,...processCreateParams(g)});class ZodTuple extends ZodType{_parse(d){const{status:g,ctx:E}=this._processInputParams(d);if(E.parsedType!==ZodParsedType.array)return addIssueToContext(E,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.array,received:E.parsedType}),INVALID;if(E.data.length<this._def.items.length)return addIssueToContext(E,{code:ZodIssueCode.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),INVALID;!this._def.rest&&E.data.length>this._def.items.length&&(addIssueToContext(E,{code:ZodIssueCode.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),g.dirty());const w=[...E.data].map((C,S)=>{const P=this._def.items[S]||this._def.rest;return P?P._parse(new ParseInputLazyPath(E,C,E.path,S)):null}).filter(C=>!!C);return E.common.async?Promise.all(w).then(C=>ParseStatus.mergeArray(g,C)):ParseStatus.mergeArray(g,w)}get items(){return this._def.items}rest(d){return new ZodTuple({...this._def,rest:d})}}ZodTuple.create=(x,d)=>{if(!Array.isArray(x))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new ZodTuple({items:x,typeName:ZodFirstPartyTypeKind.ZodTuple,rest:null,...processCreateParams(d)})};class ZodMap extends ZodType{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(d){const{status:g,ctx:E}=this._processInputParams(d);if(E.parsedType!==ZodParsedType.map)return addIssueToContext(E,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.map,received:E.parsedType}),INVALID;const b=this._def.keyType,w=this._def.valueType,C=[...E.data.entries()].map(([S,P],I)=>({key:b._parse(new ParseInputLazyPath(E,S,E.path,[I,"key"])),value:w._parse(new ParseInputLazyPath(E,P,E.path,[I,"value"]))}));if(E.common.async){const S=new Map;return Promise.resolve().then(async()=>{for(const P of C){const I=await P.key,M=await P.value;if(I.status==="aborted"||M.status==="aborted")return INVALID;(I.status==="dirty"||M.status==="dirty")&&g.dirty(),S.set(I.value,M.value)}return{status:g.value,value:S}})}else{const S=new Map;for(const P of C){const I=P.key,M=P.value;if(I.status==="aborted"||M.status==="aborted")return INVALID;(I.status==="dirty"||M.status==="dirty")&&g.dirty(),S.set(I.value,M.value)}return{status:g.value,value:S}}}}ZodMap.create=(x,d,g)=>new ZodMap({valueType:d,keyType:x,typeName:ZodFirstPartyTypeKind.ZodMap,...processCreateParams(g)});class ZodSet extends ZodType{_parse(d){const{status:g,ctx:E}=this._processInputParams(d);if(E.parsedType!==ZodParsedType.set)return addIssueToContext(E,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.set,received:E.parsedType}),INVALID;const b=this._def;b.minSize!==null&&E.data.size<b.minSize.value&&(addIssueToContext(E,{code:ZodIssueCode.too_small,minimum:b.minSize.value,type:"set",inclusive:!0,exact:!1,message:b.minSize.message}),g.dirty()),b.maxSize!==null&&E.data.size>b.maxSize.value&&(addIssueToContext(E,{code:ZodIssueCode.too_big,maximum:b.maxSize.value,type:"set",inclusive:!0,exact:!1,message:b.maxSize.message}),g.dirty());const w=this._def.valueType;function C(P){const I=new Set;for(const M of P){if(M.status==="aborted")return INVALID;M.status==="dirty"&&g.dirty(),I.add(M.value)}return{status:g.value,value:I}}const S=[...E.data.values()].map((P,I)=>w._parse(new ParseInputLazyPath(E,P,E.path,I)));return E.common.async?Promise.all(S).then(P=>C(P)):C(S)}min(d,g){return new ZodSet({...this._def,minSize:{value:d,message:errorUtil.toString(g)}})}max(d,g){return new ZodSet({...this._def,maxSize:{value:d,message:errorUtil.toString(g)}})}size(d,g){return this.min(d,g).max(d,g)}nonempty(d){return this.min(1,d)}}ZodSet.create=(x,d)=>new ZodSet({valueType:x,minSize:null,maxSize:null,typeName:ZodFirstPartyTypeKind.ZodSet,...processCreateParams(d)});class ZodLazy extends ZodType{get schema(){return this._def.getter()}_parse(d){const{ctx:g}=this._processInputParams(d);return this._def.getter()._parse({data:g.data,path:g.path,parent:g})}}ZodLazy.create=(x,d)=>new ZodLazy({getter:x,typeName:ZodFirstPartyTypeKind.ZodLazy,...processCreateParams(d)});class ZodLiteral extends ZodType{_parse(d){if(d.data!==this._def.value){const g=this._getOrReturnCtx(d);return addIssueToContext(g,{received:g.data,code:ZodIssueCode.invalid_literal,expected:this._def.value}),INVALID}return{status:"valid",value:d.data}}get value(){return this._def.value}}ZodLiteral.create=(x,d)=>new ZodLiteral({value:x,typeName:ZodFirstPartyTypeKind.ZodLiteral,...processCreateParams(d)});function createZodEnum(x,d){return new ZodEnum({values:x,typeName:ZodFirstPartyTypeKind.ZodEnum,...processCreateParams(d)})}class ZodEnum extends ZodType{_parse(d){if(typeof d.data!="string"){const g=this._getOrReturnCtx(d),E=this._def.values;return addIssueToContext(g,{expected:util.joinValues(E),received:g.parsedType,code:ZodIssueCode.invalid_type}),INVALID}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(d.data)){const g=this._getOrReturnCtx(d),E=this._def.values;return addIssueToContext(g,{received:g.data,code:ZodIssueCode.invalid_enum_value,options:E}),INVALID}return OK(d.data)}get options(){return this._def.values}get enum(){const d={};for(const g of this._def.values)d[g]=g;return d}get Values(){const d={};for(const g of this._def.values)d[g]=g;return d}get Enum(){const d={};for(const g of this._def.values)d[g]=g;return d}extract(d,g=this._def){return ZodEnum.create(d,{...this._def,...g})}exclude(d,g=this._def){return ZodEnum.create(this.options.filter(E=>!d.includes(E)),{...this._def,...g})}}ZodEnum.create=createZodEnum;class ZodNativeEnum extends ZodType{_parse(d){const g=util.getValidEnumValues(this._def.values),E=this._getOrReturnCtx(d);if(E.parsedType!==ZodParsedType.string&&E.parsedType!==ZodParsedType.number){const b=util.objectValues(g);return addIssueToContext(E,{expected:util.joinValues(b),received:E.parsedType,code:ZodIssueCode.invalid_type}),INVALID}if(this._cache||(this._cache=new Set(util.getValidEnumValues(this._def.values))),!this._cache.has(d.data)){const b=util.objectValues(g);return addIssueToContext(E,{received:E.data,code:ZodIssueCode.invalid_enum_value,options:b}),INVALID}return OK(d.data)}get enum(){return this._def.values}}ZodNativeEnum.create=(x,d)=>new ZodNativeEnum({values:x,typeName:ZodFirstPartyTypeKind.ZodNativeEnum,...processCreateParams(d)});class ZodPromise extends ZodType{unwrap(){return this._def.type}_parse(d){const{ctx:g}=this._processInputParams(d);if(g.parsedType!==ZodParsedType.promise&&g.common.async===!1)return addIssueToContext(g,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.promise,received:g.parsedType}),INVALID;const E=g.parsedType===ZodParsedType.promise?g.data:Promise.resolve(g.data);return OK(E.then(b=>this._def.type.parseAsync(b,{path:g.path,errorMap:g.common.contextualErrorMap})))}}ZodPromise.create=(x,d)=>new ZodPromise({type:x,typeName:ZodFirstPartyTypeKind.ZodPromise,...processCreateParams(d)});class ZodEffects extends ZodType{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===ZodFirstPartyTypeKind.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(d){const{status:g,ctx:E}=this._processInputParams(d),b=this._def.effect||null,w={addIssue:C=>{addIssueToContext(E,C),C.fatal?g.abort():g.dirty()},get path(){return E.path}};if(w.addIssue=w.addIssue.bind(w),b.type==="preprocess"){const C=b.transform(E.data,w);if(E.common.async)return Promise.resolve(C).then(async S=>{if(g.value==="aborted")return INVALID;const P=await this._def.schema._parseAsync({data:S,path:E.path,parent:E});return P.status==="aborted"?INVALID:P.status==="dirty"||g.value==="dirty"?DIRTY(P.value):P});{if(g.value==="aborted")return INVALID;const S=this._def.schema._parseSync({data:C,path:E.path,parent:E});return S.status==="aborted"?INVALID:S.status==="dirty"||g.value==="dirty"?DIRTY(S.value):S}}if(b.type==="refinement"){const C=S=>{const P=b.refinement(S,w);if(E.common.async)return Promise.resolve(P);if(P instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return S};if(E.common.async===!1){const S=this._def.schema._parseSync({data:E.data,path:E.path,parent:E});return S.status==="aborted"?INVALID:(S.status==="dirty"&&g.dirty(),C(S.value),{status:g.value,value:S.value})}else return this._def.schema._parseAsync({data:E.data,path:E.path,parent:E}).then(S=>S.status==="aborted"?INVALID:(S.status==="dirty"&&g.dirty(),C(S.value).then(()=>({status:g.value,value:S.value}))))}if(b.type==="transform")if(E.common.async===!1){const C=this._def.schema._parseSync({data:E.data,path:E.path,parent:E});if(!isValid(C))return INVALID;const S=b.transform(C.value,w);if(S instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:g.value,value:S}}else return this._def.schema._parseAsync({data:E.data,path:E.path,parent:E}).then(C=>isValid(C)?Promise.resolve(b.transform(C.value,w)).then(S=>({status:g.value,value:S})):INVALID);util.assertNever(b)}}ZodEffects.create=(x,d,g)=>new ZodEffects({schema:x,typeName:ZodFirstPartyTypeKind.ZodEffects,effect:d,...processCreateParams(g)});ZodEffects.createWithPreprocess=(x,d,g)=>new ZodEffects({schema:d,effect:{type:"preprocess",transform:x},typeName:ZodFirstPartyTypeKind.ZodEffects,...processCreateParams(g)});class ZodOptional extends ZodType{_parse(d){return this._getType(d)===ZodParsedType.undefined?OK(void 0):this._def.innerType._parse(d)}unwrap(){return this._def.innerType}}ZodOptional.create=(x,d)=>new ZodOptional({innerType:x,typeName:ZodFirstPartyTypeKind.ZodOptional,...processCreateParams(d)});class ZodNullable extends ZodType{_parse(d){return this._getType(d)===ZodParsedType.null?OK(null):this._def.innerType._parse(d)}unwrap(){return this._def.innerType}}ZodNullable.create=(x,d)=>new ZodNullable({innerType:x,typeName:ZodFirstPartyTypeKind.ZodNullable,...processCreateParams(d)});class ZodDefault extends ZodType{_parse(d){const{ctx:g}=this._processInputParams(d);let E=g.data;return g.parsedType===ZodParsedType.undefined&&(E=this._def.defaultValue()),this._def.innerType._parse({data:E,path:g.path,parent:g})}removeDefault(){return this._def.innerType}}ZodDefault.create=(x,d)=>new ZodDefault({innerType:x,typeName:ZodFirstPartyTypeKind.ZodDefault,defaultValue:typeof d.default=="function"?d.default:()=>d.default,...processCreateParams(d)});class ZodCatch extends ZodType{_parse(d){const{ctx:g}=this._processInputParams(d),E={...g,common:{...g.common,issues:[]}},b=this._def.innerType._parse({data:E.data,path:E.path,parent:{...E}});return isAsync(b)?b.then(w=>({status:"valid",value:w.status==="valid"?w.value:this._def.catchValue({get error(){return new ZodError(E.common.issues)},input:E.data})})):{status:"valid",value:b.status==="valid"?b.value:this._def.catchValue({get error(){return new ZodError(E.common.issues)},input:E.data})}}removeCatch(){return this._def.innerType}}ZodCatch.create=(x,d)=>new ZodCatch({innerType:x,typeName:ZodFirstPartyTypeKind.ZodCatch,catchValue:typeof d.catch=="function"?d.catch:()=>d.catch,...processCreateParams(d)});class ZodNaN extends ZodType{_parse(d){if(this._getType(d)!==ZodParsedType.nan){const E=this._getOrReturnCtx(d);return addIssueToContext(E,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.nan,received:E.parsedType}),INVALID}return{status:"valid",value:d.data}}}ZodNaN.create=x=>new ZodNaN({typeName:ZodFirstPartyTypeKind.ZodNaN,...processCreateParams(x)});class ZodBranded extends ZodType{_parse(d){const{ctx:g}=this._processInputParams(d),E=g.data;return this._def.type._parse({data:E,path:g.path,parent:g})}unwrap(){return this._def.type}}class ZodPipeline extends ZodType{_parse(d){const{status:g,ctx:E}=this._processInputParams(d);if(E.common.async)return(async()=>{const w=await this._def.in._parseAsync({data:E.data,path:E.path,parent:E});return w.status==="aborted"?INVALID:w.status==="dirty"?(g.dirty(),DIRTY(w.value)):this._def.out._parseAsync({data:w.value,path:E.path,parent:E})})();{const b=this._def.in._parseSync({data:E.data,path:E.path,parent:E});return b.status==="aborted"?INVALID:b.status==="dirty"?(g.dirty(),{status:"dirty",value:b.value}):this._def.out._parseSync({data:b.value,path:E.path,parent:E})}}static create(d,g){return new ZodPipeline({in:d,out:g,typeName:ZodFirstPartyTypeKind.ZodPipeline})}}class ZodReadonly extends ZodType{_parse(d){const g=this._def.innerType._parse(d),E=b=>(isValid(b)&&(b.value=Object.freeze(b.value)),b);return isAsync(g)?g.then(b=>E(b)):E(g)}unwrap(){return this._def.innerType}}ZodReadonly.create=(x,d)=>new ZodReadonly({innerType:x,typeName:ZodFirstPartyTypeKind.ZodReadonly,...processCreateParams(d)});function cleanParams(x,d){const g=typeof x=="function"?x(d):typeof x=="string"?{message:x}:x;return typeof g=="string"?{message:g}:g}function custom(x,d={},g){return x?ZodAny.create().superRefine((E,b)=>{const w=x(E);if(w instanceof Promise)return w.then(C=>{if(!C){const S=cleanParams(d,E),P=S.fatal??g??!0;b.addIssue({code:"custom",...S,fatal:P})}});if(!w){const C=cleanParams(d,E),S=C.fatal??g??!0;b.addIssue({code:"custom",...C,fatal:S})}}):ZodAny.create()}var ZodFirstPartyTypeKind;(function(x){x.ZodString="ZodString",x.ZodNumber="ZodNumber",x.ZodNaN="ZodNaN",x.ZodBigInt="ZodBigInt",x.ZodBoolean="ZodBoolean",x.ZodDate="ZodDate",x.ZodSymbol="ZodSymbol",x.ZodUndefined="ZodUndefined",x.ZodNull="ZodNull",x.ZodAny="ZodAny",x.ZodUnknown="ZodUnknown",x.ZodNever="ZodNever",x.ZodVoid="ZodVoid",x.ZodArray="ZodArray",x.ZodObject="ZodObject",x.ZodUnion="ZodUnion",x.ZodDiscriminatedUnion="ZodDiscriminatedUnion",x.ZodIntersection="ZodIntersection",x.ZodTuple="ZodTuple",x.ZodRecord="ZodRecord",x.ZodMap="ZodMap",x.ZodSet="ZodSet",x.ZodFunction="ZodFunction",x.ZodLazy="ZodLazy",x.ZodLiteral="ZodLiteral",x.ZodEnum="ZodEnum",x.ZodEffects="ZodEffects",x.ZodNativeEnum="ZodNativeEnum",x.ZodOptional="ZodOptional",x.ZodNullable="ZodNullable",x.ZodDefault="ZodDefault",x.ZodCatch="ZodCatch",x.ZodPromise="ZodPromise",x.ZodBranded="ZodBranded",x.ZodPipeline="ZodPipeline",x.ZodReadonly="ZodReadonly"})(ZodFirstPartyTypeKind||(ZodFirstPartyTypeKind={}));const stringType=ZodString.create,numberType=ZodNumber.create,booleanType=ZodBoolean.create;ZodAny.create;ZodNever.create;ZodArray.create;const objectType=ZodObject.create;ZodUnion.create;ZodIntersection.create;ZodTuple.create;const lazyType=ZodLazy.create,enumType=ZodEnum.create;ZodPromise.create;ZodOptional.create;ZodNullable.create;const GoalTypeSchema=enumType(["Functional","Quality","Stakeholder","Negative","Emotional"]),instanceId=custom(x=>typeof x=="string"&&/^\d+-\d+$/.test(x)),GoalBaseSchema=objectType({GoalID:numberType(),instanceId,GoalType:GoalTypeSchema,GoalContent:stringType(),GoalNote:stringType(),GoalColor:stringType()}),GoalSchema=GoalBaseSchema.extend({Used:booleanType()}),GoalListSchema=objectType({FunctionalNum:numberType(),EmotionalNum:numberType(),QualityNum:numberType(),NegativeNum:numberType(),StakeholderNum:numberType(),Functional:GoalSchema.array(),Quality:GoalSchema.array(),Emotional:GoalSchema.array(),Negative:GoalSchema.array(),Stakeholder:GoalSchema.array()}),ClusterGoalSchema=GoalBaseSchema.extend({SubGoals:lazyType(()=>ClusterGoalSchema.array())}),ClusterSchema=objectType({ClusterGoals:ClusterGoalSchema.array()});objectType({notes:stringType(),GoalList:GoalListSchema,Clusters:ClusterSchema.array(),Notes:stringType(),Note:stringType()});const newTreeItem=x=>{const d=x.id??Date.now(),g=x.instanceId??`${d}-0`;return{id:d,content:"",instanceId:g,...x}},NON_FUNCTIONAL_GOAL_TYPES=["Be","Feel","Concern","Who"],isNonFunctionalGoal=x=>NON_FUNCTIONAL_GOAL_TYPES.includes(x),BeIcon="/mm-local-editor/img/Cloud.png",DoIcon="/mm-local-editor/img/Function.png",FeelIcon="/mm-local-editor/img/Heart.png",ConcernIcon="/mm-local-editor/img/Risk.png",WhoIcon="/mm-local-editor/img/Stakeholder.png",defaultTreeData=[{id:1,content:"Do",type:"Do",instanceId:"1-1",children:[{id:6,content:"Do1",type:"Do",instanceId:"6-1",children:[{id:7,content:"Do2",type:"Do",instanceId:"7-1",children:[]}]},{id:8,content:"Do3",type:"Do",instanceId:"8-1",children:[]}]},{id:2,content:"Be",type:"Be",instanceId:"2-1",children:[]},{id:3,content:"Feel",type:"Feel",instanceId:"3-1",children:[]},{id:4,content:"Who",type:"Who",instanceId:"4-1",children:[]},{id:5,content:"Concern",type:"Concern",instanceId:"5-1",children:[]}],createDefaultTabData=()=>{const x={Do:[],Be:[],Feel:[],Who:[],Concern:[]},d=g=>{g.forEach(E=>{x[E.type].push(E),E.children&&E.children.length>0&&d(E.children)})};return d(defaultTreeData),[{label:"Do",icon:DoIcon,rows:x.Do},{label:"Be",icon:BeIcon,rows:x.Be},{label:"Feel",icon:FeelIcon,rows:x.Feel},{label:"Concern",icon:ConcernIcon,rows:x.Concern},{label:"Who",icon:WhoIcon,rows:x.Who}]},initialTabs=[{label:"Do",icon:DoIcon,rows:[newTreeItem({id:-1,type:"Do"})]},{label:"Be",icon:BeIcon,rows:[newTreeItem({id:-2,type:"Be"})]},{label:"Feel",icon:FeelIcon,rows:[newTreeItem({id:-3,type:"Feel"})]},{label:"Concern",icon:ConcernIcon,rows:[newTreeItem({id:-4,type:"Concern"})]},{label:"Who",icon:WhoIcon,rows:[newTreeItem({id:-5,type:"Who"})]}],canUseDOM=!!(typeof window<"u"&&window.document&&window.document.createElement);var optionsSupported=!1,onceSupported=!1;try{var options={get passive(){return optionsSupported=!0},get once(){return onceSupported=optionsSupported=!0}};canUseDOM&&(window.addEventListener("test",options,options),window.removeEventListener("test",options,!0))}catch{}function addEventListener(x,d,g,E){if(E&&typeof E!="boolean"&&!onceSupported){var b=E.once,w=E.capture,C=g;!onceSupported&&b&&(C=g.__once||function S(P){this.removeEventListener(d,S,w),g.call(this,P)},g.__once=C),x.addEventListener(d,C,optionsSupported?E:w)}x.addEventListener(d,g,E)}function ownerDocument(x){return x&&x.ownerDocument||document}function removeEventListener(x,d,g,E){var b=E&&typeof E!="boolean"?E.capture:E;x.removeEventListener(d,g,b),g.__once&&x.removeEventListener(d,g.__once,b)}var size;function scrollbarSize(x){if((!size&&size!==0||x)&&canUseDOM){var d=document.createElement("div");d.style.position="absolute",d.style.top="-9999px",d.style.width="50px",d.style.height="50px",d.style.overflow="scroll",document.body.appendChild(d),size=d.offsetWidth-d.clientWidth,document.body.removeChild(d)}return size}function useCallbackRef$1(){return reactExports.useState(null)}function useCommittedRef$1(x){const d=reactExports.useRef(x);return reactExports.useEffect(()=>{d.current=x},[x]),d}function useEventCallback$1(x){const d=useCommittedRef$1(x);return reactExports.useCallback(function(...g){return d.current&&d.current(...g)},[d])}const toFnRef$1=x=>!x||typeof x=="function"?x:d=>{x.current=d};function mergeRefs$1(x,d){const g=toFnRef$1(x),E=toFnRef$1(d);return b=>{g&&g(b),E&&E(b)}}function useMergedRefs$1(x,d){return reactExports.useMemo(()=>mergeRefs$1(x,d),[x,d])}function useUpdatedRef$1(x){const d=reactExports.useRef(x);return d.current=x,d}function useWillUnmount$1(x){const d=useUpdatedRef$1(x);reactExports.useEffect(()=>()=>d.current(),[])}function ownerWindow(x){var d=ownerDocument(x);return d&&d.defaultView||window}function getComputedStyle$2(x,d){return ownerWindow(x).getComputedStyle(x,d)}var rUpper=/([A-Z])/g;function hyphenate(x){return x.replace(rUpper,"-$1").toLowerCase()}var msPattern=/^ms-/;function hyphenateStyleName(x){return hyphenate(x).replace(msPattern,"-ms-")}var supportedTransforms=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;function isTransform(x){return!!(x&&supportedTransforms.test(x))}function style(x,d){var g="",E="";if(typeof d=="string")return x.style.getPropertyValue(hyphenateStyleName(d))||getComputedStyle$2(x).getPropertyValue(hyphenateStyleName(d));Object.keys(d).forEach(function(b){var w=d[b];!w&&w!==0?x.style.removeProperty(hyphenateStyleName(b)):isTransform(b)?E+=b+"("+w+") ":g+=hyphenateStyleName(b)+": "+w+";"}),E&&(g+="transform: "+E+";"),x.style.cssText+=";"+g}function listen(x,d,g,E){return addEventListener(x,d,g,E),function(){removeEventListener(x,d,g,E)}}function triggerEvent(x,d,g,E){if(E===void 0&&(E=!0),x){var b=document.createEvent("HTMLEvents");b.initEvent(d,g,E),x.dispatchEvent(b)}}function parseDuration$1(x){var d=style(x,"transitionDuration")||"",g=d.indexOf("ms")===-1?1e3:1;return parseFloat(d)*g}function emulateTransitionEnd(x,d,g){g===void 0&&(g=5);var E=!1,b=setTimeout(function(){E||triggerEvent(x,"transitionend",!0)},d+g),w=listen(x,"transitionend",function(){E=!0},{once:!0});return function(){clearTimeout(b),w()}}function transitionEnd(x,d,g,E){g==null&&(g=parseDuration$1(x)||0);var b=emulateTransitionEnd(x,g,E),w=listen(x,"transitionend",d);return function(){b(),w()}}function activeElement(x){x===void 0&&(x=ownerDocument());try{var d=x.activeElement;return!d||!d.nodeName?null:d}catch{return x.body}}function contains$2(x,d){if(x.contains)return x.contains(d);if(x.compareDocumentPosition)return x===d||!!(x.compareDocumentPosition(d)&16)}function useMounted$1(){const x=reactExports.useRef(!0),d=reactExports.useRef(()=>x.current);return reactExports.useEffect(()=>(x.current=!0,()=>{x.current=!1}),[]),d.current}function useUpdatedRef(x){const d=reactExports.useRef(x);return d.current=x,d}function useWillUnmount(x){const d=useUpdatedRef(x);reactExports.useEffect(()=>()=>d.current(),[])}function usePrevious(x){const d=reactExports.useRef(null);return reactExports.useEffect(()=>{d.current=x}),d.current}function useCommittedRef(x){const d=reactExports.useRef(x);return reactExports.useEffect(()=>{d.current=x},[x]),d}function useEventCallback(x){const d=useCommittedRef(x);return reactExports.useCallback(function(...g){return d.current&&d.current(...g)},[d])}const ATTRIBUTE_PREFIX="data-rr-ui-",PROPERTY_PREFIX="rrUi";function dataAttr(x){return`${ATTRIBUTE_PREFIX}${x}`}function dataProp(x){return`${PROPERTY_PREFIX}${x}`}function getBodyScrollbarWidth(x=document){const d=x.defaultView;return Math.abs(d.innerWidth-x.documentElement.clientWidth)}const OPEN_DATA_ATTRIBUTE=dataAttr("modal-open");class ModalManager{constructor({ownerDocument:d,handleContainerOverflow:g=!0,isRTL:E=!1}={}){this.handleContainerOverflow=g,this.isRTL=E,this.modals=[],this.ownerDocument=d}getScrollbarWidth(){return getBodyScrollbarWidth(this.ownerDocument)}getElement(){return(this.ownerDocument||document).body}setModalAttributes(d){}removeModalAttributes(d){}setContainerStyle(d){const g={overflow:"hidden"},E=this.isRTL?"paddingLeft":"paddingRight",b=this.getElement();d.style={overflow:b.style.overflow,[E]:b.style[E]},d.scrollBarWidth&&(g[E]=`${parseInt(style(b,E)||"0",10)+d.scrollBarWidth}px`),b.setAttribute(OPEN_DATA_ATTRIBUTE,""),style(b,g)}reset(){[...this.modals].forEach(d=>this.remove(d))}removeContainerStyle(d){const g=this.getElement();g.removeAttribute(OPEN_DATA_ATTRIBUTE),Object.assign(g.style,d.style)}add(d){let g=this.modals.indexOf(d);return g!==-1||(g=this.modals.length,this.modals.push(d),this.setModalAttributes(d),g!==0)||(this.state={scrollBarWidth:this.getScrollbarWidth(),style:{}},this.handleContainerOverflow&&this.setContainerStyle(this.state)),g}remove(d){const g=this.modals.indexOf(d);g!==-1&&(this.modals.splice(g,1),!this.modals.length&&this.handleContainerOverflow&&this.removeContainerStyle(this.state),this.removeModalAttributes(d))}isTopModal(d){return!!this.modals.length&&this.modals[this.modals.length-1]===d}}const Context=reactExports.createContext(canUseDOM?window:void 0);Context.Provider;function useWindow(){return reactExports.useContext(Context)}const resolveContainerRef=(x,d)=>canUseDOM?x==null?(d||ownerDocument()).body:(typeof x=="function"&&(x=x()),x&&"current"in x&&(x=x.current),x&&("nodeType"in x||x.getBoundingClientRect)?x:null):null;function useWaitForDOMRef(x,d){const g=useWindow(),[E,b]=reactExports.useState(()=>resolveContainerRef(x,g==null?void 0:g.document));if(!E){const w=resolveContainerRef(x);w&&b(w)}return reactExports.useEffect(()=>{},[d,E]),reactExports.useEffect(()=>{const w=resolveContainerRef(x);w!==E&&b(w)},[x,E]),E}const toFnRef=x=>!x||typeof x=="function"?x:d=>{x.current=d};function mergeRefs(x,d){const g=toFnRef(x),E=toFnRef(d);return b=>{g&&g(b),E&&E(b)}}function useMergedRefs(x,d){return reactExports.useMemo(()=>mergeRefs(x,d),[x,d])}const isReactNative$1=typeof global<"u"&&global.navigator&&global.navigator.product==="ReactNative",isDOM$1=typeof document<"u",useEffect=isDOM$1||isReactNative$1?reactExports.useLayoutEffect:reactExports.useEffect;function isEscKey(x){return x.code==="Escape"||x.keyCode===27}function getReactVersion(){const x=reactExports.version.split(".");return{major:+x[0],minor:+x[1],patch:+x[2]}}function getChildRef(x){if(!x||typeof x=="function")return null;const{major:d}=getReactVersion();return d>=19?x.props.ref:x.ref}function NoopTransition({children:x,in:d,onExited:g,mountOnEnter:E,unmountOnExit:b}){const w=reactExports.useRef(null),C=reactExports.useRef(d),S=useEventCallback(g);reactExports.useEffect(()=>{d?C.current=!0:S(w.current)},[d,S]);const P=useMergedRefs(w,getChildRef(x)),I=reactExports.cloneElement(x,{ref:P});return d?I:b||!C.current&&E?null:I}const _excluded$a=["onEnter","onEntering","onEntered","onExit","onExiting","onExited","addEndListener","children"];function _objectWithoutPropertiesLoose$b(x,d){if(x==null)return{};var g={};for(var E in x)if({}.hasOwnProperty.call(x,E)){if(d.indexOf(E)>=0)continue;g[E]=x[E]}return g}function useRTGTransitionProps(x){let{onEnter:d,onEntering:g,onEntered:E,onExit:b,onExiting:w,onExited:C,addEndListener:S,children:P}=x,I=_objectWithoutPropertiesLoose$b(x,_excluded$a);const M=reactExports.useRef(null),D=useMergedRefs(M,getChildRef(P)),k=q=>Z=>{q&&M.current&&q(M.current,Z)},H=reactExports.useCallback(k(d),[d]),F=reactExports.useCallback(k(g),[g]),j=reactExports.useCallback(k(E),[E]),$=reactExports.useCallback(k(b),[b]),z=reactExports.useCallback(k(w),[w]),U=reactExports.useCallback(k(C),[C]),W=reactExports.useCallback(k(S),[S]);return Object.assign({},I,{nodeRef:M},d&&{onEnter:H},g&&{onEntering:F},E&&{onEntered:j},b&&{onExit:$},w&&{onExiting:z},C&&{onExited:U},S&&{addEndListener:W},{children:typeof P=="function"?(q,Z)=>P(q,Object.assign({},Z,{ref:D})):reactExports.cloneElement(P,{ref:D})})}const _excluded$9=["component"];function _objectWithoutPropertiesLoose$a(x,d){if(x==null)return{};var g={};for(var E in x)if({}.hasOwnProperty.call(x,E)){if(d.indexOf(E)>=0)continue;g[E]=x[E]}return g}const RTGTransition=reactExports.forwardRef((x,d)=>{let{component:g}=x,E=_objectWithoutPropertiesLoose$a(x,_excluded$9);const b=useRTGTransitionProps(E);return jsxRuntimeExports.jsx(g,Object.assign({ref:d},b))});function useTransition({in:x,onTransition:d}){const g=reactExports.useRef(null),E=reactExports.useRef(!0),b=useEventCallback(d);return useEffect(()=>{if(!g.current)return;let w=!1;return b({in:x,element:g.current,initial:E.current,isStale:()=>w}),()=>{w=!0}},[x,b]),useEffect(()=>(E.current=!1,()=>{E.current=!0}),[]),g}function ImperativeTransition({children:x,in:d,onExited:g,onEntered:E,transition:b}){const[w,C]=reactExports.useState(!d);d&&w&&C(!1);const S=useTransition({in:!!d,onTransition:I=>{const M=()=>{I.isStale()||(I.in?E==null||E(I.element,I.initial):(C(!0),g==null||g(I.element)))};Promise.resolve(b(I)).then(M,D=>{throw I.in||C(!0),D})}}),P=useMergedRefs(S,getChildRef(x));return w&&!d?null:reactExports.cloneElement(x,{ref:P})}function renderTransition(x,d,g){return x?jsxRuntimeExports.jsx(RTGTransition,Object.assign({},g,{component:x})):d?jsxRuntimeExports.jsx(ImperativeTransition,Object.assign({},g,{transition:d})):jsxRuntimeExports.jsx(NoopTransition,Object.assign({},g))}const _excluded$8=["show","role","className","style","children","backdrop","keyboard","onBackdropClick","onEscapeKeyDown","transition","runTransition","backdropTransition","runBackdropTransition","autoFocus","enforceFocus","restoreFocus","restoreFocusOptions","renderDialog","renderBackdrop","manager","container","onShow","onHide","onExit","onExited","onExiting","onEnter","onEntering","onEntered"];function _objectWithoutPropertiesLoose$9(x,d){if(x==null)return{};var g={};for(var E in x)if({}.hasOwnProperty.call(x,E)){if(d.indexOf(E)>=0)continue;g[E]=x[E]}return g}let manager;function getManager(x){return manager||(manager=new ModalManager({ownerDocument:x==null?void 0:x.document})),manager}function useModalManager(x){const d=useWindow(),g=x||getManager(d),E=reactExports.useRef({dialog:null,backdrop:null});return Object.assign(E.current,{add:()=>g.add(E.current),remove:()=>g.remove(E.current),isTopModal:()=>g.isTopModal(E.current),setDialogRef:reactExports.useCallback(b=>{E.current.dialog=b},[]),setBackdropRef:reactExports.useCallback(b=>{E.current.backdrop=b},[])})}const Modal$2=reactExports.forwardRef((x,d)=>{let{show:g=!1,role:E="dialog",className:b,style:w,children:C,backdrop:S=!0,keyboard:P=!0,onBackdropClick:I,onEscapeKeyDown:M,transition:D,runTransition:k,backdropTransition:H,runBackdropTransition:F,autoFocus:j=!0,enforceFocus:$=!0,restoreFocus:z=!0,restoreFocusOptions:U,renderDialog:W,renderBackdrop:q=Le=>jsxRuntimeExports.jsx("div",Object.assign({},Le)),manager:Z,container:X,onShow:K,onHide:ee=()=>{},onExit:te,onExited:ce,onExiting:Q,onEnter:se,onEntering:ge,onEntered:Ce}=x,oe=_objectWithoutPropertiesLoose$9(x,_excluded$8);const he=useWindow(),de=useWaitForDOMRef(X),re=useModalManager(Z),ae=useMounted$1(),pe=usePrevious(g),[J,ue]=reactExports.useState(!g),Te=reactExports.useRef(null);reactExports.useImperativeHandle(d,()=>re,[re]),canUseDOM&&!pe&&g&&(Te.current=activeElement(he==null?void 0:he.document)),g&&J&&ue(!1);const xe=useEventCallback(()=>{if(re.add(),We.current=listen(document,"keydown",Ae),Be.current=listen(document,"focus",()=>setTimeout(Re),!0),K&&K(),j){var Le,nt;const qe=activeElement((Le=(nt=re.dialog)==null?void 0:nt.ownerDocument)!=null?Le:he==null?void 0:he.document);re.dialog&&qe&&!contains$2(re.dialog,qe)&&(Te.current=qe,re.dialog.focus())}}),we=useEventCallback(()=>{if(re.remove(),We.current==null||We.current(),Be.current==null||Be.current(),z){var Le;(Le=Te.current)==null||Le.focus==null||Le.focus(U),Te.current=null}});reactExports.useEffect(()=>{!g||!de||xe()},[g,de,xe]),reactExports.useEffect(()=>{J&&we()},[J,we]),useWillUnmount(()=>{we()});const Re=useEventCallback(()=>{if(!$||!ae()||!re.isTopModal())return;const Le=activeElement(he==null?void 0:he.document);re.dialog&&Le&&!contains$2(re.dialog,Le)&&re.dialog.focus()}),De=useEventCallback(Le=>{Le.target===Le.currentTarget&&(I==null||I(Le),S===!0&&ee())}),Ae=useEventCallback(Le=>{P&&isEscKey(Le)&&re.isTopModal()&&(M==null||M(Le),Le.defaultPrevented||ee())}),Be=reactExports.useRef(),We=reactExports.useRef(),Fe=(...Le)=>{ue(!0),ce==null||ce(...Le)};if(!de)return null;const ze=Object.assign({role:E,ref:re.setDialogRef,"aria-modal":E==="dialog"?!0:void 0},oe,{style:w,className:b,tabIndex:-1});let ct=W?W(ze):jsxRuntimeExports.jsx("div",Object.assign({},ze,{children:reactExports.cloneElement(C,{role:"document"})}));ct=renderTransition(D,k,{unmountOnExit:!0,mountOnEnter:!0,appear:!0,in:!!g,onExit:te,onExiting:Q,onExited:Fe,onEnter:se,onEntering:ge,onEntered:Ce,children:ct});let rt=null;return S&&(rt=q({ref:re.setBackdropRef,onClick:De}),rt=renderTransition(H,F,{in:!!g,appear:!0,mountOnEnter:!0,unmountOnExit:!0,children:rt})),jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:ReactDOM.createPortal(jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[rt,ct]}),de)})});Modal$2.displayName="Modal";const BaseModal=Object.assign(Modal$2,{Manager:ModalManager});function hasClass(x,d){return x.classList?!!d&&x.classList.contains(d):(" "+(x.className.baseVal||x.className)+" ").indexOf(" "+d+" ")!==-1}function addClass(x,d){x.classList?x.classList.add(d):hasClass(x,d)||(typeof x.className=="string"?x.className=x.className+" "+d:x.setAttribute("class",(x.className&&x.className.baseVal||"")+" "+d))}var toArray=Function.prototype.bind.call(Function.prototype.call,[].slice);function qsa(x,d){return toArray(x.querySelectorAll(d))}function replaceClassName(x,d){return x.replace(new RegExp("(^|\\s)"+d+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function removeClass(x,d){x.classList?x.classList.remove(d):typeof x.className=="string"?x.className=replaceClassName(x.className,d):x.setAttribute("class",replaceClassName(x.className&&x.className.baseVal||"",d))}const Selector={FIXED_CONTENT:".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",STICKY_CONTENT:".sticky-top",NAVBAR_TOGGLER:".navbar-toggler"};class BootstrapModalManager extends ModalManager{adjustAndStore(d,g,E){const b=g.style[d];g.dataset[d]=b,style(g,{[d]:`${parseFloat(style(g,d))+E}px`})}restore(d,g){const E=g.dataset[d];E!==void 0&&(delete g.dataset[d],style(g,{[d]:E}))}setContainerStyle(d){super.setContainerStyle(d);const g=this.getElement();if(addClass(g,"modal-open"),!d.scrollBarWidth)return;const E=this.isRTL?"paddingLeft":"paddingRight",b=this.isRTL?"marginLeft":"marginRight";qsa(g,Selector.FIXED_CONTENT).forEach(w=>this.adjustAndStore(E,w,d.scrollBarWidth)),qsa(g,Selector.STICKY_CONTENT).forEach(w=>this.adjustAndStore(b,w,-d.scrollBarWidth)),qsa(g,Selector.NAVBAR_TOGGLER).forEach(w=>this.adjustAndStore(b,w,d.scrollBarWidth))}removeContainerStyle(d){super.removeContainerStyle(d);const g=this.getElement();removeClass(g,"modal-open");const E=this.isRTL?"paddingLeft":"paddingRight",b=this.isRTL?"marginLeft":"marginRight";qsa(g,Selector.FIXED_CONTENT).forEach(w=>this.restore(E,w)),qsa(g,Selector.STICKY_CONTENT).forEach(w=>this.restore(b,w)),qsa(g,Selector.NAVBAR_TOGGLER).forEach(w=>this.restore(b,w))}}let sharedManager;function getSharedManager(x){return sharedManager||(sharedManager=new BootstrapModalManager(x)),sharedManager}function _objectWithoutPropertiesLoose$8(x,d){if(x==null)return{};var g={};for(var E in x)if({}.hasOwnProperty.call(x,E)){if(d.indexOf(E)!==-1)continue;g[E]=x[E]}return g}function _setPrototypeOf(x,d){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(g,E){return g.__proto__=E,g},_setPrototypeOf(x,d)}function _inheritsLoose(x,d){x.prototype=Object.create(d.prototype),x.prototype.constructor=x,_setPrototypeOf(x,d)}var propTypes$5={exports:{}},ReactPropTypesSecret_1,hasRequiredReactPropTypesSecret;function requireReactPropTypesSecret(){if(hasRequiredReactPropTypesSecret)return ReactPropTypesSecret_1;hasRequiredReactPropTypesSecret=1;var x="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return ReactPropTypesSecret_1=x,ReactPropTypesSecret_1}var factoryWithThrowingShims,hasRequiredFactoryWithThrowingShims;function requireFactoryWithThrowingShims(){if(hasRequiredFactoryWithThrowingShims)return factoryWithThrowingShims;hasRequiredFactoryWithThrowingShims=1;var x=requireReactPropTypesSecret();function d(){}function g(){}return g.resetWarningCache=d,factoryWithThrowingShims=function(){function E(C,S,P,I,M,D){if(D!==x){var k=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw k.name="Invariant Violation",k}}E.isRequired=E;function b(){return E}var w={array:E,bigint:E,bool:E,func:E,number:E,object:E,string:E,symbol:E,any:E,arrayOf:b,element:E,elementType:E,instanceOf:b,node:E,objectOf:b,oneOf:b,oneOfType:b,shape:b,exact:b,checkPropTypes:g,resetWarningCache:d};return w.PropTypes=w,w},factoryWithThrowingShims}var hasRequiredPropTypes;function requirePropTypes(){return hasRequiredPropTypes||(hasRequiredPropTypes=1,propTypes$5.exports=requireFactoryWithThrowingShims()()),propTypes$5.exports}var propTypesExports=requirePropTypes();const PropTypes=getDefaultExportFromCjs(propTypesExports),config={disabled:!1},TransitionGroupContext=React.createContext(null);var forceReflow=function(d){return d.scrollTop},UNMOUNTED="unmounted",EXITED="exited",ENTERING="entering",ENTERED="entered",EXITING="exiting",Transition$1=(function(x){_inheritsLoose(d,x);function d(E,b){var w;w=x.call(this,E,b)||this;var C=b,S=C&&!C.isMounting?E.enter:E.appear,P;return w.appearStatus=null,E.in?S?(P=EXITED,w.appearStatus=ENTERING):P=ENTERED:E.unmountOnExit||E.mountOnEnter?P=UNMOUNTED:P=EXITED,w.state={status:P},w.nextCallback=null,w}d.getDerivedStateFromProps=function(b,w){var C=b.in;return C&&w.status===UNMOUNTED?{status:EXITED}:null};var g=d.prototype;return g.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},g.componentDidUpdate=function(b){var w=null;if(b!==this.props){var C=this.state.status;this.props.in?C!==ENTERING&&C!==ENTERED&&(w=ENTERING):(C===ENTERING||C===ENTERED)&&(w=EXITING)}this.updateStatus(!1,w)},g.componentWillUnmount=function(){this.cancelNextCallback()},g.getTimeouts=function(){var b=this.props.timeout,w,C,S;return w=C=S=b,b!=null&&typeof b!="number"&&(w=b.exit,C=b.enter,S=b.appear!==void 0?b.appear:C),{exit:w,enter:C,appear:S}},g.updateStatus=function(b,w){if(b===void 0&&(b=!1),w!==null)if(this.cancelNextCallback(),w===ENTERING){if(this.props.unmountOnExit||this.props.mountOnEnter){var C=this.props.nodeRef?this.props.nodeRef.current:ReactDOM.findDOMNode(this);C&&forceReflow(C)}this.performEnter(b)}else this.performExit();else this.props.unmountOnExit&&this.state.status===EXITED&&this.setState({status:UNMOUNTED})},g.performEnter=function(b){var w=this,C=this.props.enter,S=this.context?this.context.isMounting:b,P=this.props.nodeRef?[S]:[ReactDOM.findDOMNode(this),S],I=P[0],M=P[1],D=this.getTimeouts(),k=S?D.appear:D.enter;if(!b&&!C||config.disabled){this.safeSetState({status:ENTERED},function(){w.props.onEntered(I)});return}this.props.onEnter(I,M),this.safeSetState({status:ENTERING},function(){w.props.onEntering(I,M),w.onTransitionEnd(k,function(){w.safeSetState({status:ENTERED},function(){w.props.onEntered(I,M)})})})},g.performExit=function(){var b=this,w=this.props.exit,C=this.getTimeouts(),S=this.props.nodeRef?void 0:ReactDOM.findDOMNode(this);if(!w||config.disabled){this.safeSetState({status:EXITED},function(){b.props.onExited(S)});return}this.props.onExit(S),this.safeSetState({status:EXITING},function(){b.props.onExiting(S),b.onTransitionEnd(C.exit,function(){b.safeSetState({status:EXITED},function(){b.props.onExited(S)})})})},g.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},g.safeSetState=function(b,w){w=this.setNextCallback(w),this.setState(b,w)},g.setNextCallback=function(b){var w=this,C=!0;return this.nextCallback=function(S){C&&(C=!1,w.nextCallback=null,b(S))},this.nextCallback.cancel=function(){C=!1},this.nextCallback},g.onTransitionEnd=function(b,w){this.setNextCallback(w);var C=this.props.nodeRef?this.props.nodeRef.current:ReactDOM.findDOMNode(this),S=b==null&&!this.props.addEndListener;if(!C||S){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var P=this.props.nodeRef?[this.nextCallback]:[C,this.nextCallback],I=P[0],M=P[1];this.props.addEndListener(I,M)}b!=null&&setTimeout(this.nextCallback,b)},g.render=function(){var b=this.state.status;if(b===UNMOUNTED)return null;var w=this.props,C=w.children;w.in,w.mountOnEnter,w.unmountOnExit,w.appear,w.enter,w.exit,w.timeout,w.addEndListener,w.onEnter,w.onEntering,w.onEntered,w.onExit,w.onExiting,w.onExited,w.nodeRef;var S=_objectWithoutPropertiesLoose$8(w,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return React.createElement(TransitionGroupContext.Provider,{value:null},typeof C=="function"?C(b,S):React.cloneElement(React.Children.only(C),S))},d})(React.Component);Transition$1.contextType=TransitionGroupContext;Transition$1.propTypes={};function noop$8(){}Transition$1.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:noop$8,onEntering:noop$8,onEntered:noop$8,onExit:noop$8,onExiting:noop$8,onExited:noop$8};Transition$1.UNMOUNTED=UNMOUNTED;Transition$1.EXITED=EXITED;Transition$1.ENTERING=ENTERING;Transition$1.ENTERED=ENTERED;Transition$1.EXITING=EXITING;function parseDuration(x,d){const g=style(x,d)||"",E=g.indexOf("ms")===-1?1e3:1;return parseFloat(g)*E}function transitionEndListener(x,d){const g=parseDuration(x,"transitionDuration"),E=parseDuration(x,"transitionDelay"),b=transitionEnd(x,w=>{w.target===x&&(b(),d(w))},g+E)}function triggerBrowserReflow(x){x.offsetHeight}function safeFindDOMNode(x){return x&&"setState"in x?ReactDOM.findDOMNode(x):x??null}const TransitionWrapper=React.forwardRef(({onEnter:x,onEntering:d,onEntered:g,onExit:E,onExiting:b,onExited:w,addEndListener:C,children:S,childRef:P,...I},M)=>{const D=reactExports.useRef(null),k=useMergedRefs$1(D,P),H=X=>{k(safeFindDOMNode(X))},F=X=>K=>{X&&D.current&&X(D.current,K)},j=reactExports.useCallback(F(x),[x]),$=reactExports.useCallback(F(d),[d]),z=reactExports.useCallback(F(g),[g]),U=reactExports.useCallback(F(E),[E]),W=reactExports.useCallback(F(b),[b]),q=reactExports.useCallback(F(w),[w]),Z=reactExports.useCallback(F(C),[C]);return jsxRuntimeExports.jsx(Transition$1,{ref:M,...I,onEnter:j,onEntered:z,onEntering:$,onExit:U,onExited:q,onExiting:W,addEndListener:Z,nodeRef:D,children:typeof S=="function"?(X,K)=>S(X,{...K,ref:H}):React.cloneElement(S,{ref:H})})});TransitionWrapper.displayName="TransitionWrapper";const fadeStyles={[ENTERING]:"show",[ENTERED]:"show"},Fade=reactExports.forwardRef(({className:x,children:d,transitionClasses:g={},onEnter:E,...b},w)=>{const C={in:!1,timeout:300,mountOnEnter:!1,unmountOnExit:!1,appear:!1,...b},S=reactExports.useCallback((P,I)=>{triggerBrowserReflow(P),E==null||E(P,I)},[E]);return jsxRuntimeExports.jsx(TransitionWrapper,{ref:w,addEndListener:transitionEndListener,...C,onEnter:S,childRef:getChildRef(d),children:(P,I)=>reactExports.cloneElement(d,{...I,className:classNames("fade",x,d.props.className,fadeStyles[P],g[P])})})});Fade.displayName="Fade";const ModalBody=reactExports.forwardRef(({className:x,bsPrefix:d,as:g="div",...E},b)=>(d=useBootstrapPrefix(d,"modal-body"),jsxRuntimeExports.jsx(g,{ref:b,className:classNames(x,d),...E})));ModalBody.displayName="ModalBody";const ModalContext=reactExports.createContext({onHide(){}}),ModalDialog=reactExports.forwardRef(({bsPrefix:x,className:d,contentClassName:g,centered:E,size:b,fullscreen:w,children:C,scrollable:S,...P},I)=>{x=useBootstrapPrefix(x,"modal");const M=`${x}-dialog`,D=typeof w=="string"?`${x}-fullscreen-${w}`:`${x}-fullscreen`;return jsxRuntimeExports.jsx("div",{...P,ref:I,className:classNames(M,d,b&&`${x}-${b}`,E&&`${M}-centered`,S&&`${M}-scrollable`,w&&D),children:jsxRuntimeExports.jsx("div",{className:classNames(`${x}-content`,g),children:C})})});ModalDialog.displayName="ModalDialog";const ModalFooter=reactExports.forwardRef(({className:x,bsPrefix:d,as:g="div",...E},b)=>(d=useBootstrapPrefix(d,"modal-footer"),jsxRuntimeExports.jsx(g,{ref:b,className:classNames(x,d),...E})));ModalFooter.displayName="ModalFooter";const propTypes$4={"aria-label":PropTypes.string,onClick:PropTypes.func,variant:PropTypes.oneOf(["white"])},CloseButton=reactExports.forwardRef(({className:x,variant:d,"aria-label":g="Close",...E},b)=>jsxRuntimeExports.jsx("button",{ref:b,type:"button",className:classNames("btn-close",d&&`btn-close-${d}`,x),"aria-label":g,...E}));CloseButton.displayName="CloseButton";CloseButton.propTypes=propTypes$4;const AbstractModalHeader=reactExports.forwardRef(({closeLabel:x="Close",closeVariant:d,closeButton:g=!1,onHide:E,children:b,...w},C)=>{const S=reactExports.useContext(ModalContext),P=useEventCallback$1(()=>{S==null||S.onHide(),E==null||E()});return jsxRuntimeExports.jsxs("div",{ref:C,...w,children:[b,g&&jsxRuntimeExports.jsx(CloseButton,{"aria-label":x,variant:d,onClick:P})]})});AbstractModalHeader.displayName="AbstractModalHeader";const ModalHeader=reactExports.forwardRef(({bsPrefix:x,className:d,closeLabel:g="Close",closeButton:E=!1,...b},w)=>(x=useBootstrapPrefix(x,"modal-header"),jsxRuntimeExports.jsx(AbstractModalHeader,{ref:w,...b,className:classNames(d,x),closeLabel:g,closeButton:E})));ModalHeader.displayName="ModalHeader";const divWithClassName=(x=>reactExports.forwardRef((d,g)=>jsxRuntimeExports.jsx("div",{...d,ref:g,className:classNames(d.className,x)}))),DivStyledAsH4=divWithClassName("h4"),ModalTitle=reactExports.forwardRef(({className:x,bsPrefix:d,as:g=DivStyledAsH4,...E},b)=>(d=useBootstrapPrefix(d,"modal-title"),jsxRuntimeExports.jsx(g,{ref:b,className:classNames(x,d),...E})));ModalTitle.displayName="ModalTitle";function DialogTransition(x){return jsxRuntimeExports.jsx(Fade,{...x,timeout:null})}function BackdropTransition(x){return jsxRuntimeExports.jsx(Fade,{...x,timeout:null})}const Modal=reactExports.forwardRef(({bsPrefix:x,className:d,style:g,dialogClassName:E,contentClassName:b,children:w,dialogAs:C=ModalDialog,"data-bs-theme":S,"aria-labelledby":P,"aria-describedby":I,"aria-label":M,show:D=!1,animation:k=!0,backdrop:H=!0,keyboard:F=!0,onEscapeKeyDown:j,onShow:$,onHide:z,container:U,autoFocus:W=!0,enforceFocus:q=!0,restoreFocus:Z=!0,restoreFocusOptions:X,onEntered:K,onExit:ee,onExiting:te,onEnter:ce,onEntering:Q,onExited:se,backdropClassName:ge,manager:Ce,...oe},he)=>{const[de,re]=reactExports.useState({}),[ae,pe]=reactExports.useState(!1),J=reactExports.useRef(!1),ue=reactExports.useRef(!1),Te=reactExports.useRef(null),[xe,we]=useCallbackRef$1(),Re=useMergedRefs$1(he,we),De=useEventCallback$1(z),Ae=useIsRTL();x=useBootstrapPrefix(x,"modal");const Be=reactExports.useMemo(()=>({onHide:De}),[De]);function We(){return Ce||getSharedManager({isRTL:Ae})}function Fe(Ke){if(!canUseDOM)return;const ft=We().getScrollbarWidth()>0,ot=Ke.scrollHeight>ownerDocument(Ke).documentElement.clientHeight;re({paddingRight:ft&&!ot?scrollbarSize():void 0,paddingLeft:!ft&&ot?scrollbarSize():void 0})}const ze=useEventCallback$1(()=>{xe&&Fe(xe.dialog)});useWillUnmount$1(()=>{removeEventListener(window,"resize",ze),Te.current==null||Te.current()});const ct=()=>{J.current=!0},rt=Ke=>{J.current&&xe&&Ke.target===xe.dialog&&(ue.current=!0),J.current=!1},Le=()=>{pe(!0),Te.current=transitionEnd(xe.dialog,()=>{pe(!1)})},nt=Ke=>{Ke.target===Ke.currentTarget&&Le()},qe=Ke=>{if(H==="static"){nt(Ke);return}if(ue.current||Ke.target!==Ke.currentTarget){ue.current=!1;return}z==null||z()},dt=Ke=>{F?j==null||j(Ke):(Ke.preventDefault(),H==="static"&&Le())},ht=(Ke,ft)=>{Ke&&Fe(Ke),ce==null||ce(Ke,ft)},st=Ke=>{Te.current==null||Te.current(),ee==null||ee(Ke)},be=(Ke,ft)=>{Q==null||Q(Ke,ft),addEventListener(window,"resize",ze)},lt=Ke=>{Ke&&(Ke.style.display=""),se==null||se(Ke),removeEventListener(window,"resize",ze)},et=reactExports.useCallback(Ke=>jsxRuntimeExports.jsx("div",{...Ke,className:classNames(`${x}-backdrop`,ge,!k&&"show")}),[k,ge,x]),tt={...g,...de};tt.display="block";const xt=Ke=>jsxRuntimeExports.jsx("div",{role:"dialog",...Ke,style:tt,className:classNames(d,x,ae&&`${x}-static`,!k&&"show"),onClick:H?qe:void 0,onMouseUp:rt,"data-bs-theme":S,"aria-label":M,"aria-labelledby":P,"aria-describedby":I,children:jsxRuntimeExports.jsx(C,{...oe,onMouseDown:ct,className:E,contentClassName:b,children:w})});return jsxRuntimeExports.jsx(ModalContext.Provider,{value:Be,children:jsxRuntimeExports.jsx(BaseModal,{show:D,ref:Re,backdrop:H,container:U,keyboard:!0,autoFocus:W,enforceFocus:q,restoreFocus:Z,restoreFocusOptions:X,onEscapeKeyDown:dt,onShow:$,onHide:z,onEnter:ht,onEntering:be,onEntered:K,onExit:st,onExiting:te,onExited:lt,manager:We(),transition:k?DialogTransition:void 0,backdropTransition:k?BackdropTransition:void 0,renderBackdrop:et,renderDialog:xt})})});Modal.displayName="Modal";const Modal$1=Object.assign(Modal,{Body:ModalBody,Header:ModalHeader,Title:ModalTitle,Footer:ModalFooter,Dialog:ModalDialog,TRANSITION_DURATION:300,BACKDROP_TRANSITION_DURATION:150}),ErrorModal=({show:x,title:d,message:g,onHide:E})=>jsxRuntimeExports.jsxs(Modal$1,{show:x,onHide:E,centered:!0,children:[jsxRuntimeExports.jsx(Modal$1.Header,{closeButton:!0,children:jsxRuntimeExports.jsx(Modal$1.Title,{children:d})}),jsxRuntimeExports.jsx(Modal$1.Body,{children:g}),jsxRuntimeExports.jsx(Modal$1.Footer,{children:jsxRuntimeExports.jsx(Button,{variant:"secondary",onClick:E,children:"Close"})})]});var DefaultContext={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},IconContext=React.createContext&&React.createContext(DefaultContext),_excluded$7=["attr","size","title"];function _objectWithoutProperties(x,d){if(x==null)return{};var g=_objectWithoutPropertiesLoose$7(x,d),E,b;if(Object.getOwnPropertySymbols){var w=Object.getOwnPropertySymbols(x);for(b=0;b<w.length;b++)E=w[b],!(d.indexOf(E)>=0)&&Object.prototype.propertyIsEnumerable.call(x,E)&&(g[E]=x[E])}return g}function _objectWithoutPropertiesLoose$7(x,d){if(x==null)return{};var g={};for(var E in x)if(Object.prototype.hasOwnProperty.call(x,E)){if(d.indexOf(E)>=0)continue;g[E]=x[E]}return g}function _extends$a(){return _extends$a=Object.assign?Object.assign.bind():function(x){for(var d=1;d<arguments.length;d++){var g=arguments[d];for(var E in g)Object.prototype.hasOwnProperty.call(g,E)&&(x[E]=g[E])}return x},_extends$a.apply(this,arguments)}function ownKeys(x,d){var g=Object.keys(x);if(Object.getOwnPropertySymbols){var E=Object.getOwnPropertySymbols(x);d&&(E=E.filter(function(b){return Object.getOwnPropertyDescriptor(x,b).enumerable})),g.push.apply(g,E)}return g}function _objectSpread(x){for(var d=1;d<arguments.length;d++){var g=arguments[d]!=null?arguments[d]:{};d%2?ownKeys(Object(g),!0).forEach(function(E){_defineProperty$2(x,E,g[E])}):Object.getOwnPropertyDescriptors?Object.defineProperties(x,Object.getOwnPropertyDescriptors(g)):ownKeys(Object(g)).forEach(function(E){Object.defineProperty(x,E,Object.getOwnPropertyDescriptor(g,E))})}return x}function _defineProperty$2(x,d,g){return d=_toPropertyKey$1(d),d in x?Object.defineProperty(x,d,{value:g,enumerable:!0,configurable:!0,writable:!0}):x[d]=g,x}function _toPropertyKey$1(x){var d=_toPrimitive$1(x,"string");return typeof d=="symbol"?d:d+""}function _toPrimitive$1(x,d){if(typeof x!="object"||!x)return x;var g=x[Symbol.toPrimitive];if(g!==void 0){var E=g.call(x,d);if(typeof E!="object")return E;throw new TypeError("@@toPrimitive must return a primitive value.")}return(d==="string"?String:Number)(x)}function Tree2Element(x){return x&&x.map((d,g)=>React.createElement(d.tag,_objectSpread({key:g},d.attr),Tree2Element(d.child)))}function GenIcon(x){return d=>React.createElement(IconBase,_extends$a({attr:_objectSpread({},x.attr)},d),Tree2Element(x.child))}function IconBase(x){var d=g=>{var{attr:E,size:b,title:w}=x,C=_objectWithoutProperties(x,_excluded$7),S=b||g.size||"1em",P;return g.className&&(P=g.className),x.className&&(P=(P?P+" ":"")+x.className),React.createElement("svg",_extends$a({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},g.attr,E,C,{className:P,style:_objectSpread(_objectSpread({color:x.color||g.color},g.style),x.style),height:S,width:S,xmlns:"http://www.w3.org/2000/svg"}),w&&React.createElement("title",null,w),x.children)};return IconContext!==void 0?React.createElement(IconContext.Consumer,null,g=>d(g)):d(DefaultContext)}function FiPlus(x){return GenIcon({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"5",x2:"12",y2:"19"},child:[]},{tag:"line",attr:{x1:"5",y1:"12",x2:"19",y2:"12"},child:[]}]})(x)}const FileDrop=({onDrop:x,onDragOver:d,onDragLeave:g,onClick:E,isDragOver:b,fileType:w})=>jsxRuntimeExports.jsxs("div",{className:`drop-area ${b?"drag-over":""}`,onDragOver:d,onDragLeave:g,onDrop:x,onClick:E,children:[jsxRuntimeExports.jsx(FiPlus,{className:"plus-icon"})," ",jsxRuntimeExports.jsxs("p",{children:["Drop ",w," file here"]})]});function IoCloseCircle(x){return GenIcon({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 48C141.31 48 48 141.31 48 256s93.31 208 208 208 208-93.31 208-208S370.69 48 256 48zm75.31 260.69a16 16 0 1 1-22.62 22.62L256 278.63l-52.69 52.68a16 16 0 0 1-22.62-22.62L233.37 256l-52.68-52.69a16 16 0 0 1 22.62-22.62L256 233.37l52.69-52.68a16 16 0 0 1 22.62 22.62L278.63 256z"},child:[]}]})(x)}const FileUploadSection=({file:x,onRemove:d,onUpload:g})=>jsxRuntimeExports.jsxs("div",{className:"mt-3 border border-primary-subtle rounded file-container py-2 px-4 align-content-center mx-5",children:[jsxRuntimeExports.jsx("div",{onClick:d,style:{position:"relative",textAlign:"end",top:"-5px",right:"-35px"},children:jsxRuntimeExports.jsx(IoCloseCircle,{style:{cursor:"pointer"},size:20})}),jsxRuntimeExports.jsx("div",{onClick:g,className:"fs-5",children:x.type==="application/json"&&jsxRuntimeExports.jsxs("p",{children:["Goal Model JSON file: ",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("strong",{children:x.name})]})})]});function isPlainObject$2(x){if(typeof x!="object"||x===null)return!1;let d=x;for(;Object.getPrototypeOf(d)!==null;)d=Object.getPrototypeOf(d);return Object.getPrototypeOf(x)===d||Object.getPrototypeOf(x)===null}function isAction(x){return isPlainObject$2(x)&&"type"in x&&typeof x.type=="string"}var NOTHING=Symbol.for("immer-nothing"),DRAFTABLE=Symbol.for("immer-draftable"),DRAFT_STATE=Symbol.for("immer-state");function die(x,...d){throw new Error(`[Immer] minified error nr: ${x}. Full error at: https://bit.ly/3cXEKWf`)}var getPrototypeOf=Object.getPrototypeOf;function isDraft(x){return!!x&&!!x[DRAFT_STATE]}function isDraftable(x){var d;return x?isPlainObject$1(x)||Array.isArray(x)||!!x[DRAFTABLE]||!!((d=x.constructor)!=null&&d[DRAFTABLE])||isMap(x)||isSet(x):!1}var objectCtorString$1=Object.prototype.constructor.toString();function isPlainObject$1(x){if(!x||typeof x!="object")return!1;const d=getPrototypeOf(x);if(d===null)return!0;const g=Object.hasOwnProperty.call(d,"constructor")&&d.constructor;return g===Object?!0:typeof g=="function"&&Function.toString.call(g)===objectCtorString$1}function each(x,d){getArchtype(x)===0?Reflect.ownKeys(x).forEach(g=>{d(g,x[g],x)}):x.forEach((g,E)=>d(E,g,x))}function getArchtype(x){const d=x[DRAFT_STATE];return d?d.type_:Array.isArray(x)?1:isMap(x)?2:isSet(x)?3:0}function has$1(x,d){return getArchtype(x)===2?x.has(d):Object.prototype.hasOwnProperty.call(x,d)}function set$2(x,d,g){const E=getArchtype(x);E===2?x.set(d,g):E===3?x.add(g):x[d]=g}function is(x,d){return x===d?x!==0||1/x===1/d:x!==x&&d!==d}function isMap(x){return x instanceof Map}function isSet(x){return x instanceof Set}function latest(x){return x.copy_||x.base_}function shallowCopy(x,d){if(isMap(x))return new Map(x);if(isSet(x))return new Set(x);if(Array.isArray(x))return Array.prototype.slice.call(x);const g=isPlainObject$1(x);if(d===!0||d==="class_only"&&!g){const E=Object.getOwnPropertyDescriptors(x);delete E[DRAFT_STATE];let b=Reflect.ownKeys(E);for(let w=0;w<b.length;w++){const C=b[w],S=E[C];S.writable===!1&&(S.writable=!0,S.configurable=!0),(S.get||S.set)&&(E[C]={configurable:!0,writable:!0,enumerable:S.enumerable,value:x[C]})}return Object.create(getPrototypeOf(x),E)}else{const E=getPrototypeOf(x);if(E!==null&&g)return{...x};const b=Object.create(E);return Object.assign(b,x)}}function freeze(x,d=!1){return isFrozen(x)||isDraft(x)||!isDraftable(x)||(getArchtype(x)>1&&(x.set=x.add=x.clear=x.delete=dontMutateFrozenCollections),Object.freeze(x),d&&Object.entries(x).forEach(([g,E])=>freeze(E,!0))),x}function dontMutateFrozenCollections(){die(2)}function isFrozen(x){return Object.isFrozen(x)}var plugins={};function getPlugin(x){const d=plugins[x];return d||die(0,x),d}function loadPlugin(x,d){plugins[x]||(plugins[x]=d)}var currentScope;function getCurrentScope(){return currentScope}function createScope(x,d){return{drafts_:[],parent_:x,immer_:d,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function usePatchesInScope(x,d){d&&(getPlugin("Patches"),x.patches_=[],x.inversePatches_=[],x.patchListener_=d)}function revokeScope(x){leaveScope(x),x.drafts_.forEach(revokeDraft),x.drafts_=null}function leaveScope(x){x===currentScope&&(currentScope=x.parent_)}function enterScope(x){return currentScope=createScope(currentScope,x)}function revokeDraft(x){const d=x[DRAFT_STATE];d.type_===0||d.type_===1?d.revoke_():d.revoked_=!0}function processResult(x,d){d.unfinalizedDrafts_=d.drafts_.length;const g=d.drafts_[0];return x!==void 0&&x!==g?(g[DRAFT_STATE].modified_&&(revokeScope(d),die(4)),isDraftable(x)&&(x=finalize(d,x),d.parent_||maybeFreeze(d,x)),d.patches_&&getPlugin("Patches").generateReplacementPatches_(g[DRAFT_STATE].base_,x,d.patches_,d.inversePatches_)):x=finalize(d,g,[]),revokeScope(d),d.patches_&&d.patchListener_(d.patches_,d.inversePatches_),x!==NOTHING?x:void 0}function finalize(x,d,g){if(isFrozen(d))return d;const E=d[DRAFT_STATE];if(!E)return each(d,(b,w)=>finalizeProperty(x,E,d,b,w,g)),d;if(E.scope_!==x)return d;if(!E.modified_)return maybeFreeze(x,E.base_,!0),E.base_;if(!E.finalized_){E.finalized_=!0,E.scope_.unfinalizedDrafts_--;const b=E.copy_;let w=b,C=!1;E.type_===3&&(w=new Set(b),b.clear(),C=!0),each(w,(S,P)=>finalizeProperty(x,E,b,S,P,g,C)),maybeFreeze(x,b,!1),g&&x.patches_&&getPlugin("Patches").generatePatches_(E,g,x.patches_,x.inversePatches_)}return E.copy_}function finalizeProperty(x,d,g,E,b,w,C){if(isDraft(b)){const S=w&&d&&d.type_!==3&&!has$1(d.assigned_,E)?w.concat(E):void 0,P=finalize(x,b,S);if(set$2(g,E,P),isDraft(P))x.canAutoFreeze_=!1;else return}else C&&g.add(b);if(isDraftable(b)&&!isFrozen(b)){if(!x.immer_.autoFreeze_&&x.unfinalizedDrafts_<1)return;finalize(x,b),(!d||!d.scope_.parent_)&&typeof E!="symbol"&&Object.prototype.propertyIsEnumerable.call(g,E)&&maybeFreeze(x,b)}}function maybeFreeze(x,d,g=!1){!x.parent_&&x.immer_.autoFreeze_&&x.canAutoFreeze_&&freeze(d,g)}function createProxyProxy(x,d){const g=Array.isArray(x),E={type_:g?1:0,scope_:d?d.scope_:getCurrentScope(),modified_:!1,finalized_:!1,assigned_:{},parent_:d,base_:x,draft_:null,copy_:null,revoke_:null,isManual_:!1};let b=E,w=objectTraps;g&&(b=[E],w=arrayTraps);const{revoke:C,proxy:S}=Proxy.revocable(b,w);return E.draft_=S,E.revoke_=C,S}var objectTraps={get(x,d){if(d===DRAFT_STATE)return x;const g=latest(x);if(!has$1(g,d))return readPropFromProto(x,g,d);const E=g[d];return x.finalized_||!isDraftable(E)?E:E===peek(x.base_,d)?(prepareCopy(x),x.copy_[d]=createProxy(E,x)):E},has(x,d){return d in latest(x)},ownKeys(x){return Reflect.ownKeys(latest(x))},set(x,d,g){const E=getDescriptorFromProto(latest(x),d);if(E!=null&&E.set)return E.set.call(x.draft_,g),!0;if(!x.modified_){const b=peek(latest(x),d),w=b==null?void 0:b[DRAFT_STATE];if(w&&w.base_===g)return x.copy_[d]=g,x.assigned_[d]=!1,!0;if(is(g,b)&&(g!==void 0||has$1(x.base_,d)))return!0;prepareCopy(x),markChanged(x)}return x.copy_[d]===g&&(g!==void 0||d in x.copy_)||Number.isNaN(g)&&Number.isNaN(x.copy_[d])||(x.copy_[d]=g,x.assigned_[d]=!0),!0},deleteProperty(x,d){return peek(x.base_,d)!==void 0||d in x.base_?(x.assigned_[d]=!1,prepareCopy(x),markChanged(x)):delete x.assigned_[d],x.copy_&&delete x.copy_[d],!0},getOwnPropertyDescriptor(x,d){const g=latest(x),E=Reflect.getOwnPropertyDescriptor(g,d);return E&&{writable:!0,configurable:x.type_!==1||d!=="length",enumerable:E.enumerable,value:g[d]}},defineProperty(){die(11)},getPrototypeOf(x){return getPrototypeOf(x.base_)},setPrototypeOf(){die(12)}},arrayTraps={};each(objectTraps,(x,d)=>{arrayTraps[x]=function(){return arguments[0]=arguments[0][0],d.apply(this,arguments)}});arrayTraps.deleteProperty=function(x,d){return arrayTraps.set.call(this,x,d,void 0)};arrayTraps.set=function(x,d,g){return objectTraps.set.call(this,x[0],d,g,x[0])};function peek(x,d){const g=x[DRAFT_STATE];return(g?latest(g):x)[d]}function readPropFromProto(x,d,g){var b;const E=getDescriptorFromProto(d,g);return E?"value"in E?E.value:(b=E.get)==null?void 0:b.call(x.draft_):void 0}function getDescriptorFromProto(x,d){if(!(d in x))return;let g=getPrototypeOf(x);for(;g;){const E=Object.getOwnPropertyDescriptor(g,d);if(E)return E;g=getPrototypeOf(g)}}function markChanged(x){x.modified_||(x.modified_=!0,x.parent_&&markChanged(x.parent_))}function prepareCopy(x){x.copy_||(x.copy_=shallowCopy(x.base_,x.scope_.immer_.useStrictShallowCopy_))}var Immer2=class{constructor(x){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(d,g,E)=>{if(typeof d=="function"&&typeof g!="function"){const w=g;g=d;const C=this;return function(P=w,...I){return C.produce(P,M=>g.call(this,M,...I))}}typeof g!="function"&&die(6),E!==void 0&&typeof E!="function"&&die(7);let b;if(isDraftable(d)){const w=enterScope(this),C=createProxy(d,void 0);let S=!0;try{b=g(C),S=!1}finally{S?revokeScope(w):leaveScope(w)}return usePatchesInScope(w,E),processResult(b,w)}else if(!d||typeof d!="object"){if(b=g(d),b===void 0&&(b=d),b===NOTHING&&(b=void 0),this.autoFreeze_&&freeze(b,!0),E){const w=[],C=[];getPlugin("Patches").generateReplacementPatches_(d,b,w,C),E(w,C)}return b}else die(1,d)},this.produceWithPatches=(d,g)=>{if(typeof d=="function")return(C,...S)=>this.produceWithPatches(C,P=>d(P,...S));let E,b;return[this.produce(d,g,(C,S)=>{E=C,b=S}),E,b]},typeof(x==null?void 0:x.autoFreeze)=="boolean"&&this.setAutoFreeze(x.autoFreeze),typeof(x==null?void 0:x.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(x.useStrictShallowCopy)}createDraft(x){isDraftable(x)||die(8),isDraft(x)&&(x=current(x));const d=enterScope(this),g=createProxy(x,void 0);return g[DRAFT_STATE].isManual_=!0,leaveScope(d),g}finishDraft(x,d){const g=x&&x[DRAFT_STATE];(!g||!g.isManual_)&&die(9);const{scope_:E}=g;return usePatchesInScope(E,d),processResult(void 0,E)}setAutoFreeze(x){this.autoFreeze_=x}setUseStrictShallowCopy(x){this.useStrictShallowCopy_=x}applyPatches(x,d){let g;for(g=d.length-1;g>=0;g--){const b=d[g];if(b.path.length===0&&b.op==="replace"){x=b.value;break}}g>-1&&(d=d.slice(g+1));const E=getPlugin("Patches").applyPatches_;return isDraft(x)?E(x,d):this.produce(x,b=>E(b,d))}};function createProxy(x,d){const g=isMap(x)?getPlugin("MapSet").proxyMap_(x,d):isSet(x)?getPlugin("MapSet").proxySet_(x,d):createProxyProxy(x,d);return(d?d.scope_:getCurrentScope()).drafts_.push(g),g}function current(x){return isDraft(x)||die(10,x),currentImpl(x)}function currentImpl(x){if(!isDraftable(x)||isFrozen(x))return x;const d=x[DRAFT_STATE];let g;if(d){if(!d.modified_)return d.base_;d.finalized_=!0,g=shallowCopy(x,d.scope_.immer_.useStrictShallowCopy_)}else g=shallowCopy(x,!0);return each(g,(E,b)=>{set$2(g,E,currentImpl(b))}),d&&(d.finalized_=!1),g}function enableMapSet(){class x extends Map{constructor(P,I){super(),this[DRAFT_STATE]={type_:2,parent_:I,scope_:I?I.scope_:getCurrentScope(),modified_:!1,finalized_:!1,copy_:void 0,assigned_:void 0,base_:P,draft_:this,isManual_:!1,revoked_:!1}}get size(){return latest(this[DRAFT_STATE]).size}has(P){return latest(this[DRAFT_STATE]).has(P)}set(P,I){const M=this[DRAFT_STATE];return C(M),(!latest(M).has(P)||latest(M).get(P)!==I)&&(g(M),markChanged(M),M.assigned_.set(P,!0),M.copy_.set(P,I),M.assigned_.set(P,!0)),this}delete(P){if(!this.has(P))return!1;const I=this[DRAFT_STATE];return C(I),g(I),markChanged(I),I.base_.has(P)?I.assigned_.set(P,!1):I.assigned_.delete(P),I.copy_.delete(P),!0}clear(){const P=this[DRAFT_STATE];C(P),latest(P).size&&(g(P),markChanged(P),P.assigned_=new Map,each(P.base_,I=>{P.assigned_.set(I,!1)}),P.copy_.clear())}forEach(P,I){const M=this[DRAFT_STATE];latest(M).forEach((D,k,H)=>{P.call(I,this.get(k),k,this)})}get(P){const I=this[DRAFT_STATE];C(I);const M=latest(I).get(P);if(I.finalized_||!isDraftable(M)||M!==I.base_.get(P))return M;const D=createProxy(M,I);return g(I),I.copy_.set(P,D),D}keys(){return latest(this[DRAFT_STATE]).keys()}values(){const P=this.keys();return{[Symbol.iterator]:()=>this.values(),next:()=>{const I=P.next();return I.done?I:{done:!1,value:this.get(I.value)}}}}entries(){const P=this.keys();return{[Symbol.iterator]:()=>this.entries(),next:()=>{const I=P.next();if(I.done)return I;const M=this.get(I.value);return{done:!1,value:[I.value,M]}}}}[Symbol.iterator](){return this.entries()}}function d(S,P){return new x(S,P)}function g(S){S.copy_||(S.assigned_=new Map,S.copy_=new Map(S.base_))}class E extends Set{constructor(P,I){super(),this[DRAFT_STATE]={type_:3,parent_:I,scope_:I?I.scope_:getCurrentScope(),modified_:!1,finalized_:!1,copy_:void 0,base_:P,draft_:this,drafts_:new Map,revoked_:!1,isManual_:!1}}get size(){return latest(this[DRAFT_STATE]).size}has(P){const I=this[DRAFT_STATE];return C(I),I.copy_?!!(I.copy_.has(P)||I.drafts_.has(P)&&I.copy_.has(I.drafts_.get(P))):I.base_.has(P)}add(P){const I=this[DRAFT_STATE];return C(I),this.has(P)||(w(I),markChanged(I),I.copy_.add(P)),this}delete(P){if(!this.has(P))return!1;const I=this[DRAFT_STATE];return C(I),w(I),markChanged(I),I.copy_.delete(P)||(I.drafts_.has(P)?I.copy_.delete(I.drafts_.get(P)):!1)}clear(){const P=this[DRAFT_STATE];C(P),latest(P).size&&(w(P),markChanged(P),P.copy_.clear())}values(){const P=this[DRAFT_STATE];return C(P),w(P),P.copy_.values()}entries(){const P=this[DRAFT_STATE];return C(P),w(P),P.copy_.entries()}keys(){return this.values()}[Symbol.iterator](){return this.values()}forEach(P,I){const M=this.values();let D=M.next();for(;!D.done;)P.call(I,D.value,D.value,this),D=M.next()}}function b(S,P){return new E(S,P)}function w(S){S.copy_||(S.copy_=new Set,S.base_.forEach(P=>{if(isDraftable(P)){const I=createProxy(P,S);S.drafts_.set(P,I),S.copy_.add(I)}else S.copy_.add(P)}))}function C(S){S.revoked_&&die(3,JSON.stringify(latest(S)))}loadPlugin("MapSet",{proxyMap_:d,proxySet_:b})}var immer=new Immer2,produce=immer.produce;immer.produceWithPatches.bind(immer);immer.setAutoFreeze.bind(immer);immer.setUseStrictShallowCopy.bind(immer);immer.applyPatches.bind(immer);immer.createDraft.bind(immer);immer.finishDraft.bind(immer);function createAction(x,d){function g(...E){if(d){let b=d(...E);if(!b)throw new Error(formatProdErrorMessage(0));return{type:x,payload:b.payload,..."meta"in b&&{meta:b.meta},..."error"in b&&{error:b.error}}}return{type:x,payload:E[0]}}return g.toString=()=>`${x}`,g.type=x,g.match=E=>isAction(E)&&E.type===x,g}function freezeDraftable(x){return isDraftable(x)?produce(x,()=>{}):x}function getOrInsertComputed(x,d,g){return x.has(d)?x.get(d):x.set(d,g(d)).get(d)}function executeReducerBuilderCallback(x){const d={},g=[];let E;const b={addCase(w,C){const S=typeof w=="string"?w:w.type;if(!S)throw new Error(formatProdErrorMessage(28));if(S in d)throw new Error(formatProdErrorMessage(29));return d[S]=C,b},addMatcher(w,C){return g.push({matcher:w,reducer:C}),b},addDefaultCase(w){return E=w,b}};return x(b),[d,g,E]}function isStateFunction(x){return typeof x=="function"}function createReducer(x,d){let[g,E,b]=executeReducerBuilderCallback(d),w;if(isStateFunction(x))w=()=>freezeDraftable(x());else{const S=freezeDraftable(x);w=()=>S}function C(S=w(),P){let I=[g[P.type],...E.filter(({matcher:M})=>M(P)).map(({reducer:M})=>M)];return I.filter(M=>!!M).length===0&&(I=[b]),I.reduce((M,D)=>{if(D)if(isDraft(M)){const H=D(M,P);return H===void 0?M:H}else{if(isDraftable(M))return produce(M,k=>D(k,P));{const k=D(M,P);if(k===void 0){if(M===null)return M;throw Error("A case reducer on a non-draftable value must not return undefined")}return k}}return M},S)}return C.getInitialState=w,C}var asyncThunkSymbol=Symbol.for("rtk-slice-createasyncthunk");function getType(x,d){return`${x}/${d}`}function buildCreateSlice({creators:x}={}){var g;const d=(g=x==null?void 0:x.asyncThunk)==null?void 0:g[asyncThunkSymbol];return function(b){const{name:w,reducerPath:C=w}=b;if(!w)throw new Error(formatProdErrorMessage(11));const S=(typeof b.reducers=="function"?b.reducers(buildReducerCreators()):b.reducers)||{},P=Object.keys(S),I={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},M={addCase(q,Z){const X=typeof q=="string"?q:q.type;if(!X)throw new Error(formatProdErrorMessage(12));if(X in I.sliceCaseReducersByType)throw new Error(formatProdErrorMessage(13));return I.sliceCaseReducersByType[X]=Z,M},addMatcher(q,Z){return I.sliceMatchers.push({matcher:q,reducer:Z}),M},exposeAction(q,Z){return I.actionCreators[q]=Z,M},exposeCaseReducer(q,Z){return I.sliceCaseReducersByName[q]=Z,M}};P.forEach(q=>{const Z=S[q],X={reducerName:q,type:getType(w,q),createNotation:typeof b.reducers=="function"};isAsyncThunkSliceReducerDefinition(Z)?handleThunkCaseReducerDefinition(X,Z,M,d):handleNormalReducerDefinition(X,Z,M)});function D(){const[q={},Z=[],X=void 0]=typeof b.extraReducers=="function"?executeReducerBuilderCallback(b.extraReducers):[b.extraReducers],K={...q,...I.sliceCaseReducersByType};return createReducer(b.initialState,ee=>{for(let te in K)ee.addCase(te,K[te]);for(let te of I.sliceMatchers)ee.addMatcher(te.matcher,te.reducer);for(let te of Z)ee.addMatcher(te.matcher,te.reducer);X&&ee.addDefaultCase(X)})}const k=q=>q,H=new Map,F=new WeakMap;let j;function $(q,Z){return j||(j=D()),j(q,Z)}function z(){return j||(j=D()),j.getInitialState()}function U(q,Z=!1){function X(ee){let te=ee[q];return typeof te>"u"&&Z&&(te=getOrInsertComputed(F,X,z)),te}function K(ee=k){const te=getOrInsertComputed(H,Z,()=>new WeakMap);return getOrInsertComputed(te,ee,()=>{const ce={};for(const[Q,se]of Object.entries(b.selectors??{}))ce[Q]=wrapSelector(se,ee,()=>getOrInsertComputed(F,ee,z),Z);return ce})}return{reducerPath:q,getSelectors:K,get selectors(){return K(X)},selectSlice:X}}const W={name:w,reducer:$,actions:I.actionCreators,caseReducers:I.sliceCaseReducersByName,getInitialState:z,...U(C),injectInto(q,{reducerPath:Z,...X}={}){const K=Z??C;return q.inject({reducerPath:K,reducer:$},X),{...W,...U(K,!0)}}};return W}}function wrapSelector(x,d,g,E){function b(w,...C){let S=d(w);return typeof S>"u"&&E&&(S=g()),x(S,...C)}return b.unwrapped=x,b}var createSlice=buildCreateSlice();function buildReducerCreators(){function x(d,g){return{_reducerDefinitionType:"asyncThunk",payloadCreator:d,...g}}return x.withTypes=()=>x,{reducer(d){return Object.assign({[d.name](...g){return d(...g)}}[d.name],{_reducerDefinitionType:"reducer"})},preparedReducer(d,g){return{_reducerDefinitionType:"reducerWithPrepare",prepare:d,reducer:g}},asyncThunk:x}}function handleNormalReducerDefinition({type:x,reducerName:d,createNotation:g},E,b){let w,C;if("reducer"in E){if(g&&!isCaseReducerWithPrepareDefinition(E))throw new Error(formatProdErrorMessage(17));w=E.reducer,C=E.prepare}else w=E;b.addCase(x,w).exposeCaseReducer(d,w).exposeAction(d,C?createAction(x,C):createAction(x))}function isAsyncThunkSliceReducerDefinition(x){return x._reducerDefinitionType==="asyncThunk"}function isCaseReducerWithPrepareDefinition(x){return x._reducerDefinitionType==="reducerWithPrepare"}function handleThunkCaseReducerDefinition({type:x,reducerName:d},g,E,b){if(!b)throw new Error(formatProdErrorMessage(18));const{payloadCreator:w,fulfilled:C,pending:S,rejected:P,settled:I,options:M}=g,D=b(x,w,M);E.exposeAction(d,D),C&&E.addCase(D.fulfilled,C),S&&E.addCase(D.pending,S),P&&E.addCase(D.rejected,P),I&&E.addMatcher(D.settled,I),E.exposeCaseReducer(d,{fulfilled:C||noop$7,pending:S||noop$7,rejected:P||noop$7,settled:I||noop$7})}function noop$7(){}function formatProdErrorMessage(x){return`Minified Redux Toolkit error #${x}; visit https://redux-toolkit.js.org/Errors?code=${x} for the full message or use the non-minified dev environment for full errors. `}const LINE_SIZE=50,SYMBOL_WIDTH=145,SYMBOL_HEIGHT=110,VERTEX_FONT={size:16,color:"black",scaleHeight:2.375},SYMBOL_CONFIGS={FUNCTIONAL:{type:"Functional",shape:"parallelogramShape",imagePath:"img/Function.png",scale:{width:1.045,height:.8},label:"Do"},EMOTIONAL:{type:"Emotional",shape:"heartShape",imagePath:"img/Heart.png",scale:{width:.9,height:.96},label:"Feel"},NEGATIVE:{type:"Negative",shape:"negativeShape",imagePath:"img/Risk.png",scale:{width:.9,height:.96},shapeStyle:{fillColor:"grey"},label:"Concern"},QUALITY:{type:"Quality",shape:"cloudShape",imagePath:"img/Cloud.png",scale:{width:1,height:.8},label:"Be"},STAKEHOLDER:{type:"Stakeholder",shape:"personShape",imagePath:"img/Stakeholder.png",scale:{width:.5,height:1.2},shapeStyle:{verticalAlign:"top",verticalLabelPosition:"bottom",autoSize:!1},label:"Who"},CROWD:{type:"Crowd",shape:"crowdShape",imagePath:"img/Stakeholder.png",scale:{width:.6,height:1.2},shapeStyle:{verticalAlign:"top",verticalLabelPosition:"bottom",autoSize:!1},label:"Who"}},LINE_IMAGE_PATH="img/line.svg";function getSymbolKeyByType(x){var d;return(d=Object.entries(SYMBOL_CONFIGS).find(([g,E])=>E.type===x))==null?void 0:d[0]}const getSymbolConfigByShape=x=>Object.values(SYMBOL_CONFIGS).find(d=>d.shape===x);function getCellNumericIds(x){const d=x.getId();if(d){const g=d.match(/^(Functional|Nonfunctional)-(.+)$/);if(g)return g[2].split(",").map(E=>E.replace(/[[\]\s]/g,"")).filter(E=>E.length>0);throw new Error(`badly formatted cellId "${d}"`)}return[]}const returnFocusToGraph=()=>{const x=document.getElementById("graphContainer");x&&x.focus()};function fixEditorPosition(x){const d=x.container;d.style.position="relative";const g=C=>{C.style.position="absolute",C.style.transformOrigin="0 0",C.style.zIndex="10",C.parentElement!==d&&d.appendChild(C),C.addEventListener("keydown",S=>{S.key==="Enter"&&(S.preventDefault(),x.stopEditing(!1))})},E=()=>d.querySelector(".mxCellEditor")||document.querySelector(".mxCellEditor"),b=()=>{const C=E();C&&g(C)};new MutationObserver(()=>b()).observe(d,{childList:!0,subtree:!0})}function formatFunGoalRefId(x){return`${x.GoalType}-${x.instanceId}`}const parseFuncGoalRefId=x=>{const d=x.split("-");if(d.length!==2||d[0]===""||d[1]==="")throw new Error(`invalid id: got "${x}"`);const g=Number(d[0].trim());if(isNaN(g))throw new Error(`goal id must be a number, got "${d[0]}"`);const E=`${d[0].trim()}-${d[1].trim()}`;return{goalId:g,instanceId:E}},parseNonFuncGoalRefId=x=>{const d=x.match(/^\[(.+)]$/);if(!d)throw new Error(`invalid nonfunctional id: got "${x}"`);return d[1].split(",").map(b=>b.trim()).map(b=>parseFuncGoalRefId(b))},parseGoalRefId=x=>{if(!x)throw new Error("cell id is missing");const d=x.indexOf("-");if(d<0)throw new Error(`malformed cell id "${x}"`);const[g,E]=[x.slice(0,d),x.slice(d+1)],b=g.trim();switch(b){case"Functional":try{return[parseFuncGoalRefId(E)]}catch{throw Error(`invalid functional goal: "${x}"`)}case"Nonfunctional":try{return parseNonFuncGoalRefId(E)}catch{throw Error(`invalid non-functional goal: "${x}"`)}default:throw new Error(`unrecognised goal type "${b}"`)}};function generateCellId(x,d){switch(x){case"Functional":return`${x}-${d}`;case"Nonfunctional":return`${x}-[${d}]`;default:throw new Error(`Unexpected type: ${x}`)}}const parseInstanceId=x=>{const d=x.split("-").map(b=>b.trim());if(d.length!==2)throw new Error(`badly formatted instanceId "${x}"`);const[g,E]=d.map(Number);return{goalId:g,refId:E}},getNonFunctionalGoalColor=(x,d)=>{const g=d[0].instanceId,E=findGoalbyInstanceId(x,g);return E==null?void 0:E.GoalColor},findGoalbyInstanceId=(x,d)=>x.find(g=>g.instanceId===d);function makeLabelForGoalType(x,d){return makeSquareLabel(x,d==="STAKEHOLDER"?`,
`:", ")}function makeSquareLabel(x,d=", "){const g=x.length;if(g===0)return"";const E=Math.ceil(Math.sqrt(g)),b=Math.ceil(g/E),w=[];for(let C=0;C<b;C++){const S=x.slice(C*E,(C+1)*E);w.push(S.join(d))}return w.join(`,
`)}const newTreeNode=(x,{goalId:d,instanceId:g=generateInstanceId(x,d),children:E=[]})=>(x[d]?x[d].push(g):x[d]=[g],{goalId:d,instanceId:g,children:E}),createTreeFromTreeData=x=>x.map(d=>({goalId:d.id,instanceId:d.instanceId,children:createTreeFromTreeData(d.children??[]),color:d.color})),createTabContentFromInitialTab=({label:x,icon:d,rows:g})=>({label:x,icon:d,goalIds:g.map(E=>E.id)}),createGoalsAndTabsFromTabContent=x=>{const d=new Map(x.map(b=>[b.label,createTabContentFromInitialTab(b)])),g=x.map(b=>b.rows).flat();return{goals:Object.fromEntries(g.map(b=>[b.id,b])),tabs:d}},removeItemIdFromTree=(x,d,g,E=!0)=>x.reduce((b,w)=>w.goalId===d&&w.instanceId===g?(!E&&w.children&&b.push(...w.children),b):(w.children&&(w.children=removeItemIdFromTree(w.children,d,g,E)),b.push(w),b),[]),removeAllReferenceFromHierarchy=(x,d,g)=>x.filter(E=>g!==void 0?!(E.goalId===d&&E.instanceId===g):E.goalId!==d).map(E=>({...E,children:E.children?removeAllReferenceFromHierarchy(E.children,d,g):[]})),generateMaxSuffix=(x,d)=>{var E;const g=(E=x[d])==null?void 0:E.filter(b=>b!==null);return!g||g.length===0?0:Math.max(...g.map(b=>parseInstanceId(b).refId))},generateInstanceId=(x,d)=>{const g=generateMaxSuffix(x,d)+1;return`${d}-${g}`},createInitialState=(x=initialTabs,d=[])=>{const{goals:g,tabs:E}=createGoalsAndTabsFromTabContent(x);return{tabs:E,goals:g,tree:createTreeFromTreeData(d),treeIds:createTreeIdsFromTreeData(g,d)}},findTreeNodeByInstanceId=(x,d)=>{for(const g of x){if(g.instanceId===d)return g;const E=findTreeNodeByInstanceId(g.children??[],d);if(E)return E}},treeDataSlice=createSlice({name:"treeData",initialState:{tree:[],tabs:{},goals:{},treeIds:{}},reducers:{addGoal(x,d){var g;x.goals[d.payload.id]=d.payload,(g=x.tabs.get(d.payload.type))==null||g.goalIds.push(d.payload.id)},addGoalToTab:(x,d)=>{var g;(g=x.tabs.get(d.payload.type))==null||g.goalIds.push(d.payload.id),x.goals[d.payload.id]=d.payload},setTreeData:(x,d)=>{x.tree=createTreeFromTreeData(d.payload)},addGoalToTree:(x,d)=>{const g=newTreeNode(x.treeIds,{goalId:d.payload.id});x.tree.push(g),x.treeIds[d.payload.id]=[]},removeGoalIdFromTree:(x,d)=>{x.tree=removeItemIdFromTree(x.tree,d.payload.id,d.payload.instanceId,d.payload.removeChildren)},deleteGoalFromGoalList:(x,d)=>{const g=x.tabs.get(d.payload.type);g&&(g.goalIds=g.goalIds.filter(E=>E!==d.payload.id)),delete x.goals[d.payload.id],x.tree=removeAllReferenceFromHierarchy(x.tree,d.payload.id,void 0),delete x.treeIds[d.payload.id]},deleteGoalReferenceFromHierarchy:(x,d)=>{x.tree=removeAllReferenceFromHierarchy(x.tree,d.payload.id,d.payload.instanceId),x.treeIds[d.payload.id]=x.treeIds[d.payload.id].filter(g=>g!==d.payload.instanceId)},updateTextForGoalId:(x,d)=>{x.goals[d.payload.id]={...x.goals[d.payload.id],content:d.payload.text}},updateTextForInstanceId:(x,d)=>{const{instanceId:g,text:E}=d.payload,b=parseInstanceId(g).goalId;x.goals[b]={...x.goals[b],content:E}},updateColorForInstanceId:(x,d)=>{const{instanceId:g,color:E}=d.payload,b=parseInstanceId(g).goalId,w=findTreeNodeByInstanceId(x.tree,g);(w==null?void 0:w.goalId)===b&&(w.color=E)},reset:(x,d)=>{const g=d.payload?createInitialState(d.payload.tabData,d.payload.treeData):createInitialState(initialTabs,[]);Object.assign(x,g)}},extraReducers:x=>{x.addMatcher(()=>!0,d=>{})},selectors:{selectTabData:x=>createTabDataFromTabs(x.goals,x.tabs),selectTreeData:x=>createTreeDataFromTreeNode(x.goals,x.tree),selectGoalsForLabel:(x,d)=>{var g;return((g=x.tabs.get(d))==null?void 0:g.goalIds.map(E=>x.goals[E]))??[]}}}),{addGoal,addGoalToTab,setTreeData,addGoalToTree,deleteGoalReferenceFromHierarchy,deleteGoalFromGoalList,updateTextForGoalId,reset,removeGoalIdFromTree,updateTextForInstanceId,updateColorForInstanceId}=treeDataSlice.actions,{selectGoalsForLabel}=treeDataSlice.selectors,isEmptyObject=x=>x&&typeof x=="object"&&Object.keys(x).length===0,getStoredData=(x,d)=>{const g=localStorage.getItem(x),E=g?JSON.parse(g):null;return d instanceof Function?d():Array.isArray(E)&&E.length===0||isEmptyObject(E)?d:E??d},useLocalStorage=(x,d)=>{const[g,E]=reactExports.useState(()=>getStoredData(x,d));return reactExports.useEffect(()=>{localStorage.setItem(x,JSON.stringify(g))},[x,g]),[g,E]},LocalStorageType={TREE:"ammber/treeData",TAB:"ammber/tabData"},createTreeIdsFromTreeData=(x,d)=>{const g=Object.fromEntries(Object.keys(x).map(b=>[Number(b),[]])),E=b=>{b.forEach(w=>{if(g[w.id])g[w.id].push(w.instanceId);else throw new Error(`goal ${w.id} in tree but not in goal list`);w.children&&w.children.length>0&&E(w.children)})};return E(d),g},createTreeDataFromTreeNode=(x,d)=>d.map(g=>{const E=x[g.goalId];return newTreeItem({...E,instanceId:g.instanceId,...g.children?{children:createTreeDataFromTreeNode(x,g.children)}:{},color:g.color})}),createTabDataFromTabs=(x,d)=>Array.from(d.values()),useFileContext=()=>{const x=reactExports.useContext(FileContext);if(!x)throw new Error("useFileContext must be used within FileProvider.");return x},FileContext=reactExports.createContext({jsonFileHandle:null,setJsonFileHandle:()=>{},tabData:[],treeData:[],cluster:{ClusterGoals:[]},xmlData:"",dispatch:(()=>{}),setXmlData:()=>{},tree:[],tabs:new Map,goals:{},treeIds:{}}),typeMapping={Who:"Stakeholder",Do:"Functional",Be:"Quality",Feel:"Emotional",Concern:"Negative"},convertTreeDataToClusters=(x,d)=>{const g=E=>{const b=x[E.goalId];return{GoalID:E.goalId,instanceId:E.instanceId,GoalType:typeMapping[b.type],GoalContent:b.content,GoalNote:"",SubGoals:E.children?E.children.map(g):[],GoalColor:E.color}};return{ClusterGoals:d.map(g)}},FileProvider=({children:x})=>{const[d,g]=useLocalStorage(LocalStorageType.TREE,[]),[E,b]=useLocalStorage(LocalStorageType.TAB,initialTabs),w=createInitialState(E,d);console.log("transformation from localstorage to data: ",d);const[C,S]=reactExports.useReducer(treeDataSlice.reducer,w),[P,I]=reactExports.useState(null);reactExports.useEffect(()=>{console.log("FileProvider state updated:",C)},[C]),reactExports.useEffect(()=>{const F=createTreeDataFromTreeNode(C.goals,C.tree);g(F);const j=Array.from(C.tabs.entries()).map(([$,z])=>({label:$,icon:z.icon,rows:z.goalIds.map(U=>C.goals[U]).filter(Boolean)}));b(j)},[C.tree,C.tabs,C.goals,g,b]);const[M,D]=reactExports.useState(""),k=createTreeDataFromTreeNode(C.goals,C.tree),H=createTabDataFromTabs(C.goals,C.tabs);return reactExports.useEffect(()=>{console.log("Computed treeData:",k),console.log("Computed tabData:",H)},[k,H]),jsxRuntimeExports.jsx(FileContext.Provider,{value:{...C,dispatch:S,treeData:k,tabData:H,cluster:convertTreeDataToClusters(C.goals,C.tree),xmlData:M,setXmlData:D,jsonFileHandle:P,setJsonFileHandle:I},children:x})},JSON_FILE_ALERT="Please select a JSON file.",defaultModalState={show:!1,title:"",message:"",onHide:()=>{}};function convertTabContentToInitialTab(x,d){const g={};return(d||[]).forEach(E=>{g[E.id]=E;const b=w=>{(w||[]).forEach(C=>{g[C.id]=C,b(C.children||[])})};b(E.children||[])}),(x||[]).map(E=>({label:E.label,icon:E.icon,rows:(E.goalIds||[]).map(b=>g[b]).filter(Boolean)}))}const WelcomeButtons=({isDragging:x,setIsDragging:d})=>{const[g,E]=reactExports.useState(null),[b,w]=reactExports.useState(!1),[C,S]=reactExports.useState(defaultModalState),P=reactExports.useRef(null),I=useNavigate(),{dispatch:M}=useFileContext(),D=()=>{M(reset({treeData:defaultTreeData,tabData:createDefaultTabData()}))},k=async U=>{U.preventDefault(),w(!1);try{const W=U.dataTransfer.items;if(W.length>0){const q=W[0];if(q.kind==="file"){const Z=q.getAsFile();if(Z){if(Z.type!=="application/json"&&!Z.name.endsWith(".json")){S({...defaultModalState,show:!0,title:"Incorrect File Type",message:JSON_FILE_ALERT,onHide:()=>S(defaultModalState)});return}E(Z);const X=await Z.text();if(X){const K=JSON.parse(X),ee=convertTabContentToInitialTab(K.tabData,K.treeData);M(reset({tabData:ee,treeData:K.treeData})),console.log("File imported successfully")}else S({...defaultModalState,show:!0,title:"File Upload Failed",message:"File is empty or cannot be read.",onHide:()=>S(defaultModalState)})}}}}catch(W){console.error("Error handling dropped JSON file:",W),S({...defaultModalState,show:!0,title:"File Upload Failed",message:"Failed to process the dropped file. Please try again.",onHide:()=>S(defaultModalState)})}},H=U=>{U.preventDefault(),w(!0)},F=()=>{w(!1)},j=async()=>{P&&P.current&&P.current.click()},$=async U=>{try{if(U.target.files&&U.target.files.length>0){const W=U.target.files[0];E(W);const q=await W.text();if(q){const Z=JSON.parse(q),X=convertTabContentToInitialTab(Z.tabData,Z.treeData);M(reset({tabData:X,treeData:Z.treeData})),console.log("File imported successfully (file input)")}else console.log("File can't be read and parsed")}}catch(W){console.error("Error handling upload JSON file in Safari:",W)}},z=()=>{E(null),w(!1)};return jsxRuntimeExports.jsxs("div",{className:"d-flex justify-content-center mt-3",children:[jsxRuntimeExports.jsx(ErrorModal,{...C}),jsxRuntimeExports.jsx("input",{type:"file",accept:".json",multiple:!0,onChange:$,style:{display:"none"},ref:P}),x?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[g?jsxRuntimeExports.jsx(FileUploadSection,{file:g,onRemove:z,onUpload:j}):jsxRuntimeExports.jsx(FileDrop,{onClick:j,onDrop:k,onDragLeave:F,onDragOver:H,isDragOver:b,fileType:"JSON"}),jsxRuntimeExports.jsxs("div",{className:"position-absolute d-flex flex-row gap-5",style:{bottom:"80px"},children:[jsxRuntimeExports.jsx(Button,{variant:"primary",size:"lg",onClick:()=>d(!1),className:"align-self-center",children:"Back"}),jsxRuntimeExports.jsx(Button,{variant:"primary",size:"lg",disabled:!g,onClick:()=>I("/projectEdit"),children:"Upload"})]})]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Button,{variant:"primary",size:"lg",className:"me-5",onClick:()=>{D(),I("/projectEdit")},children:"Create Model"}),jsxRuntimeExports.jsx(Button,{variant:"primary",size:"lg",onClick:()=>d(!0),className:"align-self-start ms-5",children:"Open Model"})]})]})};function useUpdateEffect(x,d){const g=reactExports.useRef(!0);reactExports.useEffect(()=>{if(g.current){g.current=!1;return}return x()},d)}function useMounted(){const x=reactExports.useRef(!0),d=reactExports.useRef(()=>x.current);return reactExports.useEffect(()=>(x.current=!0,()=>{x.current=!1}),[]),d.current}const MAX_DELAY_MS=2**31-1;function setChainedTimeout(x,d,g){const E=g-Date.now();x.current=E<=MAX_DELAY_MS?setTimeout(d,E):setTimeout(()=>setChainedTimeout(x,d,g),MAX_DELAY_MS)}function useTimeout(){const x=useMounted(),d=reactExports.useRef();return useWillUnmount$1(()=>clearTimeout(d.current)),reactExports.useMemo(()=>{const g=()=>clearTimeout(d.current);function E(b,w=0){x()&&(g(),w<=MAX_DELAY_MS?d.current=setTimeout(b,w):setChainedTimeout(d,b,Date.now()+w))}return{set:E,clear:g,handleRef:d}},[])}function useCallbackRef(){return reactExports.useState(null)}function useEventListener(x,d,g,E=!1){const b=useEventCallback(g);reactExports.useEffect(()=>{const w=typeof x=="function"?x():x;return w.addEventListener(d,b,E),()=>w.removeEventListener(d,b,E)},[x])}const _excluded$6=["onKeyDown"];function _objectWithoutPropertiesLoose$6(x,d){if(x==null)return{};var g={};for(var E in x)if({}.hasOwnProperty.call(x,E)){if(d.indexOf(E)>=0)continue;g[E]=x[E]}return g}function isTrivialHref(x){return!x||x.trim()==="#"}const Anchor=reactExports.forwardRef((x,d)=>{let{onKeyDown:g}=x,E=_objectWithoutPropertiesLoose$6(x,_excluded$6);const[b]=useButtonProps(Object.assign({tagName:"a"},E)),w=useEventCallback(C=>{b.onKeyDown(C),g==null||g(C)});return isTrivialHref(E.href)||E.role==="button"?jsxRuntimeExports.jsx("a",Object.assign({ref:d},E,b,{onKeyDown:w})):jsxRuntimeExports.jsx("a",Object.assign({ref:d},E,{onKeyDown:g}))});Anchor.displayName="Anchor";function _extends$9(){return _extends$9=Object.assign?Object.assign.bind():function(x){for(var d=1;d<arguments.length;d++){var g=arguments[d];for(var E in g)({}).hasOwnProperty.call(g,E)&&(x[E]=g[E])}return x},_extends$9.apply(null,arguments)}function defaultKey(x){return"default"+x.charAt(0).toUpperCase()+x.substr(1)}function _toPropertyKey(x){var d=_toPrimitive(x,"string");return typeof d=="symbol"?d:String(d)}function _toPrimitive(x,d){if(typeof x!="object"||x===null)return x;var g=x[Symbol.toPrimitive];if(g!==void 0){var E=g.call(x,d);if(typeof E!="object")return E;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(x)}function useUncontrolledProp$1(x,d,g){var E=reactExports.useRef(x!==void 0),b=reactExports.useState(d),w=b[0],C=b[1],S=x!==void 0,P=E.current;return E.current=S,!S&&P&&w!==d&&C(d),[S?x:w,reactExports.useCallback(function(I){for(var M=arguments.length,D=new Array(M>1?M-1:0),k=1;k<M;k++)D[k-1]=arguments[k];g&&g.apply(void 0,[I].concat(D)),C(I)},[g])]}function useUncontrolled(x,d){return Object.keys(d).reduce(function(g,E){var b,w=g,C=w[defaultKey(E)],S=w[E],P=_objectWithoutPropertiesLoose$8(w,[defaultKey(E),E].map(_toPropertyKey)),I=d[E],M=useUncontrolledProp$1(S,C,x[I]),D=M[0],k=M[1];return _extends$9({},P,(b={},b[E]=D,b[I]=k,b))},x)}const CarouselCaption=reactExports.forwardRef(({className:x,bsPrefix:d,as:g="div",...E},b)=>(d=useBootstrapPrefix(d,"carousel-caption"),jsxRuntimeExports.jsx(g,{ref:b,className:classNames(x,d),...E})));CarouselCaption.displayName="CarouselCaption";const CarouselItem=reactExports.forwardRef(({as:x="div",bsPrefix:d,className:g,...E},b)=>{const w=classNames(g,useBootstrapPrefix(d,"carousel-item"));return jsxRuntimeExports.jsx(x,{ref:b,...E,className:w})});CarouselItem.displayName="CarouselItem";function map$1(x,d){let g=0;return reactExports.Children.map(x,E=>reactExports.isValidElement(E)?d(E,g++):E)}function forEach$1(x,d){let g=0;reactExports.Children.forEach(x,E=>{reactExports.isValidElement(E)&&d(E,g++)})}function hasChildOfType(x,d){return reactExports.Children.toArray(x).some(g=>reactExports.isValidElement(g)&&g.type===d)}const SWIPE_THRESHOLD=40;function isVisible(x){if(!x||!x.style||!x.parentNode||!x.parentNode.style)return!1;const d=getComputedStyle(x);return d.display!=="none"&&d.visibility!=="hidden"&&getComputedStyle(x.parentNode).display!=="none"}const Carousel=reactExports.forwardRef(({defaultActiveIndex:x=0,...d},g)=>{const{as:E="div",bsPrefix:b,slide:w=!0,fade:C=!1,controls:S=!0,indicators:P=!0,indicatorLabels:I=[],activeIndex:M,onSelect:D,onSlide:k,onSlid:H,interval:F=5e3,keyboard:j=!0,onKeyDown:$,pause:z="hover",onMouseOver:U,onMouseOut:W,wrap:q=!0,touch:Z=!0,onTouchStart:X,onTouchMove:K,onTouchEnd:ee,prevIcon:te=jsxRuntimeExports.jsx("span",{"aria-hidden":"true",className:"carousel-control-prev-icon"}),prevLabel:ce="Previous",nextIcon:Q=jsxRuntimeExports.jsx("span",{"aria-hidden":"true",className:"carousel-control-next-icon"}),nextLabel:se="Next",variant:ge,className:Ce,children:oe,...he}=useUncontrolled({defaultActiveIndex:x,...d},{activeIndex:"onSelect"}),de=useBootstrapPrefix(b,"carousel"),re=useIsRTL(),ae=reactExports.useRef(null),[pe,J]=reactExports.useState("next"),[ue,Te]=reactExports.useState(!1),[xe,we]=reactExports.useState(!1),[Re,De]=reactExports.useState(M||0);reactExports.useEffect(()=>{!xe&&M!==Re&&(ae.current?J(ae.current):J((M||0)>Re?"next":"prev"),w&&we(!0),De(M||0))},[M,xe,Re,w]),reactExports.useEffect(()=>{ae.current&&(ae.current=null)});let Ae=0,Be;forEach$1(oe,(Ne,He)=>{++Ae,He===M&&(Be=Ne.props.interval)});const We=useCommittedRef$1(Be),Fe=reactExports.useCallback(Ne=>{if(xe)return;let He=Re-1;if(He<0){if(!q)return;He=Ae-1}ae.current="prev",D==null||D(He,Ne)},[xe,Re,D,q,Ae]),ze=useEventCallback$1(Ne=>{if(xe)return;let He=Re+1;if(He>=Ae){if(!q)return;He=0}ae.current="next",D==null||D(He,Ne)}),ct=reactExports.useRef();reactExports.useImperativeHandle(g,()=>({element:ct.current,prev:Fe,next:ze}));const rt=useEventCallback$1(()=>{!document.hidden&&isVisible(ct.current)&&(re?Fe():ze())}),Le=pe==="next"?"start":"end";useUpdateEffect(()=>{w||(k==null||k(Re,Le),H==null||H(Re,Le))},[Re]);const nt=`${de}-item-${pe}`,qe=`${de}-item-${Le}`,dt=reactExports.useCallback(Ne=>{triggerBrowserReflow(Ne),k==null||k(Re,Le)},[k,Re,Le]),ht=reactExports.useCallback(()=>{we(!1),H==null||H(Re,Le)},[H,Re,Le]),st=reactExports.useCallback(Ne=>{if(j&&!/input|textarea/i.test(Ne.target.tagName))switch(Ne.key){case"ArrowLeft":Ne.preventDefault(),re?ze(Ne):Fe(Ne);return;case"ArrowRight":Ne.preventDefault(),re?Fe(Ne):ze(Ne);return}$==null||$(Ne)},[j,$,Fe,ze,re]),be=reactExports.useCallback(Ne=>{z==="hover"&&Te(!0),U==null||U(Ne)},[z,U]),lt=reactExports.useCallback(Ne=>{Te(!1),W==null||W(Ne)},[W]),et=reactExports.useRef(0),tt=reactExports.useRef(0),xt=useTimeout(),Ke=reactExports.useCallback(Ne=>{et.current=Ne.touches[0].clientX,tt.current=0,z==="hover"&&Te(!0),X==null||X(Ne)},[z,X]),ft=reactExports.useCallback(Ne=>{Ne.touches&&Ne.touches.length>1?tt.current=0:tt.current=Ne.touches[0].clientX-et.current,K==null||K(Ne)},[K]),ot=reactExports.useCallback(Ne=>{if(Z){const He=tt.current;Math.abs(He)>SWIPE_THRESHOLD&&(He>0?Fe(Ne):ze(Ne))}z==="hover"&&xt.set(()=>{Te(!1)},F||void 0),ee==null||ee(Ne)},[Z,z,Fe,ze,xt,F,ee]),vt=F!=null&&!ue&&!xe,pt=reactExports.useRef();reactExports.useEffect(()=>{var Ne,He;if(!vt)return;const Ye=re?Fe:ze;return pt.current=window.setInterval(document.visibilityState?rt:Ye,(Ne=(He=We.current)!=null?He:F)!=null?Ne:void 0),()=>{pt.current!==null&&clearInterval(pt.current)}},[vt,Fe,ze,We,F,rt,re]);const Ze=reactExports.useMemo(()=>P&&Array.from({length:Ae},(Ne,He)=>Ye=>{D==null||D(He,Ye)}),[P,Ae,D]);return jsxRuntimeExports.jsxs(E,{ref:ct,...he,onKeyDown:st,onMouseOver:be,onMouseOut:lt,onTouchStart:Ke,onTouchMove:ft,onTouchEnd:ot,className:classNames(Ce,de,w&&"slide",C&&`${de}-fade`,ge&&`${de}-${ge}`),children:[P&&jsxRuntimeExports.jsx("div",{className:`${de}-indicators`,children:map$1(oe,(Ne,He)=>jsxRuntimeExports.jsx("button",{type:"button","data-bs-target":"","aria-label":I!=null&&I.length?I[He]:`Slide ${He+1}`,className:He===Re?"active":void 0,onClick:Ze?Ze[He]:void 0,"aria-current":He===Re},He))}),jsxRuntimeExports.jsx("div",{className:`${de}-inner`,children:map$1(oe,(Ne,He)=>{const Ye=He===Re;return w?jsxRuntimeExports.jsx(TransitionWrapper,{in:Ye,onEnter:Ye?dt:void 0,onEntered:Ye?ht:void 0,addEndListener:transitionEndListener,children:(Tt,bt)=>reactExports.cloneElement(Ne,{...bt,className:classNames(Ne.props.className,Ye&&Tt!=="entered"&&nt,(Tt==="entered"||Tt==="exiting")&&"active",(Tt==="entering"||Tt==="exiting")&&qe)})}):reactExports.cloneElement(Ne,{className:classNames(Ne.props.className,Ye&&"active")})})}),S&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[(q||M!==0)&&jsxRuntimeExports.jsxs(Anchor,{className:`${de}-control-prev`,onClick:Fe,children:[te,ce&&jsxRuntimeExports.jsx("span",{className:"visually-hidden",children:ce})]}),(q||M!==Ae-1)&&jsxRuntimeExports.jsxs(Anchor,{className:`${de}-control-next`,onClick:ze,children:[Q,se&&jsxRuntimeExports.jsx("span",{className:"visually-hidden",children:se})]})]})]})});Carousel.displayName="Carousel";const Carousel$1=Object.assign(Carousel,{Caption:CarouselCaption,Item:CarouselItem}),DetailCarousel=()=>jsxRuntimeExports.jsxs(Carousel$1,{interval:null,children:[jsxRuntimeExports.jsx(Carousel$1.Item,{children:jsxRuntimeExports.jsxs("div",{className:"content",children:[jsxRuntimeExports.jsx("img",{src:"./leon.png",alt:"leon_icon",style:{height:"100px",width:"auto"}}),jsxRuntimeExports.jsx("h1",{className:"my-4",children:"AMMBER"}),jsxRuntimeExports.jsx("h2",{className:"mt-4",style:{fontSize:"20px"},children:"A Motivational Model Builder For Essential Requirements"})]})}),jsxRuntimeExports.jsx(Carousel$1.Item,{children:jsxRuntimeExports.jsxs("div",{className:"content",children:[jsxRuntimeExports.jsx("h4",{className:"fw-bold fst-italic",children:"Motivational Models"}),jsxRuntimeExports.jsx("p",{className:"fw-light text-start",children:"Motivational models were originally an agent-oriented methodology variation of goal models described in Sterling, L. and Taveter, K. The Art of Agent-Oriented Modeling, MIT Press, 2009. They present a hierarchical structure of the goals of the software system at a high-level of abstraction. The models capture roles of all stakeholders involved in the system, the functional goals of the system, the quality goals of the system, and emotional goals, which represent how people want to feel when interacting with the system."})]})}),jsxRuntimeExports.jsx(Carousel$1.Item,{children:jsxRuntimeExports.jsxs("div",{className:"content ",children:[jsxRuntimeExports.jsx("h4",{className:"fw-bold fst-italic",children:"About Leon Sterling"}),jsxRuntimeExports.jsx("p",{className:"fw-light text-start",children:"Professor Leon Sterling has had a distinguished academic career. After completing a PhD at the Australian National University, he worked for 15 years at universities in the UK, Israel and the United States. He returned to Australia as Professor of Computer Science at the University of Melbourne in 1995. He served as Head of the Department of Computer Science and Engineering for 6 years. After stepping down as Head, he took up an industry-sponsored chair becoming the Adacel Professor of Software Innovation and Engineering. In 2010, he moved to Swinburne where he served as Dean of the Faculty of Information and Communication Technologies for 4 years and Pro Vice-Chancellor (Digital Frontiers) for two years. He has been a prominent figure in IT in Australia, being a strong advocate for coding in schools through public lectures, blogs, and committee memberships. His current research is in incorporating emotions in technology development, where motivational models are an essential element."}),jsxRuntimeExports.jsx("br",{})]})})]}),Welcome=()=>{const[x,d]=reactExports.useState(!1),g=E=>{E.preventDefault(),d(!0)};return jsxRuntimeExports.jsxs("div",{className:"d-flex p-3 flex-column text-center",onDragOver:g,id:"bg",style:{minHeight:"inherit"},children:[jsxRuntimeExports.jsx(WelcomeHeader,{}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(DetailCarousel,{}),jsxRuntimeExports.jsx(WelcomeButtons,{isDragging:x,setIsDragging:d})]}),jsxRuntimeExports.jsx(WelcomeFooter,{destination:"papers",name:"Papers"})]})},Container=reactExports.forwardRef(({bsPrefix:x,fluid:d=!1,as:g="div",className:E,...b},w)=>{const C=useBootstrapPrefix(x,"container"),S=typeof d=="string"?`-${d}`:"-fluid";return jsxRuntimeExports.jsx(g,{ref:w,...b,className:classNames(E,d?`${C}${S}`:C)})});Container.displayName="Container";const CardBody=reactExports.forwardRef(({className:x,bsPrefix:d,as:g="div",...E},b)=>(d=useBootstrapPrefix(d,"card-body"),jsxRuntimeExports.jsx(g,{ref:b,className:classNames(x,d),...E})));CardBody.displayName="CardBody";const CardFooter=reactExports.forwardRef(({className:x,bsPrefix:d,as:g="div",...E},b)=>(d=useBootstrapPrefix(d,"card-footer"),jsxRuntimeExports.jsx(g,{ref:b,className:classNames(x,d),...E})));CardFooter.displayName="CardFooter";const context$2=reactExports.createContext(null);context$2.displayName="CardHeaderContext";const CardHeader=reactExports.forwardRef(({bsPrefix:x,className:d,as:g="div",...E},b)=>{const w=useBootstrapPrefix(x,"card-header"),C=reactExports.useMemo(()=>({cardHeaderBsPrefix:w}),[w]);return jsxRuntimeExports.jsx(context$2.Provider,{value:C,children:jsxRuntimeExports.jsx(g,{ref:b,...E,className:classNames(d,w)})})});CardHeader.displayName="CardHeader";const CardImg=reactExports.forwardRef(({bsPrefix:x,className:d,variant:g,as:E="img",...b},w)=>{const C=useBootstrapPrefix(x,"card-img");return jsxRuntimeExports.jsx(E,{ref:w,className:classNames(g?`${C}-${g}`:C,d),...b})});CardImg.displayName="CardImg";const CardImgOverlay=reactExports.forwardRef(({className:x,bsPrefix:d,as:g="div",...E},b)=>(d=useBootstrapPrefix(d,"card-img-overlay"),jsxRuntimeExports.jsx(g,{ref:b,className:classNames(x,d),...E})));CardImgOverlay.displayName="CardImgOverlay";const CardLink=reactExports.forwardRef(({className:x,bsPrefix:d,as:g="a",...E},b)=>(d=useBootstrapPrefix(d,"card-link"),jsxRuntimeExports.jsx(g,{ref:b,className:classNames(x,d),...E})));CardLink.displayName="CardLink";const DivStyledAsH6=divWithClassName("h6"),CardSubtitle=reactExports.forwardRef(({className:x,bsPrefix:d,as:g=DivStyledAsH6,...E},b)=>(d=useBootstrapPrefix(d,"card-subtitle"),jsxRuntimeExports.jsx(g,{ref:b,className:classNames(x,d),...E})));CardSubtitle.displayName="CardSubtitle";const CardText=reactExports.forwardRef(({className:x,bsPrefix:d,as:g="p",...E},b)=>(d=useBootstrapPrefix(d,"card-text"),jsxRuntimeExports.jsx(g,{ref:b,className:classNames(x,d),...E})));CardText.displayName="CardText";const DivStyledAsH5=divWithClassName("h5"),CardTitle=reactExports.forwardRef(({className:x,bsPrefix:d,as:g=DivStyledAsH5,...E},b)=>(d=useBootstrapPrefix(d,"card-title"),jsxRuntimeExports.jsx(g,{ref:b,className:classNames(x,d),...E})));CardTitle.displayName="CardTitle";const Card=reactExports.forwardRef(({bsPrefix:x,className:d,bg:g,text:E,border:b,body:w=!1,children:C,as:S="div",...P},I)=>{const M=useBootstrapPrefix(x,"card");return jsxRuntimeExports.jsx(S,{ref:I,...P,className:classNames(d,M,g&&`bg-${g}`,E&&`text-${E}`,b&&`border-${b}`),children:w?jsxRuntimeExports.jsx(CardBody,{children:C}):C})});Card.displayName="Card";const Card$1=Object.assign(Card,{Img:CardImg,Title:CardTitle,Subtitle:CardSubtitle,Body:CardBody,Link:CardLink,Text:CardText,Header:CardHeader,Footer:CardFooter,ImgOverlay:CardImgOverlay});var warning_1,hasRequiredWarning;function requireWarning(){if(hasRequiredWarning)return warning_1;hasRequiredWarning=1;var x=function(){};return warning_1=x,warning_1}var warningExports=requireWarning();const warning=getDefaultExportFromCjs(warningExports);function useForceUpdate(){const[,x]=reactExports.useReducer(d=>d+1,0);return x}const NavContext=reactExports.createContext(null);NavContext.displayName="NavContext";const SelectableContext=reactExports.createContext(null),makeEventKey=(x,d=null)=>x!=null?String(x):d||null,TabContext=reactExports.createContext(null),_excluded$5=["as","active","eventKey"];function _objectWithoutPropertiesLoose$5(x,d){if(x==null)return{};var g={};for(var E in x)if({}.hasOwnProperty.call(x,E)){if(d.indexOf(E)>=0)continue;g[E]=x[E]}return g}function useNavItem({key:x,onClick:d,active:g,id:E,role:b,disabled:w}){const C=reactExports.useContext(SelectableContext),S=reactExports.useContext(NavContext),P=reactExports.useContext(TabContext);let I=g;const M={role:b};if(S){!b&&S.role==="tablist"&&(M.role="tab");const D=S.getControllerId(x??null),k=S.getControlledId(x??null);M[dataAttr("event-key")]=x,M.id=D||E,I=g==null&&x!=null?S.activeKey===x:g,(I||!(P!=null&&P.unmountOnExit)&&!(P!=null&&P.mountOnEnter))&&(M["aria-controls"]=k)}return M.role==="tab"&&(M["aria-selected"]=I,I||(M.tabIndex=-1),w&&(M.tabIndex=-1,M["aria-disabled"]=!0)),M.onClick=useEventCallback(D=>{w||(d==null||d(D),x!=null&&C&&!D.isPropagationStopped()&&C(x,D))}),[M,{isActive:I}]}const NavItem$1=reactExports.forwardRef((x,d)=>{let{as:g=Button$1,active:E,eventKey:b}=x,w=_objectWithoutPropertiesLoose$5(x,_excluded$5);const[C,S]=useNavItem(Object.assign({key:makeEventKey(b,w.href),active:E},w));return C[dataAttr("active")]=S.isActive,jsxRuntimeExports.jsx(g,Object.assign({},w,C,{ref:d}))});NavItem$1.displayName="NavItem";const _excluded$4=["as","onSelect","activeKey","role","onKeyDown"];function _objectWithoutPropertiesLoose$4(x,d){if(x==null)return{};var g={};for(var E in x)if({}.hasOwnProperty.call(x,E)){if(d.indexOf(E)>=0)continue;g[E]=x[E]}return g}const noop$6=()=>{},EVENT_KEY_ATTR=dataAttr("event-key"),Nav$2=reactExports.forwardRef((x,d)=>{let{as:g="div",onSelect:E,activeKey:b,role:w,onKeyDown:C}=x,S=_objectWithoutPropertiesLoose$4(x,_excluded$4);const P=useForceUpdate(),I=reactExports.useRef(!1),M=reactExports.useContext(SelectableContext),D=reactExports.useContext(TabContext);let k,H;D&&(w=w||"tablist",b=D.activeKey,k=D.getControlledId,H=D.getControllerId);const F=reactExports.useRef(null),j=W=>{const q=F.current;if(!q)return null;const Z=qsa(q,`[${EVENT_KEY_ATTR}]:not([aria-disabled=true])`),X=q.querySelector("[aria-selected=true]");if(!X||X!==document.activeElement)return null;const K=Z.indexOf(X);if(K===-1)return null;let ee=K+W;return ee>=Z.length&&(ee=0),ee<0&&(ee=Z.length-1),Z[ee]},$=(W,q)=>{W!=null&&(E==null||E(W,q),M==null||M(W,q))},z=W=>{if(C==null||C(W),!D)return;let q;switch(W.key){case"ArrowLeft":case"ArrowUp":q=j(-1);break;case"ArrowRight":case"ArrowDown":q=j(1);break;default:return}q&&(W.preventDefault(),$(q.dataset[dataProp("EventKey")]||null,W),I.current=!0,P())};reactExports.useEffect(()=>{if(F.current&&I.current){const W=F.current.querySelector(`[${EVENT_KEY_ATTR}][aria-selected=true]`);W==null||W.focus()}I.current=!1});const U=useMergedRefs(d,F);return jsxRuntimeExports.jsx(SelectableContext.Provider,{value:$,children:jsxRuntimeExports.jsx(NavContext.Provider,{value:{role:w,activeKey:makeEventKey(b),getControlledId:k||noop$6,getControllerId:H||noop$6},children:jsxRuntimeExports.jsx(g,Object.assign({},S,{onKeyDown:z,ref:U,role:w}))})})});Nav$2.displayName="Nav";const BaseNav=Object.assign(Nav$2,{Item:NavItem$1}),ListGroupItem=reactExports.forwardRef(({bsPrefix:x,active:d,disabled:g,eventKey:E,className:b,variant:w,action:C,as:S,...P},I)=>{x=useBootstrapPrefix(x,"list-group-item");const[M,D]=useNavItem({key:makeEventKey(E,P.href),active:d,...P}),k=useEventCallback$1(F=>{if(g){F.preventDefault(),F.stopPropagation();return}M.onClick(F)});g&&P.tabIndex===void 0&&(P.tabIndex=-1,P["aria-disabled"]=!0);const H=S||(C?P.href?"a":"button":"div");return jsxRuntimeExports.jsx(H,{ref:I,...P,...M,onClick:k,className:classNames(b,x,D.isActive&&"active",g&&"disabled",w&&`${x}-${w}`,C&&`${x}-action`)})});ListGroupItem.displayName="ListGroupItem";const ListGroup=reactExports.forwardRef((x,d)=>{const{className:g,bsPrefix:E,variant:b,horizontal:w,numbered:C,as:S="div",...P}=useUncontrolled(x,{activeKey:"onSelect"}),I=useBootstrapPrefix(E,"list-group");let M;return w&&(M=w===!0?"horizontal":`horizontal-${w}`),jsxRuntimeExports.jsx(BaseNav,{ref:d,...P,as:S,className:classNames(g,I,b&&`${I}-${b}`,M&&`${I}-${M}`,C&&`${I}-numbered`)})});ListGroup.displayName="ListGroup";const ListGroup$1=Object.assign(ListGroup,{Item:ListGroupItem}),PaperReference=({paper:x})=>jsxRuntimeExports.jsxs(Card$1,{children:[jsxRuntimeExports.jsx(Card$1.Header,{as:"h5",children:x.title}),jsxRuntimeExports.jsx(Card$1.Body,{children:x.summary&&jsxRuntimeExports.jsx(Card$1.Text,{children:x.summary})}),jsxRuntimeExports.jsx(Card$1.Footer,{children:jsxRuntimeExports.jsx(Link,{to:x.link,target:"_blank",children:"View"})})]}),PaperReferenceList=({references:x})=>jsxRuntimeExports.jsx(ListGroup$1,{as:"ul",variant:"flush",children:x.map((d,g)=>jsxRuntimeExports.jsx(ListGroup$1.Item,{as:"li",style:{background:"transparent",border:"none"},children:jsxRuntimeExports.jsx(PaperReference,{paper:d},g)},g))}),papers=[{title:"Using Motivational Models to Promote Emotional Goals Among Software Engineering Students",summary:`There has been increasing awareness in recent years
        of the importance of considering broader, social and personal
        goals in software engineering. One important aspect is the need
        to engender certain feelings in users when they interact with
        software. Such emotional goals are relatively new to software
        development. While there are established methods for teaching
        requirements elicitation for standard goals and evaluating
        whether they have been met, there is much less work on
        evaluating whether emotional goals have been met through software.
        For the past five years, emotional goals have been explicitly
        included while teaching software requirements with students
        at The University of Melbourne and Swinburne University of
        Technology, both in dedicated subjects and in project subjects.
        Students have been strongly encouraged to incorporate emotional
        goals in the design of projects requirements through the use of
        motivational models. In this paper we discuss and reflect on
        our experience teaching motivational modelling that is aimed at
        supporting students in the creation and evaluation of emotional
        goals in the software requirements phase.`,link:"/papers/CHASE_2023_emotions.pdf"},{title:`Motivational models for validating agile requirements
        in Software Engineering subjects`,summary:`This paper describes how motivational models can be used to
        cross check agile requirements artifacts to improve consistency
        and completeness of software requirements. Motivational models provide a high
        level understanding of the purposes of a software system. They complement
        personas and user stories which focus more on user needs rather
        than on system features. We present an exploratory case study sought
        to understand how software engineering students could use motivational
        models to create better requirements artifacts so they are understandable
        to non-technical users, easily understood by developers, and are
        consistent with each other. Nine consistency principles were created as
        an outcome of our study and are now successfully adopted by software
        engineering students at the University of Melbourne to ensure consistency
        between motivational models, personas, and user stories in requirements
        engineering.`,link:"/papers/CSCE_2021.pdf"},{title:`Requirements Elicitation and Repeatable Processes -
Interdisciplinary Collaboration between Software
Engineering and Design`,summary:`Motivational modelling and the use of emotional
        goals has flourished from interdisciplinary interactions between
        software engineering, HCI and design. This paper discusses how
        interdisciplinary interactions produced outcomes that would not
        have been achieved if we had stayed within discipline boundaries.
        Innovation from a software perspective was the identification
        of emotional goals, the use of more engaging terminology and
        images, and improved requirements elicitation. Innovation from
        a design perspective was the introduction of an abstraction
        layer that produced helpful methods, spurred new research, and
        provided insight on repeatable processes.`,link:"/papers/Design_meets_SE.pdf"},{title:"Evaluating Ask Izzy: A Mobile Web App for People Experiencing Homelessness",summary:`Conducted a thematic analysis to explore perceptions towards
        Ask Izzy, a mobile web app for homelessness. Currently deployed
        across Australia and attracting over 10,000 users each month.`,link:"/papers/ECSCW Final.pdf"},{title:"Understandability of Requirements Artefacts - A Small Survey",summary:`Motivational goal modelling has evolved from a
        method to build agent-oriented software models to be a general
        method for eliciting requirements for software, products or
        services. The method has been used for over five years in software
        engineering units at the University of Melbourne. Increasingly
        the units have advocated building consistency between software
        requirements artefacts such as motivational models, lists of user
        stories and prioritised requirements presented in a MoSCoW
        table. This paper describes a small survey comparing the
        understandability of three requirements artefacts: motivational models,
        user stories and MoSCoW tables.`,link:"/papers/MMSurvey.pdf"},{title:`Transitioning from motivational goal models to user
        stories within user-centred software design`,summary:`Motivational goal modelling has evolved from agent-oriented
        models to allow a shared understanding of a project
        by diverse stakeholders. Building a motivational model is in the
        spirit of user-centred design. Requirements artefacts such as user
        stories and personas should be developed consistently with the
        model. This paper describes a method to generate user stories
        from motivational models. The generated stories are checked by
        users and developers to ensure readabilty and clarity. The method
        has been partially automated within an extension to an editing
        tool.`,link:"/papers/MMtoUserStories.pdf"},{title:`Transitioning from motivational goal models to user stories
        within user-centred software design`,link:"/papers/Paper_Motivational_Goals_EHR _2.pdf",summary:`Motivational goal modelling has evolved from agent-oriented models
        to allow a shared understanding of a project
        by diverse stakeholders. Building a motivational model is in the
        spirit of user-centred design. Requirements artefacts such as user
        stories and personas should be developed consistently with the
        model. This paper describes a method to generate user stories
        from motivational models. The generated stories are checked by
        users and developers to ensure readabilty and clarity. The method
        has been partially automated within an extension to an editing
        tool.`},{title:`Motivational Modelling in Software for Homelessness:
        Lessons from an Industrial Study`,summary:`Requirements engineering involves the elicitation,
        representation and communication of diverse stakeholder needs.
        However, this can be particularly challenging when developing
        technology embedded within complex social systems. So-called
        socially-oriented requirements can be abstract, ambiguous and
        driven by the organisational, cultural and political contexts of
        the stakeholders involved. Motivational models are one solution
        which supports project-wide understanding of the key goals of
        stakeholders. Yet, there is still a lack of understanding about
        the role they can play in larger industrial projects. We present
        our use of motivational modelling in an Australia-wide project
        that develops new technology to assist people who are homeless
        in accessing service providers. We interviewed 100 stakeholders
        and utilised motivational models to advocate for the needs of
        key stakeholder groups. We discuss the benefits, challenges and
        lessons learned.`,link:"/papers/RECameraReady.pdf"},{title:`Requirements elicitation and specification using
        the agent paradigm: the case study of an aircraft
        turnaround simulator`,summary:`In this paper, we describe research results arising from a technology transfer exercise on agent-oriented
        requirements engineering with an industry partner. We introduce two improvements to the state-of-the-art in
        agent-oriented requirements engineering, designed to mitigate two problems experienced by ourselves and
        our industry partner: (1) the lack of systematic methods for agent-oriented requirements elicitation and
        modelling; and (2) the lack of prescribed deliverables in agent-oriented requirements engineering. We discuss
        the application of our new approach to an aircraft turnaround simulator built in conjunction with our industry
        partner, and show how agent-oriented models can be derived and used to construct a complete requirements
        package. We evaluate this by having three independent people design and implement prototypes of the aircraft
        turnaround simulator, and comparing the three prototypes. Our evaluation indicates that our approach is
        effective at delivering correct, complete, and consistent requirements that satisfy the stakeholders, and can be
        used in a repeatable manner to produce designs and implementations. We discuss lessons learnt from applying
        this approach.`,link:"/papers/Requirements elicitation and specification using the agent paradi.pdf"},{title:"Teaching Goal Models in Agile Requirements Engineering",summary:`Software engineering courses continually strive to
        maintain an excellent teaching curriculum that provides students
        with the agile skills as per industry needs. A particular challenge
        of teaching requirements engineering is capturing and communicating
        software requirements without killing team agility
        with excessive documentation. In many projects, requirements
        can be ambiguous and inconsistent. It is important to find
        a middle ground between completely by-passing requirements
        documentation and writing a complete Software Requirements
        Specification. In this paper, we report our experiences, presenting
        a guideline for students and educators who wish to adopt goal
        modelling, a lightweight approach to requirements elicitation
        and modelling, for agile requirements engineering. This is an
        efficient technique that also represents a good boundary object
        to support discussions between the developers and non-technical
        clients. Finally, we outline discussion points regarding where goal
        models could fit into other agile practices.`,link:"/papers/Using_Goal_Models_in_Agile_Teaching__RE_.pdf"}],Papers=()=>jsxRuntimeExports.jsxs("div",{id:"bg",style:{minHeight:"100vh"},className:"d-flex flex-column",children:[jsxRuntimeExports.jsx(WelcomeHeader,{}),jsxRuntimeExports.jsx(Container,{style:{overflow:"auto",height:"90vh"},children:jsxRuntimeExports.jsx(PaperReferenceList,{references:papers})}),jsxRuntimeExports.jsx(WelcomeFooter,{destination:"",name:"Home"})]});function createChainedFunction(...x){return x.filter(d=>d!=null).reduce((d,g)=>{if(typeof g!="function")throw new Error("Invalid Argument Type, must only provide functions, undefined, or null.");return d===null?g:function(...b){d.apply(this,b),g.apply(this,b)}},null)}const MARGINS={height:["marginTop","marginBottom"],width:["marginLeft","marginRight"]};function getDefaultDimensionValue(x,d){const g=`offset${x[0].toUpperCase()}${x.slice(1)}`,E=d[g],b=MARGINS[x];return E+parseInt(style(d,b[0]),10)+parseInt(style(d,b[1]),10)}const collapseStyles={[EXITED]:"collapse",[EXITING]:"collapsing",[ENTERING]:"collapsing",[ENTERED]:"collapse show"},Collapse=React.forwardRef(({onEnter:x,onEntering:d,onEntered:g,onExit:E,onExiting:b,className:w,children:C,dimension:S="height",in:P=!1,timeout:I=300,mountOnEnter:M=!1,unmountOnExit:D=!1,appear:k=!1,getDimensionValue:H=getDefaultDimensionValue,...F},j)=>{const $=typeof S=="function"?S():S,z=reactExports.useMemo(()=>createChainedFunction(X=>{X.style[$]="0"},x),[$,x]),U=reactExports.useMemo(()=>createChainedFunction(X=>{const K=`scroll${$[0].toUpperCase()}${$.slice(1)}`;X.style[$]=`${X[K]}px`},d),[$,d]),W=reactExports.useMemo(()=>createChainedFunction(X=>{X.style[$]=null},g),[$,g]),q=reactExports.useMemo(()=>createChainedFunction(X=>{X.style[$]=`${H($,X)}px`,triggerBrowserReflow(X)},E),[E,H,$]),Z=reactExports.useMemo(()=>createChainedFunction(X=>{X.style[$]=null},b),[$,b]);return jsxRuntimeExports.jsx(TransitionWrapper,{ref:j,addEndListener:transitionEndListener,...F,"aria-expanded":F.role?P:null,onEnter:z,onEntering:U,onEntered:W,onExit:q,onExiting:Z,childRef:getChildRef(C),in:P,timeout:I,mountOnEnter:M,unmountOnExit:D,appear:k,children:(X,K)=>React.cloneElement(C,{...K,className:classNames(w,C.props.className,collapseStyles[X],$==="width"&&"collapse-horizontal")})})});Collapse.displayName="Collapse";const ButtonGroup=reactExports.forwardRef(({bsPrefix:x,size:d,vertical:g=!1,className:E,role:b="group",as:w="div",...C},S)=>{const P=useBootstrapPrefix(x,"btn-group");let I=P;return g&&(I=`${P}-vertical`),jsxRuntimeExports.jsx(w,{...C,ref:S,role:b,className:classNames(E,I,d&&`${P}-${d}`)})});ButtonGroup.displayName="ButtonGroup";function useCol({as:x,bsPrefix:d,className:g,...E}){d=useBootstrapPrefix(d,"col");const b=useBootstrapBreakpoints(),w=useBootstrapMinBreakpoint(),C=[],S=[];return b.forEach(P=>{const I=E[P];delete E[P];let M,D,k;typeof I=="object"&&I!=null?{span:M,offset:D,order:k}=I:M=I;const H=P!==w?`-${P}`:"";M&&C.push(M===!0?`${d}${H}`:`${d}${H}-${M}`),k!=null&&S.push(`order${H}-${k}`),D!=null&&S.push(`offset${H}-${D}`)}),[{...E,className:classNames(g,...C,...S)},{as:x,bsPrefix:d,spans:C}]}const Col=reactExports.forwardRef((x,d)=>{const[{className:g,...E},{as:b="div",bsPrefix:w,spans:C}]=useCol(x);return jsxRuntimeExports.jsx(b,{...E,ref:d,className:classNames(g,!C.length&&w)})});Col.displayName="Col";function useUncontrolledProp(x,d,g){const E=reactExports.useRef(x!==void 0),[b,w]=reactExports.useState(d),C=x!==void 0,S=E.current;return E.current=C,!C&&S&&b!==d&&w(d),[C?x:b,reactExports.useCallback((...P)=>{const[I,...M]=P;let D=g==null?void 0:g(I,...M);return w(I),D},[g])]}const DropdownContext$1=reactExports.createContext(null);var has=Object.prototype.hasOwnProperty;function find$1(x,d,g){for(g of x.keys())if(dequal(g,d))return g}function dequal(x,d){var g,E,b;if(x===d)return!0;if(x&&d&&(g=x.constructor)===d.constructor){if(g===Date)return x.getTime()===d.getTime();if(g===RegExp)return x.toString()===d.toString();if(g===Array){if((E=x.length)===d.length)for(;E--&&dequal(x[E],d[E]););return E===-1}if(g===Set){if(x.size!==d.size)return!1;for(E of x)if(b=E,b&&typeof b=="object"&&(b=find$1(d,b),!b)||!d.has(b))return!1;return!0}if(g===Map){if(x.size!==d.size)return!1;for(E of x)if(b=E[0],b&&typeof b=="object"&&(b=find$1(d,b),!b)||!dequal(E[1],d.get(b)))return!1;return!0}if(g===ArrayBuffer)x=new Uint8Array(x),d=new Uint8Array(d);else if(g===DataView){if((E=x.byteLength)===d.byteLength)for(;E--&&x.getInt8(E)===d.getInt8(E););return E===-1}if(ArrayBuffer.isView(x)){if((E=x.byteLength)===d.byteLength)for(;E--&&x[E]===d[E];);return E===-1}if(!g||typeof x=="object"){E=0;for(g in x)if(has.call(x,g)&&++E&&!has.call(d,g)||!(g in d)||!dequal(x[g],d[g]))return!1;return Object.keys(d).length===E}}return x!==x&&d!==d}function useSafeState(x){const d=useMounted$1();return[x[0],reactExports.useCallback(g=>{if(d())return x[1](g)},[d,x[1]])]}var top="top",bottom="bottom",right="right",left="left",auto="auto",basePlacements=[top,bottom,right,left],start$1="start",end="end",clippingParents="clippingParents",viewport="viewport",popper="popper",reference="reference",variationPlacements=basePlacements.reduce(function(x,d){return x.concat([d+"-"+start$1,d+"-"+end])},[]),placements=[].concat(basePlacements,[auto]).reduce(function(x,d){return x.concat([d,d+"-"+start$1,d+"-"+end])},[]),beforeRead="beforeRead",read="read",afterRead="afterRead",beforeMain="beforeMain",main="main",afterMain="afterMain",beforeWrite="beforeWrite",write$1="write",afterWrite="afterWrite",modifierPhases=[beforeRead,read,afterRead,beforeMain,main,afterMain,beforeWrite,write$1,afterWrite];function getBasePlacement(x){return x.split("-")[0]}function getWindow(x){if(x==null)return window;if(x.toString()!=="[object Window]"){var d=x.ownerDocument;return d&&d.defaultView||window}return x}function isElement(x){var d=getWindow(x).Element;return x instanceof d||x instanceof Element}function isHTMLElement(x){var d=getWindow(x).HTMLElement;return x instanceof d||x instanceof HTMLElement}function isShadowRoot(x){if(typeof ShadowRoot>"u")return!1;var d=getWindow(x).ShadowRoot;return x instanceof d||x instanceof ShadowRoot}var max=Math.max,min=Math.min,round=Math.round;function getUAString(){var x=navigator.userAgentData;return x!=null&&x.brands&&Array.isArray(x.brands)?x.brands.map(function(d){return d.brand+"/"+d.version}).join(" "):navigator.userAgent}function isLayoutViewport(){return!/^((?!chrome|android).)*safari/i.test(getUAString())}function getBoundingClientRect(x,d,g){d===void 0&&(d=!1),g===void 0&&(g=!1);var E=x.getBoundingClientRect(),b=1,w=1;d&&isHTMLElement(x)&&(b=x.offsetWidth>0&&round(E.width)/x.offsetWidth||1,w=x.offsetHeight>0&&round(E.height)/x.offsetHeight||1);var C=isElement(x)?getWindow(x):window,S=C.visualViewport,P=!isLayoutViewport()&&g,I=(E.left+(P&&S?S.offsetLeft:0))/b,M=(E.top+(P&&S?S.offsetTop:0))/w,D=E.width/b,k=E.height/w;return{width:D,height:k,top:M,right:I+D,bottom:M+k,left:I,x:I,y:M}}function getLayoutRect(x){var d=getBoundingClientRect(x),g=x.offsetWidth,E=x.offsetHeight;return Math.abs(d.width-g)<=1&&(g=d.width),Math.abs(d.height-E)<=1&&(E=d.height),{x:x.offsetLeft,y:x.offsetTop,width:g,height:E}}function contains$1(x,d){var g=d.getRootNode&&d.getRootNode();if(x.contains(d))return!0;if(g&&isShadowRoot(g)){var E=d;do{if(E&&x.isSameNode(E))return!0;E=E.parentNode||E.host}while(E)}return!1}function getNodeName(x){return x?(x.nodeName||"").toLowerCase():null}function getComputedStyle$1(x){return getWindow(x).getComputedStyle(x)}function isTableElement(x){return["table","td","th"].indexOf(getNodeName(x))>=0}function getDocumentElement(x){return((isElement(x)?x.ownerDocument:x.document)||window.document).documentElement}function getParentNode(x){return getNodeName(x)==="html"?x:x.assignedSlot||x.parentNode||(isShadowRoot(x)?x.host:null)||getDocumentElement(x)}function getTrueOffsetParent(x){return!isHTMLElement(x)||getComputedStyle$1(x).position==="fixed"?null:x.offsetParent}function getContainingBlock(x){var d=/firefox/i.test(getUAString()),g=/Trident/i.test(getUAString());if(g&&isHTMLElement(x)){var E=getComputedStyle$1(x);if(E.position==="fixed")return null}var b=getParentNode(x);for(isShadowRoot(b)&&(b=b.host);isHTMLElement(b)&&["html","body"].indexOf(getNodeName(b))<0;){var w=getComputedStyle$1(b);if(w.transform!=="none"||w.perspective!=="none"||w.contain==="paint"||["transform","perspective"].indexOf(w.willChange)!==-1||d&&w.willChange==="filter"||d&&w.filter&&w.filter!=="none")return b;b=b.parentNode}return null}function getOffsetParent(x){for(var d=getWindow(x),g=getTrueOffsetParent(x);g&&isTableElement(g)&&getComputedStyle$1(g).position==="static";)g=getTrueOffsetParent(g);return g&&(getNodeName(g)==="html"||getNodeName(g)==="body"&&getComputedStyle$1(g).position==="static")?d:g||getContainingBlock(x)||d}function getMainAxisFromPlacement(x){return["top","bottom"].indexOf(x)>=0?"x":"y"}function within(x,d,g){return max(x,min(d,g))}function withinMaxClamp(x,d,g){var E=within(x,d,g);return E>g?g:E}function getFreshSideObject(){return{top:0,right:0,bottom:0,left:0}}function mergePaddingObject(x){return Object.assign({},getFreshSideObject(),x)}function expandToHashMap(x,d){return d.reduce(function(g,E){return g[E]=x,g},{})}var toPaddingObject=function(d,g){return d=typeof d=="function"?d(Object.assign({},g.rects,{placement:g.placement})):d,mergePaddingObject(typeof d!="number"?d:expandToHashMap(d,basePlacements))};function arrow(x){var d,g=x.state,E=x.name,b=x.options,w=g.elements.arrow,C=g.modifiersData.popperOffsets,S=getBasePlacement(g.placement),P=getMainAxisFromPlacement(S),I=[left,right].indexOf(S)>=0,M=I?"height":"width";if(!(!w||!C)){var D=toPaddingObject(b.padding,g),k=getLayoutRect(w),H=P==="y"?top:left,F=P==="y"?bottom:right,j=g.rects.reference[M]+g.rects.reference[P]-C[P]-g.rects.popper[M],$=C[P]-g.rects.reference[P],z=getOffsetParent(w),U=z?P==="y"?z.clientHeight||0:z.clientWidth||0:0,W=j/2-$/2,q=D[H],Z=U-k[M]-D[F],X=U/2-k[M]/2+W,K=within(q,X,Z),ee=P;g.modifiersData[E]=(d={},d[ee]=K,d.centerOffset=K-X,d)}}function effect$1(x){var d=x.state,g=x.options,E=g.element,b=E===void 0?"[data-popper-arrow]":E;b!=null&&(typeof b=="string"&&(b=d.elements.popper.querySelector(b),!b)||contains$1(d.elements.popper,b)&&(d.elements.arrow=b))}const arrow$1={name:"arrow",enabled:!0,phase:"main",fn:arrow,effect:effect$1,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function getVariation(x){return x.split("-")[1]}var unsetSides={top:"auto",right:"auto",bottom:"auto",left:"auto"};function roundOffsetsByDPR(x,d){var g=x.x,E=x.y,b=d.devicePixelRatio||1;return{x:round(g*b)/b||0,y:round(E*b)/b||0}}function mapToStyles(x){var d,g=x.popper,E=x.popperRect,b=x.placement,w=x.variation,C=x.offsets,S=x.position,P=x.gpuAcceleration,I=x.adaptive,M=x.roundOffsets,D=x.isFixed,k=C.x,H=k===void 0?0:k,F=C.y,j=F===void 0?0:F,$=typeof M=="function"?M({x:H,y:j}):{x:H,y:j};H=$.x,j=$.y;var z=C.hasOwnProperty("x"),U=C.hasOwnProperty("y"),W=left,q=top,Z=window;if(I){var X=getOffsetParent(g),K="clientHeight",ee="clientWidth";if(X===getWindow(g)&&(X=getDocumentElement(g),getComputedStyle$1(X).position!=="static"&&S==="absolute"&&(K="scrollHeight",ee="scrollWidth")),X=X,b===top||(b===left||b===right)&&w===end){q=bottom;var te=D&&X===Z&&Z.visualViewport?Z.visualViewport.height:X[K];j-=te-E.height,j*=P?1:-1}if(b===left||(b===top||b===bottom)&&w===end){W=right;var ce=D&&X===Z&&Z.visualViewport?Z.visualViewport.width:X[ee];H-=ce-E.width,H*=P?1:-1}}var Q=Object.assign({position:S},I&&unsetSides),se=M===!0?roundOffsetsByDPR({x:H,y:j},getWindow(g)):{x:H,y:j};if(H=se.x,j=se.y,P){var ge;return Object.assign({},Q,(ge={},ge[q]=U?"0":"",ge[W]=z?"0":"",ge.transform=(Z.devicePixelRatio||1)<=1?"translate("+H+"px, "+j+"px)":"translate3d("+H+"px, "+j+"px, 0)",ge))}return Object.assign({},Q,(d={},d[q]=U?j+"px":"",d[W]=z?H+"px":"",d.transform="",d))}function computeStyles(x){var d=x.state,g=x.options,E=g.gpuAcceleration,b=E===void 0?!0:E,w=g.adaptive,C=w===void 0?!0:w,S=g.roundOffsets,P=S===void 0?!0:S,I={placement:getBasePlacement(d.placement),variation:getVariation(d.placement),popper:d.elements.popper,popperRect:d.rects.popper,gpuAcceleration:b,isFixed:d.options.strategy==="fixed"};d.modifiersData.popperOffsets!=null&&(d.styles.popper=Object.assign({},d.styles.popper,mapToStyles(Object.assign({},I,{offsets:d.modifiersData.popperOffsets,position:d.options.strategy,adaptive:C,roundOffsets:P})))),d.modifiersData.arrow!=null&&(d.styles.arrow=Object.assign({},d.styles.arrow,mapToStyles(Object.assign({},I,{offsets:d.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:P})))),d.attributes.popper=Object.assign({},d.attributes.popper,{"data-popper-placement":d.placement})}const computeStyles$1={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:computeStyles,data:{}};var passive={passive:!0};function effect(x){var d=x.state,g=x.instance,E=x.options,b=E.scroll,w=b===void 0?!0:b,C=E.resize,S=C===void 0?!0:C,P=getWindow(d.elements.popper),I=[].concat(d.scrollParents.reference,d.scrollParents.popper);return w&&I.forEach(function(M){M.addEventListener("scroll",g.update,passive)}),S&&P.addEventListener("resize",g.update,passive),function(){w&&I.forEach(function(M){M.removeEventListener("scroll",g.update,passive)}),S&&P.removeEventListener("resize",g.update,passive)}}const eventListeners={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect,data:{}};var hash$1={left:"right",right:"left",bottom:"top",top:"bottom"};function getOppositePlacement(x){return x.replace(/left|right|bottom|top/g,function(d){return hash$1[d]})}var hash={start:"end",end:"start"};function getOppositeVariationPlacement(x){return x.replace(/start|end/g,function(d){return hash[d]})}function getWindowScroll(x){var d=getWindow(x),g=d.pageXOffset,E=d.pageYOffset;return{scrollLeft:g,scrollTop:E}}function getWindowScrollBarX(x){return getBoundingClientRect(getDocumentElement(x)).left+getWindowScroll(x).scrollLeft}function getViewportRect(x,d){var g=getWindow(x),E=getDocumentElement(x),b=g.visualViewport,w=E.clientWidth,C=E.clientHeight,S=0,P=0;if(b){w=b.width,C=b.height;var I=isLayoutViewport();(I||!I&&d==="fixed")&&(S=b.offsetLeft,P=b.offsetTop)}return{width:w,height:C,x:S+getWindowScrollBarX(x),y:P}}function getDocumentRect(x){var d,g=getDocumentElement(x),E=getWindowScroll(x),b=(d=x.ownerDocument)==null?void 0:d.body,w=max(g.scrollWidth,g.clientWidth,b?b.scrollWidth:0,b?b.clientWidth:0),C=max(g.scrollHeight,g.clientHeight,b?b.scrollHeight:0,b?b.clientHeight:0),S=-E.scrollLeft+getWindowScrollBarX(x),P=-E.scrollTop;return getComputedStyle$1(b||g).direction==="rtl"&&(S+=max(g.clientWidth,b?b.clientWidth:0)-w),{width:w,height:C,x:S,y:P}}function isScrollParent(x){var d=getComputedStyle$1(x),g=d.overflow,E=d.overflowX,b=d.overflowY;return/auto|scroll|overlay|hidden/.test(g+b+E)}function getScrollParent(x){return["html","body","#document"].indexOf(getNodeName(x))>=0?x.ownerDocument.body:isHTMLElement(x)&&isScrollParent(x)?x:getScrollParent(getParentNode(x))}function listScrollParents(x,d){var g;d===void 0&&(d=[]);var E=getScrollParent(x),b=E===((g=x.ownerDocument)==null?void 0:g.body),w=getWindow(E),C=b?[w].concat(w.visualViewport||[],isScrollParent(E)?E:[]):E,S=d.concat(C);return b?S:S.concat(listScrollParents(getParentNode(C)))}function rectToClientRect(x){return Object.assign({},x,{left:x.x,top:x.y,right:x.x+x.width,bottom:x.y+x.height})}function getInnerBoundingClientRect(x,d){var g=getBoundingClientRect(x,!1,d==="fixed");return g.top=g.top+x.clientTop,g.left=g.left+x.clientLeft,g.bottom=g.top+x.clientHeight,g.right=g.left+x.clientWidth,g.width=x.clientWidth,g.height=x.clientHeight,g.x=g.left,g.y=g.top,g}function getClientRectFromMixedType(x,d,g){return d===viewport?rectToClientRect(getViewportRect(x,g)):isElement(d)?getInnerBoundingClientRect(d,g):rectToClientRect(getDocumentRect(getDocumentElement(x)))}function getClippingParents(x){var d=listScrollParents(getParentNode(x)),g=["absolute","fixed"].indexOf(getComputedStyle$1(x).position)>=0,E=g&&isHTMLElement(x)?getOffsetParent(x):x;return isElement(E)?d.filter(function(b){return isElement(b)&&contains$1(b,E)&&getNodeName(b)!=="body"}):[]}function getClippingRect(x,d,g,E){var b=d==="clippingParents"?getClippingParents(x):[].concat(d),w=[].concat(b,[g]),C=w[0],S=w.reduce(function(P,I){var M=getClientRectFromMixedType(x,I,E);return P.top=max(M.top,P.top),P.right=min(M.right,P.right),P.bottom=min(M.bottom,P.bottom),P.left=max(M.left,P.left),P},getClientRectFromMixedType(x,C,E));return S.width=S.right-S.left,S.height=S.bottom-S.top,S.x=S.left,S.y=S.top,S}function computeOffsets(x){var d=x.reference,g=x.element,E=x.placement,b=E?getBasePlacement(E):null,w=E?getVariation(E):null,C=d.x+d.width/2-g.width/2,S=d.y+d.height/2-g.height/2,P;switch(b){case top:P={x:C,y:d.y-g.height};break;case bottom:P={x:C,y:d.y+d.height};break;case right:P={x:d.x+d.width,y:S};break;case left:P={x:d.x-g.width,y:S};break;default:P={x:d.x,y:d.y}}var I=b?getMainAxisFromPlacement(b):null;if(I!=null){var M=I==="y"?"height":"width";switch(w){case start$1:P[I]=P[I]-(d[M]/2-g[M]/2);break;case end:P[I]=P[I]+(d[M]/2-g[M]/2);break}}return P}function detectOverflow(x,d){d===void 0&&(d={});var g=d,E=g.placement,b=E===void 0?x.placement:E,w=g.strategy,C=w===void 0?x.strategy:w,S=g.boundary,P=S===void 0?clippingParents:S,I=g.rootBoundary,M=I===void 0?viewport:I,D=g.elementContext,k=D===void 0?popper:D,H=g.altBoundary,F=H===void 0?!1:H,j=g.padding,$=j===void 0?0:j,z=mergePaddingObject(typeof $!="number"?$:expandToHashMap($,basePlacements)),U=k===popper?reference:popper,W=x.rects.popper,q=x.elements[F?U:k],Z=getClippingRect(isElement(q)?q:q.contextElement||getDocumentElement(x.elements.popper),P,M,C),X=getBoundingClientRect(x.elements.reference),K=computeOffsets({reference:X,element:W,placement:b}),ee=rectToClientRect(Object.assign({},W,K)),te=k===popper?ee:X,ce={top:Z.top-te.top+z.top,bottom:te.bottom-Z.bottom+z.bottom,left:Z.left-te.left+z.left,right:te.right-Z.right+z.right},Q=x.modifiersData.offset;if(k===popper&&Q){var se=Q[b];Object.keys(ce).forEach(function(ge){var Ce=[right,bottom].indexOf(ge)>=0?1:-1,oe=[top,bottom].indexOf(ge)>=0?"y":"x";ce[ge]+=se[oe]*Ce})}return ce}function computeAutoPlacement(x,d){d===void 0&&(d={});var g=d,E=g.placement,b=g.boundary,w=g.rootBoundary,C=g.padding,S=g.flipVariations,P=g.allowedAutoPlacements,I=P===void 0?placements:P,M=getVariation(E),D=M?S?variationPlacements:variationPlacements.filter(function(F){return getVariation(F)===M}):basePlacements,k=D.filter(function(F){return I.indexOf(F)>=0});k.length===0&&(k=D);var H=k.reduce(function(F,j){return F[j]=detectOverflow(x,{placement:j,boundary:b,rootBoundary:w,padding:C})[getBasePlacement(j)],F},{});return Object.keys(H).sort(function(F,j){return H[F]-H[j]})}function getExpandedFallbackPlacements(x){if(getBasePlacement(x)===auto)return[];var d=getOppositePlacement(x);return[getOppositeVariationPlacement(x),d,getOppositeVariationPlacement(d)]}function flip$1(x){var d=x.state,g=x.options,E=x.name;if(!d.modifiersData[E]._skip){for(var b=g.mainAxis,w=b===void 0?!0:b,C=g.altAxis,S=C===void 0?!0:C,P=g.fallbackPlacements,I=g.padding,M=g.boundary,D=g.rootBoundary,k=g.altBoundary,H=g.flipVariations,F=H===void 0?!0:H,j=g.allowedAutoPlacements,$=d.options.placement,z=getBasePlacement($),U=z===$,W=P||(U||!F?[getOppositePlacement($)]:getExpandedFallbackPlacements($)),q=[$].concat(W).reduce(function(xe,we){return xe.concat(getBasePlacement(we)===auto?computeAutoPlacement(d,{placement:we,boundary:M,rootBoundary:D,padding:I,flipVariations:F,allowedAutoPlacements:j}):we)},[]),Z=d.rects.reference,X=d.rects.popper,K=new Map,ee=!0,te=q[0],ce=0;ce<q.length;ce++){var Q=q[ce],se=getBasePlacement(Q),ge=getVariation(Q)===start$1,Ce=[top,bottom].indexOf(se)>=0,oe=Ce?"width":"height",he=detectOverflow(d,{placement:Q,boundary:M,rootBoundary:D,altBoundary:k,padding:I}),de=Ce?ge?right:left:ge?bottom:top;Z[oe]>X[oe]&&(de=getOppositePlacement(de));var re=getOppositePlacement(de),ae=[];if(w&&ae.push(he[se]<=0),S&&ae.push(he[de]<=0,he[re]<=0),ae.every(function(xe){return xe})){te=Q,ee=!1;break}K.set(Q,ae)}if(ee)for(var pe=F?3:1,J=function(we){var Re=q.find(function(De){var Ae=K.get(De);if(Ae)return Ae.slice(0,we).every(function(Be){return Be})});if(Re)return te=Re,"break"},ue=pe;ue>0;ue--){var Te=J(ue);if(Te==="break")break}d.placement!==te&&(d.modifiersData[E]._skip=!0,d.placement=te,d.reset=!0)}}const flip$2={name:"flip",enabled:!0,phase:"main",fn:flip$1,requiresIfExists:["offset"],data:{_skip:!1}};function getSideOffsets(x,d,g){return g===void 0&&(g={x:0,y:0}),{top:x.top-d.height-g.y,right:x.right-d.width+g.x,bottom:x.bottom-d.height+g.y,left:x.left-d.width-g.x}}function isAnySideFullyClipped(x){return[top,right,bottom,left].some(function(d){return x[d]>=0})}function hide(x){var d=x.state,g=x.name,E=d.rects.reference,b=d.rects.popper,w=d.modifiersData.preventOverflow,C=detectOverflow(d,{elementContext:"reference"}),S=detectOverflow(d,{altBoundary:!0}),P=getSideOffsets(C,E),I=getSideOffsets(S,b,w),M=isAnySideFullyClipped(P),D=isAnySideFullyClipped(I);d.modifiersData[g]={referenceClippingOffsets:P,popperEscapeOffsets:I,isReferenceHidden:M,hasPopperEscaped:D},d.attributes.popper=Object.assign({},d.attributes.popper,{"data-popper-reference-hidden":M,"data-popper-escaped":D})}const hide$1={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:hide};function distanceAndSkiddingToXY(x,d,g){var E=getBasePlacement(x),b=[left,top].indexOf(E)>=0?-1:1,w=typeof g=="function"?g(Object.assign({},d,{placement:x})):g,C=w[0],S=w[1];return C=C||0,S=(S||0)*b,[left,right].indexOf(E)>=0?{x:S,y:C}:{x:C,y:S}}function offset(x){var d=x.state,g=x.options,E=x.name,b=g.offset,w=b===void 0?[0,0]:b,C=placements.reduce(function(M,D){return M[D]=distanceAndSkiddingToXY(D,d.rects,w),M},{}),S=C[d.placement],P=S.x,I=S.y;d.modifiersData.popperOffsets!=null&&(d.modifiersData.popperOffsets.x+=P,d.modifiersData.popperOffsets.y+=I),d.modifiersData[E]=C}const offset$1={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:offset};function popperOffsets(x){var d=x.state,g=x.name;d.modifiersData[g]=computeOffsets({reference:d.rects.reference,element:d.rects.popper,placement:d.placement})}const popperOffsets$1={name:"popperOffsets",enabled:!0,phase:"read",fn:popperOffsets,data:{}};function getAltAxis(x){return x==="x"?"y":"x"}function preventOverflow(x){var d=x.state,g=x.options,E=x.name,b=g.mainAxis,w=b===void 0?!0:b,C=g.altAxis,S=C===void 0?!1:C,P=g.boundary,I=g.rootBoundary,M=g.altBoundary,D=g.padding,k=g.tether,H=k===void 0?!0:k,F=g.tetherOffset,j=F===void 0?0:F,$=detectOverflow(d,{boundary:P,rootBoundary:I,padding:D,altBoundary:M}),z=getBasePlacement(d.placement),U=getVariation(d.placement),W=!U,q=getMainAxisFromPlacement(z),Z=getAltAxis(q),X=d.modifiersData.popperOffsets,K=d.rects.reference,ee=d.rects.popper,te=typeof j=="function"?j(Object.assign({},d.rects,{placement:d.placement})):j,ce=typeof te=="number"?{mainAxis:te,altAxis:te}:Object.assign({mainAxis:0,altAxis:0},te),Q=d.modifiersData.offset?d.modifiersData.offset[d.placement]:null,se={x:0,y:0};if(X){if(w){var ge,Ce=q==="y"?top:left,oe=q==="y"?bottom:right,he=q==="y"?"height":"width",de=X[q],re=de+$[Ce],ae=de-$[oe],pe=H?-ee[he]/2:0,J=U===start$1?K[he]:ee[he],ue=U===start$1?-ee[he]:-K[he],Te=d.elements.arrow,xe=H&&Te?getLayoutRect(Te):{width:0,height:0},we=d.modifiersData["arrow#persistent"]?d.modifiersData["arrow#persistent"].padding:getFreshSideObject(),Re=we[Ce],De=we[oe],Ae=within(0,K[he],xe[he]),Be=W?K[he]/2-pe-Ae-Re-ce.mainAxis:J-Ae-Re-ce.mainAxis,We=W?-K[he]/2+pe+Ae+De+ce.mainAxis:ue+Ae+De+ce.mainAxis,Fe=d.elements.arrow&&getOffsetParent(d.elements.arrow),ze=Fe?q==="y"?Fe.clientTop||0:Fe.clientLeft||0:0,ct=(ge=Q==null?void 0:Q[q])!=null?ge:0,rt=de+Be-ct-ze,Le=de+We-ct,nt=within(H?min(re,rt):re,de,H?max(ae,Le):ae);X[q]=nt,se[q]=nt-de}if(S){var qe,dt=q==="x"?top:left,ht=q==="x"?bottom:right,st=X[Z],be=Z==="y"?"height":"width",lt=st+$[dt],et=st-$[ht],tt=[top,left].indexOf(z)!==-1,xt=(qe=Q==null?void 0:Q[Z])!=null?qe:0,Ke=tt?lt:st-K[be]-ee[be]-xt+ce.altAxis,ft=tt?st+K[be]+ee[be]-xt-ce.altAxis:et,ot=H&&tt?withinMaxClamp(Ke,st,ft):within(H?Ke:lt,st,H?ft:et);X[Z]=ot,se[Z]=ot-st}d.modifiersData[E]=se}}const preventOverflow$1={name:"preventOverflow",enabled:!0,phase:"main",fn:preventOverflow,requiresIfExists:["offset"]};function getHTMLElementScroll(x){return{scrollLeft:x.scrollLeft,scrollTop:x.scrollTop}}function getNodeScroll(x){return x===getWindow(x)||!isHTMLElement(x)?getWindowScroll(x):getHTMLElementScroll(x)}function isElementScaled(x){var d=x.getBoundingClientRect(),g=round(d.width)/x.offsetWidth||1,E=round(d.height)/x.offsetHeight||1;return g!==1||E!==1}function getCompositeRect(x,d,g){g===void 0&&(g=!1);var E=isHTMLElement(d),b=isHTMLElement(d)&&isElementScaled(d),w=getDocumentElement(d),C=getBoundingClientRect(x,b,g),S={scrollLeft:0,scrollTop:0},P={x:0,y:0};return(E||!E&&!g)&&((getNodeName(d)!=="body"||isScrollParent(w))&&(S=getNodeScroll(d)),isHTMLElement(d)?(P=getBoundingClientRect(d,!0),P.x+=d.clientLeft,P.y+=d.clientTop):w&&(P.x=getWindowScrollBarX(w))),{x:C.left+S.scrollLeft-P.x,y:C.top+S.scrollTop-P.y,width:C.width,height:C.height}}function order(x){var d=new Map,g=new Set,E=[];x.forEach(function(w){d.set(w.name,w)});function b(w){g.add(w.name);var C=[].concat(w.requires||[],w.requiresIfExists||[]);C.forEach(function(S){if(!g.has(S)){var P=d.get(S);P&&b(P)}}),E.push(w)}return x.forEach(function(w){g.has(w.name)||b(w)}),E}function orderModifiers(x){var d=order(x);return modifierPhases.reduce(function(g,E){return g.concat(d.filter(function(b){return b.phase===E}))},[])}function debounce$1(x){var d;return function(){return d||(d=new Promise(function(g){Promise.resolve().then(function(){d=void 0,g(x())})})),d}}function mergeByName(x){var d=x.reduce(function(g,E){var b=g[E.name];return g[E.name]=b?Object.assign({},b,E,{options:Object.assign({},b.options,E.options),data:Object.assign({},b.data,E.data)}):E,g},{});return Object.keys(d).map(function(g){return d[g]})}var DEFAULT_OPTIONS={placement:"bottom",modifiers:[],strategy:"absolute"};function areValidElements(){for(var x=arguments.length,d=new Array(x),g=0;g<x;g++)d[g]=arguments[g];return!d.some(function(E){return!(E&&typeof E.getBoundingClientRect=="function")})}function popperGenerator(x){x===void 0&&(x={});var d=x,g=d.defaultModifiers,E=g===void 0?[]:g,b=d.defaultOptions,w=b===void 0?DEFAULT_OPTIONS:b;return function(S,P,I){I===void 0&&(I=w);var M={placement:"bottom",orderedModifiers:[],options:Object.assign({},DEFAULT_OPTIONS,w),modifiersData:{},elements:{reference:S,popper:P},attributes:{},styles:{}},D=[],k=!1,H={state:M,setOptions:function(z){var U=typeof z=="function"?z(M.options):z;j(),M.options=Object.assign({},w,M.options,U),M.scrollParents={reference:isElement(S)?listScrollParents(S):S.contextElement?listScrollParents(S.contextElement):[],popper:listScrollParents(P)};var W=orderModifiers(mergeByName([].concat(E,M.options.modifiers)));return M.orderedModifiers=W.filter(function(q){return q.enabled}),F(),H.update()},forceUpdate:function(){if(!k){var z=M.elements,U=z.reference,W=z.popper;if(areValidElements(U,W)){M.rects={reference:getCompositeRect(U,getOffsetParent(W),M.options.strategy==="fixed"),popper:getLayoutRect(W)},M.reset=!1,M.placement=M.options.placement,M.orderedModifiers.forEach(function(ce){return M.modifiersData[ce.name]=Object.assign({},ce.data)});for(var q=0;q<M.orderedModifiers.length;q++){if(M.reset===!0){M.reset=!1,q=-1;continue}var Z=M.orderedModifiers[q],X=Z.fn,K=Z.options,ee=K===void 0?{}:K,te=Z.name;typeof X=="function"&&(M=X({state:M,options:ee,name:te,instance:H})||M)}}}},update:debounce$1(function(){return new Promise(function($){H.forceUpdate(),$(M)})}),destroy:function(){j(),k=!0}};if(!areValidElements(S,P))return H;H.setOptions(I).then(function($){!k&&I.onFirstUpdate&&I.onFirstUpdate($)});function F(){M.orderedModifiers.forEach(function($){var z=$.name,U=$.options,W=U===void 0?{}:U,q=$.effect;if(typeof q=="function"){var Z=q({state:M,name:z,instance:H,options:W}),X=function(){};D.push(Z||X)}})}function j(){D.forEach(function($){return $()}),D=[]}return H}}const createPopper=popperGenerator({defaultModifiers:[hide$1,popperOffsets$1,computeStyles$1,eventListeners,offset$1,flip$2,preventOverflow$1,arrow$1]}),_excluded$3=["enabled","placement","strategy","modifiers"];function _objectWithoutPropertiesLoose$3(x,d){if(x==null)return{};var g={};for(var E in x)if({}.hasOwnProperty.call(x,E)){if(d.indexOf(E)>=0)continue;g[E]=x[E]}return g}const disabledApplyStylesModifier={name:"applyStyles",enabled:!1,phase:"afterWrite",fn:()=>{}},ariaDescribedByModifier={name:"ariaDescribedBy",enabled:!0,phase:"afterWrite",effect:({state:x})=>()=>{const{reference:d,popper:g}=x.elements;if("removeAttribute"in d){const E=(d.getAttribute("aria-describedby")||"").split(",").filter(b=>b.trim()!==g.id);E.length?d.setAttribute("aria-describedby",E.join(",")):d.removeAttribute("aria-describedby")}},fn:({state:x})=>{var d;const{popper:g,reference:E}=x.elements,b=(d=g.getAttribute("role"))==null?void 0:d.toLowerCase();if(g.id&&b==="tooltip"&&"setAttribute"in E){const w=E.getAttribute("aria-describedby");if(w&&w.split(",").indexOf(g.id)!==-1)return;E.setAttribute("aria-describedby",w?`${w},${g.id}`:g.id)}}},EMPTY_MODIFIERS=[];function usePopper(x,d,g={}){let{enabled:E=!0,placement:b="bottom",strategy:w="absolute",modifiers:C=EMPTY_MODIFIERS}=g,S=_objectWithoutPropertiesLoose$3(g,_excluded$3);const P=reactExports.useRef(C),I=reactExports.useRef(),M=reactExports.useCallback(()=>{var $;($=I.current)==null||$.update()},[]),D=reactExports.useCallback(()=>{var $;($=I.current)==null||$.forceUpdate()},[]),[k,H]=useSafeState(reactExports.useState({placement:b,update:M,forceUpdate:D,attributes:{},styles:{popper:{},arrow:{}}})),F=reactExports.useMemo(()=>({name:"updateStateModifier",enabled:!0,phase:"write",requires:["computeStyles"],fn:({state:$})=>{const z={},U={};Object.keys($.elements).forEach(W=>{z[W]=$.styles[W],U[W]=$.attributes[W]}),H({state:$,styles:z,attributes:U,update:M,forceUpdate:D,placement:$.placement})}}),[M,D,H]),j=reactExports.useMemo(()=>(dequal(P.current,C)||(P.current=C),P.current),[C]);return reactExports.useEffect(()=>{!I.current||!E||I.current.setOptions({placement:b,strategy:w,modifiers:[...j,F,disabledApplyStylesModifier]})},[w,b,F,E,j]),reactExports.useEffect(()=>{if(!(!E||x==null||d==null))return I.current=createPopper(x,d,Object.assign({},S,{placement:b,strategy:w,modifiers:[...j,ariaDescribedByModifier,F]})),()=>{I.current!=null&&(I.current.destroy(),I.current=void 0,H($=>Object.assign({},$,{attributes:{},styles:{popper:{}}})))}},[E,x,d]),k}const noop$5=()=>{};function isLeftClickEvent(x){return x.button===0}function isModifiedEvent(x){return!!(x.metaKey||x.altKey||x.ctrlKey||x.shiftKey)}const getRefTarget=x=>x&&("current"in x?x.current:x),InitialTriggerEvents={click:"mousedown",mouseup:"mousedown",pointerup:"pointerdown"};function useClickOutside(x,d=noop$5,{disabled:g,clickTrigger:E="click"}={}){const b=reactExports.useRef(!1),w=reactExports.useRef(!1),C=reactExports.useCallback(I=>{const M=getRefTarget(x);warning(!!M,"ClickOutside captured a close event but does not have a ref to compare it to. useClickOutside(), should be passed a ref that resolves to a DOM node"),b.current=!M||isModifiedEvent(I)||!isLeftClickEvent(I)||!!contains$2(M,I.target)||w.current,w.current=!1},[x]),S=useEventCallback(I=>{const M=getRefTarget(x);M&&contains$2(M,I.target)?w.current=!0:w.current=!1}),P=useEventCallback(I=>{b.current||d(I)});reactExports.useEffect(()=>{var I,M;if(g||x==null)return;const D=ownerDocument(getRefTarget(x)),k=D.defaultView||window;let H=(I=k.event)!=null?I:(M=k.parent)==null?void 0:M.event,F=null;InitialTriggerEvents[E]&&(F=listen(D,InitialTriggerEvents[E],S,!0));const j=listen(D,E,C,!0),$=listen(D,E,U=>{if(U===H){H=void 0;return}P(U)});let z=[];return"ontouchstart"in D.documentElement&&(z=[].slice.call(D.body.children).map(U=>listen(U,"mousemove",noop$5))),()=>{F==null||F(),j(),$(),z.forEach(U=>U())}},[x,g,E,C,S,P])}function toModifierMap(x){const d={};return Array.isArray(x)?(x==null||x.forEach(g=>{d[g.name]=g}),d):x||d}function toModifierArray(x={}){return Array.isArray(x)?x:Object.keys(x).map(d=>(x[d].name=d,x[d]))}function mergeOptionsWithPopperConfig({enabled:x,enableEvents:d,placement:g,flip:E,offset:b,fixed:w,containerPadding:C,arrowElement:S,popperConfig:P={}}){var I,M,D,k,H;const F=toModifierMap(P.modifiers);return Object.assign({},P,{placement:g,enabled:x,strategy:w?"fixed":P.strategy,modifiers:toModifierArray(Object.assign({},F,{eventListeners:{enabled:d,options:(I=F.eventListeners)==null?void 0:I.options},preventOverflow:Object.assign({},F.preventOverflow,{options:C?Object.assign({padding:C},(M=F.preventOverflow)==null?void 0:M.options):(D=F.preventOverflow)==null?void 0:D.options}),offset:{options:Object.assign({offset:b},(k=F.offset)==null?void 0:k.options)},arrow:Object.assign({},F.arrow,{enabled:!!S,options:Object.assign({},(H=F.arrow)==null?void 0:H.options,{element:S})}),flip:Object.assign({enabled:!!E},F.flip)}))})}const _excluded$2=["children","usePopper"];function _objectWithoutPropertiesLoose$2(x,d){if(x==null)return{};var g={};for(var E in x)if({}.hasOwnProperty.call(x,E)){if(d.indexOf(E)>=0)continue;g[E]=x[E]}return g}const noop$4=()=>{};function useDropdownMenu(x={}){const d=reactExports.useContext(DropdownContext$1),[g,E]=useCallbackRef(),b=reactExports.useRef(!1),{flip:w,offset:C,rootCloseEvent:S,fixed:P=!1,placement:I,popperConfig:M={},enableEventListeners:D=!0,usePopper:k=!!d}=x,H=(d==null?void 0:d.show)==null?!!x.show:d.show;H&&!b.current&&(b.current=!0);const F=X=>{d==null||d.toggle(!1,X)},{placement:j,setMenu:$,menuElement:z,toggleElement:U}=d||{},W=usePopper(U,z,mergeOptionsWithPopperConfig({placement:I||j||"bottom-start",enabled:k,enableEvents:D??H,offset:C,flip:w,fixed:P,arrowElement:g,popperConfig:M})),q=Object.assign({ref:$||noop$4,"aria-labelledby":U==null?void 0:U.id},W.attributes.popper,{style:W.styles.popper}),Z={show:H,placement:j,hasShown:b.current,toggle:d==null?void 0:d.toggle,popper:k?W:null,arrowProps:k?Object.assign({ref:E},W.attributes.arrow,{style:W.styles.arrow}):{}};return useClickOutside(z,F,{clickTrigger:S,disabled:!H}),[q,Z]}function DropdownMenu$1(x){let{children:d,usePopper:g=!0}=x,E=_objectWithoutPropertiesLoose$2(x,_excluded$2);const[b,w]=useDropdownMenu(Object.assign({},E,{usePopper:g}));return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:d(b,w)})}DropdownMenu$1.displayName="DropdownMenu";const $b5e257d569688ac6$var$defaultContext={prefix:String(Math.round(Math.random()*1e10)),current:0},$b5e257d569688ac6$var$SSRContext=React.createContext($b5e257d569688ac6$var$defaultContext),$b5e257d569688ac6$var$IsSSRContext=React.createContext(!1);let $b5e257d569688ac6$var$componentIds=new WeakMap;function $b5e257d569688ac6$var$useCounter(x=!1){let d=reactExports.useContext($b5e257d569688ac6$var$SSRContext),g=reactExports.useRef(null);if(g.current===null&&!x){var E,b;let w=(b=React.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED)===null||b===void 0||(E=b.ReactCurrentOwner)===null||E===void 0?void 0:E.current;if(w){let C=$b5e257d569688ac6$var$componentIds.get(w);C==null?$b5e257d569688ac6$var$componentIds.set(w,{id:d.current,state:w.memoizedState}):w.memoizedState!==C.state&&(d.current=C.id,$b5e257d569688ac6$var$componentIds.delete(w))}g.current=++d.current}return g.current}function $b5e257d569688ac6$var$useLegacySSRSafeId(x){let d=reactExports.useContext($b5e257d569688ac6$var$SSRContext),g=$b5e257d569688ac6$var$useCounter(!!x),E=`react-aria${d.prefix}`;return x||`${E}-${g}`}function $b5e257d569688ac6$var$useModernSSRSafeId(x){let d=React.useId(),[g]=reactExports.useState($b5e257d569688ac6$export$535bd6ca7f90a273()),E=g?"react-aria":`react-aria${$b5e257d569688ac6$var$defaultContext.prefix}`;return x||`${E}-${d}`}const $b5e257d569688ac6$export$619500959fc48b26=typeof React.useId=="function"?$b5e257d569688ac6$var$useModernSSRSafeId:$b5e257d569688ac6$var$useLegacySSRSafeId;function $b5e257d569688ac6$var$getSnapshot(){return!1}function $b5e257d569688ac6$var$getServerSnapshot(){return!0}function $b5e257d569688ac6$var$subscribe(x){return()=>{}}function $b5e257d569688ac6$export$535bd6ca7f90a273(){return typeof React.useSyncExternalStore=="function"?React.useSyncExternalStore($b5e257d569688ac6$var$subscribe,$b5e257d569688ac6$var$getSnapshot,$b5e257d569688ac6$var$getServerSnapshot):reactExports.useContext($b5e257d569688ac6$var$IsSSRContext)}const isRoleMenu=x=>{var d;return((d=x.getAttribute("role"))==null?void 0:d.toLowerCase())==="menu"},noop$3=()=>{};function useDropdownToggle(){const x=$b5e257d569688ac6$export$619500959fc48b26(),{show:d=!1,toggle:g=noop$3,setToggle:E,menuElement:b}=reactExports.useContext(DropdownContext$1)||{},w=reactExports.useCallback(S=>{g(!d,S)},[d,g]),C={id:x,ref:E||noop$3,onClick:w,"aria-expanded":!!d};return b&&isRoleMenu(b)&&(C["aria-haspopup"]=!0),[C,{show:d,toggle:g}]}function DropdownToggle$1({children:x}){const[d,g]=useDropdownToggle();return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:x(d,g)})}DropdownToggle$1.displayName="DropdownToggle";const _excluded$1=["eventKey","disabled","onClick","active","as"];function _objectWithoutPropertiesLoose$1(x,d){if(x==null)return{};var g={};for(var E in x)if({}.hasOwnProperty.call(x,E)){if(d.indexOf(E)>=0)continue;g[E]=x[E]}return g}function useDropdownItem({key:x,href:d,active:g,disabled:E,onClick:b}){const w=reactExports.useContext(SelectableContext),C=reactExports.useContext(NavContext),{activeKey:S}=C||{},P=makeEventKey(x,d),I=g==null&&x!=null?makeEventKey(S)===P:g;return[{onClick:useEventCallback(D=>{E||(b==null||b(D),w&&!D.isPropagationStopped()&&w(P,D))}),"aria-disabled":E||void 0,"aria-selected":I,[dataAttr("dropdown-item")]:""},{isActive:I}]}const DropdownItem$1=reactExports.forwardRef((x,d)=>{let{eventKey:g,disabled:E,onClick:b,active:w,as:C=Button$1}=x,S=_objectWithoutPropertiesLoose$1(x,_excluded$1);const[P]=useDropdownItem({key:g,href:S.href,disabled:E,onClick:b,active:w});return jsxRuntimeExports.jsx(C,Object.assign({},S,{ref:d},P))});DropdownItem$1.displayName="DropdownItem";function useRefWithUpdate(){const x=useForceUpdate(),d=reactExports.useRef(null),g=reactExports.useCallback(E=>{d.current=E,x()},[x]);return[d,g]}function Dropdown$2({defaultShow:x,show:d,onSelect:g,onToggle:E,itemSelector:b=`* [${dataAttr("dropdown-item")}]`,focusFirstItemOnShow:w,placement:C="bottom-start",children:S}){const P=useWindow(),[I,M]=useUncontrolledProp(d,x,E),[D,k]=useRefWithUpdate(),H=D.current,[F,j]=useRefWithUpdate(),$=F.current,z=usePrevious(I),U=reactExports.useRef(null),W=reactExports.useRef(!1),q=reactExports.useContext(SelectableContext),Z=reactExports.useCallback((Q,se,ge=se==null?void 0:se.type)=>{M(Q,{originalEvent:se,source:ge})},[M]),X=useEventCallback((Q,se)=>{g==null||g(Q,se),Z(!1,se,"select"),se.isPropagationStopped()||q==null||q(Q,se)}),K=reactExports.useMemo(()=>({toggle:Z,placement:C,show:I,menuElement:H,toggleElement:$,setMenu:k,setToggle:j}),[Z,C,I,H,$,k,j]);H&&z&&!I&&(W.current=H.contains(H.ownerDocument.activeElement));const ee=useEventCallback(()=>{$&&$.focus&&$.focus()}),te=useEventCallback(()=>{const Q=U.current;let se=w;if(se==null&&(se=D.current&&isRoleMenu(D.current)?"keyboard":!1),se===!1||se==="keyboard"&&!/^key.+$/.test(Q))return;const ge=qsa(D.current,b)[0];ge&&ge.focus&&ge.focus()});reactExports.useEffect(()=>{I?te():W.current&&(W.current=!1,ee())},[I,W,ee,te]),reactExports.useEffect(()=>{U.current=null});const ce=(Q,se)=>{if(!D.current)return null;const ge=qsa(D.current,b);let Ce=ge.indexOf(Q)+se;return Ce=Math.max(0,Math.min(Ce,ge.length)),ge[Ce]};return useEventListener(reactExports.useCallback(()=>P.document,[P]),"keydown",Q=>{var se,ge;const{key:Ce}=Q,oe=Q.target,he=(se=D.current)==null?void 0:se.contains(oe),de=(ge=F.current)==null?void 0:ge.contains(oe);if(/input|textarea/i.test(oe.tagName)&&(Ce===" "||Ce!=="Escape"&&he||Ce==="Escape"&&oe.type==="search")||!he&&!de||Ce==="Tab"&&(!D.current||!I))return;U.current=Q.type;const ae={originalEvent:Q,source:Q.type};switch(Ce){case"ArrowUp":{const pe=ce(oe,-1);pe&&pe.focus&&pe.focus(),Q.preventDefault();return}case"ArrowDown":if(Q.preventDefault(),!I)M(!0,ae);else{const pe=ce(oe,1);pe&&pe.focus&&pe.focus()}return;case"Tab":addEventListener(oe.ownerDocument,"keyup",pe=>{var J;(pe.key==="Tab"&&!pe.target||!((J=D.current)!=null&&J.contains(pe.target)))&&M(!1,ae)},{once:!0});break;case"Escape":Ce==="Escape"&&(Q.preventDefault(),Q.stopPropagation()),M(!1,ae);break}}),jsxRuntimeExports.jsx(SelectableContext.Provider,{value:X,children:jsxRuntimeExports.jsx(DropdownContext$1.Provider,{value:K,children:S})})}Dropdown$2.displayName="Dropdown";Dropdown$2.Menu=DropdownMenu$1;Dropdown$2.Toggle=DropdownToggle$1;Dropdown$2.Item=DropdownItem$1;const DropdownContext=reactExports.createContext({});DropdownContext.displayName="DropdownContext";const DropdownDivider=reactExports.forwardRef(({className:x,bsPrefix:d,as:g="hr",role:E="separator",...b},w)=>(d=useBootstrapPrefix(d,"dropdown-divider"),jsxRuntimeExports.jsx(g,{ref:w,className:classNames(x,d),role:E,...b})));DropdownDivider.displayName="DropdownDivider";const DropdownHeader=reactExports.forwardRef(({className:x,bsPrefix:d,as:g="div",role:E="heading",...b},w)=>(d=useBootstrapPrefix(d,"dropdown-header"),jsxRuntimeExports.jsx(g,{ref:w,className:classNames(x,d),role:E,...b})));DropdownHeader.displayName="DropdownHeader";const DropdownItem=reactExports.forwardRef(({bsPrefix:x,className:d,eventKey:g,disabled:E=!1,onClick:b,active:w,as:C=Anchor,...S},P)=>{const I=useBootstrapPrefix(x,"dropdown-item"),[M,D]=useDropdownItem({key:g,href:S.href,disabled:E,onClick:b,active:w});return jsxRuntimeExports.jsx(C,{...S,...M,ref:P,className:classNames(d,I,D.isActive&&"active",E&&"disabled")})});DropdownItem.displayName="DropdownItem";const DropdownItemText=reactExports.forwardRef(({className:x,bsPrefix:d,as:g="span",...E},b)=>(d=useBootstrapPrefix(d,"dropdown-item-text"),jsxRuntimeExports.jsx(g,{ref:b,className:classNames(x,d),...E})));DropdownItemText.displayName="DropdownItemText";const isReactNative=typeof global<"u"&&global.navigator&&global.navigator.product==="ReactNative",isDOM=typeof document<"u",useIsomorphicEffect=isDOM||isReactNative?reactExports.useLayoutEffect:reactExports.useEffect,context$1=reactExports.createContext(null);context$1.displayName="InputGroupContext";const context=reactExports.createContext(null);context.displayName="NavbarContext";function useWrappedRefWithWarning(x,d){return x}const alignDirection=PropTypes.oneOf(["start","end"]),alignPropType=PropTypes.oneOfType([alignDirection,PropTypes.shape({sm:alignDirection}),PropTypes.shape({md:alignDirection}),PropTypes.shape({lg:alignDirection}),PropTypes.shape({xl:alignDirection}),PropTypes.shape({xxl:alignDirection}),PropTypes.object]);function getDropdownMenuPlacement(x,d,g){const E=g?"top-end":"top-start",b=g?"top-start":"top-end",w=g?"bottom-end":"bottom-start",C=g?"bottom-start":"bottom-end",S=g?"right-start":"left-start",P=g?"right-end":"left-end",I=g?"left-start":"right-start",M=g?"left-end":"right-end";let D=x?C:w;return d==="up"?D=x?b:E:d==="end"?D=x?M:I:d==="start"?D=x?P:S:d==="down-centered"?D="bottom":d==="up-centered"&&(D="top"),D}const DropdownMenu=reactExports.forwardRef(({bsPrefix:x,className:d,align:g,rootCloseEvent:E,flip:b=!0,show:w,renderOnMount:C,as:S="div",popperConfig:P,variant:I,...M},D)=>{let k=!1;const H=reactExports.useContext(context),F=useBootstrapPrefix(x,"dropdown-menu"),{align:j,drop:$,isRTL:z}=reactExports.useContext(DropdownContext);g=g||j;const U=reactExports.useContext(context$1),W=[];if(g)if(typeof g=="object"){const Q=Object.keys(g);if(Q.length){const se=Q[0],ge=g[se];k=ge==="start",W.push(`${F}-${se}-${ge}`)}}else g==="end"&&(k=!0);const q=getDropdownMenuPlacement(k,$,z),[Z,{hasShown:X,popper:K,show:ee,toggle:te}]=useDropdownMenu({flip:b,rootCloseEvent:E,show:w,usePopper:!H&&W.length===0,offset:[0,2],popperConfig:P,placement:q});if(Z.ref=useMergedRefs$1(useWrappedRefWithWarning(D),Z.ref),useIsomorphicEffect(()=>{ee&&(K==null||K.update())},[ee]),!X&&!C&&!U)return null;typeof S!="string"&&(Z.show=ee,Z.close=()=>te==null?void 0:te(!1),Z.align=g);let ce=M.style;return K!=null&&K.placement&&(ce={...M.style,...Z.style},M["x-placement"]=K.placement),jsxRuntimeExports.jsx(S,{...M,...Z,style:ce,...(W.length||H)&&{"data-bs-popper":"static"},className:classNames(d,F,ee&&"show",k&&`${F}-end`,I&&`${F}-${I}`,...W)})});DropdownMenu.displayName="DropdownMenu";const DropdownToggle=reactExports.forwardRef(({bsPrefix:x,split:d,className:g,childBsPrefix:E,as:b=Button,...w},C)=>{const S=useBootstrapPrefix(x,"dropdown-toggle"),P=reactExports.useContext(DropdownContext$1);E!==void 0&&(w.bsPrefix=E);const[I]=useDropdownToggle();return I.ref=useMergedRefs$1(I.ref,useWrappedRefWithWarning(C)),jsxRuntimeExports.jsx(b,{className:classNames(g,S,d&&`${S}-split`,(P==null?void 0:P.show)&&"show"),...I,...w})});DropdownToggle.displayName="DropdownToggle";const Dropdown=reactExports.forwardRef((x,d)=>{const{bsPrefix:g,drop:E="down",show:b,className:w,align:C="start",onSelect:S,onToggle:P,focusFirstItemOnShow:I,as:M="div",navbar:D,autoClose:k=!0,...H}=useUncontrolled(x,{show:"onToggle"}),F=reactExports.useContext(context$1),j=useBootstrapPrefix(g,"dropdown"),$=useIsRTL(),z=K=>k===!1?K==="click":k==="inside"?K!=="rootClose":k==="outside"?K!=="select":!0,U=useEventCallback$1((K,ee)=>{var te;!((te=ee.originalEvent)==null||(te=te.target)==null)&&te.classList.contains("dropdown-toggle")&&ee.source==="mousedown"||(ee.originalEvent.currentTarget===document&&(ee.source!=="keydown"||ee.originalEvent.key==="Escape")&&(ee.source="rootClose"),z(ee.source)&&(P==null||P(K,ee)))}),q=getDropdownMenuPlacement(C==="end",E,$),Z=reactExports.useMemo(()=>({align:C,drop:E,isRTL:$}),[C,E,$]),X={down:j,"down-centered":`${j}-center`,up:"dropup","up-centered":"dropup-center dropup",end:"dropend",start:"dropstart"};return jsxRuntimeExports.jsx(DropdownContext.Provider,{value:Z,children:jsxRuntimeExports.jsx(Dropdown$2,{placement:q,show:b,onSelect:S,onToggle:U,focusFirstItemOnShow:I,itemSelector:`.${j}-item:not(.disabled):not(:disabled)`,children:F?H.children:jsxRuntimeExports.jsx(M,{...H,ref:d,className:classNames(w,b&&"show",X[E])})})})});Dropdown.displayName="Dropdown";const Dropdown$1=Object.assign(Dropdown,{Toggle:DropdownToggle,Menu:DropdownMenu,Item:DropdownItem,ItemText:DropdownItemText,Divider:DropdownDivider,Header:DropdownHeader}),propTypes$3={id:PropTypes.string,href:PropTypes.string,onClick:PropTypes.func,title:PropTypes.node.isRequired,disabled:PropTypes.bool,align:alignPropType,menuRole:PropTypes.string,renderMenuOnMount:PropTypes.bool,rootCloseEvent:PropTypes.string,menuVariant:PropTypes.oneOf(["dark"]),flip:PropTypes.bool,bsPrefix:PropTypes.string,variant:PropTypes.string,size:PropTypes.string},DropdownButton=reactExports.forwardRef(({title:x,children:d,bsPrefix:g,rootCloseEvent:E,variant:b,size:w,menuRole:C,renderMenuOnMount:S,disabled:P,href:I,id:M,menuVariant:D,flip:k,...H},F)=>jsxRuntimeExports.jsxs(Dropdown$1,{ref:F,...H,children:[jsxRuntimeExports.jsx(DropdownToggle,{id:M,href:I,size:w,variant:b,disabled:P,childBsPrefix:g,children:x}),jsxRuntimeExports.jsx(DropdownMenu,{role:C,renderOnMount:S,rootCloseEvent:E,variant:D,flip:k,children:d})]}));DropdownButton.displayName="DropdownButton";DropdownButton.propTypes=propTypes$3;const propTypes$2={type:PropTypes.string,tooltip:PropTypes.bool,as:PropTypes.elementType},Feedback=reactExports.forwardRef(({as:x="div",className:d,type:g="valid",tooltip:E=!1,...b},w)=>jsxRuntimeExports.jsx(x,{...b,ref:w,className:classNames(d,`${g}-${E?"tooltip":"feedback"}`)}));Feedback.displayName="Feedback";Feedback.propTypes=propTypes$2;const FormContext=reactExports.createContext({}),FormCheckInput=reactExports.forwardRef(({id:x,bsPrefix:d,className:g,type:E="checkbox",isValid:b=!1,isInvalid:w=!1,as:C="input",...S},P)=>{const{controlId:I}=reactExports.useContext(FormContext);return d=useBootstrapPrefix(d,"form-check-input"),jsxRuntimeExports.jsx(C,{...S,ref:P,type:E,id:x||I,className:classNames(g,d,b&&"is-valid",w&&"is-invalid")})});FormCheckInput.displayName="FormCheckInput";const FormCheckLabel=reactExports.forwardRef(({bsPrefix:x,className:d,htmlFor:g,...E},b)=>{const{controlId:w}=reactExports.useContext(FormContext);return x=useBootstrapPrefix(x,"form-check-label"),jsxRuntimeExports.jsx("label",{...E,ref:b,htmlFor:g||w,className:classNames(d,x)})});FormCheckLabel.displayName="FormCheckLabel";const FormCheck=reactExports.forwardRef(({id:x,bsPrefix:d,bsSwitchPrefix:g,inline:E=!1,reverse:b=!1,disabled:w=!1,isValid:C=!1,isInvalid:S=!1,feedbackTooltip:P=!1,feedback:I,feedbackType:M,className:D,style:k,title:H="",type:F="checkbox",label:j,children:$,as:z="input",...U},W)=>{d=useBootstrapPrefix(d,"form-check"),g=useBootstrapPrefix(g,"form-switch");const{controlId:q}=reactExports.useContext(FormContext),Z=reactExports.useMemo(()=>({controlId:x||q}),[q,x]),X=!$&&j!=null&&j!==!1||hasChildOfType($,FormCheckLabel),K=jsxRuntimeExports.jsx(FormCheckInput,{...U,type:F==="switch"?"checkbox":F,ref:W,isValid:C,isInvalid:S,disabled:w,as:z});return jsxRuntimeExports.jsx(FormContext.Provider,{value:Z,children:jsxRuntimeExports.jsx("div",{style:k,className:classNames(D,X&&d,E&&`${d}-inline`,b&&`${d}-reverse`,F==="switch"&&g),children:$||jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[K,X&&jsxRuntimeExports.jsx(FormCheckLabel,{title:H,children:j}),I&&jsxRuntimeExports.jsx(Feedback,{type:M,tooltip:P,children:I})]})})})});FormCheck.displayName="FormCheck";const FormCheck$1=Object.assign(FormCheck,{Input:FormCheckInput,Label:FormCheckLabel}),FormControl=reactExports.forwardRef(({bsPrefix:x,type:d,size:g,htmlSize:E,id:b,className:w,isValid:C=!1,isInvalid:S=!1,plaintext:P,readOnly:I,as:M="input",...D},k)=>{const{controlId:H}=reactExports.useContext(FormContext);return x=useBootstrapPrefix(x,"form-control"),jsxRuntimeExports.jsx(M,{...D,type:d,size:E,ref:k,readOnly:I,id:b||H,className:classNames(w,P?`${x}-plaintext`:x,g&&`${x}-${g}`,d==="color"&&`${x}-color`,C&&"is-valid",S&&"is-invalid")})});FormControl.displayName="FormControl";const FormControl$1=Object.assign(FormControl,{Feedback}),FormFloating=reactExports.forwardRef(({className:x,bsPrefix:d,as:g="div",...E},b)=>(d=useBootstrapPrefix(d,"form-floating"),jsxRuntimeExports.jsx(g,{ref:b,className:classNames(x,d),...E})));FormFloating.displayName="FormFloating";const FormGroup=reactExports.forwardRef(({controlId:x,as:d="div",...g},E)=>{const b=reactExports.useMemo(()=>({controlId:x}),[x]);return jsxRuntimeExports.jsx(FormContext.Provider,{value:b,children:jsxRuntimeExports.jsx(d,{...g,ref:E})})});FormGroup.displayName="FormGroup";const FormLabel=reactExports.forwardRef(({as:x="label",bsPrefix:d,column:g=!1,visuallyHidden:E=!1,className:b,htmlFor:w,...C},S)=>{const{controlId:P}=reactExports.useContext(FormContext);d=useBootstrapPrefix(d,"form-label");let I="col-form-label";typeof g=="string"&&(I=`${I} ${I}-${g}`);const M=classNames(b,d,E&&"visually-hidden",g&&I);return w=w||P,g?jsxRuntimeExports.jsx(Col,{ref:S,as:"label",className:M,htmlFor:w,...C}):jsxRuntimeExports.jsx(x,{ref:S,className:M,htmlFor:w,...C})});FormLabel.displayName="FormLabel";const FormRange=reactExports.forwardRef(({bsPrefix:x,className:d,id:g,...E},b)=>{const{controlId:w}=reactExports.useContext(FormContext);return x=useBootstrapPrefix(x,"form-range"),jsxRuntimeExports.jsx("input",{...E,type:"range",ref:b,className:classNames(d,x),id:g||w})});FormRange.displayName="FormRange";const FormSelect=reactExports.forwardRef(({bsPrefix:x,size:d,htmlSize:g,className:E,isValid:b=!1,isInvalid:w=!1,id:C,...S},P)=>{const{controlId:I}=reactExports.useContext(FormContext);return x=useBootstrapPrefix(x,"form-select"),jsxRuntimeExports.jsx("select",{...S,size:g,ref:P,className:classNames(E,x,d&&`${x}-${d}`,b&&"is-valid",w&&"is-invalid"),id:C||I})});FormSelect.displayName="FormSelect";const FormText=reactExports.forwardRef(({bsPrefix:x,className:d,as:g="small",muted:E,...b},w)=>(x=useBootstrapPrefix(x,"form-text"),jsxRuntimeExports.jsx(g,{...b,ref:w,className:classNames(d,x,E&&"text-muted")})));FormText.displayName="FormText";const Switch=reactExports.forwardRef((x,d)=>jsxRuntimeExports.jsx(FormCheck$1,{...x,ref:d,type:"switch"}));Switch.displayName="Switch";const Switch$1=Object.assign(Switch,{Input:FormCheck$1.Input,Label:FormCheck$1.Label}),FloatingLabel=reactExports.forwardRef(({bsPrefix:x,className:d,children:g,controlId:E,label:b,...w},C)=>(x=useBootstrapPrefix(x,"form-floating"),jsxRuntimeExports.jsxs(FormGroup,{ref:C,className:classNames(d,x),controlId:E,...w,children:[g,jsxRuntimeExports.jsx("label",{htmlFor:E,children:b})]})));FloatingLabel.displayName="FloatingLabel";const propTypes$1={_ref:PropTypes.any,validated:PropTypes.bool,as:PropTypes.elementType},Form=reactExports.forwardRef(({className:x,validated:d,as:g="form",...E},b)=>jsxRuntimeExports.jsx(g,{...E,ref:b,className:classNames(x,d&&"was-validated")}));Form.displayName="Form";Form.propTypes=propTypes$1;const Form$1=Object.assign(Form,{Group:FormGroup,Control:FormControl$1,Floating:FormFloating,Check:FormCheck$1,Switch:Switch$1,Label:FormLabel,Text:FormText,Range:FormRange,Select:FormSelect,FloatingLabel}),InputGroupText=reactExports.forwardRef(({className:x,bsPrefix:d,as:g="span",...E},b)=>(d=useBootstrapPrefix(d,"input-group-text"),jsxRuntimeExports.jsx(g,{ref:b,className:classNames(x,d),...E})));InputGroupText.displayName="InputGroupText";const InputGroupCheckbox=x=>jsxRuntimeExports.jsx(InputGroupText,{children:jsxRuntimeExports.jsx(FormCheckInput,{type:"checkbox",...x})}),InputGroupRadio=x=>jsxRuntimeExports.jsx(InputGroupText,{children:jsxRuntimeExports.jsx(FormCheckInput,{type:"radio",...x})}),InputGroup=reactExports.forwardRef(({bsPrefix:x,size:d,hasValidation:g,className:E,as:b="div",...w},C)=>{x=useBootstrapPrefix(x,"input-group");const S=reactExports.useMemo(()=>({}),[]);return jsxRuntimeExports.jsx(context$1.Provider,{value:S,children:jsxRuntimeExports.jsx(b,{ref:C,...w,className:classNames(E,x,d&&`${x}-${d}`,g&&"has-validation")})})});InputGroup.displayName="InputGroup";const InputGroup$1=Object.assign(InputGroup,{Text:InputGroupText,Radio:InputGroupRadio,Checkbox:InputGroupCheckbox}),NavItem=reactExports.forwardRef(({className:x,bsPrefix:d,as:g="div",...E},b)=>(d=useBootstrapPrefix(d,"nav-item"),jsxRuntimeExports.jsx(g,{ref:b,className:classNames(x,d),...E})));NavItem.displayName="NavItem";const NavLink=reactExports.forwardRef(({bsPrefix:x,className:d,as:g=Anchor,active:E,eventKey:b,disabled:w=!1,...C},S)=>{x=useBootstrapPrefix(x,"nav-link");const[P,I]=useNavItem({key:makeEventKey(b,C.href),active:E,disabled:w,...C});return jsxRuntimeExports.jsx(g,{...C,...P,ref:S,disabled:w,className:classNames(d,x,w&&"disabled",I.isActive&&"active")})});NavLink.displayName="NavLink";const Nav=reactExports.forwardRef((x,d)=>{const{as:g="div",bsPrefix:E,variant:b,fill:w=!1,justify:C=!1,navbar:S,navbarScroll:P,className:I,activeKey:M,...D}=useUncontrolled(x,{activeKey:"onSelect"}),k=useBootstrapPrefix(E,"nav");let H,F,j=!1;const $=reactExports.useContext(context),z=reactExports.useContext(context$2);return $?(H=$.bsPrefix,j=S??!0):z&&({cardHeaderBsPrefix:F}=z),jsxRuntimeExports.jsx(BaseNav,{as:g,ref:d,activeKey:M,className:classNames(I,{[k]:!j,[`${H}-nav`]:j,[`${H}-nav-scroll`]:j&&P,[`${F}-${b}`]:!!F,[`${k}-${b}`]:!!b,[`${k}-fill`]:w,[`${k}-justified`]:C}),...D})});Nav.displayName="Nav";const Nav$1=Object.assign(Nav,{Item:NavItem,Link:NavLink}),noop$2=()=>{};function useRootClose(x,d,{disabled:g,clickTrigger:E}={}){const b=d||noop$2;useClickOutside(x,b,{disabled:g,clickTrigger:E});const w=useEventCallback(C=>{isEscKey(C)&&b(C)});reactExports.useEffect(()=>{if(g||x==null)return;const C=ownerDocument(getRefTarget(x));let S=(C.defaultView||window).event;const P=listen(C,"keyup",I=>{if(I===S){S=void 0;return}w(I)});return()=>{P()}},[x,g,w])}const Overlay$1=reactExports.forwardRef((x,d)=>{const{flip:g,offset:E,placement:b,containerPadding:w,popperConfig:C={},transition:S,runTransition:P}=x,[I,M]=useCallbackRef(),[D,k]=useCallbackRef(),H=useMergedRefs(M,d),F=useWaitForDOMRef(x.container),j=useWaitForDOMRef(x.target),[$,z]=reactExports.useState(!x.show),U=usePopper(j,I,mergeOptionsWithPopperConfig({placement:b,enableEvents:!!x.show,containerPadding:w||5,flip:g,offset:E,arrowElement:D,popperConfig:C}));x.show&&$&&z(!1);const W=(...Q)=>{z(!0),x.onExited&&x.onExited(...Q)},q=x.show||!$;if(useRootClose(I,x.onHide,{disabled:!x.rootClose||x.rootCloseDisabled,clickTrigger:x.rootCloseEvent}),!q)return null;const{onExit:Z,onExiting:X,onEnter:K,onEntering:ee,onEntered:te}=x;let ce=x.children(Object.assign({},U.attributes.popper,{style:U.styles.popper,ref:H}),{popper:U,placement:b,show:!!x.show,arrowProps:Object.assign({},U.attributes.arrow,{style:U.styles.arrow,ref:k})});return ce=renderTransition(S,P,{in:!!x.show,appear:!0,mountOnEnter:!0,unmountOnExit:!0,children:ce,onExit:Z,onExiting:X,onExited:W,onEnter:K,onEntering:ee,onEntered:te}),F?ReactDOM.createPortal(ce,F):null});Overlay$1.displayName="Overlay";const PopoverHeader=reactExports.forwardRef(({className:x,bsPrefix:d,as:g="div",...E},b)=>(d=useBootstrapPrefix(d,"popover-header"),jsxRuntimeExports.jsx(g,{ref:b,className:classNames(x,d),...E})));PopoverHeader.displayName="PopoverHeader";const PopoverBody=reactExports.forwardRef(({className:x,bsPrefix:d,as:g="div",...E},b)=>(d=useBootstrapPrefix(d,"popover-body"),jsxRuntimeExports.jsx(g,{ref:b,className:classNames(x,d),...E})));PopoverBody.displayName="PopoverBody";function getOverlayDirection(x,d){let g=x;return x==="left"?g=d?"end":"start":x==="right"&&(g=d?"start":"end"),g}function getInitialPopperStyles(x="absolute"){return{position:x,top:"0",left:"0",opacity:"0",pointerEvents:"none"}}const Popover=reactExports.forwardRef(({bsPrefix:x,placement:d="right",className:g,style:E,children:b,body:w,arrowProps:C,hasDoneInitialMeasure:S,popper:P,show:I,...M},D)=>{const k=useBootstrapPrefix(x,"popover"),H=useIsRTL(),[F]=(d==null?void 0:d.split("-"))||[],j=getOverlayDirection(F,H);let $=E;return I&&!S&&($={...E,...getInitialPopperStyles(P==null?void 0:P.strategy)}),jsxRuntimeExports.jsxs("div",{ref:D,role:"tooltip",style:$,"x-placement":F,className:classNames(g,k,F&&`bs-popover-${j}`),...M,children:[jsxRuntimeExports.jsx("div",{className:"popover-arrow",...C}),w?jsxRuntimeExports.jsx(PopoverBody,{children:b}):b]})});Popover.displayName="Popover";const Popover$1=Object.assign(Popover,{Header:PopoverHeader,Body:PopoverBody,POPPER_OFFSET:[0,8]}),Tooltip=reactExports.forwardRef(({bsPrefix:x,placement:d="right",className:g,style:E,children:b,arrowProps:w,hasDoneInitialMeasure:C,popper:S,show:P,...I},M)=>{x=useBootstrapPrefix(x,"tooltip");const D=useIsRTL(),[k]=(d==null?void 0:d.split("-"))||[],H=getOverlayDirection(k,D);let F=E;return P&&!C&&(F={...E,...getInitialPopperStyles(S==null?void 0:S.strategy)}),jsxRuntimeExports.jsxs("div",{ref:M,style:F,role:"tooltip","x-placement":k,className:classNames(g,x,`bs-tooltip-${H}`),...I,children:[jsxRuntimeExports.jsx("div",{className:"tooltip-arrow",...w}),jsxRuntimeExports.jsx("div",{className:`${x}-inner`,children:b})]})});Tooltip.displayName="Tooltip";const Tooltip$1=Object.assign(Tooltip,{TOOLTIP_OFFSET:[0,6]});function useOverlayOffset(x){const d=reactExports.useRef(null),g=useBootstrapPrefix(void 0,"popover"),E=useBootstrapPrefix(void 0,"tooltip"),b=reactExports.useMemo(()=>({name:"offset",options:{offset:()=>{if(x)return x;if(d.current){if(hasClass(d.current,g))return Popover$1.POPPER_OFFSET;if(hasClass(d.current,E))return Tooltip$1.TOOLTIP_OFFSET}return[0,0]}}}),[x,g,E]);return[d,[b]]}function wrapRefs(x,d){const{ref:g}=x,{ref:E}=d;x.ref=g.__wrapped||(g.__wrapped=b=>g(safeFindDOMNode(b))),d.ref=E.__wrapped||(E.__wrapped=b=>E(safeFindDOMNode(b)))}const Overlay=reactExports.forwardRef(({children:x,transition:d=Fade,popperConfig:g={},rootClose:E=!1,placement:b="top",show:w=!1,...C},S)=>{const P=reactExports.useRef({}),[I,M]=reactExports.useState(null),[D,k]=useOverlayOffset(C.offset),H=useMergedRefs$1(S,D),F=d===!0?Fade:d||void 0,j=useEventCallback$1($=>{M($),g==null||g.onFirstUpdate==null||g.onFirstUpdate($)});return useIsomorphicEffect(()=>{I&&C.target&&(P.current.scheduleUpdate==null||P.current.scheduleUpdate())},[I,C.target]),reactExports.useEffect(()=>{w||M(null)},[w]),jsxRuntimeExports.jsx(Overlay$1,{...C,ref:H,popperConfig:{...g,modifiers:k.concat(g.modifiers||[]),onFirstUpdate:j},transition:F,rootClose:E,placement:b,show:w,children:($,{arrowProps:z,popper:U,show:W})=>{var q;wrapRefs($,z);const Z=U==null?void 0:U.placement,X=Object.assign(P.current,{state:U==null?void 0:U.state,scheduleUpdate:U==null?void 0:U.update,placement:Z,outOfBoundaries:(U==null||(q=U.state)==null||(q=q.modifiersData.hide)==null?void 0:q.isReferenceHidden)||!1,strategy:g.strategy}),K=!!I;return typeof x=="function"?x({...$,placement:Z,show:W,...!d&&W&&{className:"show"},popper:X,arrowProps:z,hasDoneInitialMeasure:K}):reactExports.cloneElement(x,{...$,placement:Z,arrowProps:z,popper:X,hasDoneInitialMeasure:K,className:classNames(x.props.className,!d&&W&&"show"),style:{...x.props.style,...$.style}})}})});Overlay.displayName="Overlay";function normalizeDelay(x){return x&&typeof x=="object"?x:{show:x,hide:x}}function handleMouseOverOut(x,d,g){const[E]=d,b=E.currentTarget,w=E.relatedTarget||E.nativeEvent[g];(!w||w!==b)&&!contains$2(b,w)&&x(...d)}PropTypes.oneOf(["click","hover","focus"]);const OverlayTrigger=({trigger:x=["hover","focus"],overlay:d,children:g,popperConfig:E={},show:b,defaultShow:w=!1,onToggle:C,delay:S,placement:P,flip:I=P&&P.indexOf("auto")!==-1,...M})=>{const D=reactExports.useRef(null),k=useMergedRefs$1(D,getChildRef(g)),H=useTimeout(),F=reactExports.useRef(""),[j,$]=useUncontrolledProp$1(b,w,C),z=normalizeDelay(S),{onFocus:U,onBlur:W,onClick:q}=typeof g!="function"?reactExports.Children.only(g).props:{},Z=oe=>{k(safeFindDOMNode(oe))},X=reactExports.useCallback(()=>{if(H.clear(),F.current="show",!z.show){$(!0);return}H.set(()=>{F.current==="show"&&$(!0)},z.show)},[z.show,$,H]),K=reactExports.useCallback(()=>{if(H.clear(),F.current="hide",!z.hide){$(!1);return}H.set(()=>{F.current==="hide"&&$(!1)},z.hide)},[z.hide,$,H]),ee=reactExports.useCallback((...oe)=>{X(),U==null||U(...oe)},[X,U]),te=reactExports.useCallback((...oe)=>{K(),W==null||W(...oe)},[K,W]),ce=reactExports.useCallback((...oe)=>{$(!j),q==null||q(...oe)},[q,$,j]),Q=reactExports.useCallback((...oe)=>{handleMouseOverOut(X,oe,"fromElement")},[X]),se=reactExports.useCallback((...oe)=>{handleMouseOverOut(K,oe,"toElement")},[K]),ge=x==null?[]:[].concat(x),Ce={ref:Z};return ge.indexOf("click")!==-1&&(Ce.onClick=ce),ge.indexOf("focus")!==-1&&(Ce.onFocus=ee,Ce.onBlur=te),ge.indexOf("hover")!==-1&&(Ce.onMouseOver=Q,Ce.onMouseOut=se),jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[typeof g=="function"?g(Ce):reactExports.cloneElement(g,Ce),jsxRuntimeExports.jsx(Overlay,{...M,show:j,onHide:K,flip:I,placement:P,popperConfig:E,target:D.current,children:d})]})},Row=reactExports.forwardRef(({bsPrefix:x,className:d,as:g="div",...E},b)=>{const w=useBootstrapPrefix(x,"row"),C=useBootstrapBreakpoints(),S=useBootstrapMinBreakpoint(),P=`${w}-cols`,I=[];return C.forEach(M=>{const D=E[M];delete E[M];let k;D!=null&&typeof D=="object"?{cols:k}=D:k=D;const H=M!==S?`-${M}`:"";k!=null&&I.push(`${P}${H}-${k}`)}),jsxRuntimeExports.jsx(g,{ref:b,...E,className:classNames(d,w,...I)})});Row.displayName="Row";const _excluded=["active","eventKey","mountOnEnter","transition","unmountOnExit","role","onEnter","onEntering","onEntered","onExit","onExiting","onExited"],_excluded2=["activeKey","getControlledId","getControllerId"],_excluded3=["as"];function _objectWithoutPropertiesLoose(x,d){if(x==null)return{};var g={};for(var E in x)if({}.hasOwnProperty.call(x,E)){if(d.indexOf(E)>=0)continue;g[E]=x[E]}return g}function useTabPanel(x){let{active:d,eventKey:g,mountOnEnter:E,transition:b,unmountOnExit:w,role:C="tabpanel",onEnter:S,onEntering:P,onEntered:I,onExit:M,onExiting:D,onExited:k}=x,H=_objectWithoutPropertiesLoose(x,_excluded);const F=reactExports.useContext(TabContext);if(!F)return[Object.assign({},H,{role:C}),{eventKey:g,isActive:d,mountOnEnter:E,transition:b,unmountOnExit:w,onEnter:S,onEntering:P,onEntered:I,onExit:M,onExiting:D,onExited:k}];const{activeKey:j,getControlledId:$,getControllerId:z}=F,U=_objectWithoutPropertiesLoose(F,_excluded2),W=makeEventKey(g);return[Object.assign({},H,{role:C,id:$(g),"aria-labelledby":z(g)}),{eventKey:g,isActive:d==null&&W!=null?makeEventKey(j)===W:d,transition:b||U.transition,mountOnEnter:E??U.mountOnEnter,unmountOnExit:w??U.unmountOnExit,onEnter:S,onEntering:P,onEntered:I,onExit:M,onExiting:D,onExited:k}]}const TabPanel=reactExports.forwardRef((x,d)=>{let{as:g="div"}=x,E=_objectWithoutPropertiesLoose(x,_excluded3);const[b,{isActive:w,onEnter:C,onEntering:S,onEntered:P,onExit:I,onExiting:M,onExited:D,mountOnEnter:k,unmountOnExit:H,transition:F=NoopTransition}]=useTabPanel(E);return jsxRuntimeExports.jsx(TabContext.Provider,{value:null,children:jsxRuntimeExports.jsx(SelectableContext.Provider,{value:null,children:jsxRuntimeExports.jsx(F,{in:w,onEnter:C,onEntering:S,onEntered:P,onExit:I,onExiting:M,onExited:D,mountOnEnter:k,unmountOnExit:H,children:jsxRuntimeExports.jsx(g,Object.assign({},b,{ref:d,hidden:!w,"aria-hidden":!w}))})})})});TabPanel.displayName="TabPanel";const Tabs=x=>{const{id:d,generateChildId:g,onSelect:E,activeKey:b,defaultActiveKey:w,transition:C,mountOnEnter:S,unmountOnExit:P,children:I}=x,[M,D]=useUncontrolledProp(b,w,E),k=$b5e257d569688ac6$export$619500959fc48b26(d),H=reactExports.useMemo(()=>g||((j,$)=>k?`${k}-${$}-${j}`:null),[k,g]),F=reactExports.useMemo(()=>({onSelect:D,activeKey:M,transition:C,mountOnEnter:S||!1,unmountOnExit:P||!1,getControlledId:j=>H(j,"tabpane"),getControllerId:j=>H(j,"tab")}),[D,M,C,S,P,H]);return jsxRuntimeExports.jsx(TabContext.Provider,{value:F,children:jsxRuntimeExports.jsx(SelectableContext.Provider,{value:D||null,children:I})})};Tabs.Panel=TabPanel;function getTabTransitionComponent(x){return typeof x=="boolean"?x?Fade:NoopTransition:x}const TabContainer=({transition:x,...d})=>jsxRuntimeExports.jsx(Tabs,{...d,transition:getTabTransitionComponent(x)});TabContainer.displayName="TabContainer";const TabContent=reactExports.forwardRef(({className:x,bsPrefix:d,as:g="div",...E},b)=>(d=useBootstrapPrefix(d,"tab-content"),jsxRuntimeExports.jsx(g,{ref:b,className:classNames(x,d),...E})));TabContent.displayName="TabContent";const TabPane=reactExports.forwardRef(({bsPrefix:x,transition:d,...g},E)=>{const[{className:b,as:w="div",...C},{isActive:S,onEnter:P,onEntering:I,onEntered:M,onExit:D,onExiting:k,onExited:H,mountOnEnter:F,unmountOnExit:j,transition:$=Fade}]=useTabPanel({...g,transition:getTabTransitionComponent(d)}),z=useBootstrapPrefix(x,"tab-pane");return jsxRuntimeExports.jsx(TabContext.Provider,{value:null,children:jsxRuntimeExports.jsx(SelectableContext.Provider,{value:null,children:jsxRuntimeExports.jsx($,{in:S,onEnter:P,onEntering:I,onEntered:M,onExit:D,onExiting:k,onExited:H,mountOnEnter:F,unmountOnExit:j,children:jsxRuntimeExports.jsx(w,{...C,ref:E,className:classNames(b,z,S&&"active")})})})})});TabPane.displayName="TabPane";const propTypes={eventKey:PropTypes.oneOfType([PropTypes.string,PropTypes.number]),title:PropTypes.node.isRequired,disabled:PropTypes.bool,tabClassName:PropTypes.string,tabAttrs:PropTypes.object},Tab=()=>{throw new Error("ReactBootstrap: The `Tab` component is not meant to be rendered! It's an abstract component that is only valid as a direct Child of the `Tabs` Component. For custom tabs components use TabPane and TabsContainer directly")};Tab.propTypes=propTypes;const Tab$1=Object.assign(Tab,{Container:TabContainer,Content:TabContent,Pane:TabPane}),Table=reactExports.forwardRef(({bsPrefix:x,className:d,striped:g,bordered:E,borderless:b,hover:w,size:C,variant:S,responsive:P,...I},M)=>{const D=useBootstrapPrefix(x,"table"),k=classNames(d,D,S&&`${D}-${S}`,C&&`${D}-${C}`,g&&`${D}-${typeof g=="string"?`striped-${g}`:"striped"}`,E&&`${D}-bordered`,b&&`${D}-borderless`,w&&`${D}-hover`),H=jsxRuntimeExports.jsx("table",{...I,className:k,ref:M});if(P){let F=`${D}-responsive`;return typeof P=="string"&&(F=`${F}-${P}`),jsxRuntimeExports.jsx("div",{className:F,children:H})}return H});Table.displayName="Table";const SaveFileButton=()=>{const{setJsonFileHandle:x,treeData:d,tabData:g,goals:E}=useFileContext(),[b,w]=reactExports.useState({show:!1,title:"",message:"",onHide:()=>w(D=>({...D,show:!1}))}),C=()=>Object.values(E).some(D=>D.content.trim()!==""),S=()=>{w({show:!0,title:"Cannot Save Model",message:"No goals have been added. Please add at least one goal before saving.",onHide:()=>w(D=>({...D,show:!1}))})};async function P(D,k){try{const H=await window.showSaveFilePicker({types:[{description:"JSON Files",accept:{"application/json":[".json"]}}],suggestedName:"Model.json"}),F=await H.createWritable();await I(H,F)}catch(H){console.error(`Error creating ${k} file: ${H}`)}}const I=async(D,k)=>{try{const F=JSON.stringify({tabData:g,treeData:d||[]});await k.write(F),await k.close(),x(D)}catch(H){console.log(`Error initialize JSON File: ${H}`)}},M=async()=>{if(!C()){S();return}try{await P("","json")}catch(D){console.error(`Error creating files: ${D}`)}returnFocusToGraph()};return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Button,{variant:"outline-primary",onClick:M,children:"Save"}),jsxRuntimeExports.jsx(ErrorModal,{...b})]})};var raf={exports:{}},performanceNow$1={exports:{}},performanceNow=performanceNow$1.exports,hasRequiredPerformanceNow;function requirePerformanceNow(){return hasRequiredPerformanceNow||(hasRequiredPerformanceNow=1,(function(){var x,d,g,E,b,w;typeof performance<"u"&&performance!==null&&performance.now?performanceNow$1.exports=function(){return performance.now()}:typeof process<"u"&&process!==null&&process.hrtime?(performanceNow$1.exports=function(){return(x()-b)/1e6},d=process.hrtime,x=function(){var C;return C=d(),C[0]*1e9+C[1]},E=x(),w=process.uptime()*1e9,b=E-w):Date.now?(performanceNow$1.exports=function(){return Date.now()-g},g=Date.now()):(performanceNow$1.exports=function(){return new Date().getTime()-g},g=new Date().getTime())}).call(performanceNow)),performanceNow$1.exports}var hasRequiredRaf;function requireRaf(){if(hasRequiredRaf)return raf.exports;hasRequiredRaf=1;for(var x=requirePerformanceNow(),d=typeof window>"u"?commonjsGlobal:window,g=["moz","webkit"],E="AnimationFrame",b=d["request"+E],w=d["cancel"+E]||d["cancelRequest"+E],C=0;!b&&C<g.length;C++)b=d[g[C]+"Request"+E],w=d[g[C]+"Cancel"+E]||d[g[C]+"CancelRequest"+E];if(!b||!w){var S=0,P=0,I=[],M=1e3/60;b=function(D){if(I.length===0){var k=x(),H=Math.max(0,M-(k-S));S=H+k,setTimeout(function(){var F=I.slice(0);I.length=0;for(var j=0;j<F.length;j++)if(!F[j].cancelled)try{F[j].callback(S)}catch($){setTimeout(function(){throw $},0)}},Math.round(H))}return I.push({handle:++P,callback:D,cancelled:!1}),P},w=function(D){for(var k=0;k<I.length;k++)I[k].handle===D&&(I[k].cancelled=!0)}}return raf.exports=function(D){return b.call(d,D)},raf.exports.cancel=function(){w.apply(d,arguments)},raf.exports.polyfill=function(D){D||(D=d),D.requestAnimationFrame=b,D.cancelAnimationFrame=w},raf.exports}var rafExports=requireRaf();const requestAnimationFrame$1=getDefaultExportFromCjs(rafExports);var rgbcolor,hasRequiredRgbcolor;function requireRgbcolor(){return hasRequiredRgbcolor||(hasRequiredRgbcolor=1,rgbcolor=function(x){this.ok=!1,this.alpha=1,x.charAt(0)=="#"&&(x=x.substr(1,6)),x=x.replace(/ /g,""),x=x.toLowerCase();var d={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"};x=d[x]||x;for(var g=[{re:/^rgba\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3}),\s*((?:\d?\.)?\d)\)$/,example:["rgba(123, 234, 45, 0.8)","rgba(255,234,245,1.0)"],process:function(P){return[parseInt(P[1]),parseInt(P[2]),parseInt(P[3]),parseFloat(P[4])]}},{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(P){return[parseInt(P[1]),parseInt(P[2]),parseInt(P[3])]}},{re:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,example:["#00ff00","336699"],process:function(P){return[parseInt(P[1],16),parseInt(P[2],16),parseInt(P[3],16)]}},{re:/^([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,example:["#fb0","f0f"],process:function(P){return[parseInt(P[1]+P[1],16),parseInt(P[2]+P[2],16),parseInt(P[3]+P[3],16)]}}],E=0;E<g.length;E++){var b=g[E].re,w=g[E].process,C=b.exec(x);if(C){var S=w(C);this.r=S[0],this.g=S[1],this.b=S[2],S.length>3&&(this.alpha=S[3]),this.ok=!0}}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.alpha=this.alpha<0?0:this.alpha>1||isNaN(this.alpha)?1:this.alpha,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toRGBA=function(){return"rgba("+this.r+", "+this.g+", "+this.b+", "+this.alpha+")"},this.toHex=function(){var P=this.r.toString(16),I=this.g.toString(16),M=this.b.toString(16);return P.length==1&&(P="0"+P),I.length==1&&(I="0"+I),M.length==1&&(M="0"+M),"#"+P+I+M},this.getHelpXML=function(){for(var P=new Array,I=0;I<g.length;I++)for(var M=g[I].example,D=0;D<M.length;D++)P[P.length]=M[D];for(var k in d)P[P.length]=k;var H=document.createElement("ul");H.setAttribute("id","rgbcolor-examples");for(var I=0;I<P.length;I++)try{var F=document.createElement("li"),j=new RGBColor(P[I]),$=document.createElement("div");$.style.cssText="margin: 3px; border: 1px solid black; background:"+j.toHex()+"; color:"+j.toHex(),$.appendChild(document.createTextNode("test"));var z=document.createTextNode(" "+P[I]+" -> "+j.toRGB()+" -> "+j.toHex());F.appendChild($),F.appendChild(z),H.appendChild(F)}catch{}return H}}),rgbcolor}var rgbcolorExports=requireRgbcolor();const RGBColor$1=getDefaultExportFromCjs(rgbcolorExports);/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var t=function(x,d){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,E){g.__proto__=E}||function(g,E){for(var b in E)Object.prototype.hasOwnProperty.call(E,b)&&(g[b]=E[b])})(x,d)};function r(x,d){if(typeof d!="function"&&d!==null)throw new TypeError("Class extends value "+String(d)+" is not a constructor or null");function g(){this.constructor=x}t(x,d),x.prototype=d===null?Object.create(d):(g.prototype=d.prototype,new g)}function e(x){var d="";Array.isArray(x)||(x=[x]);for(var g=0;g<x.length;g++){var E=x[g];if(E.type===_.CLOSE_PATH)d+="z";else if(E.type===_.HORIZ_LINE_TO)d+=(E.relative?"h":"H")+E.x;else if(E.type===_.VERT_LINE_TO)d+=(E.relative?"v":"V")+E.y;else if(E.type===_.MOVE_TO)d+=(E.relative?"m":"M")+E.x+" "+E.y;else if(E.type===_.LINE_TO)d+=(E.relative?"l":"L")+E.x+" "+E.y;else if(E.type===_.CURVE_TO)d+=(E.relative?"c":"C")+E.x1+" "+E.y1+" "+E.x2+" "+E.y2+" "+E.x+" "+E.y;else if(E.type===_.SMOOTH_CURVE_TO)d+=(E.relative?"s":"S")+E.x2+" "+E.y2+" "+E.x+" "+E.y;else if(E.type===_.QUAD_TO)d+=(E.relative?"q":"Q")+E.x1+" "+E.y1+" "+E.x+" "+E.y;else if(E.type===_.SMOOTH_QUAD_TO)d+=(E.relative?"t":"T")+E.x+" "+E.y;else{if(E.type!==_.ARC)throw new Error('Unexpected command type "'+E.type+'" at index '+g+".");d+=(E.relative?"a":"A")+E.rX+" "+E.rY+" "+E.xRot+" "+ +E.lArcFlag+" "+ +E.sweepFlag+" "+E.x+" "+E.y}}return d}function i(x,d){var g=x[0],E=x[1];return[g*Math.cos(d)-E*Math.sin(d),g*Math.sin(d)+E*Math.cos(d)]}function a(){for(var x=[],d=0;d<arguments.length;d++)x[d]=arguments[d];for(var g=0;g<x.length;g++)if(typeof x[g]!="number")throw new Error("assertNumbers arguments["+g+"] is not a number. "+typeof x[g]+" == typeof "+x[g]);return!0}var n=Math.PI;function o(x,d,g){x.lArcFlag=x.lArcFlag===0?0:1,x.sweepFlag=x.sweepFlag===0?0:1;var E=x.rX,b=x.rY,w=x.x,C=x.y;E=Math.abs(x.rX),b=Math.abs(x.rY);var S=i([(d-w)/2,(g-C)/2],-x.xRot/180*n),P=S[0],I=S[1],M=Math.pow(P,2)/Math.pow(E,2)+Math.pow(I,2)/Math.pow(b,2);1<M&&(E*=Math.sqrt(M),b*=Math.sqrt(M)),x.rX=E,x.rY=b;var D=Math.pow(E,2)*Math.pow(I,2)+Math.pow(b,2)*Math.pow(P,2),k=(x.lArcFlag!==x.sweepFlag?1:-1)*Math.sqrt(Math.max(0,(Math.pow(E,2)*Math.pow(b,2)-D)/D)),H=E*I/b*k,F=-b*P/E*k,j=i([H,F],x.xRot/180*n);x.cX=j[0]+(d+w)/2,x.cY=j[1]+(g+C)/2,x.phi1=Math.atan2((I-F)/b,(P-H)/E),x.phi2=Math.atan2((-I-F)/b,(-P-H)/E),x.sweepFlag===0&&x.phi2>x.phi1&&(x.phi2-=2*n),x.sweepFlag===1&&x.phi2<x.phi1&&(x.phi2+=2*n),x.phi1*=180/n,x.phi2*=180/n}function s(x,d,g){a(x,d,g);var E=x*x+d*d-g*g;if(0>E)return[];if(E===0)return[[x*g/(x*x+d*d),d*g/(x*x+d*d)]];var b=Math.sqrt(E);return[[(x*g+d*b)/(x*x+d*d),(d*g-x*b)/(x*x+d*d)],[(x*g-d*b)/(x*x+d*d),(d*g+x*b)/(x*x+d*d)]]}var u,h=Math.PI/180;function c$1(x,d,g){return(1-g)*x+g*d}function y(x,d,g,E){return x+Math.cos(E/180*n)*d+Math.sin(E/180*n)*g}function p(x,d,g,E){var b=1e-6,w=d-x,C=g-d,S=3*w+3*(E-g)-6*C,P=6*(C-w),I=3*w;return Math.abs(S)<b?[-I/P]:(function(M,D,k){var H=M*M/4-D;if(H<-k)return[];if(H<=k)return[-M/2];var F=Math.sqrt(H);return[-M/2-F,-M/2+F]})(P/S,I/S,b)}function m$1(x,d,g,E,b){var w=1-b;return x*(w*w*w)+d*(3*w*w*b)+g*(3*w*b*b)+E*(b*b*b)}(function(x){function d(){return b((function(S,P,I){return S.relative&&(S.x1!==void 0&&(S.x1+=P),S.y1!==void 0&&(S.y1+=I),S.x2!==void 0&&(S.x2+=P),S.y2!==void 0&&(S.y2+=I),S.x!==void 0&&(S.x+=P),S.y!==void 0&&(S.y+=I),S.relative=!1),S}))}function g(){var S=NaN,P=NaN,I=NaN,M=NaN;return b((function(D,k,H){return D.type&_.SMOOTH_CURVE_TO&&(D.type=_.CURVE_TO,S=isNaN(S)?k:S,P=isNaN(P)?H:P,D.x1=D.relative?k-S:2*k-S,D.y1=D.relative?H-P:2*H-P),D.type&_.CURVE_TO?(S=D.relative?k+D.x2:D.x2,P=D.relative?H+D.y2:D.y2):(S=NaN,P=NaN),D.type&_.SMOOTH_QUAD_TO&&(D.type=_.QUAD_TO,I=isNaN(I)?k:I,M=isNaN(M)?H:M,D.x1=D.relative?k-I:2*k-I,D.y1=D.relative?H-M:2*H-M),D.type&_.QUAD_TO?(I=D.relative?k+D.x1:D.x1,M=D.relative?H+D.y1:D.y1):(I=NaN,M=NaN),D}))}function E(){var S=NaN,P=NaN;return b((function(I,M,D){if(I.type&_.SMOOTH_QUAD_TO&&(I.type=_.QUAD_TO,S=isNaN(S)?M:S,P=isNaN(P)?D:P,I.x1=I.relative?M-S:2*M-S,I.y1=I.relative?D-P:2*D-P),I.type&_.QUAD_TO){S=I.relative?M+I.x1:I.x1,P=I.relative?D+I.y1:I.y1;var k=I.x1,H=I.y1;I.type=_.CURVE_TO,I.x1=((I.relative?0:M)+2*k)/3,I.y1=((I.relative?0:D)+2*H)/3,I.x2=(I.x+2*k)/3,I.y2=(I.y+2*H)/3}else S=NaN,P=NaN;return I}))}function b(S){var P=0,I=0,M=NaN,D=NaN;return function(k){if(isNaN(M)&&!(k.type&_.MOVE_TO))throw new Error("path must start with moveto");var H=S(k,P,I,M,D);return k.type&_.CLOSE_PATH&&(P=M,I=D),k.x!==void 0&&(P=k.relative?P+k.x:k.x),k.y!==void 0&&(I=k.relative?I+k.y:k.y),k.type&_.MOVE_TO&&(M=P,D=I),H}}function w(S,P,I,M,D,k){return a(S,P,I,M,D,k),b((function(H,F,j,$){var z=H.x1,U=H.x2,W=H.relative&&!isNaN($),q=H.x!==void 0?H.x:W?0:F,Z=H.y!==void 0?H.y:W?0:j;function X(ue){return ue*ue}H.type&_.HORIZ_LINE_TO&&P!==0&&(H.type=_.LINE_TO,H.y=H.relative?0:j),H.type&_.VERT_LINE_TO&&I!==0&&(H.type=_.LINE_TO,H.x=H.relative?0:F),H.x!==void 0&&(H.x=H.x*S+Z*I+(W?0:D)),H.y!==void 0&&(H.y=q*P+H.y*M+(W?0:k)),H.x1!==void 0&&(H.x1=H.x1*S+H.y1*I+(W?0:D)),H.y1!==void 0&&(H.y1=z*P+H.y1*M+(W?0:k)),H.x2!==void 0&&(H.x2=H.x2*S+H.y2*I+(W?0:D)),H.y2!==void 0&&(H.y2=U*P+H.y2*M+(W?0:k));var K=S*M-P*I;if(H.xRot!==void 0&&(S!==1||P!==0||I!==0||M!==1))if(K===0)delete H.rX,delete H.rY,delete H.xRot,delete H.lArcFlag,delete H.sweepFlag,H.type=_.LINE_TO;else{var ee=H.xRot*Math.PI/180,te=Math.sin(ee),ce=Math.cos(ee),Q=1/X(H.rX),se=1/X(H.rY),ge=X(ce)*Q+X(te)*se,Ce=2*te*ce*(Q-se),oe=X(te)*Q+X(ce)*se,he=ge*M*M-Ce*P*M+oe*P*P,de=Ce*(S*M+P*I)-2*(ge*I*M+oe*S*P),re=ge*I*I-Ce*S*I+oe*S*S,ae=(Math.atan2(de,he-re)+Math.PI)%Math.PI/2,pe=Math.sin(ae),J=Math.cos(ae);H.rX=Math.abs(K)/Math.sqrt(he*X(J)+de*pe*J+re*X(pe)),H.rY=Math.abs(K)/Math.sqrt(he*X(pe)-de*pe*J+re*X(J)),H.xRot=180*ae/Math.PI}return H.sweepFlag!==void 0&&0>K&&(H.sweepFlag=+!H.sweepFlag),H}))}function C(){return function(S){var P={};for(var I in S)P[I]=S[I];return P}}x.ROUND=function(S){function P(I){return Math.round(I*S)/S}return S===void 0&&(S=1e13),a(S),function(I){return I.x1!==void 0&&(I.x1=P(I.x1)),I.y1!==void 0&&(I.y1=P(I.y1)),I.x2!==void 0&&(I.x2=P(I.x2)),I.y2!==void 0&&(I.y2=P(I.y2)),I.x!==void 0&&(I.x=P(I.x)),I.y!==void 0&&(I.y=P(I.y)),I.rX!==void 0&&(I.rX=P(I.rX)),I.rY!==void 0&&(I.rY=P(I.rY)),I}},x.TO_ABS=d,x.TO_REL=function(){return b((function(S,P,I){return S.relative||(S.x1!==void 0&&(S.x1-=P),S.y1!==void 0&&(S.y1-=I),S.x2!==void 0&&(S.x2-=P),S.y2!==void 0&&(S.y2-=I),S.x!==void 0&&(S.x-=P),S.y!==void 0&&(S.y-=I),S.relative=!0),S}))},x.NORMALIZE_HVZ=function(S,P,I){return S===void 0&&(S=!0),P===void 0&&(P=!0),I===void 0&&(I=!0),b((function(M,D,k,H,F){if(isNaN(H)&&!(M.type&_.MOVE_TO))throw new Error("path must start with moveto");return P&&M.type&_.HORIZ_LINE_TO&&(M.type=_.LINE_TO,M.y=M.relative?0:k),I&&M.type&_.VERT_LINE_TO&&(M.type=_.LINE_TO,M.x=M.relative?0:D),S&&M.type&_.CLOSE_PATH&&(M.type=_.LINE_TO,M.x=M.relative?H-D:H,M.y=M.relative?F-k:F),M.type&_.ARC&&(M.rX===0||M.rY===0)&&(M.type=_.LINE_TO,delete M.rX,delete M.rY,delete M.xRot,delete M.lArcFlag,delete M.sweepFlag),M}))},x.NORMALIZE_ST=g,x.QT_TO_C=E,x.INFO=b,x.SANITIZE=function(S){S===void 0&&(S=0),a(S);var P=NaN,I=NaN,M=NaN,D=NaN;return b((function(k,H,F,j,$){var z=Math.abs,U=!1,W=0,q=0;if(k.type&_.SMOOTH_CURVE_TO&&(W=isNaN(P)?0:H-P,q=isNaN(I)?0:F-I),k.type&(_.CURVE_TO|_.SMOOTH_CURVE_TO)?(P=k.relative?H+k.x2:k.x2,I=k.relative?F+k.y2:k.y2):(P=NaN,I=NaN),k.type&_.SMOOTH_QUAD_TO?(M=isNaN(M)?H:2*H-M,D=isNaN(D)?F:2*F-D):k.type&_.QUAD_TO?(M=k.relative?H+k.x1:k.x1,D=k.relative?F+k.y1:k.y2):(M=NaN,D=NaN),k.type&_.LINE_COMMANDS||k.type&_.ARC&&(k.rX===0||k.rY===0||!k.lArcFlag)||k.type&_.CURVE_TO||k.type&_.SMOOTH_CURVE_TO||k.type&_.QUAD_TO||k.type&_.SMOOTH_QUAD_TO){var Z=k.x===void 0?0:k.relative?k.x:k.x-H,X=k.y===void 0?0:k.relative?k.y:k.y-F;W=isNaN(M)?k.x1===void 0?W:k.relative?k.x:k.x1-H:M-H,q=isNaN(D)?k.y1===void 0?q:k.relative?k.y:k.y1-F:D-F;var K=k.x2===void 0?0:k.relative?k.x:k.x2-H,ee=k.y2===void 0?0:k.relative?k.y:k.y2-F;z(Z)<=S&&z(X)<=S&&z(W)<=S&&z(q)<=S&&z(K)<=S&&z(ee)<=S&&(U=!0)}return k.type&_.CLOSE_PATH&&z(H-j)<=S&&z(F-$)<=S&&(U=!0),U?[]:k}))},x.MATRIX=w,x.ROTATE=function(S,P,I){P===void 0&&(P=0),I===void 0&&(I=0),a(S,P,I);var M=Math.sin(S),D=Math.cos(S);return w(D,M,-M,D,P-P*D+I*M,I-P*M-I*D)},x.TRANSLATE=function(S,P){return P===void 0&&(P=0),a(S,P),w(1,0,0,1,S,P)},x.SCALE=function(S,P){return P===void 0&&(P=S),a(S,P),w(S,0,0,P,0,0)},x.SKEW_X=function(S){return a(S),w(1,0,Math.atan(S),1,0,0)},x.SKEW_Y=function(S){return a(S),w(1,Math.atan(S),0,1,0,0)},x.X_AXIS_SYMMETRY=function(S){return S===void 0&&(S=0),a(S),w(-1,0,0,1,S,0)},x.Y_AXIS_SYMMETRY=function(S){return S===void 0&&(S=0),a(S),w(1,0,0,-1,0,S)},x.A_TO_C=function(){return b((function(S,P,I){return _.ARC===S.type?(function(M,D,k){var H,F,j,$;M.cX||o(M,D,k);for(var z=Math.min(M.phi1,M.phi2),U=Math.max(M.phi1,M.phi2)-z,W=Math.ceil(U/90),q=new Array(W),Z=D,X=k,K=0;K<W;K++){var ee=c$1(M.phi1,M.phi2,K/W),te=c$1(M.phi1,M.phi2,(K+1)/W),ce=te-ee,Q=4/3*Math.tan(ce*h/4),se=[Math.cos(ee*h)-Q*Math.sin(ee*h),Math.sin(ee*h)+Q*Math.cos(ee*h)],ge=se[0],Ce=se[1],oe=[Math.cos(te*h),Math.sin(te*h)],he=oe[0],de=oe[1],re=[he+Q*Math.sin(te*h),de-Q*Math.cos(te*h)],ae=re[0],pe=re[1];q[K]={relative:M.relative,type:_.CURVE_TO};var J=function(ue,Te){var xe=i([ue*M.rX,Te*M.rY],M.xRot),we=xe[0],Re=xe[1];return[M.cX+we,M.cY+Re]};H=J(ge,Ce),q[K].x1=H[0],q[K].y1=H[1],F=J(ae,pe),q[K].x2=F[0],q[K].y2=F[1],j=J(he,de),q[K].x=j[0],q[K].y=j[1],M.relative&&(q[K].x1-=Z,q[K].y1-=X,q[K].x2-=Z,q[K].y2-=X,q[K].x-=Z,q[K].y-=X),Z=($=[q[K].x,q[K].y])[0],X=$[1]}return q})(S,S.relative?0:P,S.relative?0:I):S}))},x.ANNOTATE_ARCS=function(){return b((function(S,P,I){return S.relative&&(P=0,I=0),_.ARC===S.type&&o(S,P,I),S}))},x.CLONE=C,x.CALCULATE_BOUNDS=function(){var S=function(k){var H={};for(var F in k)H[F]=k[F];return H},P=d(),I=E(),M=g(),D=b((function(k,H,F){var j=M(I(P(S(k))));function $(pe){pe>D.maxX&&(D.maxX=pe),pe<D.minX&&(D.minX=pe)}function z(pe){pe>D.maxY&&(D.maxY=pe),pe<D.minY&&(D.minY=pe)}if(j.type&_.DRAWING_COMMANDS&&($(H),z(F)),j.type&_.HORIZ_LINE_TO&&$(j.x),j.type&_.VERT_LINE_TO&&z(j.y),j.type&_.LINE_TO&&($(j.x),z(j.y)),j.type&_.CURVE_TO){$(j.x),z(j.y);for(var U=0,W=p(H,j.x1,j.x2,j.x);U<W.length;U++)0<(ae=W[U])&&1>ae&&$(m$1(H,j.x1,j.x2,j.x,ae));for(var q=0,Z=p(F,j.y1,j.y2,j.y);q<Z.length;q++)0<(ae=Z[q])&&1>ae&&z(m$1(F,j.y1,j.y2,j.y,ae))}if(j.type&_.ARC){$(j.x),z(j.y),o(j,H,F);for(var X=j.xRot/180*Math.PI,K=Math.cos(X)*j.rX,ee=Math.sin(X)*j.rX,te=-Math.sin(X)*j.rY,ce=Math.cos(X)*j.rY,Q=j.phi1<j.phi2?[j.phi1,j.phi2]:-180>j.phi2?[j.phi2+360,j.phi1+360]:[j.phi2,j.phi1],se=Q[0],ge=Q[1],Ce=function(pe){var J=pe[0],ue=pe[1],Te=180*Math.atan2(ue,J)/Math.PI;return Te<se?Te+360:Te},oe=0,he=s(te,-K,0).map(Ce);oe<he.length;oe++)(ae=he[oe])>se&&ae<ge&&$(y(j.cX,K,te,ae));for(var de=0,re=s(ce,-ee,0).map(Ce);de<re.length;de++){var ae;(ae=re[de])>se&&ae<ge&&z(y(j.cY,ee,ce,ae))}}return k}));return D.minX=1/0,D.maxX=-1/0,D.minY=1/0,D.maxY=-1/0,D}})(u||(u={}));var O,l=(function(){function x(){}return x.prototype.round=function(d){return this.transform(u.ROUND(d))},x.prototype.toAbs=function(){return this.transform(u.TO_ABS())},x.prototype.toRel=function(){return this.transform(u.TO_REL())},x.prototype.normalizeHVZ=function(d,g,E){return this.transform(u.NORMALIZE_HVZ(d,g,E))},x.prototype.normalizeST=function(){return this.transform(u.NORMALIZE_ST())},x.prototype.qtToC=function(){return this.transform(u.QT_TO_C())},x.prototype.aToC=function(){return this.transform(u.A_TO_C())},x.prototype.sanitize=function(d){return this.transform(u.SANITIZE(d))},x.prototype.translate=function(d,g){return this.transform(u.TRANSLATE(d,g))},x.prototype.scale=function(d,g){return this.transform(u.SCALE(d,g))},x.prototype.rotate=function(d,g,E){return this.transform(u.ROTATE(d,g,E))},x.prototype.matrix=function(d,g,E,b,w,C){return this.transform(u.MATRIX(d,g,E,b,w,C))},x.prototype.skewX=function(d){return this.transform(u.SKEW_X(d))},x.prototype.skewY=function(d){return this.transform(u.SKEW_Y(d))},x.prototype.xSymmetry=function(d){return this.transform(u.X_AXIS_SYMMETRY(d))},x.prototype.ySymmetry=function(d){return this.transform(u.Y_AXIS_SYMMETRY(d))},x.prototype.annotateArcs=function(){return this.transform(u.ANNOTATE_ARCS())},x})(),T=function(x){return x===" "||x==="	"||x==="\r"||x===`
`},v=function(x){return 48<=x.charCodeAt(0)&&x.charCodeAt(0)<=57},f=(function(x){function d(){var g=x.call(this)||this;return g.curNumber="",g.curCommandType=-1,g.curCommandRelative=!1,g.canParseCommandOrComma=!0,g.curNumberHasExp=!1,g.curNumberHasExpDigits=!1,g.curNumberHasDecimal=!1,g.curArgs=[],g}return r(d,x),d.prototype.finish=function(g){if(g===void 0&&(g=[]),this.parse(" ",g),this.curArgs.length!==0||!this.canParseCommandOrComma)throw new SyntaxError("Unterminated command at the path end.");return g},d.prototype.parse=function(g,E){var b=this;E===void 0&&(E=[]);for(var w=function(D){E.push(D),b.curArgs.length=0,b.canParseCommandOrComma=!0},C=0;C<g.length;C++){var S=g[C],P=!(this.curCommandType!==_.ARC||this.curArgs.length!==3&&this.curArgs.length!==4||this.curNumber.length!==1||this.curNumber!=="0"&&this.curNumber!=="1"),I=v(S)&&(this.curNumber==="0"&&S==="0"||P);if(!v(S)||I)if(S!=="e"&&S!=="E")if(S!=="-"&&S!=="+"||!this.curNumberHasExp||this.curNumberHasExpDigits)if(S!=="."||this.curNumberHasExp||this.curNumberHasDecimal||P){if(this.curNumber&&this.curCommandType!==-1){var M=Number(this.curNumber);if(isNaN(M))throw new SyntaxError("Invalid number ending at "+C);if(this.curCommandType===_.ARC){if(this.curArgs.length===0||this.curArgs.length===1){if(0>M)throw new SyntaxError('Expected positive number, got "'+M+'" at index "'+C+'"')}else if((this.curArgs.length===3||this.curArgs.length===4)&&this.curNumber!=="0"&&this.curNumber!=="1")throw new SyntaxError('Expected a flag, got "'+this.curNumber+'" at index "'+C+'"')}this.curArgs.push(M),this.curArgs.length===N[this.curCommandType]&&(_.HORIZ_LINE_TO===this.curCommandType?w({type:_.HORIZ_LINE_TO,relative:this.curCommandRelative,x:M}):_.VERT_LINE_TO===this.curCommandType?w({type:_.VERT_LINE_TO,relative:this.curCommandRelative,y:M}):this.curCommandType===_.MOVE_TO||this.curCommandType===_.LINE_TO||this.curCommandType===_.SMOOTH_QUAD_TO?(w({type:this.curCommandType,relative:this.curCommandRelative,x:this.curArgs[0],y:this.curArgs[1]}),_.MOVE_TO===this.curCommandType&&(this.curCommandType=_.LINE_TO)):this.curCommandType===_.CURVE_TO?w({type:_.CURVE_TO,relative:this.curCommandRelative,x1:this.curArgs[0],y1:this.curArgs[1],x2:this.curArgs[2],y2:this.curArgs[3],x:this.curArgs[4],y:this.curArgs[5]}):this.curCommandType===_.SMOOTH_CURVE_TO?w({type:_.SMOOTH_CURVE_TO,relative:this.curCommandRelative,x2:this.curArgs[0],y2:this.curArgs[1],x:this.curArgs[2],y:this.curArgs[3]}):this.curCommandType===_.QUAD_TO?w({type:_.QUAD_TO,relative:this.curCommandRelative,x1:this.curArgs[0],y1:this.curArgs[1],x:this.curArgs[2],y:this.curArgs[3]}):this.curCommandType===_.ARC&&w({type:_.ARC,relative:this.curCommandRelative,rX:this.curArgs[0],rY:this.curArgs[1],xRot:this.curArgs[2],lArcFlag:this.curArgs[3],sweepFlag:this.curArgs[4],x:this.curArgs[5],y:this.curArgs[6]})),this.curNumber="",this.curNumberHasExpDigits=!1,this.curNumberHasExp=!1,this.curNumberHasDecimal=!1,this.canParseCommandOrComma=!0}if(!T(S))if(S===","&&this.canParseCommandOrComma)this.canParseCommandOrComma=!1;else if(S!=="+"&&S!=="-"&&S!==".")if(I)this.curNumber=S,this.curNumberHasDecimal=!1;else{if(this.curArgs.length!==0)throw new SyntaxError("Unterminated command at index "+C+".");if(!this.canParseCommandOrComma)throw new SyntaxError('Unexpected character "'+S+'" at index '+C+". Command cannot follow comma");if(this.canParseCommandOrComma=!1,S!=="z"&&S!=="Z")if(S==="h"||S==="H")this.curCommandType=_.HORIZ_LINE_TO,this.curCommandRelative=S==="h";else if(S==="v"||S==="V")this.curCommandType=_.VERT_LINE_TO,this.curCommandRelative=S==="v";else if(S==="m"||S==="M")this.curCommandType=_.MOVE_TO,this.curCommandRelative=S==="m";else if(S==="l"||S==="L")this.curCommandType=_.LINE_TO,this.curCommandRelative=S==="l";else if(S==="c"||S==="C")this.curCommandType=_.CURVE_TO,this.curCommandRelative=S==="c";else if(S==="s"||S==="S")this.curCommandType=_.SMOOTH_CURVE_TO,this.curCommandRelative=S==="s";else if(S==="q"||S==="Q")this.curCommandType=_.QUAD_TO,this.curCommandRelative=S==="q";else if(S==="t"||S==="T")this.curCommandType=_.SMOOTH_QUAD_TO,this.curCommandRelative=S==="t";else{if(S!=="a"&&S!=="A")throw new SyntaxError('Unexpected character "'+S+'" at index '+C+".");this.curCommandType=_.ARC,this.curCommandRelative=S==="a"}else E.push({type:_.CLOSE_PATH}),this.canParseCommandOrComma=!0,this.curCommandType=-1}else this.curNumber=S,this.curNumberHasDecimal=S==="."}else this.curNumber+=S,this.curNumberHasDecimal=!0;else this.curNumber+=S;else this.curNumber+=S,this.curNumberHasExp=!0;else this.curNumber+=S,this.curNumberHasExpDigits=this.curNumberHasExp}return E},d.prototype.transform=function(g){return Object.create(this,{parse:{value:function(E,b){b===void 0&&(b=[]);for(var w=0,C=Object.getPrototypeOf(this).parse.call(this,E);w<C.length;w++){var S=C[w],P=g(S);Array.isArray(P)?b.push.apply(b,P):b.push(P)}return b}}})},d})(l),_=(function(x){function d(g){var E=x.call(this)||this;return E.commands=typeof g=="string"?d.parse(g):g,E}return r(d,x),d.prototype.encode=function(){return d.encode(this.commands)},d.prototype.getBounds=function(){var g=u.CALCULATE_BOUNDS();return this.transform(g),g},d.prototype.transform=function(g){for(var E=[],b=0,w=this.commands;b<w.length;b++){var C=g(w[b]);Array.isArray(C)?E.push.apply(E,C):E.push(C)}return this.commands=E,this},d.encode=function(g){return e(g)},d.parse=function(g){var E=new f,b=[];return E.parse(g,b),E.finish(b),b},d.CLOSE_PATH=1,d.MOVE_TO=2,d.HORIZ_LINE_TO=4,d.VERT_LINE_TO=8,d.LINE_TO=16,d.CURVE_TO=32,d.SMOOTH_CURVE_TO=64,d.QUAD_TO=128,d.SMOOTH_QUAD_TO=256,d.ARC=512,d.LINE_COMMANDS=d.LINE_TO|d.HORIZ_LINE_TO|d.VERT_LINE_TO,d.DRAWING_COMMANDS=d.HORIZ_LINE_TO|d.VERT_LINE_TO|d.LINE_TO|d.CURVE_TO|d.SMOOTH_CURVE_TO|d.QUAD_TO|d.SMOOTH_QUAD_TO|d.ARC,d})(l),N=((O={})[_.MOVE_TO]=2,O[_.LINE_TO]=2,O[_.HORIZ_LINE_TO]=1,O[_.VERT_LINE_TO]=1,O[_.CLOSE_PATH]=0,O[_.QUAD_TO]=4,O[_.SMOOTH_QUAD_TO]=2,O[_.CURVE_TO]=6,O[_.SMOOTH_CURVE_TO]=4,O[_.ARC]=7,O);function _typeof$1(x){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$1=function(d){return typeof d}:_typeof$1=function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":typeof d},_typeof$1(x)}function _classCallCheck$8(x,d){if(!(x instanceof d))throw new TypeError("Cannot call a class as a function")}var mulTable=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],shgTable=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function getImageDataFromCanvas(x,d,g,E,b){if(typeof x=="string"&&(x=document.getElementById(x)),!x||_typeof$1(x)!=="object"||!("getContext"in x))throw new TypeError("Expecting canvas with `getContext` method in processCanvasRGB(A) calls!");var w=x.getContext("2d");try{return w.getImageData(d,g,E,b)}catch(C){throw new Error("unable to access image data: "+C)}}function processCanvasRGBA(x,d,g,E,b,w){if(!(isNaN(w)||w<1)){w|=0;var C=getImageDataFromCanvas(x,d,g,E,b);C=processImageDataRGBA(C,d,g,E,b,w),x.getContext("2d").putImageData(C,d,g)}}function processImageDataRGBA(x,d,g,E,b,w){for(var C=x.data,S=2*w+1,P=E-1,I=b-1,M=w+1,D=M*(M+1)/2,k=new BlurStack,H=k,F,j=1;j<S;j++)H=H.next=new BlurStack,j===M&&(F=H);H.next=k;for(var $=null,z=null,U=0,W=0,q=mulTable[w],Z=shgTable[w],X=0;X<b;X++){H=k;for(var K=C[W],ee=C[W+1],te=C[W+2],ce=C[W+3],Q=0;Q<M;Q++)H.r=K,H.g=ee,H.b=te,H.a=ce,H=H.next;for(var se=0,ge=0,Ce=0,oe=0,he=M*K,de=M*ee,re=M*te,ae=M*ce,pe=D*K,J=D*ee,ue=D*te,Te=D*ce,xe=1;xe<M;xe++){var we=W+((P<xe?P:xe)<<2),Re=C[we],De=C[we+1],Ae=C[we+2],Be=C[we+3],We=M-xe;pe+=(H.r=Re)*We,J+=(H.g=De)*We,ue+=(H.b=Ae)*We,Te+=(H.a=Be)*We,se+=Re,ge+=De,Ce+=Ae,oe+=Be,H=H.next}$=k,z=F;for(var Fe=0;Fe<E;Fe++){var ze=Te*q>>>Z;if(C[W+3]=ze,ze!==0){var ct=255/ze;C[W]=(pe*q>>>Z)*ct,C[W+1]=(J*q>>>Z)*ct,C[W+2]=(ue*q>>>Z)*ct}else C[W]=C[W+1]=C[W+2]=0;pe-=he,J-=de,ue-=re,Te-=ae,he-=$.r,de-=$.g,re-=$.b,ae-=$.a;var rt=Fe+w+1;rt=U+(rt<P?rt:P)<<2,se+=$.r=C[rt],ge+=$.g=C[rt+1],Ce+=$.b=C[rt+2],oe+=$.a=C[rt+3],pe+=se,J+=ge,ue+=Ce,Te+=oe,$=$.next;var Le=z,nt=Le.r,qe=Le.g,dt=Le.b,ht=Le.a;he+=nt,de+=qe,re+=dt,ae+=ht,se-=nt,ge-=qe,Ce-=dt,oe-=ht,z=z.next,W+=4}U+=E}for(var st=0;st<E;st++){W=st<<2;var be=C[W],lt=C[W+1],et=C[W+2],tt=C[W+3],xt=M*be,Ke=M*lt,ft=M*et,ot=M*tt,vt=D*be,pt=D*lt,Ze=D*et,Ne=D*tt;H=k;for(var He=0;He<M;He++)H.r=be,H.g=lt,H.b=et,H.a=tt,H=H.next;for(var Ye=E,Tt=0,bt=0,ut=0,Xe=0,At=1;At<=w;At++){W=Ye+st<<2;var Xt=M-At;vt+=(H.r=be=C[W])*Xt,pt+=(H.g=lt=C[W+1])*Xt,Ze+=(H.b=et=C[W+2])*Xt,Ne+=(H.a=tt=C[W+3])*Xt,Xe+=be,Tt+=lt,bt+=et,ut+=tt,H=H.next,At<I&&(Ye+=E)}W=st,$=k,z=F;for(var Vt=0;Vt<b;Vt++){var _t=W<<2;C[_t+3]=tt=Ne*q>>>Z,tt>0?(tt=255/tt,C[_t]=(vt*q>>>Z)*tt,C[_t+1]=(pt*q>>>Z)*tt,C[_t+2]=(Ze*q>>>Z)*tt):C[_t]=C[_t+1]=C[_t+2]=0,vt-=xt,pt-=Ke,Ze-=ft,Ne-=ot,xt-=$.r,Ke-=$.g,ft-=$.b,ot-=$.a,_t=st+((_t=Vt+M)<I?_t:I)*E<<2,vt+=Xe+=$.r=C[_t],pt+=Tt+=$.g=C[_t+1],Ze+=bt+=$.b=C[_t+2],Ne+=ut+=$.a=C[_t+3],$=$.next,xt+=be=z.r,Ke+=lt=z.g,ft+=et=z.b,ot+=tt=z.a,Xe-=be,Tt-=lt,bt-=et,ut-=tt,z=z.next,W+=E}}return x}var BlurStack=function x(){_classCallCheck$8(this,x),this.r=0,this.g=0,this.b=0,this.a=0,this.next=null};function compressSpaces(x){return x.replace(/(?!\u3000)\s+/gm," ")}function trimLeft$1(x){return x.replace(/^[\n \t]+/,"")}function trimRight$1(x){return x.replace(/[\n \t]+$/,"")}function toNumbers(x){const d=x.match(/-?(\d+(?:\.\d*(?:[eE][+-]?\d+)?)?|\.\d+)(?=\D|$)/gm);return d?d.map(parseFloat):[]}function toMatrixValue(x){const d=toNumbers(x);return[d[0]||0,d[1]||0,d[2]||0,d[3]||0,d[4]||0,d[5]||0]}const allUppercase=/^[A-Z-]+$/;function normalizeAttributeName(x){return allUppercase.test(x)?x.toLowerCase():x}function parseExternalUrl(x){const d=/url\(('([^']+)'|"([^"]+)"|([^'")]+))\)/.exec(x);return d&&(d[2]||d[3]||d[4])||""}function normalizeColor(x){if(!x.startsWith("rgb"))return x;let d=3;return x.replace(/\d+(\.\d+)?/g,(E,b)=>d--&&b?String(Math.round(parseFloat(E))):E)}const attributeRegex=/(\[[^\]]+\])/g,idRegex=/(#[^\s+>~.[:]+)/g,classRegex=/(\.[^\s+>~.[:]+)/g,pseudoElementRegex=/(::[^\s+>~.[:]+|:first-line|:first-letter|:before|:after)/gi,pseudoClassWithBracketsRegex=/(:[\w-]+\([^)]*\))/gi,pseudoClassRegex=/(:[^\s+>~.[:]+)/g,elementRegex=/([^\s+>~.[:]+)/g;function findSelectorMatch(x,d){const g=d.exec(x);return g?[x.replace(d," "),g.length]:[x,0]}function getSelectorSpecificity(x){const d=[0,0,0];let g=x.replace(/:not\(([^)]*)\)/g,"     $1 ").replace(/{[\s\S]*/gm," "),E=0;return[g,E]=findSelectorMatch(g,attributeRegex),d[1]+=E,[g,E]=findSelectorMatch(g,idRegex),d[0]+=E,[g,E]=findSelectorMatch(g,classRegex),d[1]+=E,[g,E]=findSelectorMatch(g,pseudoElementRegex),d[2]+=E,[g,E]=findSelectorMatch(g,pseudoClassWithBracketsRegex),d[1]+=E,[g,E]=findSelectorMatch(g,pseudoClassRegex),d[1]+=E,g=g.replace(/[*\s+>~]/g," ").replace(/[#.]/g," "),[g,E]=findSelectorMatch(g,elementRegex),d[2]+=E,d.join("")}const PSEUDO_ZERO=1e-8;function vectorMagnitude(x){return Math.sqrt(Math.pow(x[0],2)+Math.pow(x[1],2))}function vectorsRatio(x,d){return(x[0]*d[0]+x[1]*d[1])/(vectorMagnitude(x)*vectorMagnitude(d))}function vectorsAngle(x,d){return(x[0]*d[1]<x[1]*d[0]?-1:1)*Math.acos(vectorsRatio(x,d))}function CB1(x){return x*x*x}function CB2(x){return 3*x*x*(1-x)}function CB3(x){return 3*x*(1-x)*(1-x)}function CB4(x){return(1-x)*(1-x)*(1-x)}function QB1(x){return x*x}function QB2(x){return 2*x*(1-x)}function QB3(x){return(1-x)*(1-x)}class Property{static empty(d){return new Property(d,"EMPTY","")}split(){let d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:" ";const{document:g,name:E}=this;return compressSpaces(this.getString()).trim().split(d).map(b=>new Property(g,E,b))}hasValue(d){const g=this.value;return g!==null&&g!==""&&(d||g!==0)&&typeof g<"u"}isString(d){const{value:g}=this,E=typeof g=="string";return!E||!d?E:d.test(g)}isUrlDefinition(){return this.isString(/^url\(/)}isPixels(){if(!this.hasValue())return!1;const d=this.getString();switch(!0){case d.endsWith("px"):case/^[0-9]+$/.test(d):return!0;default:return!1}}setValue(d){return this.value=d,this}getValue(d){return typeof d>"u"||this.hasValue()?this.value:d}getNumber(d){if(!this.hasValue())return typeof d>"u"?0:parseFloat(d);const{value:g}=this;let E=parseFloat(g);return this.isString(/%$/)&&(E/=100),E}getString(d){return typeof d>"u"||this.hasValue()?typeof this.value>"u"?"":String(this.value):String(d)}getColor(d){let g=this.getString(d);return this.isNormalizedColor||(this.isNormalizedColor=!0,g=normalizeColor(g),this.value=g),g}getDpi(){return 96}getRem(){return this.document.rootEmSize}getEm(){return this.document.emSize}getUnits(){return this.getString().replace(/[0-9.-]/g,"")}getPixels(d){let g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(!this.hasValue())return 0;const[E,b]=typeof d=="boolean"?[void 0,d]:[d],{viewPort:w}=this.document.screen;switch(!0){case this.isString(/vmin$/):return this.getNumber()/100*Math.min(w.computeSize("x"),w.computeSize("y"));case this.isString(/vmax$/):return this.getNumber()/100*Math.max(w.computeSize("x"),w.computeSize("y"));case this.isString(/vw$/):return this.getNumber()/100*w.computeSize("x");case this.isString(/vh$/):return this.getNumber()/100*w.computeSize("y");case this.isString(/rem$/):return this.getNumber()*this.getRem();case this.isString(/em$/):return this.getNumber()*this.getEm();case this.isString(/ex$/):return this.getNumber()*this.getEm()/2;case this.isString(/px$/):return this.getNumber();case this.isString(/pt$/):return this.getNumber()*this.getDpi()*(1/72);case this.isString(/pc$/):return this.getNumber()*15;case this.isString(/cm$/):return this.getNumber()*this.getDpi()/2.54;case this.isString(/mm$/):return this.getNumber()*this.getDpi()/25.4;case this.isString(/in$/):return this.getNumber()*this.getDpi();case(this.isString(/%$/)&&b):return this.getNumber()*this.getEm();case this.isString(/%$/):return this.getNumber()*w.computeSize(E);default:{const C=this.getNumber();return g&&C<1?C*w.computeSize(E):C}}}getMilliseconds(){return this.hasValue()?this.isString(/ms$/)?this.getNumber():this.getNumber()*1e3:0}getRadians(){if(!this.hasValue())return 0;switch(!0){case this.isString(/deg$/):return this.getNumber()*(Math.PI/180);case this.isString(/grad$/):return this.getNumber()*(Math.PI/200);case this.isString(/rad$/):return this.getNumber();default:return this.getNumber()*(Math.PI/180)}}getDefinition(){const d=this.getString(),g=/#([^)'"]+)/.exec(d),E=(g==null?void 0:g[1])||d;return this.document.definitions.get(E)}getFillStyleDefinition(d,g){let E=this.getDefinition();if(!E)return null;if(typeof E.createGradient=="function"&&"getBoundingBox"in d)return E.createGradient(this.document.ctx,d,g);if(typeof E.createPattern=="function"){if(E.getHrefAttribute().hasValue()){const b=E.getAttribute("patternTransform");E=E.getHrefAttribute().getDefinition(),E&&b.hasValue()&&E.getAttribute("patternTransform",!0).setValue(b.value)}if(E)return E.createPattern(this.document.ctx,d,g)}return null}getTextBaseline(){if(!this.hasValue())return null;const d=this.getString();return Property.textBaselineMapping[d]||null}addOpacity(d){let g=this.getColor();const E=g.length;let b=0;for(let w=0;w<E&&(g[w]===","&&b++,b!==3);w++);if(d.hasValue()&&this.isString()&&b!==3){const w=new RGBColor$1(g);w.ok&&(w.alpha=d.getNumber(),g=w.toRGBA())}return new Property(this.document,this.name,g)}constructor(d,g,E){this.document=d,this.name=g,this.value=E,this.isNormalizedColor=!1}}Property.textBaselineMapping={baseline:"alphabetic","before-edge":"top","text-before-edge":"top",middle:"middle",central:"middle","after-edge":"bottom","text-after-edge":"bottom",ideographic:"ideographic",alphabetic:"alphabetic",hanging:"hanging",mathematical:"alphabetic"};class ViewPort{clear(){this.viewPorts=[]}setCurrent(d,g){this.viewPorts.push({width:d,height:g})}removeCurrent(){this.viewPorts.pop()}getRoot(){const[d]=this.viewPorts;return d||getDefault()}getCurrent(){const{viewPorts:d}=this,g=d[d.length-1];return g||getDefault()}get width(){return this.getCurrent().width}get height(){return this.getCurrent().height}computeSize(d){return typeof d=="number"?d:d==="x"?this.width:d==="y"?this.height:Math.sqrt(Math.pow(this.width,2)+Math.pow(this.height,2))/Math.sqrt(2)}constructor(){this.viewPorts=[]}}ViewPort.DEFAULT_VIEWPORT_WIDTH=800;ViewPort.DEFAULT_VIEWPORT_HEIGHT=600;function getDefault(){return{width:ViewPort.DEFAULT_VIEWPORT_WIDTH,height:ViewPort.DEFAULT_VIEWPORT_HEIGHT}}let Point$1=class ua{static parse(d){let g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;const[E=g,b=g]=toNumbers(d);return new ua(E,b)}static parseScale(d){let g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;const[E=g,b=E]=toNumbers(d);return new ua(E,b)}static parsePath(d){const g=toNumbers(d),E=g.length,b=[];for(let w=0;w<E;w+=2)b.push(new ua(g[w],g[w+1]));return b}angleTo(d){return Math.atan2(d.y-this.y,d.x-this.x)}applyTransform(d){const{x:g,y:E}=this,b=g*d[0]+E*d[2]+d[4],w=g*d[1]+E*d[3]+d[5];this.x=b,this.y=w}constructor(d,g){this.x=d,this.y=g}};class Mouse{isWorking(){return this.working}start(){if(this.working)return;const{screen:d,onClick:g,onMouseMove:E}=this,b=d.ctx.canvas;b.onclick=g,b.onmousemove=E,this.working=!0}stop(){if(!this.working)return;const d=this.screen.ctx.canvas;this.working=!1,d.onclick=null,d.onmousemove=null}hasEvents(){return this.working&&this.events.length>0}runEvents(){if(!this.working)return;const{screen:d,events:g,eventElements:E}=this,{style:b}=d.ctx.canvas;let w;b&&(b.cursor=""),g.forEach((C,S)=>{let{run:P}=C;for(w=E[S];w;)P(w),w=w.parent}),this.events=[],this.eventElements=[]}checkPath(d,g){if(!this.working||!g)return;const{events:E,eventElements:b}=this;E.forEach((w,C)=>{let{x:S,y:P}=w;!b[C]&&g.isPointInPath&&g.isPointInPath(S,P)&&(b[C]=d)})}checkBoundingBox(d,g){if(!this.working||!g)return;const{events:E,eventElements:b}=this;E.forEach((w,C)=>{let{x:S,y:P}=w;!b[C]&&g.isPointInBox(S,P)&&(b[C]=d)})}mapXY(d,g){const{window:E,ctx:b}=this.screen,w=new Point$1(d,g);let C=b.canvas;for(;C;)w.x-=C.offsetLeft,w.y-=C.offsetTop,C=C.offsetParent;return E!=null&&E.scrollX&&(w.x+=E.scrollX),E!=null&&E.scrollY&&(w.y+=E.scrollY),w}onClick(d){const{x:g,y:E}=this.mapXY(d.clientX,d.clientY);this.events.push({type:"onclick",x:g,y:E,run(b){b.onClick&&b.onClick()}})}onMouseMove(d){const{x:g,y:E}=this.mapXY(d.clientX,d.clientY);this.events.push({type:"onmousemove",x:g,y:E,run(b){b.onMouseMove&&b.onMouseMove()}})}constructor(d){this.screen=d,this.working=!1,this.events=[],this.eventElements=[],this.onClick=this.onClick.bind(this),this.onMouseMove=this.onMouseMove.bind(this)}}const defaultWindow=typeof window<"u"?window:null,defaultFetch$1=typeof fetch<"u"?fetch.bind(void 0):void 0;class Screen{wait(d){this.waits.push(d)}ready(){return this.readyPromise?this.readyPromise:Promise.resolve()}isReady(){if(this.isReadyLock)return!0;const d=this.waits.every(g=>g());return d&&(this.waits=[],this.resolveReady&&this.resolveReady()),this.isReadyLock=d,d}setDefaults(d){d.strokeStyle="rgba(0,0,0,0)",d.lineCap="butt",d.lineJoin="miter",d.miterLimit=4}setViewBox(d){let{document:g,ctx:E,aspectRatio:b,width:w,desiredWidth:C,height:S,desiredHeight:P,minX:I=0,minY:M=0,refX:D,refY:k,clip:H=!1,clipX:F=0,clipY:j=0}=d;const $=compressSpaces(b).replace(/^defer\s/,""),[z,U]=$.split(" "),W=z||"xMidYMid",q=U||"meet",Z=w/C,X=S/P,K=Math.min(Z,X),ee=Math.max(Z,X);let te=C,ce=P;q==="meet"&&(te*=K,ce*=K),q==="slice"&&(te*=ee,ce*=ee);const Q=new Property(g,"refX",D),se=new Property(g,"refY",k),ge=Q.hasValue()&&se.hasValue();if(ge&&E.translate(-K*Q.getPixels("x"),-K*se.getPixels("y")),H){const Ce=K*F,oe=K*j;E.beginPath(),E.moveTo(Ce,oe),E.lineTo(w,oe),E.lineTo(w,S),E.lineTo(Ce,S),E.closePath(),E.clip()}if(!ge){const Ce=q==="meet"&&K===X,oe=q==="slice"&&ee===X,he=q==="meet"&&K===Z,de=q==="slice"&&ee===Z;W.startsWith("xMid")&&(Ce||oe)&&E.translate(w/2-te/2,0),W.endsWith("YMid")&&(he||de)&&E.translate(0,S/2-ce/2),W.startsWith("xMax")&&(Ce||oe)&&E.translate(w-te,0),W.endsWith("YMax")&&(he||de)&&E.translate(0,S-ce)}switch(!0){case W==="none":E.scale(Z,X);break;case q==="meet":E.scale(K,K);break;case q==="slice":E.scale(ee,ee);break}E.translate(-I,-M)}start(d){let{enableRedraw:g=!1,ignoreMouse:E=!1,ignoreAnimation:b=!1,ignoreDimensions:w=!1,ignoreClear:C=!1,forceRedraw:S,scaleWidth:P,scaleHeight:I,offsetX:M,offsetY:D}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{mouse:k}=this,H=1e3/Screen.FRAMERATE;if(this.isReadyLock=!1,this.frameDuration=H,this.readyPromise=new Promise(U=>{this.resolveReady=U}),this.isReady()&&this.render(d,w,C,P,I,M,D),!g)return;let F=Date.now(),j=F,$=0;const z=()=>{F=Date.now(),$=F-j,$>=H&&(j=F-$%H,this.shouldUpdate(b,S)&&(this.render(d,w,C,P,I,M,D),k.runEvents())),this.intervalId=requestAnimationFrame$1(z)};E||k.start(),this.intervalId=requestAnimationFrame$1(z)}stop(){this.intervalId&&(requestAnimationFrame$1.cancel(this.intervalId),this.intervalId=null),this.mouse.stop()}shouldUpdate(d,g){if(!d){const{frameDuration:E}=this;if(this.animations.reduce((w,C)=>C.update(E)||w,!1))return!0}return!!(typeof g=="function"&&g()||!this.isReadyLock&&this.isReady()||this.mouse.hasEvents())}render(d,g,E,b,w,C,S){const{viewPort:P,ctx:I,isFirstRender:M}=this,D=I.canvas;P.clear(),D.width&&D.height&&P.setCurrent(D.width,D.height);const k=d.getStyle("width"),H=d.getStyle("height");!g&&(M||typeof b!="number"&&typeof w!="number")&&(k.hasValue()&&(D.width=k.getPixels("x"),D.style&&(D.style.width="".concat(D.width,"px"))),H.hasValue()&&(D.height=H.getPixels("y"),D.style&&(D.style.height="".concat(D.height,"px"))));let F=D.clientWidth||D.width,j=D.clientHeight||D.height;if(g&&k.hasValue()&&H.hasValue()&&(F=k.getPixels("x"),j=H.getPixels("y")),P.setCurrent(F,j),typeof C=="number"&&d.getAttribute("x",!0).setValue(C),typeof S=="number"&&d.getAttribute("y",!0).setValue(S),typeof b=="number"||typeof w=="number"){const $=toNumbers(d.getAttribute("viewBox").getString());let z=0,U=0;if(typeof b=="number"){const q=d.getStyle("width");q.hasValue()?z=q.getPixels("x")/b:$[2]&&!isNaN($[2])&&(z=$[2]/b)}if(typeof w=="number"){const q=d.getStyle("height");q.hasValue()?U=q.getPixels("y")/w:$[3]&&!isNaN($[3])&&(U=$[3]/w)}z||(z=U),U||(U=z),d.getAttribute("width",!0).setValue(b),d.getAttribute("height",!0).setValue(w);const W=d.getStyle("transform",!0,!0);W.setValue("".concat(W.getString()," scale(").concat(1/z,", ").concat(1/U,")"))}E||I.clearRect(0,0,F,j),d.render(I),M&&(this.isFirstRender=!1)}constructor(d,{fetch:g=defaultFetch$1,window:E=defaultWindow}={}){if(this.ctx=d,this.viewPort=new ViewPort,this.mouse=new Mouse(this),this.animations=[],this.waits=[],this.frameDuration=0,this.isReadyLock=!1,this.isFirstRender=!0,this.intervalId=null,this.window=E,!g)throw new Error("Can't find 'fetch' in 'globalThis', please provide it via options");this.fetch=g}}Screen.defaultWindow=defaultWindow;Screen.defaultFetch=defaultFetch$1;Screen.FRAMERATE=30;Screen.MAX_VIRTUAL_PIXELS=3e4;const{defaultFetch}=Screen,DefaultDOMParser=typeof DOMParser<"u"?DOMParser:void 0;class Parser{async parse(d){return d.startsWith("<")?this.parseFromString(d):this.load(d)}parseFromString(d){const g=new this.DOMParser;try{return this.checkDocument(g.parseFromString(d,"image/svg+xml"))}catch{return this.checkDocument(g.parseFromString(d,"text/xml"))}}checkDocument(d){const g=d.getElementsByTagName("parsererror")[0];if(g)throw new Error(g.textContent||"Unknown parse error");return d}async load(d){const E=await(await this.fetch(d)).text();return this.parseFromString(E)}constructor({fetch:d=defaultFetch,DOMParser:g=DefaultDOMParser}={}){if(!d)throw new Error("Can't find 'fetch' in 'globalThis', please provide it via options");if(!g)throw new Error("Can't find 'DOMParser' in 'globalThis', please provide it via options");this.fetch=d,this.DOMParser=g}}class Translate{apply(d){const{x:g,y:E}=this.point;d.translate(g||0,E||0)}unapply(d){const{x:g,y:E}=this.point;d.translate(-1*g||0,-1*E||0)}applyToPoint(d){const{x:g,y:E}=this.point;d.applyTransform([1,0,0,1,g||0,E||0])}constructor(d,g){this.type="translate",this.point=Point$1.parse(g)}}class Rotate{apply(d){const{cx:g,cy:E,originX:b,originY:w,angle:C}=this,S=g+b.getPixels("x"),P=E+w.getPixels("y");d.translate(S,P),d.rotate(C.getRadians()),d.translate(-S,-P)}unapply(d){const{cx:g,cy:E,originX:b,originY:w,angle:C}=this,S=g+b.getPixels("x"),P=E+w.getPixels("y");d.translate(S,P),d.rotate(-1*C.getRadians()),d.translate(-S,-P)}applyToPoint(d){const{cx:g,cy:E,angle:b}=this,w=b.getRadians();d.applyTransform([1,0,0,1,g||0,E||0]),d.applyTransform([Math.cos(w),Math.sin(w),-Math.sin(w),Math.cos(w),0,0]),d.applyTransform([1,0,0,1,-g||0,-E||0])}constructor(d,g,E){this.type="rotate";const b=toNumbers(g);this.angle=new Property(d,"angle",b[0]),this.originX=E[0],this.originY=E[1],this.cx=b[1]||0,this.cy=b[2]||0}}class Scale{apply(d){const{scale:{x:g,y:E},originX:b,originY:w}=this,C=b.getPixels("x"),S=w.getPixels("y");d.translate(C,S),d.scale(g,E||g),d.translate(-C,-S)}unapply(d){const{scale:{x:g,y:E},originX:b,originY:w}=this,C=b.getPixels("x"),S=w.getPixels("y");d.translate(C,S),d.scale(1/g,1/E||g),d.translate(-C,-S)}applyToPoint(d){const{x:g,y:E}=this.scale;d.applyTransform([g||0,0,0,E||0,0,0])}constructor(d,g,E){this.type="scale";const b=Point$1.parseScale(g);(b.x===0||b.y===0)&&(b.x=PSEUDO_ZERO,b.y=PSEUDO_ZERO),this.scale=b,this.originX=E[0],this.originY=E[1]}}class Matrix{apply(d){const{originX:g,originY:E,matrix:b}=this,w=g.getPixels("x"),C=E.getPixels("y");d.translate(w,C),d.transform(b[0],b[1],b[2],b[3],b[4],b[5]),d.translate(-w,-C)}unapply(d){const{originX:g,originY:E,matrix:b}=this,w=b[0],C=b[2],S=b[4],P=b[1],I=b[3],M=b[5],D=0,k=0,H=1,F=1/(w*(I*H-M*k)-C*(P*H-M*D)+S*(P*k-I*D)),j=g.getPixels("x"),$=E.getPixels("y");d.translate(j,$),d.transform(F*(I*H-M*k),F*(M*D-P*H),F*(S*k-C*H),F*(w*H-S*D),F*(C*M-S*I),F*(S*P-w*M)),d.translate(-j,-$)}applyToPoint(d){d.applyTransform(this.matrix)}constructor(d,g,E){this.type="matrix",this.matrix=toMatrixValue(g),this.originX=E[0],this.originY=E[1]}}class Skew extends Matrix{constructor(d,g,E){super(d,g,E),this.type="skew",this.angle=new Property(d,"angle",g)}}class SkewX extends Skew{constructor(d,g,E){super(d,g,E),this.type="skewX",this.matrix=[1,0,Math.tan(this.angle.getRadians()),1,0,0]}}class SkewY extends Skew{constructor(d,g,E){super(d,g,E),this.type="skewY",this.matrix=[1,Math.tan(this.angle.getRadians()),0,1,0,0]}}function parseTransforms(x){return compressSpaces(x).trim().replace(/\)([a-zA-Z])/g,") $1").replace(/\)(\s?,\s?)/g,") ").split(/\s(?=[a-z])/)}function parseTransform(x){const[d="",g=""]=x.split("(");return[d.trim(),g.trim().replace(")","")]}let Transform$1=class Zo{static fromElement(d,g){const E=g.getStyle("transform",!1,!0);if(E.hasValue()){const[b,w=b]=g.getStyle("transform-origin",!1,!0).split();if(b&&w){const C=[b,w];return new Zo(d,E.getString(),C)}}return null}apply(d){this.transforms.forEach(g=>g.apply(d))}unapply(d){this.transforms.forEach(g=>g.unapply(d))}applyToPoint(d){this.transforms.forEach(g=>g.applyToPoint(d))}constructor(d,g,E){this.document=d,this.transforms=[],parseTransforms(g).forEach(w=>{if(w==="none")return;const[C,S]=parseTransform(w),P=Zo.transformTypes[C];P&&this.transforms.push(new P(this.document,S,E))})}};Transform$1.transformTypes={translate:Translate,rotate:Rotate,scale:Scale,matrix:Matrix,skewX:SkewX,skewY:SkewY};let Element$1=class Xo{getAttribute(d){let g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const E=this.attributes.get(d);if(!E&&g){const b=new Property(this.document,d,"");return this.attributes.set(d,b),b}return E||Property.empty(this.document)}getHrefAttribute(){let d;for(const[g,E]of this.attributes)if(g==="href"||g.endsWith(":href")){d=E;break}return d||Property.empty(this.document)}getStyle(d){let g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,E=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;const b=this.styles.get(d);if(b)return b;const w=this.getAttribute(d);if(w.hasValue())return this.styles.set(d,w),w;if(!E){const{parent:C}=this;if(C){const S=C.getStyle(d);if(S.hasValue())return S}}if(g){const C=new Property(this.document,d,"");return this.styles.set(d,C),C}return Property.empty(this.document)}render(d){if(!(this.getStyle("display").getString()==="none"||this.getStyle("visibility").getString()==="hidden")){if(d.save(),this.getStyle("mask").hasValue()){const g=this.getStyle("mask").getDefinition();g&&(this.applyEffects(d),g.apply(d,this))}else if(this.getStyle("filter").getValue("none")!=="none"){const g=this.getStyle("filter").getDefinition();g&&(this.applyEffects(d),g.apply(d,this))}else this.setContext(d),this.renderChildren(d),this.clearContext(d);d.restore()}}setContext(d){}applyEffects(d){const g=Transform$1.fromElement(this.document,this);g&&g.apply(d);const E=this.getStyle("clip-path",!1,!0);if(E.hasValue()){const b=E.getDefinition();b&&b.apply(d)}}clearContext(d){}renderChildren(d){this.children.forEach(g=>{g.render(d)})}addChild(d){const g=d instanceof Xo?d:this.document.createElement(d);g.parent=this,Xo.ignoreChildTypes.includes(g.type)||this.children.push(g)}matchesSelector(d){var g;const{node:E}=this;if(typeof E.matches=="function")return E.matches(d);const b=(g=E.getAttribute)===null||g===void 0?void 0:g.call(E,"class");return!b||b===""?!1:b.split(" ").some(w=>".".concat(w)===d)}addStylesFromStyleDefinition(){const{styles:d,stylesSpecificity:g}=this.document;for(const[E,b]of d)if(!E.startsWith("@")&&this.matchesSelector(E)){const w=g.get(E);if(b)for(const[C,S]of b){let P=this.stylesSpecificity.get(C);typeof P>"u"&&(P="000"),w&&w>=P&&(S&&this.styles.set(C,S),this.stylesSpecificity.set(C,w))}}}removeStyles(d,g){return g.reduce((b,w)=>{const C=d.getStyle(w);if(!C.hasValue())return b;const S=C.getString();return C.setValue(""),[...b,[w,S]]},[])}restoreStyles(d,g){g.forEach(E=>{let[b,w]=E;d.getStyle(b,!0).setValue(w)})}isFirstChild(){var d;return((d=this.parent)===null||d===void 0?void 0:d.children.indexOf(this))===0}constructor(d,g,E=!1){if(this.document=d,this.node=g,this.captureTextNodes=E,this.type="",this.attributes=new Map,this.styles=new Map,this.stylesSpecificity=new Map,this.animationFrozen=!1,this.animationFrozenValue="",this.parent=null,this.children=[],!g||g.nodeType!==1)return;Array.from(g.attributes).forEach(C=>{const S=normalizeAttributeName(C.nodeName);this.attributes.set(S,new Property(d,S,C.value))}),this.addStylesFromStyleDefinition(),this.getAttribute("style").hasValue()&&this.getAttribute("style").getString().split(";").map(S=>S.trim()).forEach(S=>{if(!S)return;const[P,I]=S.split(":").map(M=>M.trim());P&&this.styles.set(P,new Property(d,P,I))});const{definitions:b}=d,w=this.getAttribute("id");w.hasValue()&&(b.has(w.getString())||b.set(w.getString(),this)),Array.from(g.childNodes).forEach(C=>{if(C.nodeType===1)this.addChild(C);else if(E&&(C.nodeType===3||C.nodeType===4)){const S=d.createTextNode(C);S.getText().length>0&&this.addChild(S)}})}};Element$1.ignoreChildTypes=["title"];class UnknownElement extends Element$1{constructor(d,g,E){super(d,g,E)}}function wrapFontFamily(x){const d=x.trim();return/^('|")/.test(d)?d:'"'.concat(d,'"')}function prepareFontFamily(x){return typeof process>"u"?x:x.trim().split(",").map(wrapFontFamily).join(",")}function prepareFontStyle(x){if(!x)return"";const d=x.trim().toLowerCase();switch(d){case"normal":case"italic":case"oblique":case"inherit":case"initial":case"unset":return d;default:return/^oblique\s+(-|)\d+deg$/.test(d)?d:""}}function prepareFontWeight(x){if(!x)return"";const d=x.trim().toLowerCase();switch(d){case"normal":case"bold":case"lighter":case"bolder":case"inherit":case"initial":case"unset":return d;default:return/^[\d.]+$/.test(d)?d:""}}class Font{static parse(){let d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",g=arguments.length>1?arguments[1]:void 0,E="",b="",w="",C="",S="";const P=compressSpaces(d).trim().split(" "),I={fontSize:!1,fontStyle:!1,fontWeight:!1,fontVariant:!1};return P.forEach(M=>{switch(!0){case(!I.fontStyle&&Font.styles.includes(M)):M!=="inherit"&&(E=M),I.fontStyle=!0;break;case(!I.fontVariant&&Font.variants.includes(M)):M!=="inherit"&&(b=M),I.fontStyle=!0,I.fontVariant=!0;break;case(!I.fontWeight&&Font.weights.includes(M)):M!=="inherit"&&(w=M),I.fontStyle=!0,I.fontVariant=!0,I.fontWeight=!0;break;case!I.fontSize:M!=="inherit"&&(C=M.split("/")[0]||""),I.fontStyle=!0,I.fontVariant=!0,I.fontWeight=!0,I.fontSize=!0;break;default:M!=="inherit"&&(S+=M)}}),new Font(E,b,w,C,S,g)}toString(){return[prepareFontStyle(this.fontStyle),this.fontVariant,prepareFontWeight(this.fontWeight),this.fontSize,prepareFontFamily(this.fontFamily)].join(" ").trim()}constructor(d,g,E,b,w,C){const S=C?typeof C=="string"?Font.parse(C):C:{};this.fontFamily=w||S.fontFamily,this.fontSize=b||S.fontSize,this.fontStyle=d||S.fontStyle,this.fontWeight=E||S.fontWeight,this.fontVariant=g||S.fontVariant}}Font.styles="normal|italic|oblique|inherit";Font.variants="normal|small-caps|inherit";Font.weights="normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900|inherit";class BoundingBox{get x(){return this.x1}get y(){return this.y1}get width(){return this.x2-this.x1}get height(){return this.y2-this.y1}addPoint(d,g){typeof d<"u"&&((isNaN(this.x1)||isNaN(this.x2))&&(this.x1=d,this.x2=d),d<this.x1&&(this.x1=d),d>this.x2&&(this.x2=d)),typeof g<"u"&&((isNaN(this.y1)||isNaN(this.y2))&&(this.y1=g,this.y2=g),g<this.y1&&(this.y1=g),g>this.y2&&(this.y2=g))}addX(d){this.addPoint(d,0)}addY(d){this.addPoint(0,d)}addBoundingBox(d){if(!d)return;const{x1:g,y1:E,x2:b,y2:w}=d;this.addPoint(g,E),this.addPoint(b,w)}sumCubic(d,g,E,b,w){return Math.pow(1-d,3)*g+3*Math.pow(1-d,2)*d*E+3*(1-d)*Math.pow(d,2)*b+Math.pow(d,3)*w}bezierCurveAdd(d,g,E,b,w){const C=6*g-12*E+6*b,S=-3*g+9*E-9*b+3*w,P=3*E-3*g;if(S===0){if(C===0)return;const k=-P/C;0<k&&k<1&&(d?this.addX(this.sumCubic(k,g,E,b,w)):this.addY(this.sumCubic(k,g,E,b,w)));return}const I=Math.pow(C,2)-4*P*S;if(I<0)return;const M=(-C+Math.sqrt(I))/(2*S);0<M&&M<1&&(d?this.addX(this.sumCubic(M,g,E,b,w)):this.addY(this.sumCubic(M,g,E,b,w)));const D=(-C-Math.sqrt(I))/(2*S);0<D&&D<1&&(d?this.addX(this.sumCubic(D,g,E,b,w)):this.addY(this.sumCubic(D,g,E,b,w)))}addBezierCurve(d,g,E,b,w,C,S,P){this.addPoint(d,g),this.addPoint(S,P),this.bezierCurveAdd(!0,d,E,w,S),this.bezierCurveAdd(!1,g,b,C,P)}addQuadraticCurve(d,g,E,b,w,C){const S=d+.6666666666666666*(E-d),P=g+2/3*(b-g),I=S+1/3*(w-d),M=P+1/3*(C-g);this.addBezierCurve(d,g,S,I,P,M,w,C)}isPointInBox(d,g){const{x1:E,y1:b,x2:w,y2:C}=this;return E<=d&&d<=w&&b<=g&&g<=C}constructor(d=Number.NaN,g=Number.NaN,E=Number.NaN,b=Number.NaN){this.x1=d,this.y1=g,this.x2=E,this.y2=b,this.addPoint(d,g),this.addPoint(E,b)}}class RenderedElement extends Element$1{calculateOpacity(){let d=1,g=this;for(;g;){const E=g.getStyle("opacity",!1,!0);E.hasValue(!0)&&(d*=E.getNumber()),g=g.parent}return d}setContext(d){let g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(!g){const E=this.getStyle("fill"),b=this.getStyle("fill-opacity"),w=this.getStyle("stroke"),C=this.getStyle("stroke-opacity");if(E.isUrlDefinition()){const H=E.getFillStyleDefinition(this,b);H&&(d.fillStyle=H)}else if(E.hasValue()){E.getString()==="currentColor"&&E.setValue(this.getStyle("color").getColor());const H=E.getColor();H!=="inherit"&&(d.fillStyle=H==="none"?"rgba(0,0,0,0)":H)}if(b.hasValue()){const H=new Property(this.document,"fill",d.fillStyle).addOpacity(b).getColor();d.fillStyle=H}if(w.isUrlDefinition()){const H=w.getFillStyleDefinition(this,C);H&&(d.strokeStyle=H)}else if(w.hasValue()){w.getString()==="currentColor"&&w.setValue(this.getStyle("color").getColor());const H=w.getString();H!=="inherit"&&(d.strokeStyle=H==="none"?"rgba(0,0,0,0)":H)}if(C.hasValue()){const H=new Property(this.document,"stroke",d.strokeStyle).addOpacity(C).getString();d.strokeStyle=H}const S=this.getStyle("stroke-width");if(S.hasValue()){const H=S.getPixels();d.lineWidth=H||PSEUDO_ZERO}const P=this.getStyle("stroke-linecap"),I=this.getStyle("stroke-linejoin"),M=this.getStyle("stroke-miterlimit"),D=this.getStyle("stroke-dasharray"),k=this.getStyle("stroke-dashoffset");if(P.hasValue()&&(d.lineCap=P.getString()),I.hasValue()&&(d.lineJoin=I.getString()),M.hasValue()&&(d.miterLimit=M.getNumber()),D.hasValue()&&D.getString()!=="none"){const H=toNumbers(D.getString());typeof d.setLineDash<"u"?d.setLineDash(H):typeof d.webkitLineDash<"u"?d.webkitLineDash=H:typeof d.mozDash<"u"&&!(H.length===1&&H[0]===0)&&(d.mozDash=H);const F=k.getPixels();typeof d.lineDashOffset<"u"?d.lineDashOffset=F:typeof d.webkitLineDashOffset<"u"?d.webkitLineDashOffset=F:typeof d.mozDashOffset<"u"&&(d.mozDashOffset=F)}}if(this.modifiedEmSizeStack=!1,typeof d.font<"u"){const E=this.getStyle("font"),b=this.getStyle("font-style"),w=this.getStyle("font-variant"),C=this.getStyle("font-weight"),S=this.getStyle("font-size"),P=this.getStyle("font-family"),I=new Font(b.getString(),w.getString(),C.getString(),S.hasValue()?"".concat(S.getPixels(!0),"px"):"",P.getString(),Font.parse(E.getString(),d.font));b.setValue(I.fontStyle),w.setValue(I.fontVariant),C.setValue(I.fontWeight),S.setValue(I.fontSize),P.setValue(I.fontFamily),d.font=I.toString(),S.isPixels()&&(this.document.emSize=S.getPixels(),this.modifiedEmSizeStack=!0)}g||(this.applyEffects(d),d.globalAlpha=this.calculateOpacity())}clearContext(d){super.clearContext(d),this.modifiedEmSizeStack&&this.document.popEmSize()}constructor(...d){super(...d),this.modifiedEmSizeStack=!1}}class TextElement extends RenderedElement{setContext(d){let g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;super.setContext(d,g);const E=this.getStyle("dominant-baseline").getTextBaseline()||this.getStyle("alignment-baseline").getTextBaseline();E&&(d.textBaseline=E)}initializeCoordinates(){this.x=0,this.y=0,this.leafTexts=[],this.textChunkStart=0,this.minX=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY}getBoundingBox(d){if(this.type!=="text")return this.getTElementBoundingBox(d);this.initializeCoordinates(),this.adjustChildCoordinatesRecursive(d);let g=null;return this.children.forEach((E,b)=>{const w=this.getChildBoundingBox(d,this,this,b);g?g.addBoundingBox(w):g=w}),g}getFontSize(){const{document:d,parent:g}=this,E=Font.parse(d.ctx.font).fontSize;return g.getStyle("font-size").getNumber(E)}getTElementBoundingBox(d){const g=this.getFontSize();return new BoundingBox(this.x,this.y-g,this.x+this.measureText(d),this.y)}getGlyph(d,g,E){const b=g[E];let w;if(d.isArabic){var C;const S=g.length,P=g[E-1],I=g[E+1];let M="isolated";(E===0||P===" ")&&E<S-1&&I!==" "&&(M="terminal"),E>0&&P!==" "&&E<S-1&&I!==" "&&(M="medial"),E>0&&P!==" "&&(E===S-1||I===" ")&&(M="initial"),w=((C=d.arabicGlyphs.get(b))===null||C===void 0?void 0:C.get(M))||d.glyphs.get(b)}else w=d.glyphs.get(b);return w||(w=d.missingGlyph),w}getText(){return""}getTextFromNode(d){const g=d||this.node,E=Array.from(g.parentNode.childNodes),b=E.indexOf(g),w=E.length-1;let C=compressSpaces(g.textContent||"");return b===0&&(C=trimLeft$1(C)),b===w&&(C=trimRight$1(C)),C}renderChildren(d){if(this.type!=="text"){this.renderTElementChildren(d);return}this.initializeCoordinates(),this.adjustChildCoordinatesRecursive(d),this.children.forEach((E,b)=>{this.renderChild(d,this,this,b)});const{mouse:g}=this.document.screen;g.isWorking()&&g.checkBoundingBox(this,this.getBoundingBox(d))}renderTElementChildren(d){const{document:g,parent:E}=this,b=this.getText(),w=E.getStyle("font-family").getDefinition();if(w){const{unitsPerEm:P}=w.fontFace,I=Font.parse(g.ctx.font),M=E.getStyle("font-size").getNumber(I.fontSize),D=E.getStyle("font-style").getString(I.fontStyle),k=M/P,H=w.isRTL?b.split("").reverse().join(""):b,F=toNumbers(E.getAttribute("dx").getString()),j=H.length;for(let $=0;$<j;$++){const z=this.getGlyph(w,H,$);d.translate(this.x,this.y),d.scale(k,-k);const U=d.lineWidth;d.lineWidth=d.lineWidth*P/M,D==="italic"&&d.transform(1,0,.4,1,0,0),z.render(d),D==="italic"&&d.transform(1,0,-.4,1,0,0),d.lineWidth=U,d.scale(1/k,-1/k),d.translate(-this.x,-this.y),this.x+=M*(z.horizAdvX||w.horizAdvX)/P,typeof F[$]<"u"&&!isNaN(F[$])&&(this.x+=F[$])}return}const{x:C,y:S}=this;d.fillStyle&&d.fillText(b,C,S),d.strokeStyle&&d.strokeText(b,C,S)}applyAnchoring(){if(this.textChunkStart>=this.leafTexts.length)return;const d=this.leafTexts[this.textChunkStart],g=d.getStyle("text-anchor").getString("start"),E=!1;let b=0;g==="start"&&!E||g==="end"&&E?b=d.x-this.minX:g==="end"&&!E||g==="start"&&E?b=d.x-this.maxX:b=d.x-(this.minX+this.maxX)/2;for(let w=this.textChunkStart;w<this.leafTexts.length;w++)this.leafTexts[w].x+=b;this.minX=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY,this.textChunkStart=this.leafTexts.length}adjustChildCoordinatesRecursive(d){this.children.forEach((g,E)=>{this.adjustChildCoordinatesRecursiveCore(d,this,this,E)}),this.applyAnchoring()}adjustChildCoordinatesRecursiveCore(d,g,E,b){const w=E.children[b];w.children.length>0?w.children.forEach((C,S)=>{g.adjustChildCoordinatesRecursiveCore(d,g,w,S)}):this.adjustChildCoordinates(d,g,E,b)}adjustChildCoordinates(d,g,E,b){const w=E.children[b];if(typeof w.measureText!="function")return w;d.save(),w.setContext(d,!0);const C=w.getAttribute("x"),S=w.getAttribute("y"),P=w.getAttribute("dx"),I=w.getAttribute("dy"),M=w.getStyle("font-family").getDefinition(),D=!!(M!=null&&M.isRTL);b===0&&(C.hasValue()||C.setValue(w.getInheritedAttribute("x")),S.hasValue()||S.setValue(w.getInheritedAttribute("y")),P.hasValue()||P.setValue(w.getInheritedAttribute("dx")),I.hasValue()||I.setValue(w.getInheritedAttribute("dy")));const k=w.measureText(d);return D&&(g.x-=k),C.hasValue()?(g.applyAnchoring(),w.x=C.getPixels("x"),P.hasValue()&&(w.x+=P.getPixels("x"))):(P.hasValue()&&(g.x+=P.getPixels("x")),w.x=g.x),g.x=w.x,D||(g.x+=k),S.hasValue()?(w.y=S.getPixels("y"),I.hasValue()&&(w.y+=I.getPixels("y"))):(I.hasValue()&&(g.y+=I.getPixels("y")),w.y=g.y),g.y=w.y,g.leafTexts.push(w),g.minX=Math.min(g.minX,w.x,w.x+k),g.maxX=Math.max(g.maxX,w.x,w.x+k),w.clearContext(d),d.restore(),w}getChildBoundingBox(d,g,E,b){const w=E.children[b];if(typeof w.getBoundingBox!="function")return null;const C=w.getBoundingBox(d);return C&&w.children.forEach((S,P)=>{const I=g.getChildBoundingBox(d,g,w,P);C.addBoundingBox(I)}),C}renderChild(d,g,E,b){const w=E.children[b];w.render(d),w.children.forEach((C,S)=>{g.renderChild(d,g,w,S)})}measureText(d){const{measureCache:g}=this;if(~g)return g;const E=this.getText(),b=this.measureTargetText(d,E);return this.measureCache=b,b}measureTargetText(d,g){if(!g.length)return 0;const{parent:E}=this,b=E.getStyle("font-family").getDefinition();if(b){const C=this.getFontSize(),S=b.isRTL?g.split("").reverse().join(""):g,P=toNumbers(E.getAttribute("dx").getString()),I=S.length;let M=0;for(let D=0;D<I;D++){const k=this.getGlyph(b,S,D);M+=(k.horizAdvX||b.horizAdvX)*C/b.fontFace.unitsPerEm,typeof P[D]<"u"&&!isNaN(P[D])&&(M+=P[D])}return M}if(!d.measureText)return g.length*10;d.save(),this.setContext(d,!0);const{width:w}=d.measureText(g);return this.clearContext(d),d.restore(),w}getInheritedAttribute(d){let g=this;for(;g instanceof TextElement&&g.isFirstChild()&&g.parent;){const E=g.parent.getAttribute(d);if(E.hasValue(!0))return E.getString("0");g=g.parent}return null}constructor(d,g,E){super(d,g,new.target===TextElement?!0:E),this.type="text",this.x=0,this.y=0,this.leafTexts=[],this.textChunkStart=0,this.minX=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY,this.measureCache=-1}}class TSpanElement extends TextElement{getText(){return this.text}constructor(d,g,E){super(d,g,new.target===TSpanElement?!0:E),this.type="tspan",this.text=this.children.length>0?"":this.getTextFromNode()}}class TextNode extends TSpanElement{constructor(...d){super(...d),this.type="textNode"}}class PathParser extends _{reset(){this.i=-1,this.command=null,this.previousCommand=null,this.start=new Point$1(0,0),this.control=new Point$1(0,0),this.current=new Point$1(0,0),this.points=[],this.angles=[]}isEnd(){const{i:d,commands:g}=this;return d>=g.length-1}next(){const d=this.commands[++this.i];return this.previousCommand=this.command,this.command=d,d}getPoint(){let d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"x",g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"y";const E=new Point$1(this.command[d],this.command[g]);return this.makeAbsolute(E)}getAsControlPoint(d,g){const E=this.getPoint(d,g);return this.control=E,E}getAsCurrentPoint(d,g){const E=this.getPoint(d,g);return this.current=E,E}getReflectedControlPoint(){const d=this.previousCommand.type;if(d!==_.CURVE_TO&&d!==_.SMOOTH_CURVE_TO&&d!==_.QUAD_TO&&d!==_.SMOOTH_QUAD_TO)return this.current;const{current:{x:g,y:E},control:{x:b,y:w}}=this;return new Point$1(2*g-b,2*E-w)}makeAbsolute(d){if(this.command.relative){const{x:g,y:E}=this.current;d.x+=g,d.y+=E}return d}addMarker(d,g,E){const{points:b,angles:w}=this;E&&w.length>0&&!w[w.length-1]&&(w[w.length-1]=b[b.length-1].angleTo(E)),this.addMarkerAngle(d,g?g.angleTo(d):null)}addMarkerAngle(d,g){this.points.push(d),this.angles.push(g)}getMarkerPoints(){return this.points}getMarkerAngles(){const{angles:d}=this,g=d.length;for(let E=0;E<g;E++)if(!d[E]){for(let b=E+1;b<g;b++)if(d[b]){d[E]=d[b];break}}return d}constructor(d){super(d.replace(/([+\-.])\s+/gm,"$1").replace(/[^MmZzLlHhVvCcSsQqTtAae\d\s.,+-].*/g,"")),this.control=new Point$1(0,0),this.start=new Point$1(0,0),this.current=new Point$1(0,0),this.command=null,this.commands=this.commands,this.i=-1,this.previousCommand=null,this.points=[],this.angles=[]}}class PathElement extends RenderedElement{path(d){const{pathParser:g}=this,E=new BoundingBox;for(g.reset(),d&&d.beginPath();!g.isEnd();)switch(g.next().type){case PathParser.MOVE_TO:this.pathM(d,E);break;case PathParser.LINE_TO:this.pathL(d,E);break;case PathParser.HORIZ_LINE_TO:this.pathH(d,E);break;case PathParser.VERT_LINE_TO:this.pathV(d,E);break;case PathParser.CURVE_TO:this.pathC(d,E);break;case PathParser.SMOOTH_CURVE_TO:this.pathS(d,E);break;case PathParser.QUAD_TO:this.pathQ(d,E);break;case PathParser.SMOOTH_QUAD_TO:this.pathT(d,E);break;case PathParser.ARC:this.pathA(d,E);break;case PathParser.CLOSE_PATH:this.pathZ(d,E);break}return E}getBoundingBox(d){return this.path()}getMarkers(){const{pathParser:d}=this,g=d.getMarkerPoints(),E=d.getMarkerAngles();return g.map((w,C)=>[w,E[C]])}renderChildren(d){this.path(d),this.document.screen.mouse.checkPath(this,d);const g=this.getStyle("fill-rule");d.fillStyle!==""&&(g.getString("inherit")!=="inherit"?d.fill(g.getString()):d.fill()),d.strokeStyle!==""&&(this.getAttribute("vector-effect").getString()==="non-scaling-stroke"?(d.save(),d.setTransform(1,0,0,1,0,0),d.stroke(),d.restore()):d.stroke());const E=this.getMarkers();if(E){const b=E.length-1,w=this.getStyle("marker-start"),C=this.getStyle("marker-mid"),S=this.getStyle("marker-end");if(w.isUrlDefinition()){const P=w.getDefinition(),[I,M]=E[0];P.render(d,I,M)}if(C.isUrlDefinition()){const P=C.getDefinition();for(let I=1;I<b;I++){const[M,D]=E[I];P.render(d,M,D)}}if(S.isUrlDefinition()){const P=S.getDefinition(),[I,M]=E[b];P.render(d,I,M)}}}static pathM(d){const g=d.getAsCurrentPoint();return d.start=d.current,{point:g}}pathM(d,g){const{pathParser:E}=this,{point:b}=PathElement.pathM(E),{x:w,y:C}=b;E.addMarker(b),g.addPoint(w,C),d&&d.moveTo(w,C)}static pathL(d){const{current:g}=d,E=d.getAsCurrentPoint();return{current:g,point:E}}pathL(d,g){const{pathParser:E}=this,{current:b,point:w}=PathElement.pathL(E),{x:C,y:S}=w;E.addMarker(w,b),g.addPoint(C,S),d&&d.lineTo(C,S)}static pathH(d){const{current:g,command:E}=d,b=new Point$1((E.relative?g.x:0)+E.x,g.y);return d.current=b,{current:g,point:b}}pathH(d,g){const{pathParser:E}=this,{current:b,point:w}=PathElement.pathH(E),{x:C,y:S}=w;E.addMarker(w,b),g.addPoint(C,S),d&&d.lineTo(C,S)}static pathV(d){const{current:g,command:E}=d,b=new Point$1(g.x,(E.relative?g.y:0)+E.y);return d.current=b,{current:g,point:b}}pathV(d,g){const{pathParser:E}=this,{current:b,point:w}=PathElement.pathV(E),{x:C,y:S}=w;E.addMarker(w,b),g.addPoint(C,S),d&&d.lineTo(C,S)}static pathC(d){const{current:g}=d,E=d.getPoint("x1","y1"),b=d.getAsControlPoint("x2","y2"),w=d.getAsCurrentPoint();return{current:g,point:E,controlPoint:b,currentPoint:w}}pathC(d,g){const{pathParser:E}=this,{current:b,point:w,controlPoint:C,currentPoint:S}=PathElement.pathC(E);E.addMarker(S,C,w),g.addBezierCurve(b.x,b.y,w.x,w.y,C.x,C.y,S.x,S.y),d&&d.bezierCurveTo(w.x,w.y,C.x,C.y,S.x,S.y)}static pathS(d){const{current:g}=d,E=d.getReflectedControlPoint(),b=d.getAsControlPoint("x2","y2"),w=d.getAsCurrentPoint();return{current:g,point:E,controlPoint:b,currentPoint:w}}pathS(d,g){const{pathParser:E}=this,{current:b,point:w,controlPoint:C,currentPoint:S}=PathElement.pathS(E);E.addMarker(S,C,w),g.addBezierCurve(b.x,b.y,w.x,w.y,C.x,C.y,S.x,S.y),d&&d.bezierCurveTo(w.x,w.y,C.x,C.y,S.x,S.y)}static pathQ(d){const{current:g}=d,E=d.getAsControlPoint("x1","y1"),b=d.getAsCurrentPoint();return{current:g,controlPoint:E,currentPoint:b}}pathQ(d,g){const{pathParser:E}=this,{current:b,controlPoint:w,currentPoint:C}=PathElement.pathQ(E);E.addMarker(C,w,w),g.addQuadraticCurve(b.x,b.y,w.x,w.y,C.x,C.y),d&&d.quadraticCurveTo(w.x,w.y,C.x,C.y)}static pathT(d){const{current:g}=d,E=d.getReflectedControlPoint();d.control=E;const b=d.getAsCurrentPoint();return{current:g,controlPoint:E,currentPoint:b}}pathT(d,g){const{pathParser:E}=this,{current:b,controlPoint:w,currentPoint:C}=PathElement.pathT(E);E.addMarker(C,w,w),g.addQuadraticCurve(b.x,b.y,w.x,w.y,C.x,C.y),d&&d.quadraticCurveTo(w.x,w.y,C.x,C.y)}static pathA(d){const{current:g,command:E}=d;let{rX:b,rY:w,xRot:C,lArcFlag:S,sweepFlag:P}=E;const I=C*(Math.PI/180),M=d.getAsCurrentPoint(),D=new Point$1(Math.cos(I)*(g.x-M.x)/2+Math.sin(I)*(g.y-M.y)/2,-Math.sin(I)*(g.x-M.x)/2+Math.cos(I)*(g.y-M.y)/2),k=Math.pow(D.x,2)/Math.pow(b,2)+Math.pow(D.y,2)/Math.pow(w,2);k>1&&(b*=Math.sqrt(k),w*=Math.sqrt(k));let H=(S===P?-1:1)*Math.sqrt((Math.pow(b,2)*Math.pow(w,2)-Math.pow(b,2)*Math.pow(D.y,2)-Math.pow(w,2)*Math.pow(D.x,2))/(Math.pow(b,2)*Math.pow(D.y,2)+Math.pow(w,2)*Math.pow(D.x,2)));isNaN(H)&&(H=0);const F=new Point$1(H*b*D.y/w,H*-w*D.x/b),j=new Point$1((g.x+M.x)/2+Math.cos(I)*F.x-Math.sin(I)*F.y,(g.y+M.y)/2+Math.sin(I)*F.x+Math.cos(I)*F.y),$=vectorsAngle([1,0],[(D.x-F.x)/b,(D.y-F.y)/w]),z=[(D.x-F.x)/b,(D.y-F.y)/w],U=[(-D.x-F.x)/b,(-D.y-F.y)/w];let W=vectorsAngle(z,U);return vectorsRatio(z,U)<=-1&&(W=Math.PI),vectorsRatio(z,U)>=1&&(W=0),{currentPoint:M,rX:b,rY:w,sweepFlag:P,xAxisRotation:I,centp:j,a1:$,ad:W}}pathA(d,g){const{pathParser:E}=this,{currentPoint:b,rX:w,rY:C,sweepFlag:S,xAxisRotation:P,centp:I,a1:M,ad:D}=PathElement.pathA(E),k=1-S?1:-1,H=M+k*(D/2),F=new Point$1(I.x+w*Math.cos(H),I.y+C*Math.sin(H));if(E.addMarkerAngle(F,H-k*Math.PI/2),E.addMarkerAngle(b,H-k*Math.PI),g.addPoint(b.x,b.y),d&&!isNaN(M)&&!isNaN(D)){const j=w>C?w:C,$=w>C?1:w/C,z=w>C?C/w:1;d.translate(I.x,I.y),d.rotate(P),d.scale($,z),d.arc(0,0,j,M,M+D,!!(1-S)),d.scale(1/$,1/z),d.rotate(-P),d.translate(-I.x,-I.y)}}static pathZ(d){d.current=d.start}pathZ(d,g){PathElement.pathZ(this.pathParser),d&&g.x1!==g.x2&&g.y1!==g.y2&&d.closePath()}constructor(d,g,E){super(d,g,E),this.type="path",this.pathParser=new PathParser(this.getAttribute("d").getString())}}let SVGElement$1=class extends RenderedElement{setContext(d){var g;const{document:E}=this,{screen:b,window:w}=E,C=d.canvas;if(b.setDefaults(d),"style"in C&&typeof d.font<"u"&&w&&typeof w.getComputedStyle<"u"){d.font=w.getComputedStyle(C).getPropertyValue("font");const U=new Property(E,"fontSize",Font.parse(d.font).fontSize);U.hasValue()&&(E.rootEmSize=U.getPixels("y"),E.emSize=E.rootEmSize)}this.getAttribute("x").hasValue()||this.getAttribute("x",!0).setValue(0),this.getAttribute("y").hasValue()||this.getAttribute("y",!0).setValue(0);let{width:S,height:P}=b.viewPort;this.getStyle("width").hasValue()||this.getStyle("width",!0).setValue("100%"),this.getStyle("height").hasValue()||this.getStyle("height",!0).setValue("100%"),this.getStyle("color").hasValue()||this.getStyle("color",!0).setValue("black");const I=this.getAttribute("refX"),M=this.getAttribute("refY"),D=this.getAttribute("viewBox"),k=D.hasValue()?toNumbers(D.getString()):null,H=!this.root&&this.getStyle("overflow").getValue("hidden")!=="visible";let F=0,j=0,$=0,z=0;k&&(F=k[0],j=k[1]),this.root||(S=this.getStyle("width").getPixels("x"),P=this.getStyle("height").getPixels("y"),this.type==="marker"&&($=F,z=j,F=0,j=0)),b.viewPort.setCurrent(S,P),this.node&&(!this.parent||((g=this.node.parentNode)===null||g===void 0?void 0:g.nodeName)==="foreignObject")&&this.getStyle("transform",!1,!0).hasValue()&&!this.getStyle("transform-origin",!1,!0).hasValue()&&this.getStyle("transform-origin",!0,!0).setValue("50% 50%"),super.setContext(d),d.translate(this.getAttribute("x").getPixels("x"),this.getAttribute("y").getPixels("y")),k&&(S=k[2],P=k[3]),E.setViewBox({ctx:d,aspectRatio:this.getAttribute("preserveAspectRatio").getString(),width:b.viewPort.width,desiredWidth:S,height:b.viewPort.height,desiredHeight:P,minX:F,minY:j,refX:I.getValue(),refY:M.getValue(),clip:H,clipX:$,clipY:z}),k&&(b.viewPort.removeCurrent(),b.viewPort.setCurrent(S,P))}clearContext(d){super.clearContext(d),this.document.screen.viewPort.removeCurrent()}resize(d){let g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:d,E=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;const b=this.getAttribute("width",!0),w=this.getAttribute("height",!0),C=this.getAttribute("viewBox"),S=this.getAttribute("style"),P=b.getNumber(0),I=w.getNumber(0);if(E)if(typeof E=="string")this.getAttribute("preserveAspectRatio",!0).setValue(E);else{const M=this.getAttribute("preserveAspectRatio");M.hasValue()&&M.setValue(M.getString().replace(/^\s*(\S.*\S)\s*$/,"$1"))}if(b.setValue(d),w.setValue(g),C.hasValue()||C.setValue("0 0 ".concat(P||d," ").concat(I||g)),S.hasValue()){const M=this.getStyle("width"),D=this.getStyle("height");M.hasValue()&&M.setValue("".concat(d,"px")),D.hasValue()&&D.setValue("".concat(g,"px"))}}constructor(...d){super(...d),this.type="svg",this.root=!1}};class RectElement extends PathElement{path(d){const g=this.getAttribute("x").getPixels("x"),E=this.getAttribute("y").getPixels("y"),b=this.getStyle("width",!1,!0).getPixels("x"),w=this.getStyle("height",!1,!0).getPixels("y"),C=this.getAttribute("rx"),S=this.getAttribute("ry");let P=C.getPixels("x"),I=S.getPixels("y");if(C.hasValue()&&!S.hasValue()&&(I=P),S.hasValue()&&!C.hasValue()&&(P=I),P=Math.min(P,b/2),I=Math.min(I,w/2),d){const M=4*((Math.sqrt(2)-1)/3);d.beginPath(),w>0&&b>0&&(d.moveTo(g+P,E),d.lineTo(g+b-P,E),d.bezierCurveTo(g+b-P+M*P,E,g+b,E+I-M*I,g+b,E+I),d.lineTo(g+b,E+w-I),d.bezierCurveTo(g+b,E+w-I+M*I,g+b-P+M*P,E+w,g+b-P,E+w),d.lineTo(g+P,E+w),d.bezierCurveTo(g+P-M*P,E+w,g,E+w-I+M*I,g,E+w-I),d.lineTo(g,E+I),d.bezierCurveTo(g,E+I-M*I,g+P-M*P,E,g+P,E),d.closePath())}return new BoundingBox(g,E,g+b,E+w)}getMarkers(){return null}constructor(...d){super(...d),this.type="rect"}}class CircleElement extends PathElement{path(d){const g=this.getAttribute("cx").getPixels("x"),E=this.getAttribute("cy").getPixels("y"),b=this.getAttribute("r").getPixels();return d&&b>0&&(d.beginPath(),d.arc(g,E,b,0,Math.PI*2,!1),d.closePath()),new BoundingBox(g-b,E-b,g+b,E+b)}getMarkers(){return null}constructor(...d){super(...d),this.type="circle"}}class EllipseElement extends PathElement{path(d){const g=4*((Math.sqrt(2)-1)/3),E=this.getAttribute("rx").getPixels("x"),b=this.getAttribute("ry").getPixels("y"),w=this.getAttribute("cx").getPixels("x"),C=this.getAttribute("cy").getPixels("y");return d&&E>0&&b>0&&(d.beginPath(),d.moveTo(w+E,C),d.bezierCurveTo(w+E,C+g*b,w+g*E,C+b,w,C+b),d.bezierCurveTo(w-g*E,C+b,w-E,C+g*b,w-E,C),d.bezierCurveTo(w-E,C-g*b,w-g*E,C-b,w,C-b),d.bezierCurveTo(w+g*E,C-b,w+E,C-g*b,w+E,C),d.closePath()),new BoundingBox(w-E,C-b,w+E,C+b)}getMarkers(){return null}constructor(...d){super(...d),this.type="ellipse"}}class LineElement extends PathElement{getPoints(){return[new Point$1(this.getAttribute("x1").getPixels("x"),this.getAttribute("y1").getPixels("y")),new Point$1(this.getAttribute("x2").getPixels("x"),this.getAttribute("y2").getPixels("y"))]}path(d){const[{x:g,y:E},{x:b,y:w}]=this.getPoints();return d&&(d.beginPath(),d.moveTo(g,E),d.lineTo(b,w)),new BoundingBox(g,E,b,w)}getMarkers(){const[d,g]=this.getPoints(),E=d.angleTo(g);return[[d,E],[g,E]]}constructor(...d){super(...d),this.type="line"}}class PolylineElement extends PathElement{path(d){const{points:g}=this,[{x:E,y:b}]=g,w=new BoundingBox(E,b);return d&&(d.beginPath(),d.moveTo(E,b)),g.forEach(C=>{let{x:S,y:P}=C;w.addPoint(S,P),d&&d.lineTo(S,P)}),w}getMarkers(){const{points:d}=this,g=d.length-1,E=[];return d.forEach((b,w)=>{w!==g&&E.push([b,b.angleTo(d[w+1])])}),E.length>0&&E.push([d[d.length-1],E[E.length-1][1]]),E}constructor(d,g,E){super(d,g,E),this.type="polyline",this.points=[],this.points=Point$1.parsePath(this.getAttribute("points").getString())}}class PolygonElement extends PolylineElement{path(d){const g=super.path(d),[{x:E,y:b}]=this.points;return d&&(d.lineTo(E,b),d.closePath()),g}constructor(...d){super(...d),this.type="polygon"}}class PatternElement extends Element$1{createPattern(d,g,E){const b=this.getStyle("width").getPixels("x",!0),w=this.getStyle("height").getPixels("y",!0),C=new SVGElement$1(this.document,null);C.attributes.set("viewBox",new Property(this.document,"viewBox",this.getAttribute("viewBox").getValue())),C.attributes.set("width",new Property(this.document,"width","".concat(b,"px"))),C.attributes.set("height",new Property(this.document,"height","".concat(w,"px"))),C.attributes.set("transform",new Property(this.document,"transform",this.getAttribute("patternTransform").getValue())),C.children=this.children;const S=this.document.createCanvas(b,w),P=S.getContext("2d"),I=this.getAttribute("x"),M=this.getAttribute("y");I.hasValue()&&M.hasValue()&&P.translate(I.getPixels("x",!0),M.getPixels("y",!0)),E.hasValue()?this.styles.set("fill-opacity",E):this.styles.delete("fill-opacity");for(let k=-1;k<=1;k++)for(let H=-1;H<=1;H++)P.save(),C.attributes.set("x",new Property(this.document,"x",k*S.width)),C.attributes.set("y",new Property(this.document,"y",H*S.height)),C.render(P),P.restore();return d.createPattern(S,"repeat")}constructor(...d){super(...d),this.type="pattern"}}class MarkerElement extends Element$1{render(d,g,E){if(!g)return;const{x:b,y:w}=g,C=this.getAttribute("orient").getString("auto"),S=this.getAttribute("markerUnits").getString("strokeWidth");d.translate(b,w),C==="auto"&&d.rotate(E),S==="strokeWidth"&&d.scale(d.lineWidth,d.lineWidth),d.save();const P=new SVGElement$1(this.document);P.type=this.type,P.attributes.set("viewBox",new Property(this.document,"viewBox",this.getAttribute("viewBox").getValue())),P.attributes.set("refX",new Property(this.document,"refX",this.getAttribute("refX").getValue())),P.attributes.set("refY",new Property(this.document,"refY",this.getAttribute("refY").getValue())),P.attributes.set("width",new Property(this.document,"width",this.getAttribute("markerWidth").getValue())),P.attributes.set("height",new Property(this.document,"height",this.getAttribute("markerHeight").getValue())),P.attributes.set("overflow",new Property(this.document,"overflow",this.getAttribute("overflow").getValue())),P.attributes.set("fill",new Property(this.document,"fill",this.getAttribute("fill").getColor("black"))),P.attributes.set("stroke",new Property(this.document,"stroke",this.getAttribute("stroke").getValue("none"))),P.children=this.children,P.render(d),d.restore(),S==="strokeWidth"&&d.scale(1/d.lineWidth,1/d.lineWidth),C==="auto"&&d.rotate(-E),d.translate(-b,-w)}constructor(...d){super(...d),this.type="marker"}}class DefsElement extends Element$1{render(){}constructor(...d){super(...d),this.type="defs"}}class GElement extends RenderedElement{getBoundingBox(d){const g=new BoundingBox;return this.children.forEach(E=>{g.addBoundingBox(E.getBoundingBox(d))}),g}constructor(...d){super(...d),this.type="g"}}class GradientElement extends Element$1{getGradientUnits(){return this.getAttribute("gradientUnits").getString("objectBoundingBox")}createGradient(d,g,E){let b=this;this.getHrefAttribute().hasValue()&&(b=this.getHrefAttribute().getDefinition(),this.inheritStopContainer(b));const{stops:w}=b,C=this.getGradient(d,g);if(!C)return this.addParentOpacity(E,w[w.length-1].color);if(w.forEach(S=>{C.addColorStop(S.offset,this.addParentOpacity(E,S.color))}),this.getAttribute("gradientTransform").hasValue()){const{document:S}=this,{MAX_VIRTUAL_PIXELS:P}=Screen,{viewPort:I}=S.screen,M=I.getRoot(),D=new RectElement(S);D.attributes.set("x",new Property(S,"x",-P/3)),D.attributes.set("y",new Property(S,"y",-P/3)),D.attributes.set("width",new Property(S,"width",P)),D.attributes.set("height",new Property(S,"height",P));const k=new GElement(S);k.attributes.set("transform",new Property(S,"transform",this.getAttribute("gradientTransform").getValue())),k.children=[D];const H=new SVGElement$1(S);H.attributes.set("x",new Property(S,"x",0)),H.attributes.set("y",new Property(S,"y",0)),H.attributes.set("width",new Property(S,"width",M.width)),H.attributes.set("height",new Property(S,"height",M.height)),H.children=[k];const F=S.createCanvas(M.width,M.height),j=F.getContext("2d");return j.fillStyle=C,H.render(j),j.createPattern(F,"no-repeat")}return C}inheritStopContainer(d){this.attributesToInherit.forEach(g=>{!this.getAttribute(g).hasValue()&&d.getAttribute(g).hasValue()&&this.getAttribute(g,!0).setValue(d.getAttribute(g).getValue())})}addParentOpacity(d,g){return d.hasValue()?new Property(this.document,"color",g).addOpacity(d).getColor():g}constructor(d,g,E){super(d,g,E),this.attributesToInherit=["gradientUnits"],this.stops=[];const{stops:b,children:w}=this;w.forEach(C=>{C.type==="stop"&&b.push(C)})}}class LinearGradientElement extends GradientElement{getGradient(d,g){const E=this.getGradientUnits()==="objectBoundingBox",b=E?g.getBoundingBox(d):null;if(E&&!b)return null;!this.getAttribute("x1").hasValue()&&!this.getAttribute("y1").hasValue()&&!this.getAttribute("x2").hasValue()&&!this.getAttribute("y2").hasValue()&&(this.getAttribute("x1",!0).setValue(0),this.getAttribute("y1",!0).setValue(0),this.getAttribute("x2",!0).setValue(1),this.getAttribute("y2",!0).setValue(0));const w=E?b.x+b.width*this.getAttribute("x1").getNumber():this.getAttribute("x1").getPixels("x"),C=E?b.y+b.height*this.getAttribute("y1").getNumber():this.getAttribute("y1").getPixels("y"),S=E?b.x+b.width*this.getAttribute("x2").getNumber():this.getAttribute("x2").getPixels("x"),P=E?b.y+b.height*this.getAttribute("y2").getNumber():this.getAttribute("y2").getPixels("y");return w===S&&C===P?null:d.createLinearGradient(w,C,S,P)}constructor(d,g,E){super(d,g,E),this.type="linearGradient",this.attributesToInherit.push("x1","y1","x2","y2")}}class RadialGradientElement extends GradientElement{getGradient(d,g){const E=this.getGradientUnits()==="objectBoundingBox",b=g.getBoundingBox(d);if(E&&!b)return null;this.getAttribute("cx").hasValue()||this.getAttribute("cx",!0).setValue("50%"),this.getAttribute("cy").hasValue()||this.getAttribute("cy",!0).setValue("50%"),this.getAttribute("r").hasValue()||this.getAttribute("r",!0).setValue("50%");const w=E?b.x+b.width*this.getAttribute("cx").getNumber():this.getAttribute("cx").getPixels("x"),C=E?b.y+b.height*this.getAttribute("cy").getNumber():this.getAttribute("cy").getPixels("y");let S=w,P=C;this.getAttribute("fx").hasValue()&&(S=E?b.x+b.width*this.getAttribute("fx").getNumber():this.getAttribute("fx").getPixels("x")),this.getAttribute("fy").hasValue()&&(P=E?b.y+b.height*this.getAttribute("fy").getNumber():this.getAttribute("fy").getPixels("y"));const I=E?(b.width+b.height)/2*this.getAttribute("r").getNumber():this.getAttribute("r").getPixels(),M=this.getAttribute("fr").getPixels();return d.createRadialGradient(S,P,M,w,C,I)}constructor(d,g,E){super(d,g,E),this.type="radialGradient",this.attributesToInherit.push("cx","cy","r","fx","fy","fr")}}class StopElement extends Element$1{constructor(d,g,E){super(d,g,E),this.type="stop";const b=Math.max(0,Math.min(1,this.getAttribute("offset").getNumber())),w=this.getStyle("stop-opacity");let C=this.getStyle("stop-color",!0);C.getString()===""&&C.setValue("#000"),w.hasValue()&&(C=C.addOpacity(w)),this.offset=b,this.color=C.getColor()}}class AnimateElement extends Element$1{getProperty(){const d=this.getAttribute("attributeType").getString(),g=this.getAttribute("attributeName").getString();return d==="CSS"?this.parent.getStyle(g,!0):this.parent.getAttribute(g,!0)}calcValue(){const{initialUnits:d}=this,{progress:g,from:E,to:b}=this.getProgress();let w=E.getNumber()+(b.getNumber()-E.getNumber())*g;return d==="%"&&(w*=100),"".concat(w).concat(d)}update(d){const{parent:g}=this,E=this.getProperty();if(this.initialValue||(this.initialValue=E.getString(),this.initialUnits=E.getUnits()),this.duration>this.maxDuration){const w=this.getAttribute("fill").getString("remove");if(this.getAttribute("repeatCount").getString()==="indefinite"||this.getAttribute("repeatDur").getString()==="indefinite")this.duration=0;else if(w==="freeze"&&!this.frozen)this.frozen=!0,g&&E&&(g.animationFrozen=!0,g.animationFrozenValue=E.getString());else if(w==="remove"&&!this.removed)return this.removed=!0,g&&E&&E.setValue(g.animationFrozen?g.animationFrozenValue:this.initialValue),!0;return!1}this.duration+=d;let b=!1;if(this.begin<this.duration){let w=this.calcValue();const C=this.getAttribute("type");if(C.hasValue()){const S=C.getString();w="".concat(S,"(").concat(w,")")}E.setValue(w),b=!0}return b}getProgress(){const{document:d,values:g}=this;let E=(this.duration-this.begin)/(this.maxDuration-this.begin),b,w;if(g.hasValue()){const C=E*(g.getValue().length-1),S=Math.floor(C),P=Math.ceil(C);let I;I=g.getValue()[S],b=new Property(d,"from",I?parseFloat(I):0),I=g.getValue()[P],w=new Property(d,"to",I?parseFloat(I):0),E=(C-S)/(P-S)}else b=this.from,w=this.to;return{progress:E,from:b,to:w}}constructor(d,g,E){super(d,g,E),this.type="animate",this.duration=0,this.initialUnits="",this.removed=!1,this.frozen=!1,d.screen.animations.push(this),this.begin=this.getAttribute("begin").getMilliseconds(),this.maxDuration=this.begin+this.getAttribute("dur").getMilliseconds(),this.from=this.getAttribute("from"),this.to=this.getAttribute("to"),this.values=new Property(d,"values",null);const b=this.getAttribute("values");b.hasValue()&&this.values.setValue(b.getString().split(";"))}}class AnimateColorElement extends AnimateElement{calcValue(){const{progress:d,from:g,to:E}=this.getProgress(),b=new RGBColor$1(g.getColor()),w=new RGBColor$1(E.getColor());if(b.ok&&w.ok){const C=b.r+(w.r-b.r)*d,S=b.g+(w.g-b.g)*d,P=b.b+(w.b-b.b)*d;return"rgb(".concat(Math.floor(C),", ").concat(Math.floor(S),", ").concat(Math.floor(P),")")}return this.getAttribute("from").getColor()}constructor(...d){super(...d),this.type="animateColor"}}class AnimateTransformElement extends AnimateElement{calcValue(){const{progress:d,from:g,to:E}=this.getProgress(),b=toNumbers(g.getString()),w=toNumbers(E.getString());return b.map((S,P)=>{const I=w[P];return S+(I-S)*d}).join(" ")}constructor(...d){super(...d),this.type="animateTransform"}}class FontFaceElement extends Element$1{constructor(d,g,E){super(d,g,E),this.type="font-face",this.ascent=this.getAttribute("ascent").getNumber(),this.descent=this.getAttribute("descent").getNumber(),this.unitsPerEm=this.getAttribute("units-per-em").getNumber()}}class GlyphElement extends PathElement{constructor(d,g,E){super(d,g,E),this.type="glyph",this.horizAdvX=this.getAttribute("horiz-adv-x").getNumber(),this.unicode=this.getAttribute("unicode").getString(),this.arabicForm=this.getAttribute("arabic-form").getString()}}class MissingGlyphElement extends GlyphElement{constructor(...d){super(...d),this.type="missing-glyph",this.horizAdvX=0}}class FontElement extends Element$1{render(){}constructor(d,g,E){super(d,g,E),this.type="font",this.isArabic=!1,this.glyphs=new Map,this.arabicGlyphs=new Map,this.isRTL=!1,this.horizAdvX=this.getAttribute("horiz-adv-x").getNumber();const{definitions:b}=d,{children:w}=this;for(const C of w)if(C instanceof FontFaceElement){this.fontFace=C;const S=C.getStyle("font-family");S.hasValue()&&b.set(S.getString(),this)}else if(C instanceof MissingGlyphElement)this.missingGlyph=C;else if(C instanceof GlyphElement)if(C.arabicForm){this.isRTL=!0,this.isArabic=!0;let S=this.arabicGlyphs.get(C.unicode);typeof S>"u"&&(S=new Map,this.arabicGlyphs.set(C.unicode,S)),S.set(C.arabicForm,C)}else this.glyphs.set(C.unicode,C)}}class TRefElement extends TextElement{getText(){const d=this.getHrefAttribute().getDefinition();if(d){const g=d.children[0];if(g)return g.getText()}return""}constructor(...d){super(...d),this.type="tref"}}class AElement extends TextElement{getText(){return this.text}renderChildren(d){if(this.hasText){super.renderChildren(d);const{document:g,x:E,y:b}=this,{mouse:w}=g.screen,C=new Property(g,"fontSize",Font.parse(g.ctx.font).fontSize);w.isWorking()&&w.checkBoundingBox(this,new BoundingBox(E,b-C.getPixels("y"),E+this.measureText(d),b))}else if(this.children.length>0){const g=new GElement(this.document);g.children=this.children,g.parent=this,g.render(d)}}onClick(){const{window:d}=this.document;d&&d.open(this.getHrefAttribute().getString())}onMouseMove(){const d=this.document.ctx;d.canvas.style.cursor="pointer"}constructor(d,g,E){super(d,g,E),this.type="a";const{childNodes:b}=g,w=b[0],C=b.length>0&&Array.from(b).every(S=>S.nodeType===3);this.hasText=C,this.text=C?this.getTextFromNode(w):""}}class TextPathElement extends TextElement{getText(){return this.text}path(d){const{dataArray:g}=this;d&&d.beginPath(),g.forEach(E=>{let{type:b,points:w}=E;switch(b){case PathParser.LINE_TO:d&&d.lineTo(w[0],w[1]);break;case PathParser.MOVE_TO:d&&d.moveTo(w[0],w[1]);break;case PathParser.CURVE_TO:d&&d.bezierCurveTo(w[0],w[1],w[2],w[3],w[4],w[5]);break;case PathParser.QUAD_TO:d&&d.quadraticCurveTo(w[0],w[1],w[2],w[3]);break;case PathParser.ARC:{const[C,S,P,I,M,D,k,H]=w,F=P>I?P:I,j=P>I?1:P/I,$=P>I?I/P:1;d&&(d.translate(C,S),d.rotate(k),d.scale(j,$),d.arc(0,0,F,M,M+D,!!(1-H)),d.scale(1/j,1/$),d.rotate(-k),d.translate(-C,-S));break}case PathParser.CLOSE_PATH:d&&d.closePath();break}})}renderChildren(d){this.setTextData(d),d.save();const g=this.parent.getStyle("text-decoration").getString(),E=this.getFontSize(),{glyphInfo:b}=this,w=d.fillStyle;g==="underline"&&d.beginPath(),b.forEach((C,S)=>{const{p0:P,p1:I,rotation:M,text:D}=C;d.save(),d.translate(P.x,P.y),d.rotate(M),d.fillStyle&&d.fillText(D,0,0),d.strokeStyle&&d.strokeText(D,0,0),d.restore(),g==="underline"&&(S===0&&d.moveTo(P.x,P.y+E/8),d.lineTo(I.x,I.y+E/5))}),g==="underline"&&(d.lineWidth=E/20,d.strokeStyle=w,d.stroke(),d.closePath()),d.restore()}getLetterSpacingAt(){let d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return this.letterSpacingCache[d]||0}findSegmentToFitChar(d,g,E,b,w,C,S,P,I){let M=C,D=this.measureText(d,P);P===" "&&g==="justify"&&E<b&&(D+=(b-E)/w),I>-1&&(M+=this.getLetterSpacingAt(I));const k=this.textHeight/20,H=this.getEquidistantPointOnPath(M,k,0),F=this.getEquidistantPointOnPath(M+D,k,0),j={p0:H,p1:F},$=H&&F?Math.atan2(F.y-H.y,F.x-H.x):0;if(S){const z=Math.cos(Math.PI/2+$)*S,U=Math.cos(-$)*S;j.p0={...H,x:H.x+z,y:H.y+U},j.p1={...F,x:F.x+z,y:F.y+U}}return M+=D,{offset:M,segment:j,rotation:$}}measureText(d,g){const{measuresCache:E}=this,b=g||this.getText();if(E.has(b))return E.get(b);const w=this.measureTargetText(d,b);return E.set(b,w),w}setTextData(d){if(this.glyphInfo)return;const g=this.getText(),E=g.split(""),b=g.split(" ").length-1,w=this.parent.getAttribute("dx").split().map(W=>W.getPixels("x")),C=this.parent.getAttribute("dy").getPixels("y"),S=this.parent.getStyle("text-anchor").getString("start"),P=this.getStyle("letter-spacing"),I=this.parent.getStyle("letter-spacing");let M=0;!P.hasValue()||P.getValue()==="inherit"?M=I.getPixels():P.hasValue()&&P.getValue()!=="initial"&&P.getValue()!=="unset"&&(M=P.getPixels());const D=[],k=g.length;this.letterSpacingCache=D;for(let W=0;W<k;W++)D.push(typeof w[W]<"u"?w[W]:M);const H=D.reduce((W,q,Z)=>Z===0?0:W+q||0,0),F=this.measureText(d),j=Math.max(F+H,0);this.textWidth=F,this.textHeight=this.getFontSize(),this.glyphInfo=[];const $=this.getPathLength(),z=this.getStyle("startOffset").getNumber(0)*$;let U=0;(S==="middle"||S==="center")&&(U=-j/2),(S==="end"||S==="right")&&(U=-j),U+=z,E.forEach((W,q)=>{const{offset:Z,segment:X,rotation:K}=this.findSegmentToFitChar(d,S,j,$,b,U,C,W,q);U=Z,!(!X.p0||!X.p1)&&this.glyphInfo.push({text:E[q],p0:X.p0,p1:X.p1,rotation:K})})}parsePathData(d){if(this.pathLength=-1,!d)return[];const g=[],{pathParser:E}=d;for(E.reset();!E.isEnd();){const{current:b}=E,w=b?b.x:0,C=b?b.y:0,S=E.next();let P=S.type,I=[];switch(S.type){case PathParser.MOVE_TO:this.pathM(E,I);break;case PathParser.LINE_TO:P=this.pathL(E,I);break;case PathParser.HORIZ_LINE_TO:P=this.pathH(E,I);break;case PathParser.VERT_LINE_TO:P=this.pathV(E,I);break;case PathParser.CURVE_TO:this.pathC(E,I);break;case PathParser.SMOOTH_CURVE_TO:P=this.pathS(E,I);break;case PathParser.QUAD_TO:this.pathQ(E,I);break;case PathParser.SMOOTH_QUAD_TO:P=this.pathT(E,I);break;case PathParser.ARC:I=this.pathA(E);break;case PathParser.CLOSE_PATH:PathElement.pathZ(E);break}S.type!==PathParser.CLOSE_PATH?g.push({type:P,points:I,start:{x:w,y:C},pathLength:this.calcLength(w,C,P,I)}):g.push({type:PathParser.CLOSE_PATH,points:[],pathLength:0})}return g}pathM(d,g){const{x:E,y:b}=PathElement.pathM(d).point;g.push(E,b)}pathL(d,g){const{x:E,y:b}=PathElement.pathL(d).point;return g.push(E,b),PathParser.LINE_TO}pathH(d,g){const{x:E,y:b}=PathElement.pathH(d).point;return g.push(E,b),PathParser.LINE_TO}pathV(d,g){const{x:E,y:b}=PathElement.pathV(d).point;return g.push(E,b),PathParser.LINE_TO}pathC(d,g){const{point:E,controlPoint:b,currentPoint:w}=PathElement.pathC(d);g.push(E.x,E.y,b.x,b.y,w.x,w.y)}pathS(d,g){const{point:E,controlPoint:b,currentPoint:w}=PathElement.pathS(d);return g.push(E.x,E.y,b.x,b.y,w.x,w.y),PathParser.CURVE_TO}pathQ(d,g){const{controlPoint:E,currentPoint:b}=PathElement.pathQ(d);g.push(E.x,E.y,b.x,b.y)}pathT(d,g){const{controlPoint:E,currentPoint:b}=PathElement.pathT(d);return g.push(E.x,E.y,b.x,b.y),PathParser.QUAD_TO}pathA(d){let{rX:g,rY:E,sweepFlag:b,xAxisRotation:w,centp:C,a1:S,ad:P}=PathElement.pathA(d);return b===0&&P>0&&(P-=2*Math.PI),b===1&&P<0&&(P+=2*Math.PI),[C.x,C.y,g,E,S,P,w,b]}calcLength(d,g,E,b){let w=0,C=null,S=null,P=0;switch(E){case PathParser.LINE_TO:return this.getLineLength(d,g,b[0],b[1]);case PathParser.CURVE_TO:for(w=0,C=this.getPointOnCubicBezier(0,d,g,b[0],b[1],b[2],b[3],b[4],b[5]),P=.01;P<=1;P+=.01)S=this.getPointOnCubicBezier(P,d,g,b[0],b[1],b[2],b[3],b[4],b[5]),w+=this.getLineLength(C.x,C.y,S.x,S.y),C=S;return w;case PathParser.QUAD_TO:for(w=0,C=this.getPointOnQuadraticBezier(0,d,g,b[0],b[1],b[2],b[3]),P=.01;P<=1;P+=.01)S=this.getPointOnQuadraticBezier(P,d,g,b[0],b[1],b[2],b[3]),w+=this.getLineLength(C.x,C.y,S.x,S.y),C=S;return w;case PathParser.ARC:{w=0;const I=b[4],M=b[5],D=b[4]+M;let k=Math.PI/180;if(Math.abs(I-D)<k&&(k=Math.abs(I-D)),C=this.getPointOnEllipticalArc(b[0],b[1],b[2],b[3],I,0),M<0)for(P=I-k;P>D;P-=k)S=this.getPointOnEllipticalArc(b[0],b[1],b[2],b[3],P,0),w+=this.getLineLength(C.x,C.y,S.x,S.y),C=S;else for(P=I+k;P<D;P+=k)S=this.getPointOnEllipticalArc(b[0],b[1],b[2],b[3],P,0),w+=this.getLineLength(C.x,C.y,S.x,S.y),C=S;return S=this.getPointOnEllipticalArc(b[0],b[1],b[2],b[3],D,0),w+=this.getLineLength(C.x,C.y,S.x,S.y),w}}return 0}getPointOnLine(d,g,E,b,w){let C=arguments.length>5&&arguments[5]!==void 0?arguments[5]:g,S=arguments.length>6&&arguments[6]!==void 0?arguments[6]:E;const P=(w-E)/(b-g+PSEUDO_ZERO);let I=Math.sqrt(d*d/(1+P*P));b<g&&(I*=-1);let M=P*I,D=null;if(b===g)D={x:C,y:S+M};else if((S-E)/(C-g+PSEUDO_ZERO)===P)D={x:C+I,y:S+M};else{let k=0,H=0;const F=this.getLineLength(g,E,b,w);if(F<PSEUDO_ZERO)return null;let j=(C-g)*(b-g)+(S-E)*(w-E);j/=F*F,k=g+j*(b-g),H=E+j*(w-E);const $=this.getLineLength(C,S,k,H),z=Math.sqrt(d*d-$*$);I=Math.sqrt(z*z/(1+P*P)),b<g&&(I*=-1),M=P*I,D={x:k+I,y:H+M}}return D}getPointOnPath(d){const g=this.getPathLength();let E=0,b=null;if(d<-5e-5||d-5e-5>g)return null;const{dataArray:w}=this;for(const C of w){if(C&&(C.pathLength<5e-5||E+C.pathLength+5e-5<d)){E+=C.pathLength;continue}const S=d-E;let P=0;switch(C.type){case PathParser.LINE_TO:b=this.getPointOnLine(S,C.start.x,C.start.y,C.points[0],C.points[1],C.start.x,C.start.y);break;case PathParser.ARC:{const I=C.points[4],M=C.points[5],D=C.points[4]+M;if(P=I+S/C.pathLength*M,M<0&&P<D||M>=0&&P>D)break;b=this.getPointOnEllipticalArc(C.points[0],C.points[1],C.points[2],C.points[3],P,C.points[6]);break}case PathParser.CURVE_TO:P=S/C.pathLength,P>1&&(P=1),b=this.getPointOnCubicBezier(P,C.start.x,C.start.y,C.points[0],C.points[1],C.points[2],C.points[3],C.points[4],C.points[5]);break;case PathParser.QUAD_TO:P=S/C.pathLength,P>1&&(P=1),b=this.getPointOnQuadraticBezier(P,C.start.x,C.start.y,C.points[0],C.points[1],C.points[2],C.points[3]);break}if(b)return b;break}return null}getLineLength(d,g,E,b){return Math.sqrt((E-d)*(E-d)+(b-g)*(b-g))}getPathLength(){return this.pathLength===-1&&(this.pathLength=this.dataArray.reduce((d,g)=>g.pathLength>0?d+g.pathLength:d,0)),this.pathLength}getPointOnCubicBezier(d,g,E,b,w,C,S,P,I){const M=P*CB1(d)+C*CB2(d)+b*CB3(d)+g*CB4(d),D=I*CB1(d)+S*CB2(d)+w*CB3(d)+E*CB4(d);return{x:M,y:D}}getPointOnQuadraticBezier(d,g,E,b,w,C,S){const P=C*QB1(d)+b*QB2(d)+g*QB3(d),I=S*QB1(d)+w*QB2(d)+E*QB3(d);return{x:P,y:I}}getPointOnEllipticalArc(d,g,E,b,w,C){const S=Math.cos(C),P=Math.sin(C),I={x:E*Math.cos(w),y:b*Math.sin(w)};return{x:d+(I.x*S-I.y*P),y:g+(I.x*P+I.y*S)}}buildEquidistantCache(d,g){const E=this.getPathLength(),b=g||.25,w=d||E/100;if(!this.equidistantCache||this.equidistantCache.step!==w||this.equidistantCache.precision!==b){this.equidistantCache={step:w,precision:b,points:[]};let C=0;for(let S=0;S<=E;S+=b){const P=this.getPointOnPath(S),I=this.getPointOnPath(S+b);!P||!I||(C+=this.getLineLength(P.x,P.y,I.x,I.y),C>=w&&(this.equidistantCache.points.push({x:P.x,y:P.y,distance:S}),C-=w))}}}getEquidistantPointOnPath(d,g,E){if(this.buildEquidistantCache(g,E),d<0||d-this.getPathLength()>5e-5)return null;const b=Math.round(d/this.getPathLength()*(this.equidistantCache.points.length-1));return this.equidistantCache.points[b]||null}constructor(d,g,E){super(d,g,E),this.type="textPath",this.textWidth=0,this.textHeight=0,this.pathLength=-1,this.glyphInfo=null,this.letterSpacingCache=[],this.measuresCache=new Map([["",0]]);const b=this.getHrefAttribute().getDefinition();this.text=this.getTextFromNode(),this.dataArray=this.parsePathData(b)}}const dataUriRegex=/^\s*data:(([^/,;]+\/[^/,;]+)(?:;([^,;=]+=[^,;=]+))?)?(?:;(base64))?,(.*)$/i;class ImageElement extends RenderedElement{async loadImage(d){try{const g=await this.document.createImage(d);this.image=g}catch(g){console.error('Error while loading image "'.concat(d,'":'),g)}this.loaded=!0}async loadSvg(d){const g=dataUriRegex.exec(d);if(g){const E=g[5];E&&(g[4]==="base64"?this.image=atob(E):this.image=decodeURIComponent(E))}else try{const b=await(await this.document.fetch(d)).text();this.image=b}catch(E){console.error('Error while loading image "'.concat(d,'":'),E)}this.loaded=!0}renderChildren(d){const{document:g,image:E,loaded:b}=this,w=this.getAttribute("x").getPixels("x"),C=this.getAttribute("y").getPixels("y"),S=this.getStyle("width").getPixels("x"),P=this.getStyle("height").getPixels("y");if(!(!b||!E||!S||!P)){if(d.save(),d.translate(w,C),typeof E=="string"){const I=g.canvg.forkString(d,E,{ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0,ignoreClear:!0,offsetX:0,offsetY:0,scaleWidth:S,scaleHeight:P}),{documentElement:M}=I.document;M&&(M.parent=this),I.render()}else g.setViewBox({ctx:d,aspectRatio:this.getAttribute("preserveAspectRatio").getString(),width:S,desiredWidth:E.width,height:P,desiredHeight:E.height}),this.loaded&&(!("complete"in E)||E.complete)&&d.drawImage(E,0,0);d.restore()}}getBoundingBox(){const d=this.getAttribute("x").getPixels("x"),g=this.getAttribute("y").getPixels("y"),E=this.getStyle("width").getPixels("x"),b=this.getStyle("height").getPixels("y");return new BoundingBox(d,g,d+E,g+b)}constructor(d,g,E){super(d,g,E),this.type="image",this.loaded=!1;const b=this.getHrefAttribute().getString();if(!b)return;const w=b.endsWith(".svg")||/^\s*data:image\/svg\+xml/i.test(b);d.images.push(this),w?this.loadSvg(b):this.loadImage(b)}}class SymbolElement extends RenderedElement{render(d){}constructor(...d){super(...d),this.type="symbol"}}class SVGFontLoader{async load(d,g){try{const{document:E}=this,w=(await E.canvg.parser.load(g)).getElementsByTagName("font");Array.from(w).forEach(C=>{const S=E.createElement(C);E.definitions.set(d,S)})}catch(E){console.error('Error while loading font "'.concat(g,'":'),E)}this.loaded=!0}constructor(d){this.document=d,this.loaded=!1,d.fonts.push(this)}}class StyleElement extends Element$1{constructor(d,g,E){super(d,g,E),this.type="style",compressSpaces(Array.from(g.childNodes).map(C=>C.textContent).join("").replace(/(\/\*([^*]|[\r\n]|(\*+([^*/]|[\r\n])))*\*+\/)|(^[\s]*\/\/.*)/gm,"").replace(/@import.*;/g,"")).split("}").forEach(C=>{const S=C.trim();if(!S)return;const P=S.split("{"),I=P[0].split(","),M=P[1].split(";");I.forEach(D=>{const k=D.trim();if(!k)return;const H=d.styles.get(k)||new Map;if(M.forEach(F=>{const j=F.indexOf(":"),$=F.substr(0,j).trim(),z=F.substr(j+1,F.length-j).trim();$&&z&&H.set($,new Property(d,$,z))}),d.styles.set(k,H),d.stylesSpecificity.set(k,getSelectorSpecificity(k)),k==="@font-face"){const F=H.get("font-family").getString().replace(/"|'/g,"");H.get("src").getString().split(",").forEach($=>{if($.indexOf('format("svg")')>0){const z=parseExternalUrl($);z&&new SVGFontLoader(d).load(F,z)}})}})})}}StyleElement.parseExternalUrl=parseExternalUrl;class UseElement extends RenderedElement{setContext(d){super.setContext(d);const g=this.getAttribute("x"),E=this.getAttribute("y");g.hasValue()&&d.translate(g.getPixels("x"),0),E.hasValue()&&d.translate(0,E.getPixels("y"))}path(d){const{element:g}=this;g&&g.path(d)}renderChildren(d){const{document:g,element:E}=this;if(E){let b=E;if(E.type==="symbol"&&(b=new SVGElement$1(g),b.attributes.set("viewBox",new Property(g,"viewBox",E.getAttribute("viewBox").getString())),b.attributes.set("preserveAspectRatio",new Property(g,"preserveAspectRatio",E.getAttribute("preserveAspectRatio").getString())),b.attributes.set("overflow",new Property(g,"overflow",E.getAttribute("overflow").getString())),b.children=E.children,E.styles.set("opacity",new Property(g,"opacity",this.calculateOpacity()))),b.type==="svg"){const C=this.getStyle("width",!1,!0),S=this.getStyle("height",!1,!0);C.hasValue()&&b.attributes.set("width",new Property(g,"width",C.getString())),S.hasValue()&&b.attributes.set("height",new Property(g,"height",S.getString()))}const w=b.parent;b.parent=this,b.render(d),b.parent=w}}getBoundingBox(d){const{element:g}=this;return g?g.getBoundingBox(d):null}elementTransform(){const{document:d,element:g}=this;return g?Transform$1.fromElement(d,g):null}get element(){return this.cachedElement||(this.cachedElement=this.getHrefAttribute().getDefinition()),this.cachedElement}constructor(...d){super(...d),this.type="use"}}function imGet(x,d,g,E,b,w){return x[g*E*4+d*4+w]}function imSet(x,d,g,E,b,w,C){x[g*E*4+d*4+w]=C}function m(x,d,g){return x[d]*g}function c(x,d,g,E){return d+Math.cos(x)*g+Math.sin(x)*E}class FeColorMatrixElement extends Element$1{apply(d,g,E,b,w){const{includeOpacity:C,matrix:S}=this,P=d.getImageData(0,0,b,w);for(let I=0;I<w;I++)for(let M=0;M<b;M++){const D=imGet(P.data,M,I,b,w,0),k=imGet(P.data,M,I,b,w,1),H=imGet(P.data,M,I,b,w,2),F=imGet(P.data,M,I,b,w,3);let j=m(S,0,D)+m(S,1,k)+m(S,2,H)+m(S,3,F)+m(S,4,1),$=m(S,5,D)+m(S,6,k)+m(S,7,H)+m(S,8,F)+m(S,9,1),z=m(S,10,D)+m(S,11,k)+m(S,12,H)+m(S,13,F)+m(S,14,1),U=m(S,15,D)+m(S,16,k)+m(S,17,H)+m(S,18,F)+m(S,19,1);C&&(j=0,$=0,z=0,U*=F/255),imSet(P.data,M,I,b,w,0,j),imSet(P.data,M,I,b,w,1,$),imSet(P.data,M,I,b,w,2,z),imSet(P.data,M,I,b,w,3,U)}d.clearRect(0,0,b,w),d.putImageData(P,0,0)}constructor(d,g,E){super(d,g,E),this.type="feColorMatrix";let b=toNumbers(this.getAttribute("values").getString());switch(this.getAttribute("type").getString("matrix")){case"saturate":{const w=b[0];b=[.213+.787*w,.715-.715*w,.072-.072*w,0,0,.213-.213*w,.715+.285*w,.072-.072*w,0,0,.213-.213*w,.715-.715*w,.072+.928*w,0,0,0,0,0,1,0,0,0,0,0,1];break}case"hueRotate":{const w=b[0]*Math.PI/180;b=[c(w,.213,.787,-.213),c(w,.715,-.715,-.715),c(w,.072,-.072,.928),0,0,c(w,.213,-.213,.143),c(w,.715,.285,.14),c(w,.072,-.072,-.283),0,0,c(w,.213,-.213,-.787),c(w,.715,-.715,.715),c(w,.072,.928,.072),0,0,0,0,0,1,0,0,0,0,0,1];break}case"luminanceToAlpha":b=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.2125,.7154,.0721,0,0,0,0,0,0,1];break}this.matrix=b,this.includeOpacity=this.getAttribute("includeOpacity").hasValue()}}class MaskElement extends Element$1{apply(d,g){const{document:E}=this;let b=this.getAttribute("x").getPixels("x"),w=this.getAttribute("y").getPixels("y"),C=this.getStyle("width").getPixels("x"),S=this.getStyle("height").getPixels("y");if(!C&&!S){const H=new BoundingBox;this.children.forEach(F=>{H.addBoundingBox(F.getBoundingBox(d))}),b=Math.floor(H.x1),w=Math.floor(H.y1),C=Math.floor(H.width),S=Math.floor(H.height)}const P=this.removeStyles(g,MaskElement.ignoreStyles),I=E.createCanvas(b+C,w+S),M=I.getContext("2d");E.screen.setDefaults(M),this.renderChildren(M),new FeColorMatrixElement(E,{nodeType:1,childNodes:[],attributes:[{nodeName:"type",value:"luminanceToAlpha"},{nodeName:"includeOpacity",value:"true"}]}).apply(M,0,0,b+C,w+S);const D=E.createCanvas(b+C,w+S),k=D.getContext("2d");E.screen.setDefaults(k),g.render(k),k.globalCompositeOperation="destination-in",k.fillStyle=M.createPattern(I,"no-repeat"),k.fillRect(0,0,b+C,w+S),d.fillStyle=k.createPattern(D,"no-repeat"),d.fillRect(0,0,b+C,w+S),this.restoreStyles(g,P)}render(d){}constructor(...d){super(...d),this.type="mask"}}MaskElement.ignoreStyles=["mask","transform","clip-path"];const noop$1=()=>{};class ClipPathElement extends Element$1{apply(d){const{document:g}=this,E=Reflect.getPrototypeOf(d),{beginPath:b,closePath:w}=d;E&&(E.beginPath=noop$1,E.closePath=noop$1),Reflect.apply(b,d,[]),this.children.forEach(C=>{if(!("path"in C))return;let S="elementTransform"in C?C.elementTransform():null;S||(S=Transform$1.fromElement(g,C)),S&&S.apply(d),C.path(d),E&&(E.closePath=w),S&&S.unapply(d)}),Reflect.apply(w,d,[]),d.clip(),E&&(E.beginPath=b,E.closePath=w)}render(d){}constructor(...d){super(...d),this.type="clipPath"}}class FilterElement extends Element$1{apply(d,g){const{document:E,children:b}=this,w="getBoundingBox"in g?g.getBoundingBox(d):null;if(!w)return;let C=0,S=0;b.forEach(z=>{const U=z.extraFilterDistance||0;C=Math.max(C,U),S=Math.max(S,U)});const P=Math.floor(w.width),I=Math.floor(w.height),M=P+2*C,D=I+2*S;if(M<1||D<1)return;const k=Math.floor(w.x),H=Math.floor(w.y),F=this.removeStyles(g,FilterElement.ignoreStyles),j=E.createCanvas(M,D),$=j.getContext("2d");E.screen.setDefaults($),$.translate(-k+C,-H+S),g.render($),b.forEach(z=>{typeof z.apply=="function"&&z.apply($,0,0,M,D)}),d.drawImage(j,0,0,M,D,k-C,H-S,M,D),this.restoreStyles(g,F)}render(d){}constructor(...d){super(...d),this.type="filter"}}FilterElement.ignoreStyles=["filter","transform","clip-path"];class FeDropShadowElement extends Element$1{apply(d,g,E,b,w){}constructor(d,g,E){super(d,g,E),this.type="feDropShadow",this.addStylesFromStyleDefinition()}}class FeMorphologyElement extends Element$1{apply(d,g,E,b,w){}constructor(...d){super(...d),this.type="feMorphology"}}class FeCompositeElement extends Element$1{apply(d,g,E,b,w){}constructor(...d){super(...d),this.type="feComposite"}}class FeGaussianBlurElement extends Element$1{apply(d,g,E,b,w){const{document:C,blurRadius:S}=this,P=C.window?C.window.document.body:null,I=d.canvas;I.id=C.getUniqueId(),P&&(I.style.display="none",P.appendChild(I)),processCanvasRGBA(I,g,E,b,w,S),P&&P.removeChild(I)}constructor(d,g,E){super(d,g,E),this.type="feGaussianBlur",this.blurRadius=Math.floor(this.getAttribute("stdDeviation").getNumber()),this.extraFilterDistance=this.blurRadius}}class TitleElement extends Element$1{constructor(...d){super(...d),this.type="title"}}class DescElement extends Element$1{constructor(...d){super(...d),this.type="desc"}}const elements={svg:SVGElement$1,rect:RectElement,circle:CircleElement,ellipse:EllipseElement,line:LineElement,polyline:PolylineElement,polygon:PolygonElement,path:PathElement,pattern:PatternElement,marker:MarkerElement,defs:DefsElement,linearGradient:LinearGradientElement,radialGradient:RadialGradientElement,stop:StopElement,animate:AnimateElement,animateColor:AnimateColorElement,animateTransform:AnimateTransformElement,font:FontElement,"font-face":FontFaceElement,"missing-glyph":MissingGlyphElement,glyph:GlyphElement,text:TextElement,tspan:TSpanElement,tref:TRefElement,a:AElement,textPath:TextPathElement,image:ImageElement,g:GElement,symbol:SymbolElement,style:StyleElement,use:UseElement,mask:MaskElement,clipPath:ClipPathElement,filter:FilterElement,feDropShadow:FeDropShadowElement,feMorphology:FeMorphologyElement,feComposite:FeCompositeElement,feColorMatrix:FeColorMatrixElement,feGaussianBlur:FeGaussianBlurElement,title:TitleElement,desc:DescElement};function createCanvas(x,d){const g=document.createElement("canvas");return g.width=x,g.height=d,g}async function createImage(x){let d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const g=document.createElement("img");return d&&(g.crossOrigin="Anonymous"),new Promise((E,b)=>{g.onload=()=>{E(g)},g.onerror=(w,C,S,P,I)=>{b(I)},g.src=x})}const DEFAULT_EM_SIZE=12;class Document{bindCreateImage(d,g){return typeof g=="boolean"?(E,b)=>d(E,typeof b=="boolean"?b:g):d}get window(){return this.screen.window}get fetch(){return this.screen.fetch}get ctx(){return this.screen.ctx}get emSize(){const{emSizeStack:d}=this;return d[d.length-1]||DEFAULT_EM_SIZE}set emSize(d){const{emSizeStack:g}=this;g.push(d)}popEmSize(){const{emSizeStack:d}=this;d.pop()}getUniqueId(){return"canvg".concat(++this.uniqueId)}isImagesLoaded(){return this.images.every(d=>d.loaded)}isFontsLoaded(){return this.fonts.every(d=>d.loaded)}createDocumentElement(d){const g=this.createElement(d.documentElement);return g.root=!0,g.addStylesFromStyleDefinition(),this.documentElement=g,g}createElement(d){const g=d.nodeName.replace(/^[^:]+:/,""),E=Document.elementTypes[g];return E?new E(this,d):new UnknownElement(this,d)}createTextNode(d){return new TextNode(this,d)}setViewBox(d){this.screen.setViewBox({document:this,...d})}constructor(d,{rootEmSize:g=DEFAULT_EM_SIZE,emSize:E=DEFAULT_EM_SIZE,createCanvas:b=Document.createCanvas,createImage:w=Document.createImage,anonymousCrossOrigin:C}={}){this.canvg=d,this.definitions=new Map,this.styles=new Map,this.stylesSpecificity=new Map,this.images=[],this.fonts=[],this.emSizeStack=[],this.uniqueId=0,this.screen=d.screen,this.rootEmSize=g,this.emSize=E,this.createCanvas=b,this.createImage=this.bindCreateImage(w,C),this.screen.wait(()=>this.isImagesLoaded()),this.screen.wait(()=>this.isFontsLoaded())}}Document.createCanvas=createCanvas;Document.createImage=createImage;Document.elementTypes=elements;class Canvg{static async from(d,g){let E=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const w=await new Parser(E).parse(g);return new Canvg(d,w,E)}static fromString(d,g){let E=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const w=new Parser(E).parseFromString(g);return new Canvg(d,w,E)}fork(d,g){let E=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return Canvg.from(d,g,{...this.options,...E})}forkString(d,g){let E=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return Canvg.fromString(d,g,{...this.options,...E})}ready(){return this.screen.ready()}isReady(){return this.screen.isReady()}async render(){let d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.start({enableRedraw:!0,ignoreAnimation:!0,ignoreMouse:!0,...d}),await this.ready(),this.stop()}start(){let d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{documentElement:g,screen:E,options:b}=this;E.start(g,{enableRedraw:!0,...b,...d})}stop(){this.screen.stop()}resize(d){let g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:d,E=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;this.documentElement.resize(d,g,E)}constructor(d,g,E={}){this.parser=new Parser(E),this.screen=new Screen(d,E),this.options=E;const b=new Document(this,E),w=b.createDocumentElement(g);this.document=b,this.documentElement=w}}var noop={value:()=>{}};function dispatch(){for(var x=0,d=arguments.length,g={},E;x<d;++x){if(!(E=arguments[x]+"")||E in g||/[\s.]/.test(E))throw new Error("illegal type: "+E);g[E]=[]}return new Dispatch(g)}function Dispatch(x){this._=x}function parseTypenames$1(x,d){return x.trim().split(/^|\s+/).map(function(g){var E="",b=g.indexOf(".");if(b>=0&&(E=g.slice(b+1),g=g.slice(0,b)),g&&!d.hasOwnProperty(g))throw new Error("unknown type: "+g);return{type:g,name:E}})}Dispatch.prototype=dispatch.prototype={constructor:Dispatch,on:function(x,d){var g=this._,E=parseTypenames$1(x+"",g),b,w=-1,C=E.length;if(arguments.length<2){for(;++w<C;)if((b=(x=E[w]).type)&&(b=get$4(g[b],x.name)))return b;return}if(d!=null&&typeof d!="function")throw new Error("invalid callback: "+d);for(;++w<C;)if(b=(x=E[w]).type)g[b]=set$1(g[b],x.name,d);else if(d==null)for(b in g)g[b]=set$1(g[b],x.name,null);return this},copy:function(){var x={},d=this._;for(var g in d)x[g]=d[g].slice();return new Dispatch(x)},call:function(x,d){if((b=arguments.length-2)>0)for(var g=new Array(b),E=0,b,w;E<b;++E)g[E]=arguments[E+2];if(!this._.hasOwnProperty(x))throw new Error("unknown type: "+x);for(w=this._[x],E=0,b=w.length;E<b;++E)w[E].value.apply(d,g)},apply:function(x,d,g){if(!this._.hasOwnProperty(x))throw new Error("unknown type: "+x);for(var E=this._[x],b=0,w=E.length;b<w;++b)E[b].value.apply(d,g)}};function get$4(x,d){for(var g=0,E=x.length,b;g<E;++g)if((b=x[g]).name===d)return b.value}function set$1(x,d,g){for(var E=0,b=x.length;E<b;++E)if(x[E].name===d){x[E]=noop,x=x.slice(0,E).concat(x.slice(E+1));break}return g!=null&&x.push({name:d,value:g}),x}var xhtml="http://www.w3.org/1999/xhtml";const namespaces={svg:"http://www.w3.org/2000/svg",xhtml,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function namespace(x){var d=x+="",g=d.indexOf(":");return g>=0&&(d=x.slice(0,g))!=="xmlns"&&(x=x.slice(g+1)),namespaces.hasOwnProperty(d)?{space:namespaces[d],local:x}:x}function creatorInherit(x){return function(){var d=this.ownerDocument,g=this.namespaceURI;return g===xhtml&&d.documentElement.namespaceURI===xhtml?d.createElement(x):d.createElementNS(g,x)}}function creatorFixed(x){return function(){return this.ownerDocument.createElementNS(x.space,x.local)}}function creator(x){var d=namespace(x);return(d.local?creatorFixed:creatorInherit)(d)}function none(){}function selector(x){return x==null?none:function(){return this.querySelector(x)}}function selection_select(x){typeof x!="function"&&(x=selector(x));for(var d=this._groups,g=d.length,E=new Array(g),b=0;b<g;++b)for(var w=d[b],C=w.length,S=E[b]=new Array(C),P,I,M=0;M<C;++M)(P=w[M])&&(I=x.call(P,P.__data__,M,w))&&("__data__"in P&&(I.__data__=P.__data__),S[M]=I);return new Selection$1(E,this._parents)}function array(x){return x==null?[]:Array.isArray(x)?x:Array.from(x)}function empty(){return[]}function selectorAll(x){return x==null?empty:function(){return this.querySelectorAll(x)}}function arrayAll(x){return function(){return array(x.apply(this,arguments))}}function selection_selectAll(x){typeof x=="function"?x=arrayAll(x):x=selectorAll(x);for(var d=this._groups,g=d.length,E=[],b=[],w=0;w<g;++w)for(var C=d[w],S=C.length,P,I=0;I<S;++I)(P=C[I])&&(E.push(x.call(P,P.__data__,I,C)),b.push(P));return new Selection$1(E,b)}function matcher(x){return function(){return this.matches(x)}}function childMatcher(x){return function(d){return d.matches(x)}}var find=Array.prototype.find;function childFind(x){return function(){return find.call(this.children,x)}}function childFirst(){return this.firstElementChild}function selection_selectChild(x){return this.select(x==null?childFirst:childFind(typeof x=="function"?x:childMatcher(x)))}var filter=Array.prototype.filter;function children(){return Array.from(this.children)}function childrenFilter(x){return function(){return filter.call(this.children,x)}}function selection_selectChildren(x){return this.selectAll(x==null?children:childrenFilter(typeof x=="function"?x:childMatcher(x)))}function selection_filter(x){typeof x!="function"&&(x=matcher(x));for(var d=this._groups,g=d.length,E=new Array(g),b=0;b<g;++b)for(var w=d[b],C=w.length,S=E[b]=[],P,I=0;I<C;++I)(P=w[I])&&x.call(P,P.__data__,I,w)&&S.push(P);return new Selection$1(E,this._parents)}function sparse(x){return new Array(x.length)}function selection_enter(){return new Selection$1(this._enter||this._groups.map(sparse),this._parents)}function EnterNode(x,d){this.ownerDocument=x.ownerDocument,this.namespaceURI=x.namespaceURI,this._next=null,this._parent=x,this.__data__=d}EnterNode.prototype={constructor:EnterNode,appendChild:function(x){return this._parent.insertBefore(x,this._next)},insertBefore:function(x,d){return this._parent.insertBefore(x,d)},querySelector:function(x){return this._parent.querySelector(x)},querySelectorAll:function(x){return this._parent.querySelectorAll(x)}};function constant$2(x){return function(){return x}}function bindIndex(x,d,g,E,b,w){for(var C=0,S,P=d.length,I=w.length;C<I;++C)(S=d[C])?(S.__data__=w[C],E[C]=S):g[C]=new EnterNode(x,w[C]);for(;C<P;++C)(S=d[C])&&(b[C]=S)}function bindKey(x,d,g,E,b,w,C){var S,P,I=new Map,M=d.length,D=w.length,k=new Array(M),H;for(S=0;S<M;++S)(P=d[S])&&(k[S]=H=C.call(P,P.__data__,S,d)+"",I.has(H)?b[S]=P:I.set(H,P));for(S=0;S<D;++S)H=C.call(x,w[S],S,w)+"",(P=I.get(H))?(E[S]=P,P.__data__=w[S],I.delete(H)):g[S]=new EnterNode(x,w[S]);for(S=0;S<M;++S)(P=d[S])&&I.get(k[S])===P&&(b[S]=P)}function datum(x){return x.__data__}function selection_data(x,d){if(!arguments.length)return Array.from(this,datum);var g=d?bindKey:bindIndex,E=this._parents,b=this._groups;typeof x!="function"&&(x=constant$2(x));for(var w=b.length,C=new Array(w),S=new Array(w),P=new Array(w),I=0;I<w;++I){var M=E[I],D=b[I],k=D.length,H=arraylike(x.call(M,M&&M.__data__,I,E)),F=H.length,j=S[I]=new Array(F),$=C[I]=new Array(F),z=P[I]=new Array(k);g(M,D,j,$,z,H,d);for(var U=0,W=0,q,Z;U<F;++U)if(q=j[U]){for(U>=W&&(W=U+1);!(Z=$[W])&&++W<F;);q._next=Z||null}}return C=new Selection$1(C,E),C._enter=S,C._exit=P,C}function arraylike(x){return typeof x=="object"&&"length"in x?x:Array.from(x)}function selection_exit(){return new Selection$1(this._exit||this._groups.map(sparse),this._parents)}function selection_join(x,d,g){var E=this.enter(),b=this,w=this.exit();return typeof x=="function"?(E=x(E),E&&(E=E.selection())):E=E.append(x+""),d!=null&&(b=d(b),b&&(b=b.selection())),g==null?w.remove():g(w),E&&b?E.merge(b).order():b}function selection_merge(x){for(var d=x.selection?x.selection():x,g=this._groups,E=d._groups,b=g.length,w=E.length,C=Math.min(b,w),S=new Array(b),P=0;P<C;++P)for(var I=g[P],M=E[P],D=I.length,k=S[P]=new Array(D),H,F=0;F<D;++F)(H=I[F]||M[F])&&(k[F]=H);for(;P<b;++P)S[P]=g[P];return new Selection$1(S,this._parents)}function selection_order(){for(var x=this._groups,d=-1,g=x.length;++d<g;)for(var E=x[d],b=E.length-1,w=E[b],C;--b>=0;)(C=E[b])&&(w&&C.compareDocumentPosition(w)^4&&w.parentNode.insertBefore(C,w),w=C);return this}function selection_sort(x){x||(x=ascending);function d(D,k){return D&&k?x(D.__data__,k.__data__):!D-!k}for(var g=this._groups,E=g.length,b=new Array(E),w=0;w<E;++w){for(var C=g[w],S=C.length,P=b[w]=new Array(S),I,M=0;M<S;++M)(I=C[M])&&(P[M]=I);P.sort(d)}return new Selection$1(b,this._parents).order()}function ascending(x,d){return x<d?-1:x>d?1:x>=d?0:NaN}function selection_call(){var x=arguments[0];return arguments[0]=this,x.apply(null,arguments),this}function selection_nodes(){return Array.from(this)}function selection_node(){for(var x=this._groups,d=0,g=x.length;d<g;++d)for(var E=x[d],b=0,w=E.length;b<w;++b){var C=E[b];if(C)return C}return null}function selection_size(){let x=0;for(const d of this)++x;return x}function selection_empty(){return!this.node()}function selection_each(x){for(var d=this._groups,g=0,E=d.length;g<E;++g)for(var b=d[g],w=0,C=b.length,S;w<C;++w)(S=b[w])&&x.call(S,S.__data__,w,b);return this}function attrRemove$1(x){return function(){this.removeAttribute(x)}}function attrRemoveNS$1(x){return function(){this.removeAttributeNS(x.space,x.local)}}function attrConstant$1(x,d){return function(){this.setAttribute(x,d)}}function attrConstantNS$1(x,d){return function(){this.setAttributeNS(x.space,x.local,d)}}function attrFunction$1(x,d){return function(){var g=d.apply(this,arguments);g==null?this.removeAttribute(x):this.setAttribute(x,g)}}function attrFunctionNS$1(x,d){return function(){var g=d.apply(this,arguments);g==null?this.removeAttributeNS(x.space,x.local):this.setAttributeNS(x.space,x.local,g)}}function selection_attr(x,d){var g=namespace(x);if(arguments.length<2){var E=this.node();return g.local?E.getAttributeNS(g.space,g.local):E.getAttribute(g)}return this.each((d==null?g.local?attrRemoveNS$1:attrRemove$1:typeof d=="function"?g.local?attrFunctionNS$1:attrFunction$1:g.local?attrConstantNS$1:attrConstant$1)(g,d))}function defaultView(x){return x.ownerDocument&&x.ownerDocument.defaultView||x.document&&x||x.defaultView}function styleRemove$1(x){return function(){this.style.removeProperty(x)}}function styleConstant$1(x,d,g){return function(){this.style.setProperty(x,d,g)}}function styleFunction$1(x,d,g){return function(){var E=d.apply(this,arguments);E==null?this.style.removeProperty(x):this.style.setProperty(x,E,g)}}function selection_style(x,d,g){return arguments.length>1?this.each((d==null?styleRemove$1:typeof d=="function"?styleFunction$1:styleConstant$1)(x,d,g??"")):styleValue(this.node(),x)}function styleValue(x,d){return x.style.getPropertyValue(d)||defaultView(x).getComputedStyle(x,null).getPropertyValue(d)}function propertyRemove(x){return function(){delete this[x]}}function propertyConstant(x,d){return function(){this[x]=d}}function propertyFunction(x,d){return function(){var g=d.apply(this,arguments);g==null?delete this[x]:this[x]=g}}function selection_property(x,d){return arguments.length>1?this.each((d==null?propertyRemove:typeof d=="function"?propertyFunction:propertyConstant)(x,d)):this.node()[x]}function classArray(x){return x.trim().split(/^|\s+/)}function classList(x){return x.classList||new ClassList(x)}function ClassList(x){this._node=x,this._names=classArray(x.getAttribute("class")||"")}ClassList.prototype={add:function(x){var d=this._names.indexOf(x);d<0&&(this._names.push(x),this._node.setAttribute("class",this._names.join(" ")))},remove:function(x){var d=this._names.indexOf(x);d>=0&&(this._names.splice(d,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(x){return this._names.indexOf(x)>=0}};function classedAdd(x,d){for(var g=classList(x),E=-1,b=d.length;++E<b;)g.add(d[E])}function classedRemove(x,d){for(var g=classList(x),E=-1,b=d.length;++E<b;)g.remove(d[E])}function classedTrue(x){return function(){classedAdd(this,x)}}function classedFalse(x){return function(){classedRemove(this,x)}}function classedFunction(x,d){return function(){(d.apply(this,arguments)?classedAdd:classedRemove)(this,x)}}function selection_classed(x,d){var g=classArray(x+"");if(arguments.length<2){for(var E=classList(this.node()),b=-1,w=g.length;++b<w;)if(!E.contains(g[b]))return!1;return!0}return this.each((typeof d=="function"?classedFunction:d?classedTrue:classedFalse)(g,d))}function textRemove(){this.textContent=""}function textConstant$1(x){return function(){this.textContent=x}}function textFunction$1(x){return function(){var d=x.apply(this,arguments);this.textContent=d??""}}function selection_text(x){return arguments.length?this.each(x==null?textRemove:(typeof x=="function"?textFunction$1:textConstant$1)(x)):this.node().textContent}function htmlRemove(){this.innerHTML=""}function htmlConstant(x){return function(){this.innerHTML=x}}function htmlFunction(x){return function(){var d=x.apply(this,arguments);this.innerHTML=d??""}}function selection_html(x){return arguments.length?this.each(x==null?htmlRemove:(typeof x=="function"?htmlFunction:htmlConstant)(x)):this.node().innerHTML}function raise(){this.nextSibling&&this.parentNode.appendChild(this)}function selection_raise(){return this.each(raise)}function lower(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function selection_lower(){return this.each(lower)}function selection_append(x){var d=typeof x=="function"?x:creator(x);return this.select(function(){return this.appendChild(d.apply(this,arguments))})}function constantNull(){return null}function selection_insert(x,d){var g=typeof x=="function"?x:creator(x),E=d==null?constantNull:typeof d=="function"?d:selector(d);return this.select(function(){return this.insertBefore(g.apply(this,arguments),E.apply(this,arguments)||null)})}function remove(){var x=this.parentNode;x&&x.removeChild(this)}function selection_remove(){return this.each(remove)}function selection_cloneShallow(){var x=this.cloneNode(!1),d=this.parentNode;return d?d.insertBefore(x,this.nextSibling):x}function selection_cloneDeep(){var x=this.cloneNode(!0),d=this.parentNode;return d?d.insertBefore(x,this.nextSibling):x}function selection_clone(x){return this.select(x?selection_cloneDeep:selection_cloneShallow)}function selection_datum(x){return arguments.length?this.property("__data__",x):this.node().__data__}function contextListener(x){return function(d){x.call(this,d,this.__data__)}}function parseTypenames(x){return x.trim().split(/^|\s+/).map(function(d){var g="",E=d.indexOf(".");return E>=0&&(g=d.slice(E+1),d=d.slice(0,E)),{type:d,name:g}})}function onRemove(x){return function(){var d=this.__on;if(d){for(var g=0,E=-1,b=d.length,w;g<b;++g)w=d[g],(!x.type||w.type===x.type)&&w.name===x.name?this.removeEventListener(w.type,w.listener,w.options):d[++E]=w;++E?d.length=E:delete this.__on}}}function onAdd(x,d,g){return function(){var E=this.__on,b,w=contextListener(d);if(E){for(var C=0,S=E.length;C<S;++C)if((b=E[C]).type===x.type&&b.name===x.name){this.removeEventListener(b.type,b.listener,b.options),this.addEventListener(b.type,b.listener=w,b.options=g),b.value=d;return}}this.addEventListener(x.type,w,g),b={type:x.type,name:x.name,value:d,listener:w,options:g},E?E.push(b):this.__on=[b]}}function selection_on(x,d,g){var E=parseTypenames(x+""),b,w=E.length,C;if(arguments.length<2){var S=this.node().__on;if(S){for(var P=0,I=S.length,M;P<I;++P)for(b=0,M=S[P];b<w;++b)if((C=E[b]).type===M.type&&C.name===M.name)return M.value}return}for(S=d?onAdd:onRemove,b=0;b<w;++b)this.each(S(E[b],d,g));return this}function dispatchEvent(x,d,g){var E=defaultView(x),b=E.CustomEvent;typeof b=="function"?b=new b(d,g):(b=E.document.createEvent("Event"),g?(b.initEvent(d,g.bubbles,g.cancelable),b.detail=g.detail):b.initEvent(d,!1,!1)),x.dispatchEvent(b)}function dispatchConstant(x,d){return function(){return dispatchEvent(this,x,d)}}function dispatchFunction(x,d){return function(){return dispatchEvent(this,x,d.apply(this,arguments))}}function selection_dispatch(x,d){return this.each((typeof d=="function"?dispatchFunction:dispatchConstant)(x,d))}function*selection_iterator(){for(var x=this._groups,d=0,g=x.length;d<g;++d)for(var E=x[d],b=0,w=E.length,C;b<w;++b)(C=E[b])&&(yield C)}var root$1=[null];function Selection$1(x,d){this._groups=x,this._parents=d}function selection(){return new Selection$1([[document.documentElement]],root$1)}function selection_selection(){return this}Selection$1.prototype=selection.prototype={constructor:Selection$1,select:selection_select,selectAll:selection_selectAll,selectChild:selection_selectChild,selectChildren:selection_selectChildren,filter:selection_filter,data:selection_data,enter:selection_enter,exit:selection_exit,join:selection_join,merge:selection_merge,selection:selection_selection,order:selection_order,sort:selection_sort,call:selection_call,nodes:selection_nodes,node:selection_node,size:selection_size,empty:selection_empty,each:selection_each,attr:selection_attr,style:selection_style,property:selection_property,classed:selection_classed,text:selection_text,html:selection_html,raise:selection_raise,lower:selection_lower,append:selection_append,insert:selection_insert,remove:selection_remove,clone:selection_clone,datum:selection_datum,on:selection_on,dispatch:selection_dispatch,[Symbol.iterator]:selection_iterator};function select(x){return typeof x=="string"?new Selection$1([[document.querySelector(x)]],[document.documentElement]):new Selection$1([[x]],root$1)}function define(x,d,g){x.prototype=d.prototype=g,g.constructor=x}function extend(x,d){var g=Object.create(x.prototype);for(var E in d)g[E]=d[E];return g}function Color(){}var darker=.7,brighter=1/darker,reI="\\s*([+-]?\\d+)\\s*",reN="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",reP="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",reHex=/^#([0-9a-f]{3,8})$/,reRgbInteger=new RegExp(`^rgb\\(${reI},${reI},${reI}\\)$`),reRgbPercent=new RegExp(`^rgb\\(${reP},${reP},${reP}\\)$`),reRgbaInteger=new RegExp(`^rgba\\(${reI},${reI},${reI},${reN}\\)$`),reRgbaPercent=new RegExp(`^rgba\\(${reP},${reP},${reP},${reN}\\)$`),reHslPercent=new RegExp(`^hsl\\(${reN},${reP},${reP}\\)$`),reHslaPercent=new RegExp(`^hsla\\(${reN},${reP},${reP},${reN}\\)$`),named={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};define(Color,color,{copy(x){return Object.assign(new this.constructor,this,x)},displayable(){return this.rgb().displayable()},hex:color_formatHex,formatHex:color_formatHex,formatHex8:color_formatHex8,formatHsl:color_formatHsl,formatRgb:color_formatRgb,toString:color_formatRgb});function color_formatHex(){return this.rgb().formatHex()}function color_formatHex8(){return this.rgb().formatHex8()}function color_formatHsl(){return hslConvert(this).formatHsl()}function color_formatRgb(){return this.rgb().formatRgb()}function color(x){var d,g;return x=(x+"").trim().toLowerCase(),(d=reHex.exec(x))?(g=d[1].length,d=parseInt(d[1],16),g===6?rgbn(d):g===3?new Rgb(d>>8&15|d>>4&240,d>>4&15|d&240,(d&15)<<4|d&15,1):g===8?rgba(d>>24&255,d>>16&255,d>>8&255,(d&255)/255):g===4?rgba(d>>12&15|d>>8&240,d>>8&15|d>>4&240,d>>4&15|d&240,((d&15)<<4|d&15)/255):null):(d=reRgbInteger.exec(x))?new Rgb(d[1],d[2],d[3],1):(d=reRgbPercent.exec(x))?new Rgb(d[1]*255/100,d[2]*255/100,d[3]*255/100,1):(d=reRgbaInteger.exec(x))?rgba(d[1],d[2],d[3],d[4]):(d=reRgbaPercent.exec(x))?rgba(d[1]*255/100,d[2]*255/100,d[3]*255/100,d[4]):(d=reHslPercent.exec(x))?hsla(d[1],d[2]/100,d[3]/100,1):(d=reHslaPercent.exec(x))?hsla(d[1],d[2]/100,d[3]/100,d[4]):named.hasOwnProperty(x)?rgbn(named[x]):x==="transparent"?new Rgb(NaN,NaN,NaN,0):null}function rgbn(x){return new Rgb(x>>16&255,x>>8&255,x&255,1)}function rgba(x,d,g,E){return E<=0&&(x=d=g=NaN),new Rgb(x,d,g,E)}function rgbConvert(x){return x instanceof Color||(x=color(x)),x?(x=x.rgb(),new Rgb(x.r,x.g,x.b,x.opacity)):new Rgb}function rgb(x,d,g,E){return arguments.length===1?rgbConvert(x):new Rgb(x,d,g,E??1)}function Rgb(x,d,g,E){this.r=+x,this.g=+d,this.b=+g,this.opacity=+E}define(Rgb,rgb,extend(Color,{brighter(x){return x=x==null?brighter:Math.pow(brighter,x),new Rgb(this.r*x,this.g*x,this.b*x,this.opacity)},darker(x){return x=x==null?darker:Math.pow(darker,x),new Rgb(this.r*x,this.g*x,this.b*x,this.opacity)},rgb(){return this},clamp(){return new Rgb(clampi(this.r),clampi(this.g),clampi(this.b),clampa(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:rgb_formatHex,formatHex:rgb_formatHex,formatHex8:rgb_formatHex8,formatRgb:rgb_formatRgb,toString:rgb_formatRgb}));function rgb_formatHex(){return`#${hex(this.r)}${hex(this.g)}${hex(this.b)}`}function rgb_formatHex8(){return`#${hex(this.r)}${hex(this.g)}${hex(this.b)}${hex((isNaN(this.opacity)?1:this.opacity)*255)}`}function rgb_formatRgb(){const x=clampa(this.opacity);return`${x===1?"rgb(":"rgba("}${clampi(this.r)}, ${clampi(this.g)}, ${clampi(this.b)}${x===1?")":`, ${x})`}`}function clampa(x){return isNaN(x)?1:Math.max(0,Math.min(1,x))}function clampi(x){return Math.max(0,Math.min(255,Math.round(x)||0))}function hex(x){return x=clampi(x),(x<16?"0":"")+x.toString(16)}function hsla(x,d,g,E){return E<=0?x=d=g=NaN:g<=0||g>=1?x=d=NaN:d<=0&&(x=NaN),new Hsl(x,d,g,E)}function hslConvert(x){if(x instanceof Hsl)return new Hsl(x.h,x.s,x.l,x.opacity);if(x instanceof Color||(x=color(x)),!x)return new Hsl;if(x instanceof Hsl)return x;x=x.rgb();var d=x.r/255,g=x.g/255,E=x.b/255,b=Math.min(d,g,E),w=Math.max(d,g,E),C=NaN,S=w-b,P=(w+b)/2;return S?(d===w?C=(g-E)/S+(g<E)*6:g===w?C=(E-d)/S+2:C=(d-g)/S+4,S/=P<.5?w+b:2-w-b,C*=60):S=P>0&&P<1?0:C,new Hsl(C,S,P,x.opacity)}function hsl(x,d,g,E){return arguments.length===1?hslConvert(x):new Hsl(x,d,g,E??1)}function Hsl(x,d,g,E){this.h=+x,this.s=+d,this.l=+g,this.opacity=+E}define(Hsl,hsl,extend(Color,{brighter(x){return x=x==null?brighter:Math.pow(brighter,x),new Hsl(this.h,this.s,this.l*x,this.opacity)},darker(x){return x=x==null?darker:Math.pow(darker,x),new Hsl(this.h,this.s,this.l*x,this.opacity)},rgb(){var x=this.h%360+(this.h<0)*360,d=isNaN(x)||isNaN(this.s)?0:this.s,g=this.l,E=g+(g<.5?g:1-g)*d,b=2*g-E;return new Rgb(hsl2rgb(x>=240?x-240:x+120,b,E),hsl2rgb(x,b,E),hsl2rgb(x<120?x+240:x-120,b,E),this.opacity)},clamp(){return new Hsl(clamph(this.h),clampt(this.s),clampt(this.l),clampa(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const x=clampa(this.opacity);return`${x===1?"hsl(":"hsla("}${clamph(this.h)}, ${clampt(this.s)*100}%, ${clampt(this.l)*100}%${x===1?")":`, ${x})`}`}}));function clamph(x){return x=(x||0)%360,x<0?x+360:x}function clampt(x){return Math.max(0,Math.min(1,x||0))}function hsl2rgb(x,d,g){return(x<60?d+(g-d)*x/60:x<180?g:x<240?d+(g-d)*(240-x)/60:d)*255}const constant$1=x=>()=>x;function linear(x,d){return function(g){return x+g*d}}function exponential(x,d,g){return x=Math.pow(x,g),d=Math.pow(d,g)-x,g=1/g,function(E){return Math.pow(x+E*d,g)}}function gamma(x){return(x=+x)==1?nogamma:function(d,g){return g-d?exponential(d,g,x):constant$1(isNaN(d)?g:d)}}function nogamma(x,d){var g=d-x;return g?linear(x,g):constant$1(isNaN(x)?d:x)}const interpolateRgb=(function x(d){var g=gamma(d);function E(b,w){var C=g((b=rgb(b)).r,(w=rgb(w)).r),S=g(b.g,w.g),P=g(b.b,w.b),I=nogamma(b.opacity,w.opacity);return function(M){return b.r=C(M),b.g=S(M),b.b=P(M),b.opacity=I(M),b+""}}return E.gamma=x,E})(1);function interpolateNumber(x,d){return x=+x,d=+d,function(g){return x*(1-g)+d*g}}var reA=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,reB=new RegExp(reA.source,"g");function zero(x){return function(){return x}}function one(x){return function(d){return x(d)+""}}function interpolateString(x,d){var g=reA.lastIndex=reB.lastIndex=0,E,b,w,C=-1,S=[],P=[];for(x=x+"",d=d+"";(E=reA.exec(x))&&(b=reB.exec(d));)(w=b.index)>g&&(w=d.slice(g,w),S[C]?S[C]+=w:S[++C]=w),(E=E[0])===(b=b[0])?S[C]?S[C]+=b:S[++C]=b:(S[++C]=null,P.push({i:C,x:interpolateNumber(E,b)})),g=reB.lastIndex;return g<d.length&&(w=d.slice(g),S[C]?S[C]+=w:S[++C]=w),S.length<2?P[0]?one(P[0].x):zero(d):(d=P.length,function(I){for(var M=0,D;M<d;++M)S[(D=P[M]).i]=D.x(I);return S.join("")})}var degrees=180/Math.PI,identity$1={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function decompose(x,d,g,E,b,w){var C,S,P;return(C=Math.sqrt(x*x+d*d))&&(x/=C,d/=C),(P=x*g+d*E)&&(g-=x*P,E-=d*P),(S=Math.sqrt(g*g+E*E))&&(g/=S,E/=S,P/=S),x*E<d*g&&(x=-x,d=-d,P=-P,C=-C),{translateX:b,translateY:w,rotate:Math.atan2(d,x)*degrees,skewX:Math.atan(P)*degrees,scaleX:C,scaleY:S}}var svgNode;function parseCss(x){const d=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(x+"");return d.isIdentity?identity$1:decompose(d.a,d.b,d.c,d.d,d.e,d.f)}function parseSvg(x){return x==null||(svgNode||(svgNode=document.createElementNS("http://www.w3.org/2000/svg","g")),svgNode.setAttribute("transform",x),!(x=svgNode.transform.baseVal.consolidate()))?identity$1:(x=x.matrix,decompose(x.a,x.b,x.c,x.d,x.e,x.f))}function interpolateTransform(x,d,g,E){function b(I){return I.length?I.pop()+" ":""}function w(I,M,D,k,H,F){if(I!==D||M!==k){var j=H.push("translate(",null,d,null,g);F.push({i:j-4,x:interpolateNumber(I,D)},{i:j-2,x:interpolateNumber(M,k)})}else(D||k)&&H.push("translate("+D+d+k+g)}function C(I,M,D,k){I!==M?(I-M>180?M+=360:M-I>180&&(I+=360),k.push({i:D.push(b(D)+"rotate(",null,E)-2,x:interpolateNumber(I,M)})):M&&D.push(b(D)+"rotate("+M+E)}function S(I,M,D,k){I!==M?k.push({i:D.push(b(D)+"skewX(",null,E)-2,x:interpolateNumber(I,M)}):M&&D.push(b(D)+"skewX("+M+E)}function P(I,M,D,k,H,F){if(I!==D||M!==k){var j=H.push(b(H)+"scale(",null,",",null,")");F.push({i:j-4,x:interpolateNumber(I,D)},{i:j-2,x:interpolateNumber(M,k)})}else(D!==1||k!==1)&&H.push(b(H)+"scale("+D+","+k+")")}return function(I,M){var D=[],k=[];return I=x(I),M=x(M),w(I.translateX,I.translateY,M.translateX,M.translateY,D,k),C(I.rotate,M.rotate,D,k),S(I.skewX,M.skewX,D,k),P(I.scaleX,I.scaleY,M.scaleX,M.scaleY,D,k),I=M=null,function(H){for(var F=-1,j=k.length,$;++F<j;)D[($=k[F]).i]=$.x(H);return D.join("")}}}var interpolateTransformCss=interpolateTransform(parseCss,"px, ","px)","deg)"),interpolateTransformSvg=interpolateTransform(parseSvg,", ",")",")"),frame=0,timeout$1=0,interval=0,pokeDelay=1e3,taskHead,taskTail,clockLast=0,clockNow=0,clockSkew=0,clock=typeof performance=="object"&&performance.now?performance:Date,setFrame=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(x){setTimeout(x,17)};function now$1(){return clockNow||(setFrame(clearNow),clockNow=clock.now()+clockSkew)}function clearNow(){clockNow=0}function Timer(){this._call=this._time=this._next=null}Timer.prototype=timer.prototype={constructor:Timer,restart:function(x,d,g){if(typeof x!="function")throw new TypeError("callback is not a function");g=(g==null?now$1():+g)+(d==null?0:+d),!this._next&&taskTail!==this&&(taskTail?taskTail._next=this:taskHead=this,taskTail=this),this._call=x,this._time=g,sleep()},stop:function(){this._call&&(this._call=null,this._time=1/0,sleep())}};function timer(x,d,g){var E=new Timer;return E.restart(x,d,g),E}function timerFlush(){now$1(),++frame;for(var x=taskHead,d;x;)(d=clockNow-x._time)>=0&&x._call.call(void 0,d),x=x._next;--frame}function wake(){clockNow=(clockLast=clock.now())+clockSkew,frame=timeout$1=0;try{timerFlush()}finally{frame=0,nap(),clockNow=0}}function poke(){var x=clock.now(),d=x-clockLast;d>pokeDelay&&(clockSkew-=d,clockLast=x)}function nap(){for(var x,d=taskHead,g,E=1/0;d;)d._call?(E>d._time&&(E=d._time),x=d,d=d._next):(g=d._next,d._next=null,d=x?x._next=g:taskHead=g);taskTail=x,sleep(E)}function sleep(x){if(!frame){timeout$1&&(timeout$1=clearTimeout(timeout$1));var d=x-clockNow;d>24?(x<1/0&&(timeout$1=setTimeout(wake,x-clock.now()-clockSkew)),interval&&(interval=clearInterval(interval))):(interval||(clockLast=clock.now(),interval=setInterval(poke,pokeDelay)),frame=1,setFrame(wake))}}function timeout(x,d,g){var E=new Timer;return d=d==null?0:+d,E.restart(b=>{E.stop(),x(b+d)},d,g),E}var emptyOn=dispatch("start","end","cancel","interrupt"),emptyTween=[],CREATED=0,SCHEDULED=1,STARTING=2,STARTED=3,RUNNING=4,ENDING=5,ENDED=6;function schedule(x,d,g,E,b,w){var C=x.__transition;if(!C)x.__transition={};else if(g in C)return;create(x,g,{name:d,index:E,group:b,on:emptyOn,tween:emptyTween,time:w.time,delay:w.delay,duration:w.duration,ease:w.ease,timer:null,state:CREATED})}function init(x,d){var g=get$3(x,d);if(g.state>CREATED)throw new Error("too late; already scheduled");return g}function set(x,d){var g=get$3(x,d);if(g.state>STARTED)throw new Error("too late; already running");return g}function get$3(x,d){var g=x.__transition;if(!g||!(g=g[d]))throw new Error("transition not found");return g}function create(x,d,g){var E=x.__transition,b;E[d]=g,g.timer=timer(w,0,g.time);function w(I){g.state=SCHEDULED,g.timer.restart(C,g.delay,g.time),g.delay<=I&&C(I-g.delay)}function C(I){var M,D,k,H;if(g.state!==SCHEDULED)return P();for(M in E)if(H=E[M],H.name===g.name){if(H.state===STARTED)return timeout(C);H.state===RUNNING?(H.state=ENDED,H.timer.stop(),H.on.call("interrupt",x,x.__data__,H.index,H.group),delete E[M]):+M<d&&(H.state=ENDED,H.timer.stop(),H.on.call("cancel",x,x.__data__,H.index,H.group),delete E[M])}if(timeout(function(){g.state===STARTED&&(g.state=RUNNING,g.timer.restart(S,g.delay,g.time),S(I))}),g.state=STARTING,g.on.call("start",x,x.__data__,g.index,g.group),g.state===STARTING){for(g.state=STARTED,b=new Array(k=g.tween.length),M=0,D=-1;M<k;++M)(H=g.tween[M].value.call(x,x.__data__,g.index,g.group))&&(b[++D]=H);b.length=D+1}}function S(I){for(var M=I<g.duration?g.ease.call(null,I/g.duration):(g.timer.restart(P),g.state=ENDING,1),D=-1,k=b.length;++D<k;)b[D].call(x,M);g.state===ENDING&&(g.on.call("end",x,x.__data__,g.index,g.group),P())}function P(){g.state=ENDED,g.timer.stop(),delete E[d];for(var I in E)return;delete x.__transition}}function interrupt(x,d){var g=x.__transition,E,b,w=!0,C;if(g){d=d==null?null:d+"";for(C in g){if((E=g[C]).name!==d){w=!1;continue}b=E.state>STARTING&&E.state<ENDING,E.state=ENDED,E.timer.stop(),E.on.call(b?"interrupt":"cancel",x,x.__data__,E.index,E.group),delete g[C]}w&&delete x.__transition}}function selection_interrupt(x){return this.each(function(){interrupt(this,x)})}function tweenRemove(x,d){var g,E;return function(){var b=set(this,x),w=b.tween;if(w!==g){E=g=w;for(var C=0,S=E.length;C<S;++C)if(E[C].name===d){E=E.slice(),E.splice(C,1);break}}b.tween=E}}function tweenFunction(x,d,g){var E,b;if(typeof g!="function")throw new Error;return function(){var w=set(this,x),C=w.tween;if(C!==E){b=(E=C).slice();for(var S={name:d,value:g},P=0,I=b.length;P<I;++P)if(b[P].name===d){b[P]=S;break}P===I&&b.push(S)}w.tween=b}}function transition_tween(x,d){var g=this._id;if(x+="",arguments.length<2){for(var E=get$3(this.node(),g).tween,b=0,w=E.length,C;b<w;++b)if((C=E[b]).name===x)return C.value;return null}return this.each((d==null?tweenRemove:tweenFunction)(g,x,d))}function tweenValue(x,d,g){var E=x._id;return x.each(function(){var b=set(this,E);(b.value||(b.value={}))[d]=g.apply(this,arguments)}),function(b){return get$3(b,E).value[d]}}function interpolate(x,d){var g;return(typeof d=="number"?interpolateNumber:d instanceof color?interpolateRgb:(g=color(d))?(d=g,interpolateRgb):interpolateString)(x,d)}function attrRemove(x){return function(){this.removeAttribute(x)}}function attrRemoveNS(x){return function(){this.removeAttributeNS(x.space,x.local)}}function attrConstant(x,d,g){var E,b=g+"",w;return function(){var C=this.getAttribute(x);return C===b?null:C===E?w:w=d(E=C,g)}}function attrConstantNS(x,d,g){var E,b=g+"",w;return function(){var C=this.getAttributeNS(x.space,x.local);return C===b?null:C===E?w:w=d(E=C,g)}}function attrFunction(x,d,g){var E,b,w;return function(){var C,S=g(this),P;return S==null?void this.removeAttribute(x):(C=this.getAttribute(x),P=S+"",C===P?null:C===E&&P===b?w:(b=P,w=d(E=C,S)))}}function attrFunctionNS(x,d,g){var E,b,w;return function(){var C,S=g(this),P;return S==null?void this.removeAttributeNS(x.space,x.local):(C=this.getAttributeNS(x.space,x.local),P=S+"",C===P?null:C===E&&P===b?w:(b=P,w=d(E=C,S)))}}function transition_attr(x,d){var g=namespace(x),E=g==="transform"?interpolateTransformSvg:interpolate;return this.attrTween(x,typeof d=="function"?(g.local?attrFunctionNS:attrFunction)(g,E,tweenValue(this,"attr."+x,d)):d==null?(g.local?attrRemoveNS:attrRemove)(g):(g.local?attrConstantNS:attrConstant)(g,E,d))}function attrInterpolate(x,d){return function(g){this.setAttribute(x,d.call(this,g))}}function attrInterpolateNS(x,d){return function(g){this.setAttributeNS(x.space,x.local,d.call(this,g))}}function attrTweenNS(x,d){var g,E;function b(){var w=d.apply(this,arguments);return w!==E&&(g=(E=w)&&attrInterpolateNS(x,w)),g}return b._value=d,b}function attrTween(x,d){var g,E;function b(){var w=d.apply(this,arguments);return w!==E&&(g=(E=w)&&attrInterpolate(x,w)),g}return b._value=d,b}function transition_attrTween(x,d){var g="attr."+x;if(arguments.length<2)return(g=this.tween(g))&&g._value;if(d==null)return this.tween(g,null);if(typeof d!="function")throw new Error;var E=namespace(x);return this.tween(g,(E.local?attrTweenNS:attrTween)(E,d))}function delayFunction(x,d){return function(){init(this,x).delay=+d.apply(this,arguments)}}function delayConstant(x,d){return d=+d,function(){init(this,x).delay=d}}function transition_delay(x){var d=this._id;return arguments.length?this.each((typeof x=="function"?delayFunction:delayConstant)(d,x)):get$3(this.node(),d).delay}function durationFunction(x,d){return function(){set(this,x).duration=+d.apply(this,arguments)}}function durationConstant(x,d){return d=+d,function(){set(this,x).duration=d}}function transition_duration(x){var d=this._id;return arguments.length?this.each((typeof x=="function"?durationFunction:durationConstant)(d,x)):get$3(this.node(),d).duration}function easeConstant(x,d){if(typeof d!="function")throw new Error;return function(){set(this,x).ease=d}}function transition_ease(x){var d=this._id;return arguments.length?this.each(easeConstant(d,x)):get$3(this.node(),d).ease}function easeVarying(x,d){return function(){var g=d.apply(this,arguments);if(typeof g!="function")throw new Error;set(this,x).ease=g}}function transition_easeVarying(x){if(typeof x!="function")throw new Error;return this.each(easeVarying(this._id,x))}function transition_filter(x){typeof x!="function"&&(x=matcher(x));for(var d=this._groups,g=d.length,E=new Array(g),b=0;b<g;++b)for(var w=d[b],C=w.length,S=E[b]=[],P,I=0;I<C;++I)(P=w[I])&&x.call(P,P.__data__,I,w)&&S.push(P);return new Transition(E,this._parents,this._name,this._id)}function transition_merge(x){if(x._id!==this._id)throw new Error;for(var d=this._groups,g=x._groups,E=d.length,b=g.length,w=Math.min(E,b),C=new Array(E),S=0;S<w;++S)for(var P=d[S],I=g[S],M=P.length,D=C[S]=new Array(M),k,H=0;H<M;++H)(k=P[H]||I[H])&&(D[H]=k);for(;S<E;++S)C[S]=d[S];return new Transition(C,this._parents,this._name,this._id)}function start(x){return(x+"").trim().split(/^|\s+/).every(function(d){var g=d.indexOf(".");return g>=0&&(d=d.slice(0,g)),!d||d==="start"})}function onFunction(x,d,g){var E,b,w=start(d)?init:set;return function(){var C=w(this,x),S=C.on;S!==E&&(b=(E=S).copy()).on(d,g),C.on=b}}function transition_on(x,d){var g=this._id;return arguments.length<2?get$3(this.node(),g).on.on(x):this.each(onFunction(g,x,d))}function removeFunction(x){return function(){var d=this.parentNode;for(var g in this.__transition)if(+g!==x)return;d&&d.removeChild(this)}}function transition_remove(){return this.on("end.remove",removeFunction(this._id))}function transition_select(x){var d=this._name,g=this._id;typeof x!="function"&&(x=selector(x));for(var E=this._groups,b=E.length,w=new Array(b),C=0;C<b;++C)for(var S=E[C],P=S.length,I=w[C]=new Array(P),M,D,k=0;k<P;++k)(M=S[k])&&(D=x.call(M,M.__data__,k,S))&&("__data__"in M&&(D.__data__=M.__data__),I[k]=D,schedule(I[k],d,g,k,I,get$3(M,g)));return new Transition(w,this._parents,d,g)}function transition_selectAll(x){var d=this._name,g=this._id;typeof x!="function"&&(x=selectorAll(x));for(var E=this._groups,b=E.length,w=[],C=[],S=0;S<b;++S)for(var P=E[S],I=P.length,M,D=0;D<I;++D)if(M=P[D]){for(var k=x.call(M,M.__data__,D,P),H,F=get$3(M,g),j=0,$=k.length;j<$;++j)(H=k[j])&&schedule(H,d,g,j,k,F);w.push(k),C.push(M)}return new Transition(w,C,d,g)}var Selection=selection.prototype.constructor;function transition_selection(){return new Selection(this._groups,this._parents)}function styleNull(x,d){var g,E,b;return function(){var w=styleValue(this,x),C=(this.style.removeProperty(x),styleValue(this,x));return w===C?null:w===g&&C===E?b:b=d(g=w,E=C)}}function styleRemove(x){return function(){this.style.removeProperty(x)}}function styleConstant(x,d,g){var E,b=g+"",w;return function(){var C=styleValue(this,x);return C===b?null:C===E?w:w=d(E=C,g)}}function styleFunction(x,d,g){var E,b,w;return function(){var C=styleValue(this,x),S=g(this),P=S+"";return S==null&&(P=S=(this.style.removeProperty(x),styleValue(this,x))),C===P?null:C===E&&P===b?w:(b=P,w=d(E=C,S))}}function styleMaybeRemove(x,d){var g,E,b,w="style."+d,C="end."+w,S;return function(){var P=set(this,x),I=P.on,M=P.value[w]==null?S||(S=styleRemove(d)):void 0;(I!==g||b!==M)&&(E=(g=I).copy()).on(C,b=M),P.on=E}}function transition_style(x,d,g){var E=(x+="")=="transform"?interpolateTransformCss:interpolate;return d==null?this.styleTween(x,styleNull(x,E)).on("end.style."+x,styleRemove(x)):typeof d=="function"?this.styleTween(x,styleFunction(x,E,tweenValue(this,"style."+x,d))).each(styleMaybeRemove(this._id,x)):this.styleTween(x,styleConstant(x,E,d),g).on("end.style."+x,null)}function styleInterpolate(x,d,g){return function(E){this.style.setProperty(x,d.call(this,E),g)}}function styleTween(x,d,g){var E,b;function w(){var C=d.apply(this,arguments);return C!==b&&(E=(b=C)&&styleInterpolate(x,C,g)),E}return w._value=d,w}function transition_styleTween(x,d,g){var E="style."+(x+="");if(arguments.length<2)return(E=this.tween(E))&&E._value;if(d==null)return this.tween(E,null);if(typeof d!="function")throw new Error;return this.tween(E,styleTween(x,d,g??""))}function textConstant(x){return function(){this.textContent=x}}function textFunction(x){return function(){var d=x(this);this.textContent=d??""}}function transition_text(x){return this.tween("text",typeof x=="function"?textFunction(tweenValue(this,"text",x)):textConstant(x==null?"":x+""))}function textInterpolate(x){return function(d){this.textContent=x.call(this,d)}}function textTween(x){var d,g;function E(){var b=x.apply(this,arguments);return b!==g&&(d=(g=b)&&textInterpolate(b)),d}return E._value=x,E}function transition_textTween(x){var d="text";if(arguments.length<1)return(d=this.tween(d))&&d._value;if(x==null)return this.tween(d,null);if(typeof x!="function")throw new Error;return this.tween(d,textTween(x))}function transition_transition(){for(var x=this._name,d=this._id,g=newId(),E=this._groups,b=E.length,w=0;w<b;++w)for(var C=E[w],S=C.length,P,I=0;I<S;++I)if(P=C[I]){var M=get$3(P,d);schedule(P,x,g,I,C,{time:M.time+M.delay+M.duration,delay:0,duration:M.duration,ease:M.ease})}return new Transition(E,this._parents,x,g)}function transition_end(){var x,d,g=this,E=g._id,b=g.size();return new Promise(function(w,C){var S={value:C},P={value:function(){--b===0&&w()}};g.each(function(){var I=set(this,E),M=I.on;M!==x&&(d=(x=M).copy(),d._.cancel.push(S),d._.interrupt.push(S),d._.end.push(P)),I.on=d}),b===0&&w()})}var id=0;function Transition(x,d,g,E){this._groups=x,this._parents=d,this._name=g,this._id=E}function newId(){return++id}var selection_prototype=selection.prototype;Transition.prototype={constructor:Transition,select:transition_select,selectAll:transition_selectAll,selectChild:selection_prototype.selectChild,selectChildren:selection_prototype.selectChildren,filter:transition_filter,merge:transition_merge,selection:transition_selection,transition:transition_transition,call:selection_prototype.call,nodes:selection_prototype.nodes,node:selection_prototype.node,size:selection_prototype.size,empty:selection_prototype.empty,each:selection_prototype.each,on:transition_on,attr:transition_attr,attrTween:transition_attrTween,style:transition_style,styleTween:transition_styleTween,text:transition_text,textTween:transition_textTween,remove:transition_remove,tween:transition_tween,delay:transition_delay,duration:transition_duration,ease:transition_ease,easeVarying:transition_easeVarying,end:transition_end,[Symbol.iterator]:selection_prototype[Symbol.iterator]};function cubicInOut(x){return((x*=2)<=1?x*x*x:(x-=2)*x*x+2)/2}var defaultTiming={time:null,delay:0,duration:250,ease:cubicInOut};function inherit(x,d){for(var g;!(g=x.__transition)||!(g=g[d]);)if(!(x=x.parentNode))throw new Error(`transition ${d} not found`);return g}function selection_transition(x){var d,g;x instanceof Transition?(d=x._id,x=x._name):(d=newId(),(g=defaultTiming).time=now$1(),x=x==null?null:x+"");for(var E=this._groups,b=E.length,w=0;w<b;++w)for(var C=E[w],S=C.length,P,I=0;I<S;++I)(P=C[I])&&schedule(P,x,d,I,C,g||inherit(P,d));return new Transition(E,this._parents,x,d)}selection.prototype.interrupt=selection_interrupt;selection.prototype.transition=selection_transition;function Transform(x,d,g){this.k=x,this.x=d,this.y=g}Transform.prototype={constructor:Transform,scale:function(x){return x===1?this:new Transform(this.k*x,this.x,this.y)},translate:function(x,d){return x===0&d===0?this:new Transform(this.k,this.x+this.k*x,this.y+this.k*d)},apply:function(x){return[x[0]*this.k+this.x,x[1]*this.k+this.y]},applyX:function(x){return x*this.k+this.x},applyY:function(x){return x*this.k+this.y},invert:function(x){return[(x[0]-this.x)/this.k,(x[1]-this.y)/this.k]},invertX:function(x){return(x-this.x)/this.k},invertY:function(x){return(x-this.y)/this.k},rescaleX:function(x){return x.copy().domain(x.range().map(this.invertX,this).map(x.invert,x))},rescaleY:function(x){return x.copy().domain(x.range().map(this.invertY,this).map(x.invert,x))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};Transform.prototype;const GraphContext=reactExports.createContext({graph:null,setGraph:()=>{}}),useGraph=()=>reactExports.useContext(GraphContext),GraphProvider=({children:x})=>{const[d,g]=reactExports.useState(null);return jsxRuntimeExports.jsx(GraphContext.Provider,{value:{graph:d,setGraph:g},children:x})},ExportFileButton=({showGraphSection:x})=>{const{graph:d}=useGraph(),{cluster:g}=useFileContext(),[E,b]=reactExports.useState({show:!1,title:"",message:"",onHide:()=>b(H=>({...H,show:!1}))}),w=()=>x&&g.ClusterGoals.some(H=>H.GoalType==="Functional"),C=()=>x?g.ClusterGoals.length===0?"Please add goals to the hierarchy before exporting.":g.ClusterGoals.some(H=>H.GoalType==="Functional")?"Export is ready.":"Please add at least one functional goal (Do type) to the hierarchy before exporting.":"Please click 'Arrange Hierarchy / Render Model' to enable export.",S=()=>{d&&(d.fit(),d.center())},P=async()=>{if(!w()){b({show:!0,title:"Cannot Export Model",message:C(),onHide:()=>b($=>({...$,show:!1}))});return}if(!d)return;S(),d.clearSelection();const H=d.getContainer().querySelector("svg");if(!H){console.error("Failed to find SVG element in the graph container.");return}const j=new XMLSerializer().serializeToString(H);try{if("showSaveFilePicker"in self){const $={id:"exportImage",suggestedName:"Graph.svg",startIn:"downloads",types:[{description:"SVG Image",accept:{"image/svg+xml":[".svg"]}}]},U=await(await self.showSaveFilePicker($)).createWritable();await U.write(new Blob([j],{type:"image/svg+xml;charset=utf-8"})),await U.close()}else{const $=new Blob([j],{type:"image/svg+xml;charset=utf-8"}),z=URL.createObjectURL($),U=document.createElement("a");U.href=z,U.download="graph.svg",U.click(),URL.revokeObjectURL(z)}}catch($){console.error("Failed to save file: ",$)}returnFocusToGraph()},I=async()=>{if(!w()){b({show:!0,title:"Cannot Export Model",message:C(),onHide:()=>b(q=>({...q,show:!1}))});return}if(!d)return;S(),d.clearSelection();const H=d.getContainer().querySelector("svg");if(!H){console.error("Failed to find SVG element in the graph container.");return}select(H).insert("rect",":first-child").attr("width","100%").attr("height","100%").attr("fill","white");const $=new XMLSerializer().serializeToString(H),z=document.createElement("canvas");z.width=H.clientWidth,z.height=H.clientHeight;const U=z.getContext("2d");if(!U){console.error("Failed to get canvas context.");return}await Canvg.fromString(U,$).render(),z.toBlob(async q=>{if(q)try{if("showSaveFilePicker"in self){const Z={id:"exportImage",suggestedName:"Graph.png",startIn:"downloads",types:[{description:"PNG Image",accept:{"image/png":[".png"]}}]},K=await(await self.showSaveFilePicker(Z)).createWritable();await K.write(q),await K.close()}else{const Z=URL.createObjectURL(q),X=document.createElement("a");X.href=Z,X.download="graph.png",X.click(),URL.revokeObjectURL(Z)}}catch(Z){console.error("Failed to save file: ",Z)}},"image/png"),returnFocusToGraph()},M=w(),D=C(),k=jsxRuntimeExports.jsx(Tooltip$1,{id:"export-tooltip",children:D});return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(OverlayTrigger,{placement:"bottom",overlay:k,trigger:M?[]:["hover","focus"],children:jsxRuntimeExports.jsx("span",{className:"d-inline-block",children:jsxRuntimeExports.jsxs(Dropdown$1,{children:[jsxRuntimeExports.jsx(Dropdown$1.Toggle,{variant:"outline-primary",id:"export-dropdown",className:"rounded-end-0",disabled:!M,children:"Export"}),jsxRuntimeExports.jsxs(Dropdown$1.Menu,{children:[jsxRuntimeExports.jsx(Dropdown$1.Item,{onClick:I,disabled:!M,children:"Export as PNG"}),jsxRuntimeExports.jsx(Dropdown$1.Item,{onClick:P,disabled:!M,children:"Export as SVG"})]})]})})}),jsxRuntimeExports.jsx(ErrorModal,{...E})]})};var lib$1={},uaParser_min$1={exports:{}},uaParser_min=uaParser_min$1.exports,hasRequiredUaParser_min;function requireUaParser_min(){return hasRequiredUaParser_min||(hasRequiredUaParser_min=1,(function(x,d){(function(g,E){var b="1.0.41",w="",C="?",S="function",P="undefined",I="object",M="string",D="major",k="model",H="name",F="type",j="vendor",$="version",z="architecture",U="console",W="mobile",q="tablet",Z="smarttv",X="wearable",K="embedded",ee=500,te="Amazon",ce="Apple",Q="ASUS",se="BlackBerry",ge="Browser",Ce="Chrome",oe="Edge",he="Firefox",de="Google",re="Honor",ae="Huawei",pe="Lenovo",J="LG",ue="Microsoft",Te="Motorola",xe="Nvidia",we="OnePlus",Re="Opera",De="OPPO",Ae="Samsung",Be="Sharp",We="Sony",Fe="Xiaomi",ze="Zebra",ct="Facebook",rt="Chromium OS",Le="Mac OS",nt=" Browser",qe=function(Ze,Ne){var He={};for(var Ye in Ze)Ne[Ye]&&Ne[Ye].length%2===0?He[Ye]=Ne[Ye].concat(Ze[Ye]):He[Ye]=Ze[Ye];return He},dt=function(Ze){for(var Ne={},He=0;He<Ze.length;He++)Ne[Ze[He].toUpperCase()]=Ze[He];return Ne},ht=function(Ze,Ne){return typeof Ze===M?st(Ne).indexOf(st(Ze))!==-1:!1},st=function(Ze){return Ze.toLowerCase()},be=function(Ze){return typeof Ze===M?Ze.replace(/[^\d\.]/g,w).split(".")[0]:E},lt=function(Ze,Ne){if(typeof Ze===M)return Ze=Ze.replace(/^\s\s*/,w),typeof Ne===P?Ze:Ze.substring(0,ee)},et=function(Ze,Ne){for(var He=0,Ye,Tt,bt,ut,Xe,At;He<Ne.length&&!Xe;){var Xt=Ne[He],Vt=Ne[He+1];for(Ye=Tt=0;Ye<Xt.length&&!Xe&&Xt[Ye];)if(Xe=Xt[Ye++].exec(Ze),Xe)for(bt=0;bt<Vt.length;bt++)At=Xe[++Tt],ut=Vt[bt],typeof ut===I&&ut.length>0?ut.length===2?typeof ut[1]==S?this[ut[0]]=ut[1].call(this,At):this[ut[0]]=ut[1]:ut.length===3?typeof ut[1]===S&&!(ut[1].exec&&ut[1].test)?this[ut[0]]=At?ut[1].call(this,At,ut[2]):E:this[ut[0]]=At?At.replace(ut[1],ut[2]):E:ut.length===4&&(this[ut[0]]=At?ut[3].call(this,At.replace(ut[1],ut[2])):E):this[ut]=At||E;He+=2}},tt=function(Ze,Ne){for(var He in Ne)if(typeof Ne[He]===I&&Ne[He].length>0){for(var Ye=0;Ye<Ne[He].length;Ye++)if(ht(Ne[He][Ye],Ze))return He===C?E:He}else if(ht(Ne[He],Ze))return He===C?E:He;return Ne.hasOwnProperty("*")?Ne["*"]:Ze},xt={"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"},Ke={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},ft={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[$,[H,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[$,[H,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[H,$],[/opios[\/ ]+([\w\.]+)/i],[$,[H,Re+" Mini"]],[/\bop(?:rg)?x\/([\w\.]+)/i],[$,[H,Re+" GX"]],[/\bopr\/([\w\.]+)/i],[$,[H,Re]],[/\bb[ai]*d(?:uhd|[ub]*[aekoprswx]{5,6})[\/ ]?([\w\.]+)/i],[$,[H,"Baidu"]],[/\b(?:mxbrowser|mxios|myie2)\/?([-\w\.]*)\b/i],[$,[H,"Maxthon"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer|sleipnir)[\/ ]?([\w\.]*)/i,/(avant|iemobile|slim(?:browser|boat|jet))[\/ ]?([\d\.]*)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|duckduckgo|klar|helio|(?=comodo_)?dragon)\/([-\w\.]+)/i,/(heytap|ovi|115)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[H,$],[/quark(?:pc)?\/([-\w\.]+)/i],[$,[H,"Quark"]],[/\bddg\/([\w\.]+)/i],[$,[H,"DuckDuckGo"]],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[$,[H,"UC"+ge]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i,/micromessenger\/([\w\.]+)/i],[$,[H,"WeChat"]],[/konqueror\/([\w\.]+)/i],[$,[H,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[$,[H,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[$,[H,"Yandex"]],[/slbrowser\/([\w\.]+)/i],[$,[H,"Smart Lenovo "+ge]],[/(avast|avg)\/([\w\.]+)/i],[[H,/(.+)/,"$1 Secure "+ge],$],[/\bfocus\/([\w\.]+)/i],[$,[H,he+" Focus"]],[/\bopt\/([\w\.]+)/i],[$,[H,Re+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[$,[H,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[$,[H,"Dolphin"]],[/coast\/([\w\.]+)/i],[$,[H,Re+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[$,[H,"MIUI"+nt]],[/fxios\/([\w\.-]+)/i],[$,[H,he]],[/\bqihoobrowser\/?([\w\.]*)/i],[$,[H,"360"]],[/\b(qq)\/([\w\.]+)/i],[[H,/(.+)/,"$1Browser"],$],[/(oculus|sailfish|huawei|vivo|pico)browser\/([\w\.]+)/i],[[H,/(.+)/,"$1"+nt],$],[/samsungbrowser\/([\w\.]+)/i],[$,[H,Ae+" Internet"]],[/metasr[\/ ]?([\d\.]+)/i],[$,[H,"Sogou Explorer"]],[/(sogou)mo\w+\/([\d\.]+)/i],[[H,"Sogou Mobile"],$],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|2345(?=browser|chrome|explorer))\w*[\/ ]?v?([\w\.]+)/i],[H,$],[/(lbbrowser|rekonq)/i,/\[(linkedin)app\]/i],[H],[/ome\/([\w\.]+) \w* ?(iron) saf/i,/ome\/([\w\.]+).+qihu (360)[es]e/i],[$,H],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[H,ct],$],[/(Klarna)\/([\w\.]+)/i,/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/(daum)apps[\/ ]([\w\.]+)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(alipay)client\/([\w\.]+)/i,/(twitter)(?:and| f.+e\/([\w\.]+))/i,/(chromium|instagram|snapchat)[\/ ]([-\w\.]+)/i],[H,$],[/\bgsa\/([\w\.]+) .*safari\//i],[$,[H,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[$,[H,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[$,[H,Ce+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[H,Ce+" WebView"],$],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[$,[H,"Android "+ge]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[H,$],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[$,[H,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[$,H],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[H,[$,tt,xt]],[/(webkit|khtml)\/([\w\.]+)/i],[H,$],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[H,"Netscape"],$],[/(wolvic|librewolf)\/([\w\.]+)/i],[H,$],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[$,[H,he+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(amaya|dillo|doris|icab|ladybird|lynx|mosaic|netsurf|obigo|polaris|w3m|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/\b(links) \(([\w\.]+)/i],[H,[$,/_/g,"."]],[/(cobalt)\/([\w\.]+)/i],[H,[$,/master.|lts./,""]]],cpu:[[/\b((amd|x|x86[-_]?|wow|win)64)\b/i],[[z,"amd64"]],[/(ia32(?=;))/i,/\b((i[346]|x)86)(pc)?\b/i],[[z,"ia32"]],[/\b(aarch64|arm(v?[89]e?l?|_?64))\b/i],[[z,"arm64"]],[/\b(arm(v[67])?ht?n?[fl]p?)\b/i],[[z,"armhf"]],[/( (ce|mobile); ppc;|\/[\w\.]+arm\b)/i],[[z,"arm"]],[/((ppc|powerpc)(64)?)( mac|;|\))/i],[[z,/ower/,w,st]],[/ sun4\w[;\)]/i],[[z,"sparc"]],[/\b(avr32|ia64(?=;)|68k(?=\))|\barm(?=v([1-7]|[5-7]1)l?|;|eabi)|(irix|mips|sparc)(64)?\b|pa-risc)/i],[[z,st]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[k,[j,Ae],[F,q]],[/\b((?:s[cgp]h|gt|sm)-(?![lr])\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]((?!sm-[lr])[-\w]+)/i,/sec-(sgh\w+)/i],[k,[j,Ae],[F,W]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[k,[j,ce],[F,W]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[k,[j,ce],[F,q]],[/(macintosh);/i],[k,[j,ce]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[k,[j,Be],[F,W]],[/\b((?:brt|eln|hey2?|gdi|jdn)-a?[lnw]09|(?:ag[rm]3?|jdn2|kob2)-a?[lw]0[09]hn)(?: bui|\)|;)/i],[k,[j,re],[F,q]],[/honor([-\w ]+)[;\)]/i],[k,[j,re],[F,W]],[/\b((?:ag[rs][2356]?k?|bah[234]?|bg[2o]|bt[kv]|cmr|cpn|db[ry]2?|jdn2|got|kob2?k?|mon|pce|scm|sht?|[tw]gr|vrd)-[ad]?[lw][0125][09]b?|605hw|bg2-u03|(?:gem|fdr|m2|ple|t1)-[7a]0[1-4][lu]|t1-a2[13][lw]|mediapad[\w\. ]*(?= bui|\)))\b(?!.+d\/s)/i],[k,[j,ae],[F,q]],[/(?:huawei)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[k,[j,ae],[F,W]],[/oid[^\)]+; (2[\dbc]{4}(182|283|rp\w{2})[cgl]|m2105k81a?c)(?: bui|\))/i,/\b((?:red)?mi[-_ ]?pad[\w- ]*)(?: bui|\))/i],[[k,/_/g," "],[j,Fe],[F,q]],[/\b(poco[\w ]+|m2\d{3}j\d\d[a-z]{2})(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/oid[^\)]+; (m?[12][0-389][01]\w{3,6}[c-y])( bui|; wv|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite|pro)?)(?: bui|\))/i,/ ([\w ]+) miui\/v?\d/i],[[k,/_/g," "],[j,Fe],[F,W]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[k,[j,De],[F,W]],[/\b(opd2(\d{3}a?))(?: bui|\))/i],[k,[j,tt,{OnePlus:["304","403","203"],"*":De}],[F,q]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[k,[j,"Vivo"],[F,W]],[/\b(rmx[1-3]\d{3})(?: bui|;|\))/i],[k,[j,"Realme"],[F,W]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto(?! 360)[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[k,[j,Te],[F,W]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[k,[j,Te],[F,q]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[k,[j,J],[F,q]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv|watch)\w+)/i,/\blg-?([\d\w]+) bui/i],[k,[j,J],[F,W]],[/(ideatab[-\w ]+|602lv|d-42a|a101lv|a2109a|a3500-hv|s[56]000|pb-6505[my]|tb-?x?\d{3,4}(?:f[cu]|xu|[av])|yt\d?-[jx]?\d+[lfmx])( bui|;|\)|\/)/i,/lenovo ?(b[68]0[08]0-?[hf]?|tab(?:[\w- ]+?)|tb[\w-]{6,7})( bui|;|\)|\/)/i],[k,[j,pe],[F,q]],[/(nokia) (t[12][01])/i],[j,k,[F,q]],[/(?:maemo|nokia).*(n900|lumia \d+|rm-\d+)/i,/nokia[-_ ]?(([-\w\. ]*))/i],[[k,/_/g," "],[F,W],[j,"Nokia"]],[/(pixel (c|tablet))\b/i],[k,[j,de],[F,q]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[k,[j,de],[F,W]],[/droid.+; (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[k,[j,We],[F,W]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[k,"Xperia Tablet"],[j,We],[F,q]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[k,[j,we],[F,W]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo(?!bc)\w\w)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[k,[j,te],[F,q]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[k,/(.+)/g,"Fire Phone $1"],[j,te],[F,W]],[/(playbook);[-\w\),; ]+(rim)/i],[k,j,[F,q]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[k,[j,se],[F,W]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[k,[j,Q],[F,q]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[k,[j,Q],[F,W]],[/(nexus 9)/i],[k,[j,"HTC"],[F,q]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[j,[k,/_/g," "],[F,W]],[/droid [\w\.]+; ((?:8[14]9[16]|9(?:0(?:48|60|8[01])|1(?:3[27]|66)|2(?:6[69]|9[56])|466))[gqswx])\w*(\)| bui)/i],[k,[j,"TCL"],[F,q]],[/(itel) ((\w+))/i],[[j,st],k,[F,tt,{tablet:["p10001l","w7001"],"*":"mobile"}]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[k,[j,"Acer"],[F,q]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[k,[j,"Meizu"],[F,W]],[/; ((?:power )?armor(?:[\w ]{0,8}))(?: bui|\))/i],[k,[j,"Ulefone"],[F,W]],[/; (energy ?\w+)(?: bui|\))/i,/; energizer ([\w ]+)(?: bui|\))/i],[k,[j,"Energizer"],[F,W]],[/; cat (b35);/i,/; (b15q?|s22 flip|s48c|s62 pro)(?: bui|\))/i],[k,[j,"Cat"],[F,W]],[/((?:new )?andromax[\w- ]+)(?: bui|\))/i],[k,[j,"Smartfren"],[F,W]],[/droid.+; (a(?:015|06[35]|142p?))/i],[k,[j,"Nothing"],[F,W]],[/; (x67 5g|tikeasy \w+|ac[1789]\d\w+)( b|\))/i,/archos ?(5|gamepad2?|([\w ]*[t1789]|hello) ?\d+[\w ]*)( b|\))/i],[k,[j,"Archos"],[F,q]],[/archos ([\w ]+)( b|\))/i,/; (ac[3-6]\d\w{2,8})( b|\))/i],[k,[j,"Archos"],[F,W]],[/(imo) (tab \w+)/i,/(infinix) (x1101b?)/i],[j,k,[F,q]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus(?! zenw)|dell|jolla|meizu|motorola|polytron|infinix|tecno|micromax|advan)[-_ ]?([-\w]*)/i,/; (hmd|imo) ([\w ]+?)(?: bui|\))/i,/(hp) ([\w ]+\w)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w ]+?)(?: bui|\)|\/)/i,/(oppo) ?([\w ]+) bui/i],[j,k,[F,W]],[/(kobo)\s(ereader|touch)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[j,k,[F,q]],[/(surface duo)/i],[k,[j,ue],[F,q]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[k,[j,"Fairphone"],[F,W]],[/(u304aa)/i],[k,[j,"AT&T"],[F,W]],[/\bsie-(\w*)/i],[k,[j,"Siemens"],[F,W]],[/\b(rct\w+) b/i],[k,[j,"RCA"],[F,q]],[/\b(venue[\d ]{2,7}) b/i],[k,[j,"Dell"],[F,q]],[/\b(q(?:mv|ta)\w+) b/i],[k,[j,"Verizon"],[F,q]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[k,[j,"Barnes & Noble"],[F,q]],[/\b(tm\d{3}\w+) b/i],[k,[j,"NuVision"],[F,q]],[/\b(k88) b/i],[k,[j,"ZTE"],[F,q]],[/\b(nx\d{3}j) b/i],[k,[j,"ZTE"],[F,W]],[/\b(gen\d{3}) b.+49h/i],[k,[j,"Swiss"],[F,W]],[/\b(zur\d{3}) b/i],[k,[j,"Swiss"],[F,q]],[/\b((zeki)?tb.*\b) b/i],[k,[j,"Zeki"],[F,q]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[j,"Dragon Touch"],k,[F,q]],[/\b(ns-?\w{0,9}) b/i],[k,[j,"Insignia"],[F,q]],[/\b((nxa|next)-?\w{0,9}) b/i],[k,[j,"NextBook"],[F,q]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[j,"Voice"],k,[F,W]],[/\b(lvtel\-)?(v1[12]) b/i],[[j,"LvTel"],k,[F,W]],[/\b(ph-1) /i],[k,[j,"Essential"],[F,W]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[k,[j,"Envizen"],[F,q]],[/\b(trio[-\w\. ]+) b/i],[k,[j,"MachSpeed"],[F,q]],[/\btu_(1491) b/i],[k,[j,"Rotor"],[F,q]],[/((?:tegranote|shield t(?!.+d tv))[\w- ]*?)(?: b|\))/i],[k,[j,xe],[F,q]],[/(sprint) (\w+)/i],[j,k,[F,W]],[/(kin\.[onetw]{3})/i],[[k,/\./g," "],[j,ue],[F,W]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[k,[j,ze],[F,q]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[k,[j,ze],[F,W]],[/smart-tv.+(samsung)/i],[j,[F,Z]],[/hbbtv.+maple;(\d+)/i],[[k,/^/,"SmartTV"],[j,Ae],[F,Z]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[j,J],[F,Z]],[/(apple) ?tv/i],[j,[k,ce+" TV"],[F,Z]],[/crkey/i],[[k,Ce+"cast"],[j,de],[F,Z]],[/droid.+aft(\w+)( bui|\))/i],[k,[j,te],[F,Z]],[/(shield \w+ tv)/i],[k,[j,xe],[F,Z]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[k,[j,Be],[F,Z]],[/(bravia[\w ]+)( bui|\))/i],[k,[j,We],[F,Z]],[/(mi(tv|box)-?\w+) bui/i],[k,[j,Fe],[F,Z]],[/Hbbtv.*(technisat) (.*);/i],[j,k,[F,Z]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[j,lt],[k,lt],[F,Z]],[/droid.+; ([\w- ]+) (?:android tv|smart[- ]?tv)/i],[k,[F,Z]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[F,Z]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[j,k,[F,U]],[/droid.+; (shield)( bui|\))/i],[k,[j,xe],[F,U]],[/(playstation \w+)/i],[k,[j,We],[F,U]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[k,[j,ue],[F,U]],[/\b(sm-[lr]\d\d[0156][fnuw]?s?|gear live)\b/i],[k,[j,Ae],[F,X]],[/((pebble))app/i,/(asus|google|lg|oppo) ((pixel |zen)?watch[\w ]*)( bui|\))/i],[j,k,[F,X]],[/(ow(?:19|20)?we?[1-3]{1,3})/i],[k,[j,De],[F,X]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[k,[j,ce],[F,X]],[/(opwwe\d{3})/i],[k,[j,we],[F,X]],[/(moto 360)/i],[k,[j,Te],[F,X]],[/(smartwatch 3)/i],[k,[j,We],[F,X]],[/(g watch r)/i],[k,[j,J],[F,X]],[/droid.+; (wt63?0{2,3})\)/i],[k,[j,ze],[F,X]],[/droid.+; (glass) \d/i],[k,[j,de],[F,X]],[/(pico) (4|neo3(?: link|pro)?)/i],[j,k,[F,X]],[/; (quest( \d| pro)?)/i],[k,[j,ct],[F,X]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[j,[F,K]],[/(aeobc)\b/i],[k,[j,te],[F,K]],[/(homepod).+mac os/i],[k,[j,ce],[F,K]],[/windows iot/i],[[F,K]],[/droid .+?; ([^;]+?)(?: bui|; wv\)|\) applew).+? mobile safari/i],[k,[F,W]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[k,[F,q]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[F,q]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[F,W]],[/droid .+?; ([\w\. -]+)( bui|\))/i],[k,[j,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[$,[H,oe+"HTML"]],[/(arkweb)\/([\w\.]+)/i],[H,$],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[$,[H,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna|servo)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[H,$],[/ladybird\//i],[[H,"LibWeb"]],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[$,H]],os:[[/microsoft (windows) (vista|xp)/i],[H,$],[/(windows (?:phone(?: os)?|mobile|iot))[\/ ]?([\d\.\w ]*)/i],[H,[$,tt,Ke]],[/windows nt 6\.2; (arm)/i,/windows[\/ ]([ntce\d\. ]+\w)(?!.+xbox)/i,/(?:win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[$,tt,Ke],[H,"Windows"]],[/[adehimnop]{4,7}\b(?:.*os ([\w]+) like mac|; opera)/i,/(?:ios;fbsv\/|iphone.+ios[\/ ])([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[$,/_/g,"."],[H,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[H,Le],[$,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[$,H],[/(ubuntu) ([\w\.]+) like android/i],[[H,/(.+)/,"$1 Touch"],$],[/(android|bada|blackberry|kaios|maemo|meego|openharmony|qnx|rim tablet os|sailfish|series40|symbian|tizen|webos)\w*[-\/; ]?([\d\.]*)/i],[H,$],[/\(bb(10);/i],[$,[H,se]],[/(?:symbian ?os|symbos|s60(?=;)|series ?60)[-\/ ]?([\w\.]*)/i],[$,[H,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[$,[H,he+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[$,[H,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[$,[H,"watchOS"]],[/crkey\/([\d\.]+)/i],[$,[H,Ce+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[H,rt],$],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux)(?: arm\w*| x86\w*| ?)([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[H,$],[/(sunos) ?([\w\.\d]*)/i],[[H,"Solaris"],$],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[H,$]]},ot=function(Ze,Ne){if(typeof Ze===I&&(Ne=Ze,Ze=E),!(this instanceof ot))return new ot(Ze,Ne).getResult();var He=typeof g!==P&&g.navigator?g.navigator:E,Ye=Ze||(He&&He.userAgent?He.userAgent:w),Tt=He&&He.userAgentData?He.userAgentData:E,bt=Ne?qe(ft,Ne):ft,ut=He&&He.userAgent==Ye;return this.getBrowser=function(){var Xe={};return Xe[H]=E,Xe[$]=E,et.call(Xe,Ye,bt.browser),Xe[D]=be(Xe[$]),ut&&He&&He.brave&&typeof He.brave.isBrave==S&&(Xe[H]="Brave"),Xe},this.getCPU=function(){var Xe={};return Xe[z]=E,et.call(Xe,Ye,bt.cpu),Xe},this.getDevice=function(){var Xe={};return Xe[j]=E,Xe[k]=E,Xe[F]=E,et.call(Xe,Ye,bt.device),ut&&!Xe[F]&&Tt&&Tt.mobile&&(Xe[F]=W),ut&&Xe[k]=="Macintosh"&&He&&typeof He.standalone!==P&&He.maxTouchPoints&&He.maxTouchPoints>2&&(Xe[k]="iPad",Xe[F]=q),Xe},this.getEngine=function(){var Xe={};return Xe[H]=E,Xe[$]=E,et.call(Xe,Ye,bt.engine),Xe},this.getOS=function(){var Xe={};return Xe[H]=E,Xe[$]=E,et.call(Xe,Ye,bt.os),ut&&!Xe[H]&&Tt&&Tt.platform&&Tt.platform!="Unknown"&&(Xe[H]=Tt.platform.replace(/chrome os/i,rt).replace(/macos/i,Le)),Xe},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return Ye},this.setUA=function(Xe){return Ye=typeof Xe===M&&Xe.length>ee?lt(Xe,ee):Xe,this},this.setUA(Ye),this};ot.VERSION=b,ot.BROWSER=dt([H,$,D]),ot.CPU=dt([z]),ot.DEVICE=dt([k,j,F,U,W,Z,q,X,K]),ot.ENGINE=ot.OS=dt([H,$]),x.exports&&(d=x.exports=ot),d.UAParser=ot;var vt=typeof g!==P&&(g.jQuery||g.Zepto);if(vt&&!vt.ua){var pt=new ot;vt.ua=pt.getResult(),vt.ua.get=function(){return pt.getUA()},vt.ua.set=function(Ze){pt.setUA(Ze);var Ne=pt.getResult();for(var He in Ne)vt.ua[He]=Ne[He]}}})(typeof window=="object"?window:uaParser_min)})(uaParser_min$1,uaParser_min$1.exports)),uaParser_min$1.exports}var hasRequiredLib$1;function requireLib$1(){if(hasRequiredLib$1)return lib$1;hasRequiredLib$1=1,Object.defineProperty(lib$1,"__esModule",{value:!0});function x(ye){return ye&&typeof ye=="object"&&"default"in ye?ye.default:ye}var d=requireReact(),g=x(d),E=requireUaParser_min(),b=new E,w=b.getBrowser(),C=b.getCPU(),S=b.getDevice(),P=b.getEngine(),I=b.getOS(),M=b.getUA(),D=function(ne){return b.setUA(ne)},k=function(ne){if(!ne){console.error("No userAgent string was provided");return}var le=new E(ne);return{UA:le,browser:le.getBrowser(),cpu:le.getCPU(),device:le.getDevice(),engine:le.getEngine(),os:le.getOS(),ua:le.getUA(),setUserAgent:function(Pe){return le.setUA(Pe)}}},H=Object.freeze({ClientUAInstance:b,browser:w,cpu:C,device:S,engine:P,os:I,ua:M,setUa:D,parseUserAgent:k});function F(ye,ne){var le=Object.keys(ye);if(Object.getOwnPropertySymbols){var _e=Object.getOwnPropertySymbols(ye);ne&&(_e=_e.filter(function(Pe){return Object.getOwnPropertyDescriptor(ye,Pe).enumerable})),le.push.apply(le,_e)}return le}function j(ye){for(var ne=1;ne<arguments.length;ne++){var le=arguments[ne]!=null?arguments[ne]:{};ne%2?F(Object(le),!0).forEach(function(_e){q(ye,_e,le[_e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(ye,Object.getOwnPropertyDescriptors(le)):F(Object(le)).forEach(function(_e){Object.defineProperty(ye,_e,Object.getOwnPropertyDescriptor(le,_e))})}return ye}function $(ye){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?$=function(ne){return typeof ne}:$=function(ne){return ne&&typeof Symbol=="function"&&ne.constructor===Symbol&&ne!==Symbol.prototype?"symbol":typeof ne},$(ye)}function z(ye,ne){if(!(ye instanceof ne))throw new TypeError("Cannot call a class as a function")}function U(ye,ne){for(var le=0;le<ne.length;le++){var _e=ne[le];_e.enumerable=_e.enumerable||!1,_e.configurable=!0,"value"in _e&&(_e.writable=!0),Object.defineProperty(ye,_e.key,_e)}}function W(ye,ne,le){return ne&&U(ye.prototype,ne),ye}function q(ye,ne,le){return ne in ye?Object.defineProperty(ye,ne,{value:le,enumerable:!0,configurable:!0,writable:!0}):ye[ne]=le,ye}function Z(){return Z=Object.assign||function(ye){for(var ne=1;ne<arguments.length;ne++){var le=arguments[ne];for(var _e in le)Object.prototype.hasOwnProperty.call(le,_e)&&(ye[_e]=le[_e])}return ye},Z.apply(this,arguments)}function X(ye,ne){if(typeof ne!="function"&&ne!==null)throw new TypeError("Super expression must either be null or a function");ye.prototype=Object.create(ne&&ne.prototype,{constructor:{value:ye,writable:!0,configurable:!0}}),ne&&ee(ye,ne)}function K(ye){return K=Object.setPrototypeOf?Object.getPrototypeOf:function(le){return le.__proto__||Object.getPrototypeOf(le)},K(ye)}function ee(ye,ne){return ee=Object.setPrototypeOf||function(_e,Pe){return _e.__proto__=Pe,_e},ee(ye,ne)}function te(ye,ne){if(ye==null)return{};var le={},_e=Object.keys(ye),Pe,at;for(at=0;at<_e.length;at++)Pe=_e[at],!(ne.indexOf(Pe)>=0)&&(le[Pe]=ye[Pe]);return le}function ce(ye,ne){if(ye==null)return{};var le=te(ye,ne),_e,Pe;if(Object.getOwnPropertySymbols){var at=Object.getOwnPropertySymbols(ye);for(Pe=0;Pe<at.length;Pe++)_e=at[Pe],!(ne.indexOf(_e)>=0)&&Object.prototype.propertyIsEnumerable.call(ye,_e)&&(le[_e]=ye[_e])}return le}function Q(ye){if(ye===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ye}function se(ye,ne){if(ne&&(typeof ne=="object"||typeof ne=="function"))return ne;if(ne!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Q(ye)}function ge(ye,ne){return Ce(ye)||oe(ye,ne)||he(ye,ne)||re()}function Ce(ye){if(Array.isArray(ye))return ye}function oe(ye,ne){var le=ye==null?null:typeof Symbol<"u"&&ye[Symbol.iterator]||ye["@@iterator"];if(le!=null){var _e=[],Pe=!0,at=!1,wt,Gt;try{for(le=le.call(ye);!(Pe=(wt=le.next()).done)&&(_e.push(wt.value),!(ne&&_e.length===ne));Pe=!0);}catch(Mi){at=!0,Gt=Mi}finally{try{!Pe&&le.return!=null&&le.return()}finally{if(at)throw Gt}}return _e}}function he(ye,ne){if(ye){if(typeof ye=="string")return de(ye,ne);var le=Object.prototype.toString.call(ye).slice(8,-1);if(le==="Object"&&ye.constructor&&(le=ye.constructor.name),le==="Map"||le==="Set")return Array.from(ye);if(le==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(le))return de(ye,ne)}}function de(ye,ne){(ne==null||ne>ye.length)&&(ne=ye.length);for(var le=0,_e=new Array(ne);le<ne;le++)_e[le]=ye[le];return _e}function re(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var ae={Mobile:"mobile",Tablet:"tablet",SmartTv:"smarttv",Console:"console",Wearable:"wearable",Embedded:"embedded",Browser:void 0},pe={Chrome:"Chrome",Firefox:"Firefox",Opera:"Opera",Yandex:"Yandex",Safari:"Safari",InternetExplorer:"Internet Explorer",Edge:"Edge",Chromium:"Chromium",Ie:"IE",MobileSafari:"Mobile Safari",EdgeChromium:"Edge Chromium",MIUI:"MIUI Browser",SamsungBrowser:"Samsung Browser"},J={IOS:"iOS",Android:"Android",WindowsPhone:"Windows Phone",Windows:"Windows",MAC_OS:"Mac OS"},ue={isMobile:!1,isTablet:!1,isBrowser:!1,isSmartTV:!1,isConsole:!1,isWearable:!1},Te=function(ne){switch(ne){case ae.Mobile:return{isMobile:!0};case ae.Tablet:return{isTablet:!0};case ae.SmartTv:return{isSmartTV:!0};case ae.Console:return{isConsole:!0};case ae.Wearable:return{isWearable:!0};case ae.Browser:return{isBrowser:!0};case ae.Embedded:return{isEmbedded:!0};default:return ue}},xe=function(ne){return D(ne)},we=function(ne){var le=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"none";return ne||le},Re=function(){return typeof window<"u"&&(window.navigator||navigator)?window.navigator||navigator:!1},De=function(ne){var le=Re();return le&&le.platform&&(le.platform.indexOf(ne)!==-1||le.platform==="MacIntel"&&le.maxTouchPoints>1&&!window.MSStream)},Ae=function(ne,le,_e,Pe,at){return{isBrowser:ne,browserMajorVersion:we(le.major),browserFullVersion:we(le.version),browserName:we(le.name),engineName:we(_e.name),engineVersion:we(_e.version),osName:we(Pe.name),osVersion:we(Pe.version),userAgent:we(at)}},Be=function(ne,le,_e,Pe){return j({},ne,{vendor:we(le.vendor),model:we(le.model),os:we(_e.name),osVersion:we(_e.version),ua:we(Pe)})},We=function(ne,le,_e,Pe){return{isSmartTV:ne,engineName:we(le.name),engineVersion:we(le.version),osName:we(_e.name),osVersion:we(_e.version),userAgent:we(Pe)}},Fe=function(ne,le,_e,Pe){return{isConsole:ne,engineName:we(le.name),engineVersion:we(le.version),osName:we(_e.name),osVersion:we(_e.version),userAgent:we(Pe)}},ze=function(ne,le,_e,Pe){return{isWearable:ne,engineName:we(le.name),engineVersion:we(le.version),osName:we(_e.name),osVersion:we(_e.version),userAgent:we(Pe)}},ct=function(ne,le,_e,Pe,at){return{isEmbedded:ne,vendor:we(le.vendor),model:we(le.model),engineName:we(_e.name),engineVersion:we(_e.version),osName:we(Pe.name),osVersion:we(Pe.version),userAgent:we(at)}};function rt(ye){var ne=ye?k(ye):H,le=ne.device,_e=ne.browser,Pe=ne.engine,at=ne.os,wt=ne.ua,Gt=Te(le.type),Mi=Gt.isBrowser,vr=Gt.isMobile,Ni=Gt.isTablet,Di=Gt.isSmartTV,xr=Gt.isConsole,vn=Gt.isWearable,ki=Gt.isEmbedded;if(Mi)return Ae(Mi,_e,Pe,at,wt);if(Di)return We(Di,Pe,at,wt);if(xr)return Fe(xr,Pe,at,wt);if(vr||Ni)return Be(Gt,le,at,wt);if(vn)return ze(vn,Pe,at,wt);if(ki)return ct(ki,le,Pe,at,wt)}var Le=function(ne){var le=ne.type;return le===ae.Mobile},nt=function(ne){var le=ne.type;return le===ae.Tablet},qe=function(ne){var le=ne.type;return le===ae.Mobile||le===ae.Tablet},dt=function(ne){var le=ne.type;return le===ae.SmartTv},ht=function(ne){var le=ne.type;return le===ae.Browser},st=function(ne){var le=ne.type;return le===ae.Wearable},be=function(ne){var le=ne.type;return le===ae.Console},lt=function(ne){var le=ne.type;return le===ae.Embedded},et=function(ne){var le=ne.vendor;return we(le)},tt=function(ne){var le=ne.model;return we(le)},xt=function(ne){var le=ne.type;return we(le,"browser")},Ke=function(ne){var le=ne.name;return le===J.Android},ft=function(ne){var le=ne.name;return le===J.Windows},ot=function(ne){var le=ne.name;return le===J.MAC_OS},vt=function(ne){var le=ne.name;return le===J.WindowsPhone},pt=function(ne){var le=ne.name;return le===J.IOS},Ze=function(ne){var le=ne.version;return we(le)},Ne=function(ne){var le=ne.name;return we(le)},He=function(ne){var le=ne.name;return le===pe.Chrome},Ye=function(ne){var le=ne.name;return le===pe.Firefox},Tt=function(ne){var le=ne.name;return le===pe.Chromium},bt=function(ne){var le=ne.name;return le===pe.Edge},ut=function(ne){var le=ne.name;return le===pe.Yandex},Xe=function(ne){var le=ne.name;return le===pe.Safari||le===pe.MobileSafari},At=function(ne){var le=ne.name;return le===pe.MobileSafari},Xt=function(ne){var le=ne.name;return le===pe.Opera},Vt=function(ne){var le=ne.name;return le===pe.InternetExplorer||le===pe.Ie},_t=function(ne){var le=ne.name;return le===pe.MIUI},ir=function(ne){var le=ne.name;return le===pe.SamsungBrowser},rr=function(ne){var le=ne.version;return we(le)},sr=function(ne){var le=ne.major;return we(le)},ar=function(ne){var le=ne.name;return we(le)},or=function(ne){var le=ne.name;return we(le)},Si=function(ne){var le=ne.version;return we(le)},lr=function(){var ne=Re(),le=ne&&ne.userAgent&&ne.userAgent.toLowerCase();return typeof le=="string"?/electron/.test(le):!1},cn=function(ne){return typeof ne=="string"&&ne.indexOf("Edg/")!==-1},Ti=function(){var ne=Re();return ne&&(/iPad|iPhone|iPod/.test(ne.platform)||ne.platform==="MacIntel"&&ne.maxTouchPoints>1)&&!window.MSStream},zt=function(){return De("iPad")},Wr=function(){return De("iPhone")},Vn=function(){return De("iPod")},ii=function(ne){return we(ne)};function ri(ye){var ne=ye||H,le=ne.device,_e=ne.browser,Pe=ne.os,at=ne.engine,wt=ne.ua;return{isSmartTV:dt(le),isConsole:be(le),isWearable:st(le),isEmbedded:lt(le),isMobileSafari:At(_e)||zt(),isChromium:Tt(_e),isMobile:qe(le)||zt(),isMobileOnly:Le(le),isTablet:nt(le)||zt(),isBrowser:ht(le),isDesktop:ht(le),isAndroid:Ke(Pe),isWinPhone:vt(Pe),isIOS:pt(Pe)||zt(),isChrome:He(_e),isFirefox:Ye(_e),isSafari:Xe(_e),isOpera:Xt(_e),isIE:Vt(_e),osVersion:Ze(Pe),osName:Ne(Pe),fullBrowserVersion:rr(_e),browserVersion:sr(_e),browserName:ar(_e),mobileVendor:et(le),mobileModel:tt(le),engineName:or(at),engineVersion:Si(at),getUA:ii(wt),isEdge:bt(_e)||cn(wt),isYandex:ut(_e),deviceType:xt(le),isIOS13:Ti(),isIPad13:zt(),isIPhone13:Wr(),isIPod13:Vn(),isElectron:lr(),isEdgeChromium:cn(wt),isLegacyEdge:bt(_e)&&!cn(wt),isWindows:ft(Pe),isMacOs:ot(Pe),isMIUI:_t(_e),isSamsungBrowser:ir(_e)}}var _i=dt(S),Zr=be(S),Xr=st(S),ca=lt(S),Nn=At(w)||zt(),Kr=Tt(w),si=qe(S)||zt(),Yr=Le(S),ur=nt(S)||zt(),cr=ht(S),Qr=ht(S),hr=Ke(I),Jr=vt(I),es=pt(I)||zt(),Pt=He(w),ha=Ye(w),dr=Xe(w),ts=Xt(w),ai=Vt(w),da=Ze(I),ns=Ne(I),Ri=rr(w),hn=sr(w),fa=ar(w),sn=et(S),pa=tt(S),ga=or(P),ma=Si(P),Pi=ii(M),Ii=bt(w)||cn(M),oi=ut(w),Oi=xt(S),ya=Ti(),va=zt(),fr=Wr(),rs=Vn(),pr=lr(),li=cn(M),xa=bt(w)&&!cn(M),gr=ft(I),yt=ot(I),ss=_t(w),as=ir(w),mr=function(ne){if(!ne||typeof ne!="string"){console.error("No valid user agent string was provided");return}var le=k(ne),_e=le.device,Pe=le.browser,at=le.os,wt=le.engine,Gt=le.ua;return ri({device:_e,browser:Pe,os:at,engine:wt,ua:Gt})},os=function(ne){var le=ne.renderWithFragment,_e=ne.children,Pe=ce(ne,["renderWithFragment","children"]);return hr?le?g.createElement(d.Fragment,null,_e):g.createElement("div",Pe,_e):null},ls=function(ne){var le=ne.renderWithFragment,_e=ne.children,Pe=ce(ne,["renderWithFragment","children"]);return cr?le?g.createElement(d.Fragment,null,_e):g.createElement("div",Pe,_e):null},us=function(ne){var le=ne.renderWithFragment,_e=ne.children,Pe=ce(ne,["renderWithFragment","children"]);return ai?le?g.createElement(d.Fragment,null,_e):g.createElement("div",Pe,_e):null},yr=function(ne){var le=ne.renderWithFragment,_e=ne.children,Pe=ce(ne,["renderWithFragment","children"]);return es?le?g.createElement(d.Fragment,null,_e):g.createElement("div",Pe,_e):null},Ai=function(ne){var le=ne.renderWithFragment,_e=ne.children,Pe=ce(ne,["renderWithFragment","children"]);return si?le?g.createElement(d.Fragment,null,_e):g.createElement("div",Pe,_e):null},Tn=function(ne){var le=ne.renderWithFragment,_e=ne.children,Pe=ce(ne,["renderWithFragment","children"]);return ur?le?g.createElement(d.Fragment,null,_e):g.createElement("div",Pe,_e):null},_n=function(ne){var le=ne.renderWithFragment,_e=ne.children,Pe=ce(ne,["renderWithFragment","children"]);return Jr?le?g.createElement(d.Fragment,null,_e):g.createElement("div",Pe,_e):null},Rn=function(ne){var le=ne.renderWithFragment,_e=ne.children;ne.viewClassName,ne.style;var Pe=ce(ne,["renderWithFragment","children","viewClassName","style"]);return Yr?le?g.createElement(d.Fragment,null,_e):g.createElement("div",Pe,_e):null},ui=function(ne){var le=ne.renderWithFragment,_e=ne.children,Pe=ce(ne,["renderWithFragment","children"]);return _i?le?g.createElement(d.Fragment,null,_e):g.createElement("div",Pe,_e):null},ci=function(ne){var le=ne.renderWithFragment,_e=ne.children,Pe=ce(ne,["renderWithFragment","children"]);return Zr?le?g.createElement(d.Fragment,null,_e):g.createElement("div",Pe,_e):null},Pn=function(ne){var le=ne.renderWithFragment,_e=ne.children,Pe=ce(ne,["renderWithFragment","children"]);return Xr?le?g.createElement(d.Fragment,null,_e):g.createElement("div",Pe,_e):null},Ea=function(ne){var le=ne.renderWithFragment,_e=ne.children;ne.viewClassName,ne.style;var Pe=ne.condition,at=ce(ne,["renderWithFragment","children","viewClassName","style","condition"]);return Pe?le?g.createElement(d.Fragment,null,_e):g.createElement("div",at,_e):null};function cs(ye){return(function(ne){X(le,ne);function le(_e){var Pe;return z(this,le),Pe=se(this,K(le).call(this,_e)),Pe.isEventListenerAdded=!1,Pe.handleOrientationChange=Pe.handleOrientationChange.bind(Q(Pe)),Pe.onOrientationChange=Pe.onOrientationChange.bind(Q(Pe)),Pe.onPageLoad=Pe.onPageLoad.bind(Q(Pe)),Pe.state={isLandscape:!1,isPortrait:!1},Pe}return W(le,[{key:"handleOrientationChange",value:function(){this.isEventListenerAdded||(this.isEventListenerAdded=!0);var Pe=window.innerWidth>window.innerHeight?90:0;this.setState({isPortrait:Pe===0,isLandscape:Pe===90})}},{key:"onOrientationChange",value:function(){this.handleOrientationChange()}},{key:"onPageLoad",value:function(){this.handleOrientationChange()}},{key:"componentDidMount",value:function(){(typeof window>"u"?"undefined":$(window))!==void 0&&si&&(this.isEventListenerAdded?window.removeEventListener("load",this.onPageLoad,!1):(this.handleOrientationChange(),window.addEventListener("load",this.onPageLoad,!1)),window.addEventListener("resize",this.onOrientationChange,!1))}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.onOrientationChange,!1)}},{key:"render",value:function(){return g.createElement(ye,Z({},this.props,{isLandscape:this.state.isLandscape,isPortrait:this.state.isPortrait}))}}]),le})(g.Component)}function hi(){var ye=d.useState(function(){var at=window.innerWidth>window.innerHeight?90:0;return{isPortrait:at===0,isLandscape:at===90,orientation:at===0?"portrait":"landscape"}}),ne=ge(ye,2),le=ne[0],_e=ne[1],Pe=d.useCallback(function(){var at=window.innerWidth>window.innerHeight?90:0,wt={isPortrait:at===0,isLandscape:at===90,orientation:at===0?"portrait":"landscape"};le.orientation!==wt.orientation&&_e(wt)},[le.orientation]);return d.useEffect(function(){return(typeof window>"u"?"undefined":$(window))!==void 0&&si&&(Pe(),window.addEventListener("load",Pe,!1),window.addEventListener("resize",Pe,!1)),function(){window.removeEventListener("resize",Pe,!1),window.removeEventListener("load",Pe,!1)}},[Pe]),le}function hs(ye){var ne=ye||window.navigator.userAgent;return k(ne)}function ds(ye){var ne=ye||window.navigator.userAgent,le=hs(ne),_e=ri(le);return[_e,le]}return lib$1.AndroidView=os,lib$1.BrowserTypes=pe,lib$1.BrowserView=ls,lib$1.ConsoleView=ci,lib$1.CustomView=Ea,lib$1.IEView=us,lib$1.IOSView=yr,lib$1.MobileOnlyView=Rn,lib$1.MobileView=Ai,lib$1.OsTypes=J,lib$1.SmartTVView=ui,lib$1.TabletView=Tn,lib$1.WearableView=Pn,lib$1.WinPhoneView=_n,lib$1.browserName=fa,lib$1.browserVersion=hn,lib$1.deviceDetect=rt,lib$1.deviceType=Oi,lib$1.engineName=ga,lib$1.engineVersion=ma,lib$1.fullBrowserVersion=Ri,lib$1.getSelectorsByUserAgent=mr,lib$1.getUA=Pi,lib$1.isAndroid=hr,lib$1.isBrowser=cr,lib$1.isChrome=Pt,lib$1.isChromium=Kr,lib$1.isConsole=Zr,lib$1.isDesktop=Qr,lib$1.isEdge=Ii,lib$1.isEdgeChromium=li,lib$1.isElectron=pr,lib$1.isEmbedded=ca,lib$1.isFirefox=ha,lib$1.isIE=ai,lib$1.isIOS=es,lib$1.isIOS13=ya,lib$1.isIPad13=va,lib$1.isIPhone13=fr,lib$1.isIPod13=rs,lib$1.isLegacyEdge=xa,lib$1.isMIUI=ss,lib$1.isMacOs=yt,lib$1.isMobile=si,lib$1.isMobileOnly=Yr,lib$1.isMobileSafari=Nn,lib$1.isOpera=ts,lib$1.isSafari=dr,lib$1.isSamsungBrowser=as,lib$1.isSmartTV=_i,lib$1.isTablet=ur,lib$1.isWearable=Xr,lib$1.isWinPhone=Jr,lib$1.isWindows=gr,lib$1.isYandex=oi,lib$1.mobileModel=pa,lib$1.mobileVendor=sn,lib$1.osName=ns,lib$1.osVersion=da,lib$1.parseUserAgent=k,lib$1.setUserAgent=xe,lib$1.useDeviceData=hs,lib$1.useDeviceSelectors=ds,lib$1.useMobileOrientation=hi,lib$1.withOrientationChange=cs,lib$1}var libExports$1=requireLib$1();const ResetGraphButton=({variant:x="",className:d=""})=>{const{dispatch:g}=useFileContext();return jsxRuntimeExports.jsxs(DropdownButton,{as:ButtonGroup,title:"Reset",variant:x,className:d,children:[jsxRuntimeExports.jsx(Dropdown$1.Item,{onClick:()=>g(reset()),children:"Empty"}),jsxRuntimeExports.jsx(Dropdown$1.Item,{onClick:()=>g(reset({treeData:defaultTreeData,tabData:createDefaultTabData()})),children:"Default"})]})},HomeButton=({className:x})=>{const d=useNavigate();return jsxRuntimeExports.jsx(Button,{variant:"outline-primary",onClick:()=>d("/",{replace:!0}),className:x,children:"Home"})},ProjectEditHeader=({showGoalSection:x,setShowGoalSection:d,showGraphSection:g})=>{const[E,b]=reactExports.useState(!1);return reactExports.useEffect(()=>{(libExports$1.isChrome||libExports$1.isEdge||libExports$1.isOpera)&&b(!0)},[]),jsxRuntimeExports.jsx("header",{className:"w-full sticky top-0 z-10 border-b bg-white shadow-sm",children:jsxRuntimeExports.jsx(Container,{fluid:!0,children:jsxRuntimeExports.jsxs(Row,{className:"text-start align-content-start",children:[jsxRuntimeExports.jsxs(Col,{xs:"auto",className:"d-flex align-items-center",children:[jsxRuntimeExports.jsx("strong",{style:{fontSize:"35px"},children:"AMMBER"}),jsxRuntimeExports.jsx(ResetGraphButton,{variant:"outline-primary",className:"ms-3"})]}),jsxRuntimeExports.jsxs(Col,{className:"d-flex flex-column flex-sm-row gap-2 justify-content-end align-items-center",children:[jsxRuntimeExports.jsxs(ButtonGroup,{className:"ms-3",children:[jsxRuntimeExports.jsx(ExportFileButton,{showGraphSection:g}),E&&jsxRuntimeExports.jsx(SaveFileButton,{})]}),jsxRuntimeExports.jsx(HomeButton,{className:"ms-3"})]})]})})})};var __assign$1=function(){return __assign$1=Object.assign||function(x){for(var d,g=1,E=arguments.length;g<E;g++){d=arguments[g];for(var b in d)Object.prototype.hasOwnProperty.call(d,b)&&(x[b]=d[b])}return x},__assign$1.apply(this,arguments)},rowSizeBase={width:"100%",height:"10px",top:"0px",left:"0px",cursor:"row-resize"},colSizeBase={width:"10px",height:"100%",top:"0px",left:"0px",cursor:"col-resize"},edgeBase={width:"20px",height:"20px",position:"absolute",zIndex:1},styles$1={top:__assign$1(__assign$1({},rowSizeBase),{top:"-5px"}),right:__assign$1(__assign$1({},colSizeBase),{left:void 0,right:"-5px"}),bottom:__assign$1(__assign$1({},rowSizeBase),{top:void 0,bottom:"-5px"}),left:__assign$1(__assign$1({},colSizeBase),{left:"-5px"}),topRight:__assign$1(__assign$1({},edgeBase),{right:"-10px",top:"-10px",cursor:"ne-resize"}),bottomRight:__assign$1(__assign$1({},edgeBase),{right:"-10px",bottom:"-10px",cursor:"se-resize"}),bottomLeft:__assign$1(__assign$1({},edgeBase),{left:"-10px",bottom:"-10px",cursor:"sw-resize"}),topLeft:__assign$1(__assign$1({},edgeBase),{left:"-10px",top:"-10px",cursor:"nw-resize"})},Resizer=reactExports.memo(function(x){var d=x.onResizeStart,g=x.direction,E=x.children,b=x.replaceStyles,w=x.className,C=reactExports.useCallback(function(I){d(I,g)},[d,g]),S=reactExports.useCallback(function(I){d(I,g)},[d,g]),P=reactExports.useMemo(function(){return __assign$1(__assign$1({position:"absolute",userSelect:"none"},styles$1[g]),b??{})},[b,g]);return jsxRuntimeExports.jsx("div",{className:w||void 0,style:P,onMouseDown:C,onTouchStart:S,children:E})}),__extends=(function(){var x=function(d,g){return x=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(E,b){E.__proto__=b}||function(E,b){for(var w in b)Object.prototype.hasOwnProperty.call(b,w)&&(E[w]=b[w])},x(d,g)};return function(d,g){if(typeof g!="function"&&g!==null)throw new TypeError("Class extends value "+String(g)+" is not a constructor or null");x(d,g);function E(){this.constructor=d}d.prototype=g===null?Object.create(g):(E.prototype=g.prototype,new E)}})(),__assign=function(){return __assign=Object.assign||function(x){for(var d,g=1,E=arguments.length;g<E;g++){d=arguments[g];for(var b in d)Object.prototype.hasOwnProperty.call(d,b)&&(x[b]=d[b])}return x},__assign.apply(this,arguments)},DEFAULT_SIZE={width:"auto",height:"auto"},clamp=function(x,d,g){return Math.max(Math.min(x,g),d)},snap=function(x,d,g){var E=Math.round(x/d);return E*d+g*(E-1)},hasDirection=function(x,d){return new RegExp(x,"i").test(d)},isTouchEvent$1=function(x){return!!(x.touches&&x.touches.length)},isMouseEvent$1=function(x){return!!((x.clientX||x.clientX===0)&&(x.clientY||x.clientY===0))},findClosestSnap=function(x,d,g){g===void 0&&(g=0);var E=d.reduce(function(w,C,S){return Math.abs(C-x)<Math.abs(d[w]-x)?S:w},0),b=Math.abs(d[E]-x);return g===0||b<g?d[E]:x},getStringSize=function(x){return x=x.toString(),x==="auto"||x.endsWith("px")||x.endsWith("%")||x.endsWith("vh")||x.endsWith("vw")||x.endsWith("vmax")||x.endsWith("vmin")?x:"".concat(x,"px")},getPixelSize=function(x,d,g,E){if(x&&typeof x=="string"){if(x.endsWith("px"))return Number(x.replace("px",""));if(x.endsWith("%")){var b=Number(x.replace("%",""))/100;return d*b}if(x.endsWith("vw")){var b=Number(x.replace("vw",""))/100;return g*b}if(x.endsWith("vh")){var b=Number(x.replace("vh",""))/100;return E*b}}return x},calculateNewMax=function(x,d,g,E,b,w,C){return E=getPixelSize(E,x.width,d,g),b=getPixelSize(b,x.height,d,g),w=getPixelSize(w,x.width,d,g),C=getPixelSize(C,x.height,d,g),{maxWidth:typeof E>"u"?void 0:Number(E),maxHeight:typeof b>"u"?void 0:Number(b),minWidth:typeof w>"u"?void 0:Number(w),minHeight:typeof C>"u"?void 0:Number(C)}},normalizeToPair=function(x){return Array.isArray(x)?x:[x,x]},definedProps=["as","ref","style","className","grid","gridGap","snap","bounds","boundsByDirection","size","defaultSize","minWidth","minHeight","maxWidth","maxHeight","lockAspectRatio","lockAspectRatioExtraWidth","lockAspectRatioExtraHeight","enable","handleStyles","handleClasses","handleWrapperStyle","handleWrapperClass","children","onResizeStart","onResize","onResizeStop","handleComponent","scale","resizeRatio","snapGap"],baseClassName="__resizable_base__",Resizable=(function(x){__extends(d,x);function d(g){var E,b,w,C,S=x.call(this,g)||this;return S.ratio=1,S.resizable=null,S.parentLeft=0,S.parentTop=0,S.resizableLeft=0,S.resizableRight=0,S.resizableTop=0,S.resizableBottom=0,S.targetLeft=0,S.targetTop=0,S.delta={width:0,height:0},S.appendBase=function(){if(!S.resizable||!S.window)return null;var P=S.parentNode;if(!P)return null;var I=S.window.document.createElement("div");return I.style.width="100%",I.style.height="100%",I.style.position="absolute",I.style.transform="scale(0, 0)",I.style.left="0",I.style.flex="0 0 100%",I.classList?I.classList.add(baseClassName):I.className+=baseClassName,P.appendChild(I),I},S.removeBase=function(P){var I=S.parentNode;I&&I.removeChild(P)},S.state={isResizing:!1,width:(b=(E=S.propsSize)===null||E===void 0?void 0:E.width)!==null&&b!==void 0?b:"auto",height:(C=(w=S.propsSize)===null||w===void 0?void 0:w.height)!==null&&C!==void 0?C:"auto",direction:"right",original:{x:0,y:0,width:0,height:0},backgroundStyle:{height:"100%",width:"100%",backgroundColor:"rgba(0,0,0,0)",cursor:"auto",opacity:0,position:"fixed",zIndex:9999,top:"0",left:"0",bottom:"0",right:"0"},flexBasis:void 0},S.onResizeStart=S.onResizeStart.bind(S),S.onMouseMove=S.onMouseMove.bind(S),S.onMouseUp=S.onMouseUp.bind(S),S}return Object.defineProperty(d.prototype,"parentNode",{get:function(){return this.resizable?this.resizable.parentNode:null},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"window",{get:function(){return!this.resizable||!this.resizable.ownerDocument?null:this.resizable.ownerDocument.defaultView},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"propsSize",{get:function(){return this.props.size||this.props.defaultSize||DEFAULT_SIZE},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"size",{get:function(){var g=0,E=0;if(this.resizable&&this.window){var b=this.resizable.offsetWidth,w=this.resizable.offsetHeight,C=this.resizable.style.position;C!=="relative"&&(this.resizable.style.position="relative"),g=this.resizable.style.width!=="auto"?this.resizable.offsetWidth:b,E=this.resizable.style.height!=="auto"?this.resizable.offsetHeight:w,this.resizable.style.position=C}return{width:g,height:E}},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"sizeStyle",{get:function(){var g=this,E=this.props.size,b=function(S){var P;if(typeof g.state[S]>"u"||g.state[S]==="auto")return"auto";if(g.propsSize&&g.propsSize[S]&&(!((P=g.propsSize[S])===null||P===void 0)&&P.toString().endsWith("%"))){if(g.state[S].toString().endsWith("%"))return g.state[S].toString();var I=g.getParentSize(),M=Number(g.state[S].toString().replace("px","")),D=M/I[S]*100;return"".concat(D,"%")}return getStringSize(g.state[S])},w=E&&typeof E.width<"u"&&!this.state.isResizing?getStringSize(E.width):b("width"),C=E&&typeof E.height<"u"&&!this.state.isResizing?getStringSize(E.height):b("height");return{width:w,height:C}},enumerable:!1,configurable:!0}),d.prototype.getParentSize=function(){if(!this.parentNode)return this.window?{width:this.window.innerWidth,height:this.window.innerHeight}:{width:0,height:0};var g=this.appendBase();if(!g)return{width:0,height:0};var E=!1,b=this.parentNode.style.flexWrap;b!=="wrap"&&(E=!0,this.parentNode.style.flexWrap="wrap"),g.style.position="relative",g.style.minWidth="100%",g.style.minHeight="100%";var w={width:g.offsetWidth,height:g.offsetHeight};return E&&(this.parentNode.style.flexWrap=b),this.removeBase(g),w},d.prototype.bindEvents=function(){this.window&&(this.window.addEventListener("mouseup",this.onMouseUp),this.window.addEventListener("mousemove",this.onMouseMove),this.window.addEventListener("mouseleave",this.onMouseUp),this.window.addEventListener("touchmove",this.onMouseMove,{capture:!0,passive:!1}),this.window.addEventListener("touchend",this.onMouseUp))},d.prototype.unbindEvents=function(){this.window&&(this.window.removeEventListener("mouseup",this.onMouseUp),this.window.removeEventListener("mousemove",this.onMouseMove),this.window.removeEventListener("mouseleave",this.onMouseUp),this.window.removeEventListener("touchmove",this.onMouseMove,!0),this.window.removeEventListener("touchend",this.onMouseUp))},d.prototype.componentDidMount=function(){if(!(!this.resizable||!this.window)){var g=this.window.getComputedStyle(this.resizable);this.setState({width:this.state.width||this.size.width,height:this.state.height||this.size.height,flexBasis:g.flexBasis!=="auto"?g.flexBasis:void 0})}},d.prototype.componentWillUnmount=function(){this.window&&this.unbindEvents()},d.prototype.createSizeForCssProperty=function(g,E){var b=this.propsSize&&this.propsSize[E];return this.state[E]==="auto"&&this.state.original[E]===g&&(typeof b>"u"||b==="auto")?"auto":g},d.prototype.calculateNewMaxFromBoundary=function(g,E){var b=this.props.boundsByDirection,w=this.state.direction,C=b&&hasDirection("left",w),S=b&&hasDirection("top",w),P,I;if(this.props.bounds==="parent"){var M=this.parentNode;M&&(P=C?this.resizableRight-this.parentLeft:M.offsetWidth+(this.parentLeft-this.resizableLeft),I=S?this.resizableBottom-this.parentTop:M.offsetHeight+(this.parentTop-this.resizableTop))}else this.props.bounds==="window"?this.window&&(P=C?this.resizableRight:this.window.innerWidth-this.resizableLeft,I=S?this.resizableBottom:this.window.innerHeight-this.resizableTop):this.props.bounds&&(P=C?this.resizableRight-this.targetLeft:this.props.bounds.offsetWidth+(this.targetLeft-this.resizableLeft),I=S?this.resizableBottom-this.targetTop:this.props.bounds.offsetHeight+(this.targetTop-this.resizableTop));return P&&Number.isFinite(P)&&(g=g&&g<P?g:P),I&&Number.isFinite(I)&&(E=E&&E<I?E:I),{maxWidth:g,maxHeight:E}},d.prototype.calculateNewSizeFromDirection=function(g,E){var b=this.props.scale||1,w=normalizeToPair(this.props.resizeRatio||1),C=w[0],S=w[1],P=this.state,I=P.direction,M=P.original,D=this.props,k=D.lockAspectRatio,H=D.lockAspectRatioExtraHeight,F=D.lockAspectRatioExtraWidth,j=M.width,$=M.height,z=H||0,U=F||0;return hasDirection("right",I)&&(j=M.width+(g-M.x)*C/b,k&&($=(j-U)/this.ratio+z)),hasDirection("left",I)&&(j=M.width-(g-M.x)*C/b,k&&($=(j-U)/this.ratio+z)),hasDirection("bottom",I)&&($=M.height+(E-M.y)*S/b,k&&(j=($-z)*this.ratio+U)),hasDirection("top",I)&&($=M.height-(E-M.y)*S/b,k&&(j=($-z)*this.ratio+U)),{newWidth:j,newHeight:$}},d.prototype.calculateNewSizeFromAspectRatio=function(g,E,b,w){var C=this.props,S=C.lockAspectRatio,P=C.lockAspectRatioExtraHeight,I=C.lockAspectRatioExtraWidth,M=typeof w.width>"u"?10:w.width,D=typeof b.width>"u"||b.width<0?g:b.width,k=typeof w.height>"u"?10:w.height,H=typeof b.height>"u"||b.height<0?E:b.height,F=P||0,j=I||0;if(S){var $=(k-F)*this.ratio+j,z=(H-F)*this.ratio+j,U=(M-j)/this.ratio+F,W=(D-j)/this.ratio+F,q=Math.max(M,$),Z=Math.min(D,z),X=Math.max(k,U),K=Math.min(H,W);g=clamp(g,q,Z),E=clamp(E,X,K)}else g=clamp(g,M,D),E=clamp(E,k,H);return{newWidth:g,newHeight:E}},d.prototype.setBoundingClientRect=function(){var g=1/(this.props.scale||1);if(this.props.bounds==="parent"){var E=this.parentNode;if(E){var b=E.getBoundingClientRect();this.parentLeft=b.left*g,this.parentTop=b.top*g}}if(this.props.bounds&&typeof this.props.bounds!="string"){var w=this.props.bounds.getBoundingClientRect();this.targetLeft=w.left*g,this.targetTop=w.top*g}if(this.resizable){var C=this.resizable.getBoundingClientRect(),S=C.left,P=C.top,I=C.right,M=C.bottom;this.resizableLeft=S*g,this.resizableRight=I*g,this.resizableTop=P*g,this.resizableBottom=M*g}},d.prototype.onResizeStart=function(g,E){if(!(!this.resizable||!this.window)){var b=0,w=0;if(g.nativeEvent&&isMouseEvent$1(g.nativeEvent)?(b=g.nativeEvent.clientX,w=g.nativeEvent.clientY):g.nativeEvent&&isTouchEvent$1(g.nativeEvent)&&(b=g.nativeEvent.touches[0].clientX,w=g.nativeEvent.touches[0].clientY),this.props.onResizeStart&&this.resizable){var C=this.props.onResizeStart(g,E,this.resizable);if(C===!1)return}this.props.size&&(typeof this.props.size.height<"u"&&this.props.size.height!==this.state.height&&this.setState({height:this.props.size.height}),typeof this.props.size.width<"u"&&this.props.size.width!==this.state.width&&this.setState({width:this.props.size.width})),this.ratio=typeof this.props.lockAspectRatio=="number"?this.props.lockAspectRatio:this.size.width/this.size.height;var S,P=this.window.getComputedStyle(this.resizable);if(P.flexBasis!=="auto"){var I=this.parentNode;if(I){var M=this.window.getComputedStyle(I).flexDirection;this.flexDir=M.startsWith("row")?"row":"column",S=P.flexBasis}}this.setBoundingClientRect(),this.bindEvents();var D={original:{x:b,y:w,width:this.size.width,height:this.size.height},isResizing:!0,backgroundStyle:__assign(__assign({},this.state.backgroundStyle),{cursor:this.window.getComputedStyle(g.target).cursor||"auto"}),direction:E,flexBasis:S};this.setState(D)}},d.prototype.onMouseMove=function(g){var E=this;if(!(!this.state.isResizing||!this.resizable||!this.window)){if(this.window.TouchEvent&&isTouchEvent$1(g))try{g.preventDefault(),g.stopPropagation()}catch{}var b=this.props,w=b.maxWidth,C=b.maxHeight,S=b.minWidth,P=b.minHeight,I=isTouchEvent$1(g)?g.touches[0].clientX:g.clientX,M=isTouchEvent$1(g)?g.touches[0].clientY:g.clientY,D=this.state,k=D.direction,H=D.original,F=D.width,j=D.height,$=this.getParentSize(),z=calculateNewMax($,this.window.innerWidth,this.window.innerHeight,w,C,S,P);w=z.maxWidth,C=z.maxHeight,S=z.minWidth,P=z.minHeight;var U=this.calculateNewSizeFromDirection(I,M),W=U.newHeight,q=U.newWidth,Z=this.calculateNewMaxFromBoundary(w,C);this.props.snap&&this.props.snap.x&&(q=findClosestSnap(q,this.props.snap.x,this.props.snapGap)),this.props.snap&&this.props.snap.y&&(W=findClosestSnap(W,this.props.snap.y,this.props.snapGap));var X=this.calculateNewSizeFromAspectRatio(q,W,{width:Z.maxWidth,height:Z.maxHeight},{width:S,height:P});if(q=X.newWidth,W=X.newHeight,this.props.grid){var K=snap(q,this.props.grid[0],this.props.gridGap?this.props.gridGap[0]:0),ee=snap(W,this.props.grid[1],this.props.gridGap?this.props.gridGap[1]:0),te=this.props.snapGap||0,ce=te===0||Math.abs(K-q)<=te?K:q,Q=te===0||Math.abs(ee-W)<=te?ee:W;q=ce,W=Q}var se={width:q-H.width,height:W-H.height};if(this.delta=se,F&&typeof F=="string"){if(F.endsWith("%")){var ge=q/$.width*100;q="".concat(ge,"%")}else if(F.endsWith("vw")){var Ce=q/this.window.innerWidth*100;q="".concat(Ce,"vw")}else if(F.endsWith("vh")){var oe=q/this.window.innerHeight*100;q="".concat(oe,"vh")}}if(j&&typeof j=="string"){if(j.endsWith("%")){var ge=W/$.height*100;W="".concat(ge,"%")}else if(j.endsWith("vw")){var Ce=W/this.window.innerWidth*100;W="".concat(Ce,"vw")}else if(j.endsWith("vh")){var oe=W/this.window.innerHeight*100;W="".concat(oe,"vh")}}var he={width:this.createSizeForCssProperty(q,"width"),height:this.createSizeForCssProperty(W,"height")};this.flexDir==="row"?he.flexBasis=he.width:this.flexDir==="column"&&(he.flexBasis=he.height);var de=this.state.width!==he.width,re=this.state.height!==he.height,ae=this.state.flexBasis!==he.flexBasis,pe=de||re||ae;pe&&reactDomExports.flushSync(function(){E.setState(he)}),this.props.onResize&&pe&&this.props.onResize(g,k,this.resizable,se)}},d.prototype.onMouseUp=function(g){var E,b,w=this.state,C=w.isResizing,S=w.direction;w.original,!(!C||!this.resizable)&&(this.props.onResizeStop&&this.props.onResizeStop(g,S,this.resizable,this.delta),this.props.size&&this.setState({width:(E=this.props.size.width)!==null&&E!==void 0?E:"auto",height:(b=this.props.size.height)!==null&&b!==void 0?b:"auto"}),this.unbindEvents(),this.setState({isResizing:!1,backgroundStyle:__assign(__assign({},this.state.backgroundStyle),{cursor:"auto"})}))},d.prototype.updateSize=function(g){var E,b;this.setState({width:(E=g.width)!==null&&E!==void 0?E:"auto",height:(b=g.height)!==null&&b!==void 0?b:"auto"})},d.prototype.renderResizer=function(){var g=this,E=this.props,b=E.enable,w=E.handleStyles,C=E.handleClasses,S=E.handleWrapperStyle,P=E.handleWrapperClass,I=E.handleComponent;if(!b)return null;var M=Object.keys(b).map(function(D){return b[D]!==!1?jsxRuntimeExports.jsx(Resizer,{direction:D,onResizeStart:g.onResizeStart,replaceStyles:w&&w[D],className:C&&C[D],children:I&&I[D]?I[D]:null},D):null});return jsxRuntimeExports.jsx("div",{className:P,style:S,children:M})},d.prototype.render=function(){var g=this,E=Object.keys(this.props).reduce(function(C,S){return definedProps.indexOf(S)!==-1||(C[S]=g.props[S]),C},{}),b=__assign(__assign(__assign({position:"relative",userSelect:this.state.isResizing?"none":"auto"},this.props.style),this.sizeStyle),{maxWidth:this.props.maxWidth,maxHeight:this.props.maxHeight,minWidth:this.props.minWidth,minHeight:this.props.minHeight,boxSizing:"border-box",flexShrink:0});this.state.flexBasis&&(b.flexBasis=this.state.flexBasis);var w=this.props.as||"div";return jsxRuntimeExports.jsxs(w,__assign({style:b,className:this.props.className},E,{ref:function(C){C&&(g.resizable=C)},children:[this.state.isResizing&&jsxRuntimeExports.jsx("div",{style:this.state.backgroundStyle}),this.props.children,this.renderResizer()]}))},d.defaultProps={as:"div",onResizeStart:function(){},onResize:function(){},onResizeStop:function(){},enable:{top:!0,right:!0,bottom:!0,left:!0,topRight:!0,bottomRight:!0,bottomLeft:!0,topLeft:!0},style:{},grid:[1,1],gridGap:[0,0],lockAspectRatio:!1,lockAspectRatioExtraWidth:0,lockAspectRatioExtraHeight:0,scale:1,resizeRatio:1,snapGap:0},d})(reactExports.PureComponent);const tabContainer="_tabContainer_n98i3_2",navItem="_navItem_n98i3_14",navLink="_navLink_n98i3_20",contentArea="_contentArea_n98i3_39",icon="_icon_n98i3_48",labelBelowIcon="_labelBelowIcon_n98i3_59",styles={tabContainer,navItem,navLink,contentArea,icon,labelBelowIcon};function BsFillTrash3Fill(x){return GenIcon({attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M11 1.5v1h3.5a.5.5 0 0 1 0 1h-.538l-.853 10.66A2 2 0 0 1 11.115 16h-6.23a2 2 0 0 1-1.994-1.84L2.038 3.5H1.5a.5.5 0 0 1 0-1H5v-1A1.5 1.5 0 0 1 6.5 0h3A1.5 1.5 0 0 1 11 1.5m-5 0v1h4v-1a.5.5 0 0 0-.5-.5h-3a.5.5 0 0 0-.5.5M4.5 5.029l.5 8.5a.5.5 0 1 0 .998-.06l-.5-8.5a.5.5 0 1 0-.998.06m6.53-.528a.5.5 0 0 0-.528.47l-.5 8.5a.5.5 0 0 0 .998.058l.5-8.5a.5.5 0 0 0-.47-.528M8 4.5a.5.5 0 0 0-.5.5v8.5a.5.5 0 0 0 1 0V5a.5.5 0 0 0-.5-.5"},child:[]}]})(x)}function BsCaretDownFill(x){return GenIcon({attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M7.247 11.14 2.451 5.658C1.885 5.013 2.345 4 3.204 4h9.592a1 1 0 0 1 .753 1.659l-4.796 5.48a1 1 0 0 1-1.506 0z"},child:[]}]})(x)}function BsCaretRightFill(x){return GenIcon({attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"m12.14 8.753-5.482 4.796c-.646.566-1.658.106-1.658-.753V3.204a1 1 0 0 1 1.659-.753l5.48 4.796a1 1 0 0 1 0 1.506z"},child:[]}]})(x)}function BsCheckCircle(x){return GenIcon({attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14m0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16"},child:[]},{tag:"path",attr:{d:"m10.97 4.97-.02.022-3.473 4.425-2.093-2.094a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-1.071-1.05"},child:[]}]})(x)}function BsInfoCircleFill(x){return GenIcon({attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16m.93-9.412-1 4.705c-.07.34.029.533.304.533.194 0 .487-.07.686-.246l-.088.416c-.287.346-.92.598-1.465.598-.703 0-1.002-.422-.808-1.319l.738-3.468c.064-.293.006-.399-.287-.47l-.451-.081.082-.381 2.29-.287zM8 5.5a1 1 0 1 1 0-2 1 1 0 0 1 0 2"},child:[]}]})(x)}function BsPencilSquare(x){return GenIcon({attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M15.502 1.94a.5.5 0 0 1 0 .706L14.459 3.69l-2-2L13.502.646a.5.5 0 0 1 .707 0l1.293 1.293zm-1.75 2.456-2-2L4.939 9.21a.5.5 0 0 0-.121.196l-.805 2.414a.25.25 0 0 0 .316.316l2.414-.805a.5.5 0 0 0 .196-.12l6.813-6.814z"},child:[]},{tag:"path",attr:{fillRule:"evenodd",d:"M1 13.5A1.5 1.5 0 0 0 2.5 15h11a1.5 1.5 0 0 0 1.5-1.5v-6a.5.5 0 0 0-1 0v6a.5.5 0 0 1-.5.5h-11a.5.5 0 0 1-.5-.5v-11a.5.5 0 0 1 .5-.5H9a.5.5 0 0 0 0-1H2.5A1.5 1.5 0 0 0 1 2.5z"},child:[]}]})(x)}function BsPlus(x){return GenIcon({attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4"},child:[]}]})(x)}function BsStopCircle(x){return GenIcon({attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14m0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16"},child:[]},{tag:"path",attr:{d:"M5 6.5A1.5 1.5 0 0 1 6.5 5h3A1.5 1.5 0 0 1 11 6.5v3A1.5 1.5 0 0 1 9.5 11h-3A1.5 1.5 0 0 1 5 9.5z"},child:[]}]})(x)}function BsXCircle(x){return GenIcon({attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14m0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16"},child:[]},{tag:"path",attr:{d:"M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708"},child:[]}]})(x)}function BsZoomIn(x){return GenIcon({attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M6.5 12a5.5 5.5 0 1 0 0-11 5.5 5.5 0 0 0 0 11M13 6.5a6.5 6.5 0 1 1-13 0 6.5 6.5 0 0 1 13 0"},child:[]},{tag:"path",attr:{d:"M10.344 11.742q.044.06.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1 1 0 0 0-.115-.1 6.5 6.5 0 0 1-1.398 1.4z"},child:[]},{tag:"path",attr:{fillRule:"evenodd",d:"M6.5 3a.5.5 0 0 1 .5.5V6h2.5a.5.5 0 0 1 0 1H7v2.5a.5.5 0 0 1-1 0V7H3.5a.5.5 0 0 1 0-1H6V3.5a.5.5 0 0 1 .5-.5"},child:[]}]})(x)}function BsZoomOut(x){return GenIcon({attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M6.5 12a5.5 5.5 0 1 0 0-11 5.5 5.5 0 0 0 0 11M13 6.5a6.5 6.5 0 1 1-13 0 6.5 6.5 0 0 1 13 0"},child:[]},{tag:"path",attr:{d:"M10.344 11.742q.044.06.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1 1 0 0 0-.115-.1 6.5 6.5 0 0 1-1.398 1.4z"},child:[]},{tag:"path",attr:{fillRule:"evenodd",d:"M3 6.5a.5.5 0 0 1 .5-.5h6a.5.5 0 0 1 0 1h-6a.5.5 0 0 1-.5-.5"},child:[]}]})(x)}function isEmptyGoal(x){return x.content.trim()===""}function isTextEmpty(x){return x.trim()===""}function canSaveContentEdit(x,d){return!isTextEmpty(d)||isTextEmpty(x)&&!isTextEmpty(d)}function handleContentSave(x,d,g,E){canSaveContentEdit(x,d)?g(d):E()}function handleGoalKeyPress(x,d,g,E,b,w){x.key==="Enter"?handleContentSave(d,g,E,b):x.key==="Escape"&&b()}function handleGoalBlur(x,d,g,E,b=!1){b||handleContentSave(x,d,g,E)}function isGoalDraggable(x){return!isEmptyGoal(x)}const goalDescriptionForLabel=x=>({Who:"Stakeholder name"})[x]??"Goal name",GoalListTable=({label:x,goals:d,setDraggedItem:g,groupSelected:E,setGroupSelected:b,handleSynTableTree:w,inputRef:C})=>{const S=useFileContext(),{dispatch:P,treeIds:I}=S,[M,D]=reactExports.useState(null),[k,H]=reactExports.useState(""),[F,j]=reactExports.useState(!1),$=(Q,se)=>{Q.key==="Enter"&&(Q.preventDefault(),P(addGoalToTab(newTreeItem({type:se}))))},z=(Q,se)=>{w(Q,se)},U=(Q,se,ge)=>{M===se.id&&!F?handleGoalKeyPress(Q,se.content,k,Ce=>{P(updateTextForGoalId({id:se.id,text:Ce})),z(se,Ce),j(!0)},()=>{H(se.content),j(!1)}):F&&Q.key==="Enter"&&($(Q,ge),j(!1))},W=Q=>{M===Q.id?handleGoalBlur(Q.content,k,se=>{P(updateTextForGoalId({id:Q.id,text:se})),z(Q,se),D(null)},()=>{D(null),H(Q.content)}):z(Q,Q.content)},q=Q=>{P(deleteGoalFromGoalList(Q));const se=E.filter(ge=>ge.id!==Q.id);b(se)},Z=Q=>{console.log("drag start"),g(Q)},X=Q=>{if(isEmptyGoal(Q))return;const se=E.some(Ce=>Ce.id===Q.id);let ge;se?ge=E.filter(Ce=>Ce.id!==Q.id):ge=[...E,Q],b(ge)},K=Q=>E.some(se=>se.id===Q.id),ee=()=>{const se=selectGoalsForLabel({treeData:S},x).filter(ge=>!isEmptyGoal(ge));return se.length>0&&E.length===se.length},te=Q=>{var se;return((se=I[Q.id])==null?void 0:se.length)>0},ce=()=>{const Q=selectGoalsForLabel({treeData:S},x);if(!Q)return;const se=Q.filter(ge=>!isEmptyGoal(ge));se.length===E.length?b([]):b(se)};return jsxRuntimeExports.jsxs(Table,{striped:!0,bordered:!0,hover:!0,children:[jsxRuntimeExports.jsx("thead",{children:jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("th",{style:{width:"1px",whiteSpace:"nowrap"},children:jsxRuntimeExports.jsx(Form$1.Group,{as:Row,children:jsxRuntimeExports.jsx(Form$1.Check,{type:"checkbox",onChange:ce,checked:ee()})})}),jsxRuntimeExports.jsx("th",{style:{display:"flex"},children:goalDescriptionForLabel(x)})]})}),jsxRuntimeExports.jsx("tbody",{children:d.map((Q,se)=>jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("td",{className:"align-middle",children:jsxRuntimeExports.jsx(Form$1.Check,{type:"checkbox",onChange:()=>X(Q),checked:K(Q),disabled:isEmptyGoal(Q)})}),jsxRuntimeExports.jsx("td",{children:jsxRuntimeExports.jsxs(InputGroup$1,{children:[jsxRuntimeExports.jsx(Form$1.Control,{onDragStart:()=>Z(Q),draggable:isGoalDraggable(Q),type:"text",value:M===Q.id?k:Q.content,onChange:ge=>{M===Q.id&&H(ge.target.value)},onFocus:()=>{M!==Q.id&&(D(Q.id),H(Q.content))},placeholder:`Enter ${x}...`,spellCheck:!0,className:`
											  ${isEmptyGoal(Q)?"text-muted":""}
											  ${M===Q.id&&isTextEmpty(k)?"is-invalid":""}
											  ${te(Q)?"":"bg-secondary-subtle"}
										  `,onKeyDown:ge=>U(ge,Q,x),onBlur:()=>W(Q),ref:se===selectGoalsForLabel({treeData:S},x).length-1?C:void 0}),selectGoalsForLabel({treeData:S},x).length>1&&jsxRuntimeExports.jsx(Button,{onClick:()=>q(Q),children:jsxRuntimeExports.jsx(BsFillTrash3Fill,{})}),M===Q.id&&isTextEmpty(k)&&jsxRuntimeExports.jsx("div",{className:"invalid-feedback d-block",children:"Content cannot be empty"})]})})]},`${x}-${se}`))})]})},GoalList=React.forwardRef(({setDraggedItem:x,groupSelected:d,setGroupSelected:g,handleSynTableTree:E,handleDropGroupSelected:b},w)=>{const C=useFileContext(),{dispatch:S,tabs:P}=C,[I,M]=reactExports.useState(P.keys().next().value??"Do"),D=reactExports.useRef(null),k=$=>{$!==I&&(g([]),M($))},H=$=>{S(addGoalToTab(newTreeItem({type:$}))),requestAnimationFrame(()=>{D.current&&D.current.focus()})},F=()=>{window.confirm("Are you sure you want to delete all selected goals?")&&(d.forEach(z=>S(deleteGoalFromGoalList(z))),g([]))},j=()=>jsxRuntimeExports.jsxs("div",{className:"d-flex justify-content-end my-2",children:[jsxRuntimeExports.jsx(Button,{variant:"primary",className:"me-2",disabled:d.length<=0,onClick:b,children:"Add Group"}),jsxRuntimeExports.jsx(Button,{variant:"danger",className:"me-2",disabled:d.length<=0,onClick:F,children:"Delete Selected"})]});return jsxRuntimeExports.jsxs("div",{className:styles.tabContainer,ref:w,children:[jsxRuntimeExports.jsxs(Tab$1.Container,{activeKey:I??void 0,onSelect:$=>k($??"Be"),children:[jsxRuntimeExports.jsx(Nav$1,{variant:"tabs",className:"flex-row",children:[...P.values()].map($=>jsxRuntimeExports.jsx(Nav$1.Item,{className:styles.navItem,children:jsxRuntimeExports.jsxs(Nav$1.Link,{eventKey:$.label,active:I===$.label,className:`${styles.navLink} ${I===$.label?"bg-primary":""}`,children:[jsxRuntimeExports.jsx("img",{src:$.icon,alt:`${$.label} icon`,className:styles.icon,style:{width:$.label==="Who"?"0.7cm":"1.5cm"}}),jsxRuntimeExports.jsx("span",{className:styles.labelBelowIcon,children:$.label})]})},$.label))}),jsxRuntimeExports.jsx(Tab$1.Content,{className:styles.contentArea,children:[...P.keys()].map($=>jsxRuntimeExports.jsxs(Tab$1.Pane,{eventKey:$,children:[jsxRuntimeExports.jsx(GoalListTable,{label:$,goals:selectGoalsForLabel({treeData:C},$),setDraggedItem:x,groupSelected:d,setGroupSelected:g,handleSynTableTree:E,inputRef:D}),jsxRuntimeExports.jsxs("div",{className:"d-flex justify-content-between align-items-center mt-3",children:[jsxRuntimeExports.jsx(Button,{className:"me-2",onClick:()=>H(I),variant:"primary",children:jsxRuntimeExports.jsx(BsPlus,{})}),jsxRuntimeExports.jsx("div",{className:"text-muted",children:"Drag goals to arrange hierarchy"})]})]},$))})]}),jsxRuntimeExports.jsx(j,{})]})});var dist={},Nestable$2={},Nestable$1={},reactAddonsShallowCompare,hasRequiredReactAddonsShallowCompare;function requireReactAddonsShallowCompare(){if(hasRequiredReactAddonsShallowCompare)return reactAddonsShallowCompare;hasRequiredReactAddonsShallowCompare=1;var x=Object.prototype.hasOwnProperty;function d(b,w){return b===w?b!==0||w!==0||1/b===1/w:b!==b&&w!==w}function g(b,w){if(d(b,w))return!0;if(typeof b!="object"||b===null||typeof w!="object"||w===null)return!1;var C=Object.keys(b),S=Object.keys(w);if(C.length!==S.length)return!1;for(var P=0;P<C.length;P++)if(!x.call(w,C[P])||!d(b[C[P]],w[C[P]]))return!1;return!0}function E(b,w,C){return!g(b.props,w)||!g(b.state,C)}return reactAddonsShallowCompare=E,reactAddonsShallowCompare}/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var objectAssign,hasRequiredObjectAssign;function requireObjectAssign(){if(hasRequiredObjectAssign)return objectAssign;hasRequiredObjectAssign=1;var x=Object.getOwnPropertySymbols,d=Object.prototype.hasOwnProperty,g=Object.prototype.propertyIsEnumerable;function E(w){if(w==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(w)}function b(){try{if(!Object.assign)return!1;var w=new String("abc");if(w[5]="de",Object.getOwnPropertyNames(w)[0]==="5")return!1;for(var C={},S=0;S<10;S++)C["_"+String.fromCharCode(S)]=S;var P=Object.getOwnPropertyNames(C).map(function(M){return C[M]});if(P.join("")!=="0123456789")return!1;var I={};return"abcdefghijklmnopqrst".split("").forEach(function(M){I[M]=M}),Object.keys(Object.assign({},I)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}return objectAssign=b()?Object.assign:function(w,C){for(var S,P=E(w),I,M=1;M<arguments.length;M++){S=Object(arguments[M]);for(var D in S)d.call(S,D)&&(P[D]=S[D]);if(x){I=x(S);for(var k=0;k<I.length;k++)g.call(S,I[k])&&(P[I[k]]=S[I[k]])}}return P},objectAssign}var reactAddonsUpdate,hasRequiredReactAddonsUpdate;function requireReactAddonsUpdate(){if(hasRequiredReactAddonsUpdate)return reactAddonsUpdate;hasRequiredReactAddonsUpdate=1;var x=requireObjectAssign(),d={}.hasOwnProperty;function g(F,j,$,z,U,W,q,Z){if(!F){var X;if(j===void 0)X=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var K=[$,z,U,W,q,Z],ee=0;X=new Error(j.replace(/%s/g,function(){return K[ee++]})),X.name="Invariant Violation"}throw X.framesToPop=1,X}}function E(F){return Array.isArray(F)?F.concat():F&&typeof F=="object"?x(new F.constructor,F):F}var b="$push",w="$unshift",C="$splice",S="$set",P="$merge",I="$apply",M=[b,w,C,S,P,I],D={};M.forEach(function(F){D[F]=!0});function k(F,j,$){g(Array.isArray(F),"update(): expected target of %s to be an array; got %s.",$,F);var z=j[$];g(Array.isArray(z),"update(): expected spec of %s to be an array; got %s. Did you forget to wrap your parameter in an array?",$,z)}function H(F,j){if(g(typeof j=="object","update(): You provided a key path to update() that did not contain one of %s. Did you forget to include {%s: ...}?",M.join(", "),S),d.call(j,S))return g(Object.keys(j).length===1,"Cannot have more than one key in an object with %s",S),j[S];var $=E(F);if(d.call(j,P)){var z=j[P];g(z&&typeof z=="object","update(): %s expects a spec of type 'object'; got %s",P,z),g($&&typeof $=="object","update(): %s expects a target of type 'object'; got %s",P,$),x($,j[P])}d.call(j,b)&&(k(F,j,b),j[b].forEach(function(W){$.push(W)})),d.call(j,w)&&(k(F,j,w),j[w].forEach(function(W){$.unshift(W)})),d.call(j,C)&&(g(Array.isArray(F),"Expected %s target to be an array; got %s",C,F),g(Array.isArray(j[C]),"update(): expected spec of %s to be an array of arrays; got %s. Did you forget to wrap your parameters in an array?",C,j[C]),j[C].forEach(function(W){g(Array.isArray(W),"update(): expected spec of %s to be an array of arrays; got %s. Did you forget to wrap your parameters in an array?",C,j[C]),$.splice.apply($,W)})),d.call(j,I)&&(g(typeof j[I]=="function","update(): expected spec of %s to be a function; got %s.",I,j[I]),$=j[I]($));for(var U in j)D.hasOwnProperty(U)&&D[U]||($[U]=H(F[U],j[U]));return $}return reactAddonsUpdate=H,reactAddonsUpdate}var utils$1={},hasRequiredUtils;function requireUtils(){return hasRequiredUtils||(hasRequiredUtils=1,(function(x){var d=utils$1&&utils$1.__assign||function(){return d=Object.assign||function(j){for(var $,z=1,U=arguments.length;z<U;z++){$=arguments[z];for(var W in $)Object.prototype.hasOwnProperty.call($,W)&&(j[W]=$[W])}return j},d.apply(this,arguments)};Object.defineProperty(x,"__esModule",{value:!0}),x.getAllNonEmptyNodesIds=x.listWithChildren=x.getTransformProps=x.getTotalScroll=x.getOffsetRect=x.closest=x.isArray=x.isString=x.isNumber=x.isFunction=x.isUndefined=x.isDefined=x.objectType=void 0;var g=function(j){return Object.prototype.toString.call(j).slice(8,-1)};x.objectType=g;var E=function(j){return typeof j<"u"};x.isDefined=E;var b=function(j){return typeof j>"u"};x.isUndefined=b;var w=function(j){return typeof j=="function"};x.isFunction=w;var C=function(j){return typeof j=="number"&&!isNaN(j)};x.isNumber=C;var S=function(j){return(0,x.objectType)(j)==="String"};x.isString=S;var P=function(j){return(0,x.objectType)(j)==="Array"};x.isArray=P;var I=function(j,$){for(;j;){if(j.matches&&j.matches($))return j;j=j.parentNode}return null};x.closest=I;var M=function(j){var $=j.getBoundingClientRect(),z=document.body,U=document.documentElement,W=window.pageYOffset||U.scrollTop||z.scrollTop,q=window.pageXOffset||U.scrollLeft||z.scrollLeft,Z=U.clientTop||z.clientTop||0,X=U.clientLeft||z.clientLeft||0,K=$.top+W-Z,ee=$.left+q-X;return{top:Math.round(K),left:Math.round(ee)}};x.getOffsetRect=M;var D=function(j){for(var $=0,z=0;j=j.parentNode;)$+=j.scrollTop||0,z+=j.scrollLeft||0;return{top:$,left:z}};x.getTotalScroll=D;var k=function(j,$){return{transform:"translate(".concat(j,"px, ").concat($,"px)")}};x.getTransformProps=k;var H=function(j,$){return j.map(function(z){var U;return d(d({},z),(U={},U[$]=z[$]?(0,x.listWithChildren)(z[$],$):[],U))})};x.listWithChildren=H;var F=function(j,$){var z=$.idProp,U=$.childrenProp,W=[],q=j.filter(function(Z){var X;return(X=Z[U])===null||X===void 0?void 0:X.length}).map(function(Z){return W=W.concat((0,x.getAllNonEmptyNodesIds)(Z[U],{idProp:z,childrenProp:U})),Z[z]});return q.concat(W)};x.getAllNonEmptyNodesIds=F})(utils$1)),utils$1}var NestableItem={},Icon$1={},Icon={},hasRequiredIcon$1;function requireIcon$1(){if(hasRequiredIcon$1)return Icon;hasRequiredIcon$1=1;var x=Icon&&Icon.__extends||(function(){var M=function(D,k){return M=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(H,F){H.__proto__=F}||function(H,F){for(var j in F)Object.prototype.hasOwnProperty.call(F,j)&&(H[j]=F[j])},M(D,k)};return function(D,k){if(typeof k!="function"&&k!==null)throw new TypeError("Class extends value "+String(k)+" is not a constructor or null");M(D,k);function H(){this.constructor=D}D.prototype=k===null?Object.create(k):(H.prototype=k.prototype,new H)}})(),d=Icon&&Icon.__assign||function(){return d=Object.assign||function(M){for(var D,k=1,H=arguments.length;k<H;k++){D=arguments[k];for(var F in D)Object.prototype.hasOwnProperty.call(D,F)&&(M[F]=D[F])}return M},d.apply(this,arguments)},g=Icon&&Icon.__createBinding||(Object.create?(function(M,D,k,H){H===void 0&&(H=k);var F=Object.getOwnPropertyDescriptor(D,k);(!F||("get"in F?!D.__esModule:F.writable||F.configurable))&&(F={enumerable:!0,get:function(){return D[k]}}),Object.defineProperty(M,H,F)}):(function(M,D,k,H){H===void 0&&(H=k),M[H]=D[k]})),E=Icon&&Icon.__setModuleDefault||(Object.create?(function(M,D){Object.defineProperty(M,"default",{enumerable:!0,value:D})}):function(M,D){M.default=D}),b=Icon&&Icon.__importStar||function(M){if(M&&M.__esModule)return M;var D={};if(M!=null)for(var k in M)k!=="default"&&Object.prototype.hasOwnProperty.call(M,k)&&g(D,M,k);return E(D,M),D},w=Icon&&Icon.__rest||function(M,D){var k={};for(var H in M)Object.prototype.hasOwnProperty.call(M,H)&&D.indexOf(H)<0&&(k[H]=M[H]);if(M!=null&&typeof Object.getOwnPropertySymbols=="function")for(var F=0,H=Object.getOwnPropertySymbols(M);F<H.length;F++)D.indexOf(H[F])<0&&Object.prototype.propertyIsEnumerable.call(M,H[F])&&(k[H[F]]=M[H[F]]);return k},C=Icon&&Icon.__importDefault||function(M){return M&&M.__esModule?M:{default:M}};Object.defineProperty(Icon,"__esModule",{value:!0});var S=b(requireReact()),P=C(requireClassnames()),I=(function(M){x(D,M);function D(){return M!==null&&M.apply(this,arguments)||this}return D.prototype.render=function(){var k=this.props;k.children;var H=k.className,F=k.isCollapsed,j=w(k,["children","className","isCollapsed"]),$=(0,P.default)("nestable-icon",H,{"nestable-icon--plus-gray":F,"nestable-icon--minus-gray":!F});return S.default.createElement("i",d({className:$},j))},D})(S.PureComponent);return Icon.default=I,Icon}var hasRequiredIcon;function requireIcon(){if(hasRequiredIcon)return Icon$1;hasRequiredIcon=1;var x=Icon$1&&Icon$1.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(Icon$1,"__esModule",{value:!0});var d=x(requireIcon$1());return Icon$1.default=d.default,Icon$1}var hasRequiredNestableItem;function requireNestableItem(){if(hasRequiredNestableItem)return NestableItem;hasRequiredNestableItem=1;var x=NestableItem&&NestableItem.__extends||(function(){var M=function(D,k){return M=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(H,F){H.__proto__=F}||function(H,F){for(var j in F)Object.prototype.hasOwnProperty.call(F,j)&&(H[j]=F[j])},M(D,k)};return function(D,k){if(typeof k!="function"&&k!==null)throw new TypeError("Class extends value "+String(k)+" is not a constructor or null");M(D,k);function H(){this.constructor=D}D.prototype=k===null?Object.create(k):(H.prototype=k.prototype,new H)}})(),d=NestableItem&&NestableItem.__assign||function(){return d=Object.assign||function(M){for(var D,k=1,H=arguments.length;k<H;k++){D=arguments[k];for(var F in D)Object.prototype.hasOwnProperty.call(D,F)&&(M[F]=D[F])}return M},d.apply(this,arguments)},g=NestableItem&&NestableItem.__createBinding||(Object.create?(function(M,D,k,H){H===void 0&&(H=k);var F=Object.getOwnPropertyDescriptor(D,k);(!F||("get"in F?!D.__esModule:F.writable||F.configurable))&&(F={enumerable:!0,get:function(){return D[k]}}),Object.defineProperty(M,H,F)}):(function(M,D,k,H){H===void 0&&(H=k),M[H]=D[k]})),E=NestableItem&&NestableItem.__setModuleDefault||(Object.create?(function(M,D){Object.defineProperty(M,"default",{enumerable:!0,value:D})}):function(M,D){M.default=D}),b=NestableItem&&NestableItem.__importStar||function(M){if(M&&M.__esModule)return M;var D={};if(M!=null)for(var k in M)k!=="default"&&Object.prototype.hasOwnProperty.call(M,k)&&g(D,M,k);return E(D,M),D},w=NestableItem&&NestableItem.__importDefault||function(M){return M&&M.__esModule?M:{default:M}};Object.defineProperty(NestableItem,"__esModule",{value:!0});var C=b(requireReact()),S=w(requireClassnames()),P=w(requireIcon()),I=(function(M){x(D,M);function D(){var k=M!==null&&M.apply(this,arguments)||this;return k.renderCollapseIcon=function(H){var F=H.isCollapsed;return C.default.createElement(P.default,{className:"nestable-item-icon",isCollapsed:F})},k.onMouseEnter=function(H){var F=k.props,j=F.item,$=F.options;return $.onMouseEnter(H,j)},k.onDragStart=function(H){var F=k.props,j=F.item,$=F.options;return $.onDragStart(H,j)},k}return D.prototype.render=function(){var k,H=this.props,F=H.item,j=H.isCopy,$=H.options,z=H.index,U=H.depth,W=$.dragItem,q=$.renderItem,Z=$.handler,X=$.disableCollapse,K=$.disableDrag,ee=$.idProp,te=$.childrenProp,ce=$.checkIfCollapsed,Q=$.renderCollapseIcon,se=Q===void 0?this.renderCollapseIcon:Q,ge=ce(F),Ce=!j&&W&&W[ee]===F[ee],oe=F[te]&&F[te].length>0,he=!0,de={},re={},ae;j||(W?de=d(d({},de),{onMouseEnter:this.onMouseEnter}):(typeof K=="function"?he=K({item:F,index:z,depth:U}):typeof K<"u"&&(he=!K),he&&(re=d(d({},re),{draggable:!0,onDragStart:this.onDragStart})))),Z?ae=C.default.createElement("span",d({className:"nestable-item-handler"},re),Z):de=d(d({},de),re);var pe=X?void 0:function(){return $.onToggleCollapse(F)},J=oe?C.default.createElement("span",{onClick:pe},se({isCollapsed:ge,item:F})):null,ue="nestable-item".concat(j?"-copy":""),Te={className:(0,S.default)(ue,"".concat(ue,"-").concat(F[ee]),(k={"is-dragging":Ce},k["".concat(ue,"--with-children")]=oe,k["".concat(ue,"--children-open")]=oe&&!ge,k["".concat(ue,"--children-collapsed")]=oe&&ge,k["".concat(ue,"--children-no-collapse")]=oe&&X,k))},xe=q({collapseIcon:J,depth:U,handler:ae,index:z,isDraggable:he,item:F});return xe?C.default.createElement("li",d({},Te),C.default.createElement("div",d({className:"nestable-item-name"},de),xe),oe&&!ge&&C.default.createElement("ol",{className:"nestable-list"},F[te].map(function(we,Re){return C.default.createElement(D,{key:Re,index:Re,depth:U+1,item:we,options:$,isCopy:j})}))):null},D.defaultProps={depth:0},D})(C.PureComponent);return NestableItem.default=I,NestableItem}var hasRequiredNestable$1;function requireNestable$1(){if(hasRequiredNestable$1)return Nestable$1;hasRequiredNestable$1=1;var x=Nestable$1&&Nestable$1.__extends||(function(){var F=function(j,$){return F=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(z,U){z.__proto__=U}||function(z,U){for(var W in U)Object.prototype.hasOwnProperty.call(U,W)&&(z[W]=U[W])},F(j,$)};return function(j,$){if(typeof $!="function"&&$!==null)throw new TypeError("Class extends value "+String($)+" is not a constructor or null");F(j,$);function z(){this.constructor=j}j.prototype=$===null?Object.create($):(z.prototype=$.prototype,new z)}})(),d=Nestable$1&&Nestable$1.__assign||function(){return d=Object.assign||function(F){for(var j,$=1,z=arguments.length;$<z;$++){j=arguments[$];for(var U in j)Object.prototype.hasOwnProperty.call(j,U)&&(F[U]=j[U])}return F},d.apply(this,arguments)},g=Nestable$1&&Nestable$1.__createBinding||(Object.create?(function(F,j,$,z){z===void 0&&(z=$);var U=Object.getOwnPropertyDescriptor(j,$);(!U||("get"in U?!j.__esModule:U.writable||U.configurable))&&(U={enumerable:!0,get:function(){return j[$]}}),Object.defineProperty(F,z,U)}):(function(F,j,$,z){z===void 0&&(z=$),F[z]=j[$]})),E=Nestable$1&&Nestable$1.__setModuleDefault||(Object.create?(function(F,j){Object.defineProperty(F,"default",{enumerable:!0,value:j})}):function(F,j){F.default=j}),b=Nestable$1&&Nestable$1.__importStar||function(F){if(F&&F.__esModule)return F;var j={};if(F!=null)for(var $ in F)$!=="default"&&Object.prototype.hasOwnProperty.call(F,$)&&g(j,F,$);return E(j,F),j},w=Nestable$1&&Nestable$1.__spreadArray||function(F,j,$){if($||arguments.length===2)for(var z=0,U=j.length,W;z<U;z++)(W||!(z in j))&&(W||(W=Array.prototype.slice.call(j,0,z)),W[z]=j[z]);return F.concat(W||Array.prototype.slice.call(j))},C=Nestable$1&&Nestable$1.__importDefault||function(F){return F&&F.__esModule?F:{default:F}};Object.defineProperty(Nestable$1,"__esModule",{value:!0});var S=b(requireReact()),P=C(requireReactAddonsShallowCompare()),I=C(requireReactAddonsUpdate()),M=C(requireClassnames()),D=requireUtils(),k=C(requireNestableItem()),H=(function(F){x(j,F);function j($){var z=F.call(this,$)||this;return z.el=null,z.elCopyStyles=null,z.mouse={last:{x:0},shift:{x:0}},z.collapse=function(U){var W=z.props,q=W.idProp,Z=W.childrenProp,X=W.collapsed,K=z.state.items;U==="NONE"?z.setState({collapsedItems:X?(0,D.getAllNonEmptyNodesIds)(K,{idProp:q,childrenProp:Z}):[]}):U==="ALL"?z.setState({collapsedItems:X?[]:(0,D.getAllNonEmptyNodesIds)(K,{idProp:q,childrenProp:Z})}):(0,D.isArray)(U)&&z.setState({collapsedItems:(0,D.getAllNonEmptyNodesIds)(K,{idProp:q,childrenProp:Z}).filter(function(ee){return U.indexOf(ee)>-1!==X})})},z.startTrackMouse=function(){document.addEventListener("mousemove",z.onMouseMove),document.addEventListener("mouseup",z.onDragEnd),document.addEventListener("keydown",z.onKeyDown)},z.stopTrackMouse=function(){document.removeEventListener("mousemove",z.onMouseMove),document.removeEventListener("mouseup",z.onDragEnd),document.removeEventListener("keydown",z.onKeyDown),z.elCopyStyles=null},z.getItemDepth=function(U){var W=z.props.childrenProp,q=1;if(U[W].length>0){var Z=U[W].map(z.getItemDepth);q+=Math.max.apply(Math,Z)}return q},z.checkIfCollapsed=function(U){var W=z.props,q=W.collapsed,Z=W.idProp,X=z.state.collapsedItems;return X.indexOf(U[Z])>-1!==q},z.onDragStart=function(U,W){var q=z.props.onDragStart;U.preventDefault(),U.stopPropagation(),U.target instanceof Element&&(z.el=(0,D.closest)(U.target,".nestable-item"),z.startTrackMouse(),z.onMouseMove(U),q({dragItem:W}),z.setState({dragItem:W,itemsOld:z.state.items}))},z.onDragEnd=function(U,W){var q=z.props.onDragEnd;U==null||U.preventDefault(),z.stopTrackMouse(),z.el=null,q(),W?z.dragRevert():z.dragApply()},z.onMouseMove=function(U){var W=z.props,q=W.group,Z=W.threshold,X=z.state.dragItem,K=U.clientX,ee=U.clientY,te=(0,D.getTransformProps)(K,ee),ce=document.querySelector(".nestable-".concat(q," .nestable-drag-layer > .nestable-list"));if(z.elCopyStyles){z.elCopyStyles=d(d({},z.elCopyStyles),te),Object.keys(te).forEach(function(Ce){ce.style[Ce]=te[Ce]});var ge=K-z.mouse.last.x;ge>=0&&z.mouse.shift.x>=0||ge<=0&&z.mouse.shift.x<=0?z.mouse.shift.x+=ge:z.mouse.shift.x=0,z.mouse.last.x=K,Math.abs(z.mouse.shift.x)>Z&&(z.mouse.shift.x>0?z.tryIncreaseDepth(X):z.tryDecreaseDepth(X),z.mouse.shift.x=0)}else{var Q=(0,D.getOffsetRect)(z.el),se=(0,D.getTotalScroll)(z.el);z.elCopyStyles=d({marginTop:Q.top-ee-se.top,marginLeft:Q.left-K-se.left},te)}},z.onMouseEnter=function(U,W){U.preventDefault(),U.stopPropagation();var q=z.props,Z=q.collapsed,X=q.idProp,K=q.childrenProp,ee=z.state.dragItem;if(ee[X]!==W[X]){var te=z.getPathById(ee[X]),ce=z.getPathById(W[X]),Q={};if(Z&&te.length>1){var se=z.getItemByPath(te.slice(0,-1));se[K].length===1&&(Q=z.onToggleCollapse(se,!0))}z.moveItem({dragItem:ee,pathFrom:te,pathTo:ce},Q)}},z.onToggleCollapse=function(U,W){var q=z.props,Z=q.collapsed,X=q.idProp,K=z.state.collapsedItems,ee=z.checkIfCollapsed(U),te={collapsedItems:ee!==Z?K.filter(function(ce){return ce!==U[X]}):K.concat(U[X])};if(W)return te;z.setState(te),z.onCollapseChange(te.collapsedItems)},z.onCollapseChange=function(U){var W=z.props,q=W.collapsed,Z=W.onCollapseChange;Z(q?{openIds:U}:{closedIds:U})},z.onKeyDown=function(U){U.which===27&&z.onDragEnd(null,!0)},z.state={items:[],itemsOld:null,dragItem:null,isDirty:!1,collapsedItems:[]},z}return j.prototype.componentDidMount=function(){var $=this.props,z=$.items,U=$.childrenProp;z=(0,D.listWithChildren)(z,U),this.setState({items:z})},j.prototype.componentDidUpdate=function($){var z=this,U=this,W=U.props,q=W.items,Z=W.childrenProp,X=U.state,K=(0,P.default)(d(d({},this),{props:$,state:X}),this.props,X);K&&(this.stopTrackMouse(),this.setState(function(ee){var te=d(d({},ee),{items:(0,D.listWithChildren)(q,Z),dragItem:null,isDirty:!1});return $.collapsed!==z.props.collapsed&&(te.collapsedItems=[],z.onCollapseChange(te.collapsedItems)),te}))},j.prototype.componentWillUnmount=function(){this.stopTrackMouse()},j.prototype.moveItem=function($,z){var U=$.dragItem,W=$.pathFrom,q=$.pathTo;z===void 0&&(z={});var Z=this.props,X=Z.childrenProp,K=Z.confirmChange,ee=this.getItemDepth(U),te=this.state.items,ce=this.getRealNextPath(W,q,ee);if(ce.length!==0){var Q=ce.length>q.length?q:q.slice(0,-1),se=this.getItemByPath(Q);if(K({dragItem:U,destinationParent:se})){var ge=this.getSplicePath(W,{numToRemove:1,childrenProp:X}),Ce=this.getSplicePath(ce,{numToRemove:0,itemsToInsert:[U],childrenProp:X});te=(0,I.default)(te,ge),te=(0,I.default)(te,Ce),this.setState(function(oe){return d(d(d({},oe),{items:te,isDirty:!0}),z)}),z.collapsedItems!==this.state.collapsedItems&&this.onCollapseChange(z.collapsedItems)}}},j.prototype.tryIncreaseDepth=function($){var z=this.props,U=z.maxDepth,W=z.idProp,q=z.childrenProp,Z=z.collapsed,X=this.getPathById($[W]),K=X[X.length-1],ee=X.length+this.getItemDepth($);if(K>0&&ee<=U){var te=this.getItemByPath(X.slice(0,-1).concat(K-1));if(!te[q].length||!this.checkIfCollapsed(te)){var ce=X.slice(0,-1).concat(K-1).concat(te[q].length),Q={};Z&&!te[q].length&&(Q=this.onToggleCollapse(te,!0)),this.moveItem({dragItem:$,pathFrom:X,pathTo:ce},Q)}}},j.prototype.tryDecreaseDepth=function($){var z=this.props,U=z.idProp,W=z.childrenProp,q=z.collapsed,Z=this.getPathById($[U]),X=Z[Z.length-1];if(Z.length>1){var K=this.getItemByPath(Z.slice(0,-1));if(X+1===K[W].length){var ee=Z.slice(0,-1);ee[ee.length-1]+=1;var te={};q&&K[W].length===1&&(te=this.onToggleCollapse(K,!0)),this.moveItem({dragItem:$,pathFrom:Z,pathTo:ee},te)}}},j.prototype.dragApply=function(){var $=this.props,z=$.onChange,U=$.idProp,W=this.state,q=W.items,Z=W.isDirty,X=W.dragItem;if(this.setState({itemsOld:null,dragItem:null,isDirty:!1}),z&&Z){var K=this.getPathById(X[U],q);z({items:q,dragItem:X,targetPath:K})}},j.prototype.dragRevert=function(){var $=this.state.itemsOld;this.setState({items:$,itemsOld:null,dragItem:null,isDirty:!1})},j.prototype.getPathById=function($,z){var U=this;z===void 0&&(z=this.state.items);var W=this.props,q=W.idProp,Z=W.childrenProp,X=[];return z.every(function(K,ee){if(K[q]===$)X.push(ee);else if(K[Z]){var te=U.getPathById($,K[Z]);te.length&&(X=X.concat(ee).concat(te))}return X.length===0}),X},j.prototype.getItemByPath=function($,z){z===void 0&&(z=this.state.items);var U=this.props.childrenProp,W=null;return $.forEach(function(q){var Z=W?W[U]:z;W=Z[q]}),W},j.prototype.getSplicePath=function($,z){z===void 0&&(z={});var U={},W=z.numToRemove||0,q=z.itemsToInsert||[],Z=$.length-1,X=U;return $.forEach(function(K,ee){var te;if(ee===Z)X.$splice=[w([K,W],q,!0)];else{var ce={};X[K]=(te={},te[z.childrenProp]=ce,te),X=ce}}),U},j.prototype.getRealNextPath=function($,z,U){var W=this.props,q=W.childrenProp,Z=W.maxDepth,X=$.length-1,K=z.length-1,ee=z.length+U-1;if($.length<z.length){var te=!1;return ee>Z&&z.length?this.getRealNextPath($,z.slice(0,-1),U):z.map(function(Q,se){return te?se===K?Q+1:Q:typeof $[se]!="number"?Q:z[se]>$[se]&&se===X?(te=!0,Q-1):Q})}else if($.length===z.length&&z[K]>$[K]){var ce=this.getItemByPath(z);if(ee<Z&&ce[q]&&ce[q].length&&!this.checkIfCollapsed(ce))return z.slice(0,-1).concat(z[K]-1).concat(0)}return z},j.prototype.getItemOptions=function(){var $=this.props,z=$.renderItem,U=$.renderCollapseIcon,W=$.handler,q=$.disableCollapse,Z=$.disableDrag,X=$.idProp,K=$.childrenProp,ee=this.state.dragItem;return{dragItem:ee,idProp:X,childrenProp:K,disableCollapse:q,disableDrag:Z,renderItem:z,renderCollapseIcon:U,handler:W,checkIfCollapsed:this.checkIfCollapsed,onDragStart:this.onDragStart,onMouseEnter:this.onMouseEnter,onToggleCollapse:this.onToggleCollapse}},j.prototype.renderDragLayer=function(){var $=this.props,z=$.group,U=$.idProp,W=this.state.dragItem,q=document.querySelector(".nestable-".concat(z," .nestable-item-").concat(W[U])),Z={};q&&(Z.width=q.clientWidth),this.elCopyStyles&&(Z=d(d({},Z),this.elCopyStyles));var X=this.getItemOptions();return S.default.createElement("div",{className:"nestable-drag-layer"},S.default.createElement("ol",{className:"nestable-list",style:Z},S.default.createElement(k.default,{item:W,options:X,isCopy:!0})))},j.prototype.render=function(){var $=this.props,z=$.group,U=$.className,W=$.idProp,q=this.state,Z=q.items,X=q.dragItem,K=this.getItemOptions();return S.default.createElement("div",{className:(0,M.default)(U,"nestable","nestable-".concat(z),{"is-drag-active":X})},S.default.createElement("ol",{className:"nestable-list"},Z.map(function(ee,te){return S.default.createElement(k.default,{key:ee[W],index:te,item:ee,options:K})})),X&&this.renderDragLayer())},j.defaultProps={childrenProp:"children",collapsed:!1,confirmChange:function(){return!0},disableCollapse:!1,disableDrag:!1,group:Math.random().toString(36).slice(2),idProp:"id",items:[],maxDepth:10,onChange:function(){},onCollapseChange:function(){},onDragEnd:function(){},onDragStart:function(){},renderItem:function($){var z=$.item;return String(z)},threshold:30},j})(S.Component);return Nestable$1.default=H,Nestable$1}var hasRequiredNestable;function requireNestable(){if(hasRequiredNestable)return Nestable$2;hasRequiredNestable=1;var x=Nestable$2&&Nestable$2.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(Nestable$2,"__esModule",{value:!0});var d=x(requireNestable$1());return Nestable$2.default=d.default,Nestable$2}var types={},hasRequiredTypes;function requireTypes(){return hasRequiredTypes||(hasRequiredTypes=1,Object.defineProperty(types,"__esModule",{value:!0})),types}var hasRequiredDist;function requireDist(){return hasRequiredDist||(hasRequiredDist=1,(function(x){var d=dist&&dist.__createBinding||(Object.create?(function(w,C,S,P){P===void 0&&(P=S);var I=Object.getOwnPropertyDescriptor(C,S);(!I||("get"in I?!C.__esModule:I.writable||I.configurable))&&(I={enumerable:!0,get:function(){return C[S]}}),Object.defineProperty(w,P,I)}):(function(w,C,S,P){P===void 0&&(P=S),w[P]=C[S]})),g=dist&&dist.__exportStar||function(w,C){for(var S in w)S!=="default"&&!Object.prototype.hasOwnProperty.call(C,S)&&d(C,w,S)},E=dist&&dist.__importDefault||function(w){return w&&w.__esModule?w:{default:w}};Object.defineProperty(x,"__esModule",{value:!0});var b=E(requireNestable());g(requireTypes(),x),x.default=b.default})(dist)),dist}var distExports=requireDist();const Nestable=getDefaultExportFromCjs(distExports);function FaMinus(x){return GenIcon({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M416 208H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h384c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"},child:[]}]})(x)}function FaPlus(x){return GenIcon({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"},child:[]}]})(x)}const ConfirmModal=({show:x,title:d,message:g,onHide:E,onConfirm:b,extraContent:w})=>jsxRuntimeExports.jsxs(Modal$1,{show:x,onHide:E,centered:!0,children:[jsxRuntimeExports.jsx(Modal$1.Header,{closeButton:!0,children:jsxRuntimeExports.jsx(Modal$1.Title,{children:d})}),jsxRuntimeExports.jsxs(Modal$1.Body,{children:[g,w]}),jsxRuntimeExports.jsxs(Modal$1.Footer,{children:[jsxRuntimeExports.jsx(Button,{variant:"secondary",onClick:E,children:"Cancel"}),jsxRuntimeExports.jsx(Button,{variant:"warning","data-cy":"confirm-delete",onClick:b,style:{backgroundColor:"red"},children:"Confirm"})]})]}),treeListStyle={position:"relative",background:"white",display:"flex",border:"1px solid gray",borderRadius:"5px",alignItems:"center",padding:"0.1rem",minWidth:"100px"},treeInputStyle={backgroundColor:"#e0e0e0",border:"none",margin:0,padding:0,flex:1,outline:"none",width:"100%",height:"100%"},iconFromType=x=>{const d={Be:BeIcon,Do:DoIcon,Concern:ConcernIcon,Feel:FeelIcon,Who:WhoIcon};if(x in d)return d[x];throw Error(`iconFromType: Unknown type "${x}"`)},IconComponent=({type:x})=>jsxRuntimeExports.jsx("img",{src:iconFromType(x),alt:`${x} icon`,className:"ms-2 me-1",style:{height:x==="Who"?"30px":"20px"}}),Tree=({handleSynTableTree:x,existingGoalReferenceInstanceId:d,setExistingGoalReferenceInstanceId:g})=>{const[E,b]=reactExports.useState(null),[w,C]=reactExports.useState(""),[S,P]=reactExports.useState(!1),[I,M]=reactExports.useState(!1),D=reactExports.useRef(null),k=reactExports.useRef(null),{treeData:H,dispatch:F}=useFileContext(),j=()=>{D!=null&&D.current&&F(deleteGoalReferenceFromHierarchy(D.current)),M(!1)},$=Z=>{D.current=Z;const X=U(Z);Z.children&&Z.children.length>0?(g([...d,...X]),M(!0)):j()},z=()=>{M(!1),g([])},U=Z=>{const X=[{goalId:Z.id,instanceId:Z.instanceId}];return Z.children&&Z.children.forEach(K=>{X.push(...U(K))}),X},W=({item:Z,collapseIcon:X})=>{const K=Z,ee=E===K.id,te=()=>{isEmptyGoal(K)||(b(K.id),C(K.content),requestAnimationFrame(()=>{k.current&&k.current.focus()}))},ce=()=>{!ee&&!isEmptyGoal(K)&&te()},Q=()=>{handleContentSave(K.content,w,de=>{x(K,de),b(null)},()=>{se()})},se=()=>{b(null),C(K.content),requestAnimationFrame(()=>{P(!1)})},ge=()=>{handleGoalBlur(K.content,w,de=>{x(K,de),b(null)},()=>{se()},S),P(!1)},Ce=de=>{handleGoalKeyPress(de,K.content,w,re=>{x(K,re),b(null)},()=>{se()})},oe=25,he=d.some(de=>de.goalId===K.id&&de.instanceId===K.instanceId);return jsxRuntimeExports.jsxs("div",{style:{...treeListStyle,backgroundColor:ee?"#e0e0e0":he?"#FF474C":"white"},className:"tree-list",onDoubleClick:ce,children:[X,jsxRuntimeExports.jsx(IconComponent,{type:K.type}),jsxRuntimeExports.jsx("div",{style:{padding:".5rem",flex:1,overflowWrap:"break-word",wordBreak:"break-word"},children:ee?jsxRuntimeExports.jsx("input",{ref:k,type:"text",value:w,onChange:de=>C(de.target.value),onBlur:ge,onKeyDown:Ce,className:`tree-input ${isTextEmpty(w)?"is-invalid":""}`,style:treeInputStyle}):K.content}),ee&&isTextEmpty(w)&&jsxRuntimeExports.jsx("div",{className:"invalid-feedback d-block small",children:"Content cannot be empty"}),jsxRuntimeExports.jsx("div",{className:"edit-icon",onClick:ee?Q:te,style:{opacity:!ee&&isEmptyGoal(K)?.5:1,cursor:!ee&&isEmptyGoal(K)?"not-allowed":"pointer"},children:ee?jsxRuntimeExports.jsx(BsCheckCircle,{size:oe}):jsxRuntimeExports.jsx(BsPencilSquare,{size:oe})}),jsxRuntimeExports.jsx("div",{className:"delete-icon",onClick:ee?se:()=>$(K),onMouseEnter:()=>P(!0),children:ee?jsxRuntimeExports.jsx(BsXCircle,{size:oe}):jsxRuntimeExports.jsx(BsFillTrash3Fill,{size:oe})})]})},q=({isCollapsed:Z})=>jsxRuntimeExports.jsx("div",{style:{display:"flex",paddingLeft:"0.5rem",cursor:"pointer"},children:Z?jsxRuntimeExports.jsx(FaPlus,{size:13}):jsxRuntimeExports.jsx(FaMinus,{size:13})});return jsxRuntimeExports.jsxs("div",{style:{width:"100%",height:"100%",alignSelf:"flex-start",position:"relative"},children:[jsxRuntimeExports.jsx(ConfirmModal,{show:I,title:"Delete Warning",message:"You are going to delete a goal with children goals, are you sure?",onHide:z,onConfirm:j}),jsxRuntimeExports.jsx(Nestable,{onChange:({items:Z})=>F(setTreeData(Z)),confirmChange:({destinationParent:Z})=>!isNonFunctionalGoal(Z==null?void 0:Z.type),items:H,renderItem:W,idProp:"instanceId",renderCollapseIcon:({isCollapsed:Z})=>jsxRuntimeExports.jsx(q,{isCollapsed:Z})})]})};class ImageBox{constructor(d,g,E){this.src=d,this.width=g,this.height=E}}class EventObject{constructor(d="",...g){if(this.consumed=!1,this.name=d,this.properties={},g[0]&&g[0].constructor===Object)for(const[E,b]of Object.entries(g[0]))this.properties[E]=b;else for(let E=0;E<g.length;E+=2)g[E+1]!==null&&(this.properties[g[E]]=g[E+1])}getName(){return this.name}getProperties(){return this.properties}getProperty(d){return this.properties[d]}isConsumed(){return this.consumed}consume(){this.consumed=!0}}class EventSource{constructor(d=null){this.eventListeners=[],this.eventsEnabled=!0,this.eventSource=null,this.eventSource=d}isEventsEnabled(){return this.eventsEnabled}setEventsEnabled(d){this.eventsEnabled=d}getEventSource(){return this.eventSource}setEventSource(d){this.eventSource=d}addListener(d,g){this.eventListeners.push({name:d,funct:g})}removeListener(d){let g=0;for(;g<this.eventListeners.length;)this.eventListeners[g].funct===d?this.eventListeners.splice(g,1):g+=1}fireEvent(d,g=null){if(this.isEventsEnabled()){d||(d=new EventObject("")),g||(g=this.getEventSource()),g||(g=this);for(const E of this.eventListeners)(E.name===null||E.name===d.getName())&&E.funct.apply(this,[g,d])}}}class Client{}Client.VERSION="0.13.1";Client.basePath=".";Client.setBasePath=x=>{typeof x<"u"&&x.length>0?(x.substring(x.length-1)==="/"&&(x=x.substring(0,x.length-1)),Client.basePath=x):Client.basePath="."};Client.imageBasePath=".";Client.setImageBasePath=x=>{typeof x<"u"&&x.length>0?(x.substring(x.length-1)==="/"&&(x=x.substring(0,x.length-1)),Client.imageBasePath=x):Client.imageBasePath=`${Client.basePath}/images`};Client.language=typeof window<"u"?navigator.language:"en";Client.setLanguage=x=>{typeof x<"u"&&x!=null?Client.language=x:Client.language=navigator.language};Client.defaultLanguage="en";Client.setDefaultLanguage=x=>{typeof x<"u"&&x!=null?Client.defaultLanguage=x:Client.defaultLanguage="en"};Client.languages=null;Client.setLanguages=x=>{typeof x<"u"&&x!=null&&(Client.languages=x)};Client.IS_EDGE=typeof window<"u"&&navigator.userAgent!=null&&!!navigator.userAgent.match(/Edge\//);Client.IS_NS=typeof window<"u"&&navigator.userAgent!=null&&navigator.userAgent.indexOf("Mozilla/")>=0&&navigator.userAgent.indexOf("MSIE")<0&&navigator.userAgent.indexOf("Edge/")<0;Client.IS_SF=typeof window<"u"&&/Apple Computer, Inc/.test(navigator.vendor);Client.IS_ANDROID=typeof window<"u"&&navigator.appVersion.indexOf("Android")>=0;Client.IS_IOS=typeof window<"u"&&/iP(hone|od|ad)/.test(navigator.platform);Client.IS_GC=typeof window<"u"&&/Google Inc/.test(navigator.vendor);Client.IS_CHROMEAPP=typeof window<"u"&&window.chrome!=null&&chrome.app!=null&&chrome.app.runtime!=null;Client.IS_FF=navigator.userAgent.toLowerCase().indexOf("firefox")>-1;Client.IS_MT=typeof window<"u"&&(navigator.userAgent.indexOf("Firefox/")>=0&&navigator.userAgent.indexOf("Firefox/1.")<0&&navigator.userAgent.indexOf("Firefox/2.")<0||navigator.userAgent.indexOf("Iceweasel/")>=0&&navigator.userAgent.indexOf("Iceweasel/1.")<0&&navigator.userAgent.indexOf("Iceweasel/2.")<0||navigator.userAgent.indexOf("SeaMonkey/")>=0&&navigator.userAgent.indexOf("SeaMonkey/1.")<0||navigator.userAgent.indexOf("Iceape/")>=0&&navigator.userAgent.indexOf("Iceape/1.")<0);Client.IS_SVG=typeof window<"u"&&navigator.appName.toUpperCase()!=="MICROSOFT INTERNET EXPLORER";Client.NO_FO=typeof window<"u"&&(!document.createElementNS||document.createElementNS("http://www.w3.org/2000/svg","foreignObject").toString()!=="[object SVGForeignObjectElement]"||navigator.userAgent.indexOf("Opera/")>=0);Client.IS_WIN=typeof window<"u"&&navigator.appVersion.indexOf("Win")>0;Client.IS_MAC=typeof window<"u"&&navigator.appVersion.indexOf("Mac")>0;Client.IS_CHROMEOS=typeof window<"u"&&/\bCrOS\b/.test(navigator.appVersion);Client.IS_TOUCH=typeof window<"u"&&"ontouchstart"in document.documentElement;Client.IS_POINTER=typeof window<"u"&&window.PointerEvent!=null&&!(navigator.appVersion.indexOf("Mac")>0);Client.IS_LOCAL=typeof window<"u"&&document.location.href.indexOf("http://")<0&&document.location.href.indexOf("https://")<0;Client.isBrowserSupported=()=>Client.IS_SVG;const getMainEvent=x=>{let d=x;return(d.type==="touchstart"||d.type==="touchmove")&&d.touches&&d.touches[0]?d=d.touches[0]:d.type==="touchend"&&d.changedTouches&&d.changedTouches[0]&&(d=d.changedTouches[0]),d},getClientX=x=>getMainEvent(x).clientX,getClientY=x=>getMainEvent(x).clientY,getSource=x=>x.target,isConsumed=x=>{const d=x;return d.isConsumed!==void 0&&d.isConsumed},isTouchEvent=x=>{const d=x;return d.pointerType?d.pointerType==="touch"||d.pointerType===d.MSPOINTER_TYPE_TOUCH:d.mozInputSource!==void 0?d.mozInputSource===5:d.type.indexOf("touch")===0},isPenEvent=x=>{const d=x;return d.pointerType?d.pointerType=="pen"||d.pointerType===d.MSPOINTER_TYPE_PEN:d.mozInputSource!==void 0?d.mozInputSource===2:d.type.indexOf("pen")===0},isMultiTouchEvent=x=>{const d=x;return d.type&&d.type.indexOf("touch")==0&&d.touches!==void 0&&d.touches.length>1},isMouseEvent=x=>{const d=x;return d.pointerType?d.pointerType=="mouse"||d.pointerType===d.MSPOINTER_TYPE_MOUSE:d.mozInputSource!==void 0?d.mozInputSource===1:d.type.indexOf("mouse")===0},isLeftMouseButton=x=>"buttons"in x&&(x.type==="mousedown"||x.type==="mousemove")?x.buttons===1:x.which!==void 0?x.which===1:x.button===1,isRightMouseButton=x=>x.button===2,isPopupTrigger=x=>isRightMouseButton(x)||Client.IS_MAC&&isControlDown(x)&&!isShiftDown(x)&&!isMetaDown(x)&&!isAltDown(x),isShiftDown=x=>x.shiftKey,isAltDown=x=>x.altKey,isControlDown=x=>x.ctrlKey,isMetaDown=x=>x.metaKey,DEFAULT_HOTSPOT=.3,MIN_HOTSPOT_SIZE=8,MAX_HOTSPOT_SIZE=0;var RENDERING_HINT;(function(x){x.EXACT="exact",x.FASTER="faster",x.FASTEST="fastest"})(RENDERING_HINT||(RENDERING_HINT={}));var DIALECT;(function(x){x.SVG="svg",x.MIXEDHTML="mixedHtml",x.PREFERHTML="preferHtml",x.STRICTHTML="strictHtml"})(DIALECT||(DIALECT={}));const IDENTITY_FIELD_NAME="mxObjectId",NS_SVG="http://www.w3.org/2000/svg",NS_XLINK="http://www.w3.org/1999/xlink",SHADOWCOLOR="gray",SHADOW_OFFSET_X=2,SHADOW_OFFSET_Y=3,SHADOW_OPACITY=1;var NODETYPE;(function(x){x[x.ELEMENT=1]="ELEMENT",x[x.ATTRIBUTE=2]="ATTRIBUTE",x[x.TEXT=3]="TEXT",x[x.CDATA=4]="CDATA",x[x.ENTITY_REFERENCE=5]="ENTITY_REFERENCE",x[x.ENTITY=6]="ENTITY",x[x.PROCESSING_INSTRUCTION=7]="PROCESSING_INSTRUCTION",x[x.COMMENT=8]="COMMENT",x[x.DOCUMENT=9]="DOCUMENT",x[x.DOCUMENTTYPE=10]="DOCUMENTTYPE",x[x.DOCUMENT_FRAGMENT=11]="DOCUMENT_FRAGMENT",x[x.NOTATION=12]="NOTATION"})(NODETYPE||(NODETYPE={}));const TOOLTIP_VERTICAL_OFFSET=16,DEFAULT_VALID_COLOR="#00FF00",DEFAULT_INVALID_COLOR="#FF0000",OUTLINE_HIGHLIGHT_COLOR="#00FF00",OUTLINE_HIGHLIGHT_STROKEWIDTH=5,HIGHLIGHT_STROKEWIDTH=3,HIGHLIGHT_SIZE=2,HIGHLIGHT_OPACITY=100;var CURSOR;(function(x){x.MOVABLE_VERTEX="move",x.MOVABLE_EDGE="move",x.LABEL_HANDLE="default",x.TERMINAL_HANDLE="pointer",x.BEND_HANDLE="crosshair",x.VIRTUAL_BEND_HANDLE="crosshair",x.CONNECT="pointer"})(CURSOR||(CURSOR={}));const INVALID_CONNECT_TARGET_COLOR="#FF0000",DROP_TARGET_COLOR="#0000FF",VALID_COLOR="#00FF00",INVALID_COLOR="#FF0000",EDGE_SELECTION_COLOR="#00FF00",VERTEX_SELECTION_COLOR="#00FF00",VERTEX_SELECTION_STROKEWIDTH=1,EDGE_SELECTION_STROKEWIDTH=1,VERTEX_SELECTION_DASHED=!0,EDGE_SELECTION_DASHED=!0,GUIDE_COLOR="#FF0000",GUIDE_STROKEWIDTH=1,HANDLE_SIZE=6,LABEL_HANDLE_SIZE=4,HANDLE_FILLCOLOR="#00FF00",HANDLE_STROKECOLOR="black",LABEL_HANDLE_FILLCOLOR="yellow",CONNECT_HANDLE_FILLCOLOR="#0000FF",LOCKED_HANDLE_FILLCOLOR="#FF0000",DEFAULT_FONTFAMILY="Arial,Helvetica",DEFAULT_FONTSIZE=11,DEFAULT_TEXT_DIRECTION="",LINE_HEIGHT=1.2,WORD_WRAP="normal",DEFAULT_FONTSTYLE=0,DEFAULT_STARTSIZE=40,DEFAULT_MARKERSIZE=6,DEFAULT_IMAGESIZE=24,ENTITY_SEGMENT=30,RECTANGLE_ROUNDING_FACTOR=.15,LINE_ARCSIZE=20,ARROW_SPACING=0,ARROW_WIDTH=30,ARROW_SIZE=30,PAGE_FORMAT_A4_PORTRAIT=[0,0,827,1169],NONE="none";var FONT;(function(x){x[x.BOLD=1]="BOLD",x[x.ITALIC=2]="ITALIC",x[x.UNDERLINE=4]="UNDERLINE",x[x.STRIKETHROUGH=8]="STRIKETHROUGH"})(FONT||(FONT={}));var ARROW;(function(x){x.CLASSIC="classic",x.CLASSIC_THIN="classicThin",x.BLOCK="block",x.BLOCK_THIN="blockThin",x.OPEN="open",x.OPEN_THIN="openThin",x.OVAL="oval",x.DIAMOND="diamond",x.DIAMOND_THIN="diamondThin"})(ARROW||(ARROW={}));var ALIGN;(function(x){x.LEFT="left",x.CENTER="center",x.RIGHT="right",x.TOP="top",x.MIDDLE="middle",x.BOTTOM="bottom"})(ALIGN||(ALIGN={}));var DIRECTION;(function(x){x.NORTH="north",x.SOUTH="south",x.EAST="east",x.WEST="west"})(DIRECTION||(DIRECTION={}));var TEXT_DIRECTION;(function(x){x.DEFAULT="",x.AUTO="auto",x.LTR="ltr",x.RTL="rtl"})(TEXT_DIRECTION||(TEXT_DIRECTION={}));const DIRECTION_MASK={NONE:0,WEST:1,NORTH:2,SOUTH:4,EAST:8,ALL:15};var ELBOW;(function(x){x.VERTICAL="vertical",x.HORIZONTAL="horizontal"})(ELBOW||(ELBOW={}));var EDGESTYLE;(function(x){x.ELBOW="elbowEdgeStyle",x.ENTITY_RELATION="entityRelationEdgeStyle",x.LOOP="loopEdgeStyle",x.SIDETOSIDE="sideToSideEdgeStyle",x.TOPTOBOTTOM="topToBottomEdgeStyle",x.ORTHOGONAL="orthogonalEdgeStyle",x.SEGMENT="segmentEdgeStyle",x.MANHATTAN="manhattanEdgeStyle"})(EDGESTYLE||(EDGESTYLE={}));var PERIMETER;(function(x){x.ELLIPSE="ellipsePerimeter",x.RECTANGLE="rectanglePerimeter",x.RHOMBUS="rhombusPerimeter",x.HEXAGON="hexagonPerimeter",x.TRIANGLE="trianglePerimeter"})(PERIMETER||(PERIMETER={}));var SHAPE;(function(x){x.RECTANGLE="rectangle",x.ELLIPSE="ellipse",x.DOUBLE_ELLIPSE="doubleEllipse",x.RHOMBUS="rhombus",x.LINE="line",x.IMAGE="image",x.ARROW="arrow",x.ARROW_CONNECTOR="arrowConnector",x.LABEL="label",x.CYLINDER="cylinder",x.SWIMLANE="swimlane",x.CONNECTOR="connector",x.ACTOR="actor",x.CLOUD="cloud",x.TRIANGLE="triangle",x.HEXAGON="hexagon"})(SHAPE||(SHAPE={}));const extractTextWithWhitespace=x=>{const d=["BLOCKQUOTE","DIV","H1","H2","H3","H4","H5","H6","OL","P","PRE","TABLE","UL"],g=[];function E(b){if(!(b.length==1&&(b[0].nodeName=="BR"||b[0].innerHTML==`
`)))for(let w=0;w<b.length;w+=1){const C=b[w];C.nodeName=="BR"||C.innerHTML==`
`||(b.length==1||w==0)&&C.nodeName=="DIV"&&C.innerHTML.toLowerCase()=="<br>"?g.push(`
`):(C.nodeType===3||C.nodeType===4?C.nodeValue&&C.nodeValue.length>0&&g.push(C.nodeValue):C.nodeType!==8&&C.childNodes.length>0&&E(Array.from(C.childNodes)),w<b.length-1&&d.indexOf(b[w+1].nodeName)>=0&&g.push(`
`))}}return E(x),g.join("")},write=(x,d)=>{const E=x.ownerDocument.createTextNode(d);return x!=null&&x.appendChild(E),E},writeln=(x,d)=>{const E=x.ownerDocument.createTextNode(d);return x!=null&&(x.appendChild(E),x.appendChild(document.createElement("br"))),E},br=(x,d=1)=>{let g=null;for(let E=0;E<d;E+=1)x!=null&&(g=x.ownerDocument.createElement("br"),x.appendChild(g));return g},isNode=(x,d=null,g,E)=>x!=null&&!isNaN(x.nodeType)&&(d==null||x.nodeName.toLowerCase()==d.toLowerCase())?g==null||x.getAttribute(g)==E:!1,isAncestorNode=(x,d)=>{let g=d;for(;g!=null;){if(g===x)return!0;g=g.parentNode}return!1},clearSelection=()=>{const x=window.getSelection?window.getSelection():document.selection;x&&(x.removeAllRanges?x.removeAllRanges():x.empty&&x.empty())};class InternalMouseEvent{constructor(d,g=null){this.consumed=!1,this.evt=d,this.state=g,this.sourceState=g,this.graphX=0,this.graphY=0}getEvent(){return this.evt}getSource(){return getSource(this.evt)}isSource(d){return d?isAncestorNode(d.node,this.getSource()):!1}getX(){return getClientX(this.getEvent())}getY(){return getClientY(this.getEvent())}getGraphX(){return this.graphX}getGraphY(){return this.graphY}getState(){return this.state}getCell(){const d=this.getState();return d?d.cell:null}isPopupTrigger(){return isPopupTrigger(this.getEvent())}isConsumed(){return this.consumed}consume(d){d=d||window.TouchEvent&&this.evt instanceof TouchEvent||isMouseEvent(this.evt),d&&this.evt.preventDefault&&this.evt.preventDefault(),this.consumed=!0}}let supportsPassive=!1;try{document.addEventListener("test",()=>{},Object.defineProperty&&Object.defineProperty({},"passive",{get:()=>{supportsPassive=!0}}))}catch{}class InternalEvent{static addListener(d,g,E){d.addEventListener(g,E,supportsPassive?{passive:!1}:!1),d.mxListenerList||(d.mxListenerList=[]);const b={name:g,f:E};d.mxListenerList.push(b)}static removeListener(d,g,E){if(d.removeEventListener(g,E,!1),d.mxListenerList){const b=d.mxListenerList.length;for(let w=0;w<b;w+=1)if(d.mxListenerList[w].f===E){d.mxListenerList.splice(w,1);break}}}static removeAllListeners(d){const g=d.mxListenerList;if(g)for(;g.length>0;){const E=g[0];InternalEvent.removeListener(d,E.name,E.f)}}static addGestureListeners(d,g=null,E=null,b=null){g&&InternalEvent.addListener(d,Client.IS_POINTER?"pointerdown":"mousedown",g),E&&InternalEvent.addListener(d,Client.IS_POINTER?"pointermove":"mousemove",E),b&&InternalEvent.addListener(d,Client.IS_POINTER?"pointerup":"mouseup",b),!Client.IS_POINTER&&Client.IS_TOUCH&&(g&&InternalEvent.addListener(d,"touchstart",g),E&&InternalEvent.addListener(d,"touchmove",E),b&&InternalEvent.addListener(d,"touchend",b))}static removeGestureListeners(d,g,E,b){g&&InternalEvent.removeListener(d,Client.IS_POINTER?"pointerdown":"mousedown",g),E&&InternalEvent.removeListener(d,Client.IS_POINTER?"pointermove":"mousemove",E),b&&InternalEvent.removeListener(d,Client.IS_POINTER?"pointerup":"mouseup",b),!Client.IS_POINTER&&Client.IS_TOUCH&&(g&&InternalEvent.removeListener(d,"touchstart",g),E&&InternalEvent.removeListener(d,"touchmove",E),b&&InternalEvent.removeListener(d,"touchend",b))}static redirectMouseEvents(d,g,E=null,b=null,w=null,C=null,S=null){const P=I=>typeof E=="function"?E(I):E;InternalEvent.addGestureListeners(d,I=>{b?b(I):isConsumed(I)||g.fireMouseEvent(InternalEvent.MOUSE_DOWN,new InternalMouseEvent(I,P(I)))},I=>{w?w(I):isConsumed(I)||g.fireMouseEvent(InternalEvent.MOUSE_MOVE,new InternalMouseEvent(I,P(I)))},I=>{C?C(I):isConsumed(I)||g.fireMouseEvent(InternalEvent.MOUSE_UP,new InternalMouseEvent(I,P(I)))}),InternalEvent.addListener(d,"dblclick",I=>{if(S)S(I);else if(!isConsumed(I)){const M=P(I);g.dblClick(I,M==null?void 0:M.cell)}})}static release(d){try{InternalEvent.removeAllListeners(d);const g=d.childNodes;if(g!==void 0){const E=g.length;for(let b=0;b<E;b+=1)InternalEvent.release(g[b])}}catch{}}static addMouseWheelListener(d,g){if(d!=null){const E=b=>{b.ctrlKey&&b.preventDefault(),(Math.abs(b.deltaX)>.5||Math.abs(b.deltaY)>.5)&&d(b,b.deltaY==0?-b.deltaX>0:-b.deltaY>0)};if(g=g??window,Client.IS_SF&&!Client.IS_TOUCH){let b=1;InternalEvent.addListener(g,"gesturestart",w=>{InternalEvent.consume(w),b=1}),InternalEvent.addListener(g,"gesturechange",(w=>{if(InternalEvent.consume(w),typeof w.scale=="number"){const C=b-w.scale;Math.abs(C)>.2&&(d(w,C<0,!0),b=w.scale)}})),InternalEvent.addListener(g,"gestureend",w=>{InternalEvent.consume(w)})}else{let b=[],w=0,C=0;InternalEvent.addGestureListeners(g,(S=>{!isMouseEvent(S)&&S.pointerId!=null&&b.push(S)}),(S=>{if(!isMouseEvent(S)&&b.length==2){for(let k=0;k<b.length;k+=1)if(S.pointerId==b[k].pointerId){b[k]=S;break}const P=Math.abs(b[0].clientX-b[1].clientX),I=Math.abs(b[0].clientY-b[1].clientY),M=Math.abs(P-w),D=Math.abs(I-C);if(M>InternalEvent.PINCH_THRESHOLD||D>InternalEvent.PINCH_THRESHOLD){const k=b[0].clientX+(b[1].clientX-b[0].clientX)/2,H=b[0].clientY+(b[1].clientY-b[0].clientY)/2;d(b[0],M>D?P>w:I>C,!0,k,H),w=P,C=I}}}),S=>{b=[],w=0,C=0})}InternalEvent.addListener(g,"wheel",E)}}static disableContextMenu(d){InternalEvent.addListener(d,"contextmenu",g=>(g.preventDefault&&g.preventDefault(),!1))}static consume(d,g=!0,E=!0){g&&(d.preventDefault?(E&&d.stopPropagation(),d.preventDefault()):E&&(d.cancelBubble=!0)),d.isConsumed=!0,d.preventDefault||(d.returnValue=!1)}}InternalEvent.LABEL_HANDLE=-1;InternalEvent.ROTATION_HANDLE=-2;InternalEvent.CUSTOM_HANDLE=-100;InternalEvent.VIRTUAL_HANDLE=-1e5;InternalEvent.MOUSE_DOWN="mouseDown";InternalEvent.MOUSE_MOVE="mouseMove";InternalEvent.MOUSE_UP="mouseUp";InternalEvent.ACTIVATE="activate";InternalEvent.RESIZE_START="resizeStart";InternalEvent.RESIZE="resize";InternalEvent.RESIZE_END="resizeEnd";InternalEvent.MOVE_START="moveStart";InternalEvent.MOVE="move";InternalEvent.MOVE_END="moveEnd";InternalEvent.PAN_START="panStart";InternalEvent.PAN="pan";InternalEvent.PAN_END="panEnd";InternalEvent.MINIMIZE="minimize";InternalEvent.NORMALIZE="normalize";InternalEvent.MAXIMIZE="maximize";InternalEvent.HIDE="hide";InternalEvent.SHOW="show";InternalEvent.CLOSE="close";InternalEvent.DESTROY="destroy";InternalEvent.REFRESH="refresh";InternalEvent.SIZE="size";InternalEvent.SELECT="select";InternalEvent.FIRED="fired";InternalEvent.FIRE_MOUSE_EVENT="fireMouseEvent";InternalEvent.GESTURE="gesture";InternalEvent.TAP_AND_HOLD="tapAndHold";InternalEvent.GET="get";InternalEvent.RECEIVE="receive";InternalEvent.CONNECT="connect";InternalEvent.DISCONNECT="disconnect";InternalEvent.SUSPEND="suspend";InternalEvent.RESUME="resume";InternalEvent.MARK="mark";InternalEvent.ROOT="root";InternalEvent.POST="post";InternalEvent.OPEN="open";InternalEvent.SAVE="save";InternalEvent.BEFORE_ADD_VERTEX="beforeAddVertex";InternalEvent.ADD_VERTEX="addVertex";InternalEvent.AFTER_ADD_VERTEX="afterAddVertex";InternalEvent.DONE="done";InternalEvent.EXECUTE="execute";InternalEvent.EXECUTED="executed";InternalEvent.BEGIN_UPDATE="beginUpdate";InternalEvent.START_EDIT="startEdit";InternalEvent.END_UPDATE="endUpdate";InternalEvent.END_EDIT="endEdit";InternalEvent.BEFORE_UNDO="beforeUndo";InternalEvent.UNDO="undo";InternalEvent.REDO="redo";InternalEvent.CHANGE="change";InternalEvent.NOTIFY="notify";InternalEvent.LAYOUT_CELLS="layoutCells";InternalEvent.CLICK="click";InternalEvent.SCALE="scale";InternalEvent.TRANSLATE="translate";InternalEvent.SCALE_AND_TRANSLATE="scaleAndTranslate";InternalEvent.UP="up";InternalEvent.DOWN="down";InternalEvent.ADD="add";InternalEvent.REMOVE="remove";InternalEvent.CLEAR="clear";InternalEvent.ADD_CELLS="addCells";InternalEvent.CELLS_ADDED="cellsAdded";InternalEvent.MOVE_CELLS="moveCells";InternalEvent.CELLS_MOVED="cellsMoved";InternalEvent.RESIZE_CELLS="resizeCells";InternalEvent.CELLS_RESIZED="cellsResized";InternalEvent.TOGGLE_CELLS="toggleCells";InternalEvent.CELLS_TOGGLED="cellsToggled";InternalEvent.ORDER_CELLS="orderCells";InternalEvent.CELLS_ORDERED="cellsOrdered";InternalEvent.REMOVE_CELLS="removeCells";InternalEvent.CELLS_REMOVED="cellsRemoved";InternalEvent.GROUP_CELLS="groupCells";InternalEvent.UNGROUP_CELLS="ungroupCells";InternalEvent.REMOVE_CELLS_FROM_PARENT="removeCellsFromParent";InternalEvent.FOLD_CELLS="foldCells";InternalEvent.CELLS_FOLDED="cellsFolded";InternalEvent.ALIGN_CELLS="alignCells";InternalEvent.LABEL_CHANGED="labelChanged";InternalEvent.CONNECT_CELL="connectCell";InternalEvent.CELL_CONNECTED="cellConnected";InternalEvent.SPLIT_EDGE="splitEdge";InternalEvent.FLIP_EDGE="flipEdge";InternalEvent.START_EDITING="startEditing";InternalEvent.EDITING_STARTED="editingStarted";InternalEvent.EDITING_STOPPED="editingStopped";InternalEvent.ADD_OVERLAY="addOverlay";InternalEvent.REMOVE_OVERLAY="removeOverlay";InternalEvent.UPDATE_CELL_SIZE="updateCellSize";InternalEvent.ESCAPE="escape";InternalEvent.DOUBLE_CLICK="doubleClick";InternalEvent.START="start";InternalEvent.RESET="reset";InternalEvent.PINCH_THRESHOLD=10;class Point{constructor(d=0,g=0){this._x=0,this._y=0,this.x=d,this.y=g}get x(){return this._x}set x(d){if(Number.isNaN(d))throw new Error("Invalid x supplied.");this._x=d}get y(){return this._y}set y(d){if(Number.isNaN(d))throw new Error("Invalid y supplied.");this._y=d}equals(d){return d?d.x===this.x&&d.y===this.y:!1}clone(){return new Point(this.x,this.y)}}class Rectangle extends Point{constructor(d=0,g=0,E=0,b=0){super(d,g),this._width=0,this._height=0,this.width=E,this.height=b}get width(){return this._width}set width(d){if(Number.isNaN(d))throw new Error("Invalid width supplied.");this._width=d}get height(){return this._height}set height(d){if(Number.isNaN(d))throw new Error("Invalid height supplied.");this._height=d}setRect(d,g,E,b){this.x=d,this.y=g,this.width=E,this.height=b}getCenterX(){return this.x+this.width/2}getCenterY(){return this.y+this.height/2}add(d){const g=Math.min(this.x,d.x),E=Math.min(this.y,d.y),b=Math.max(this.x+this.width,d.x+d.width),w=Math.max(this.y+this.height,d.y+d.height);this.x=g,this.y=E,this.width=b-g,this.height=w-E}intersect(d){const g=this.x+this.width,E=d.x+d.width,b=this.y+this.height,w=d.y+d.height;this.x=Math.max(this.x,d.x),this.y=Math.max(this.y,d.y),this.width=Math.min(g,E)-this.x,this.height=Math.min(b,w)-this.y}grow(d){this.x-=d,this.y-=d,this.width+=2*d,this.height+=2*d}getPoint(){return new Point(this.x,this.y)}rotate90(){const d=(this.width-this.height)/2;this.x+=d,this.y-=d;const g=this.width;this.width=this.height,this.height=g}equals(d){return d?d.x===this.x&&d.y===this.y&&d.width===this.width&&d.height===this.height:!1}clone(){return new Rectangle(this.x,this.y,this.width,this.height)}}Rectangle.fromRectangle=x=>new Rectangle(x.x,x.y,x.width,x.height);const ltrim=(x,d="\\s")=>x!=null?x.replace(new RegExp(`^[${d}]+`,"g"),""):null,rtrim=(x,d="\\s")=>x!=null?x.replace(new RegExp(`[${d}]+$`,"g"),""):null,trim=(x,d)=>ltrim(rtrim(x,d),d),getFunctionName=x=>{let d=null;if(x!=null){if(x.name!=null)d=x.name;else if(d=trim(x.toString()),d!==null&&/^function\s/.test(d)&&(d=ltrim(d.substring(9)),d!==null)){const g=d.indexOf("(");g>0&&(d=d.substring(0,g))}}return d},replaceTrailingNewlines=(x,d)=>{let g="";for(;x.length>0&&x.charAt(x.length-1)==`
`;)x=x.substring(0,x.length-1),g+=d;return x+g},htmlEntities=(x,d=!0)=>(x=String(x||""),x=x.replace(/&/g,"&amp;"),x=x.replace(/"/g,"&quot;"),x=x.replace(/'/g,"&#39;"),x=x.replace(/</g,"&lt;"),x=x.replace(/>/g,"&gt;"),d&&(x=x.replace(/\n/g,"&#xa;")),x),getStringValue=(x,d,g)=>{let E=x!=null?x[d]:null;return E==null&&(E=g),E==null?null:String(E)},getNumber=(x,d,g)=>{let E=x!=null?x[d]:null;return E==null&&(E=g),Number(E)};class ObjectIdentity{static get(d){if(d){if(d[IDENTITY_FIELD_NAME]===null||d[IDENTITY_FIELD_NAME]===void 0)if(typeof d=="object"){const g=getFunctionName(d.constructor);d[IDENTITY_FIELD_NAME]=`${g}#${ObjectIdentity.counter++}`}else typeof d=="function"&&(d[IDENTITY_FIELD_NAME]=`Function#${ObjectIdentity.counter++}`);return d[IDENTITY_FIELD_NAME]}return null}static clear(d){delete d[IDENTITY_FIELD_NAME]}}ObjectIdentity.FIELD_NAME=IDENTITY_FIELD_NAME;ObjectIdentity.counter=0;class Dictionary{constructor(){this.map={},this.clear()}clear(){this.map={}}get(d){const g=ObjectIdentity.get(d);return this.map[g]??null}put(d,g){const E=ObjectIdentity.get(d),b=this.map[E];return this.map[E]=g,b??null}remove(d){const g=ObjectIdentity.get(d),E=this.map[g];return delete this.map[g],E??null}getKeys(){const d=[];for(const g in this.map)d.push(g);return d}getValues(){const d=[];for(const g in this.map)d.push(this.map[g]);return d}visit(d){for(const g in this.map)d(g,this.map[g])}}class NoOpLogger{debug(d){}enter(d){}error(d,...g){}info(d){}leave(d,g){}show(){}trace(d){}warn(d){}}const GlobalConfig={logger:new NoOpLogger},utils={errorResource:"error",errorImage:`${Client.imageBasePath}/error.gif`},isNullish=x=>x==null,isNotNullish=x=>!isNullish(x),mixInto=x=>d=>{const g=Reflect.ownKeys(d);try{for(const E of g)Object.defineProperty(x.prototype,E,{value:d[E],writable:!0})}catch(E){GlobalConfig.logger.error("Error while mixing",E)}},getValue$1=(x,d,g)=>{let E=x!=null?x[d]:null;return E==null&&(E=g),E},toRadians=x=>Math.PI*x/180,arcToCurves=(x,d,g,E,b,w,C,S,P)=>{if(S-=x,P-=d,g===0||E===0)return[];const I=C,M=b;g=Math.abs(g),E=Math.abs(E);const D=-S/2,k=-P/2,H=Math.cos(M*Math.PI/180),F=Math.sin(M*Math.PI/180),j=H*D+F*k,$=-1*F*D+H*k,z=j*j,U=$*$,W=g*g,q=E*E,Z=z/W+U/q;let X;if(Z>1)g=Math.sqrt(Z)*g,E=Math.sqrt(Z)*E,X=0;else{let Be=1;w===I&&(Be=-1),X=Be*Math.sqrt((W*q-W*U-q*z)/(W*U+q*z))}const K=X*g*$/E,ee=-1*X*E*j/g,te=H*K-F*ee+S/2,ce=F*K+H*ee+P/2;let Q=Math.atan2(($-ee)/E,(j-K)/g)-Math.atan2(0,1),se=Q>=0?Q:2*Math.PI+Q;Q=Math.atan2((-$-ee)/E,(-j-K)/g)-Math.atan2(($-ee)/E,(j-K)/g);let ge=Q>=0?Q:2*Math.PI+Q;!I&&ge>0?ge-=2*Math.PI:I&&ge<0&&(ge+=2*Math.PI);const Ce=ge*2/Math.PI,oe=Math.ceil(Ce<0?-1*Ce:Ce),he=ge/oe,de=8/3*Math.sin(he/4)*Math.sin(he/4)/Math.sin(he/2),re=H*g,ae=H*E,pe=F*g,J=F*E;let ue=Math.cos(se),Te=Math.sin(se),xe=-de*(re*Te+J*ue),we=-de*(pe*Te-ae*ue),Re=0,De=0;const Ae=[];for(let Be=0;Be<oe;++Be){se+=he,ue=Math.cos(se),Te=Math.sin(se),Re=re*ue-J*Te+te,De=pe*ue+ae*Te+ce;const We=-de*(re*Te+J*ue),Fe=-de*(pe*Te-ae*ue),ze=Be*6;Ae[ze]=Number(xe+x),Ae[ze+1]=Number(we+d),Ae[ze+2]=Number(Re-We+x),Ae[ze+3]=Number(De-Fe+d),Ae[ze+4]=Number(Re+x),Ae[ze+5]=Number(De+d),xe=Re+We,we=De+Fe}return Ae},getBoundingBox=(x,d,g=null)=>{let E=null;if(x&&d!==0){const b=toRadians(d),w=Math.cos(b),C=Math.sin(b);g=g??new Point(x.x+x.width/2,x.y+x.height/2);let S=new Point(x.x,x.y),P=new Point(x.x+x.width,x.y),I=new Point(P.x,x.y+x.height),M=new Point(x.x,I.y);S=getRotatedPoint(S,w,C,g),P=getRotatedPoint(P,w,C,g),I=getRotatedPoint(I,w,C,g),M=getRotatedPoint(M,w,C,g),E=new Rectangle(S.x,S.y,0,0),E.add(new Rectangle(P.x,P.y,0,0)),E.add(new Rectangle(I.x,I.y,0,0)),E.add(new Rectangle(M.x,M.y,0,0))}return E},getRotatedPoint=(x,d,g,E=new Point)=>{const b=x.x-E.x,w=x.y-E.y,C=b*d-w*g,S=w*d+b*g;return new Point(C+E.x,S+E.y)},getPortConstraints=(x,d,g,E)=>{const b=getValue$1(x.style,"portConstraint",getValue$1(d.style,g?"sourcePortConstraint":"targetPortConstraint",null));if(isNullish(b))return E;const w=b.toString();let C=DIRECTION_MASK.NONE;const S=x.style.portConstraintRotation??!1;let P=0;S&&(P=x.style.rotation??0);let I=0;if(P>45?(I=1,P>=135&&(I=2)):P<-45&&(I=3,P<=-135&&(I=2)),w.indexOf(DIRECTION.NORTH)>=0)switch(I){case 0:C|=DIRECTION_MASK.NORTH;break;case 1:C|=DIRECTION_MASK.EAST;break;case 2:C|=DIRECTION_MASK.SOUTH;break;case 3:C|=DIRECTION_MASK.WEST;break}if(w.indexOf(DIRECTION.WEST)>=0)switch(I){case 0:C|=DIRECTION_MASK.WEST;break;case 1:C|=DIRECTION_MASK.NORTH;break;case 2:C|=DIRECTION_MASK.EAST;break;case 3:C|=DIRECTION_MASK.SOUTH;break}if(w.indexOf(DIRECTION.SOUTH)>=0)switch(I){case 0:C|=DIRECTION_MASK.SOUTH;break;case 1:C|=DIRECTION_MASK.WEST;break;case 2:C|=DIRECTION_MASK.NORTH;break;case 3:C|=DIRECTION_MASK.EAST;break}if(w.indexOf(DIRECTION.EAST)>=0)switch(I){case 0:C|=DIRECTION_MASK.EAST;break;case 1:C|=DIRECTION_MASK.SOUTH;break;case 2:C|=DIRECTION_MASK.WEST;break;case 3:C|=DIRECTION_MASK.NORTH;break}return C},reversePortConstraints=x=>{let d=0;return d=(x&DIRECTION_MASK.WEST)<<3,d|=(x&DIRECTION_MASK.NORTH)<<1,d|=(x&DIRECTION_MASK.SOUTH)>>1,d|=(x&DIRECTION_MASK.EAST)>>3,d},findNearestSegment=(x,d,g)=>{let E=-1;if(x.absolutePoints.length>0){let b=x.absolutePoints[0],w=null;for(let C=1;C<x.absolutePoints.length;C+=1){const S=x.absolutePoints[C];if(!b||!S)continue;const P=ptSegDistSq(b.x,b.y,S.x,S.y,d,g);(w==null||P<w)&&(w=P,E=C-1),b=S}}return E},getDirectedBounds=(x,d,g,E,b)=>{const w=getValue$1(g,"direction",DIRECTION.EAST);if(E=E??getValue$1(g,"flipH",!1),b=b??getValue$1(g,"flipV",!1),d.x=Math.round(Math.max(0,Math.min(x.width,d.x))),d.y=Math.round(Math.max(0,Math.min(x.height,d.y))),d.width=Math.round(Math.max(0,Math.min(x.width,d.width))),d.height=Math.round(Math.max(0,Math.min(x.height,d.height))),b&&(w===DIRECTION.SOUTH||w===DIRECTION.NORTH)||E&&(w===DIRECTION.EAST||w===DIRECTION.WEST)){const S=d.x;d.x=d.width,d.width=S}if(E&&(w===DIRECTION.SOUTH||w===DIRECTION.NORTH)||b&&(w===DIRECTION.EAST||w===DIRECTION.WEST)){const S=d.y;d.y=d.height,d.height=S}const C=Rectangle.fromRectangle(d);return w===DIRECTION.SOUTH?(C.y=d.x,C.x=d.height,C.width=d.y,C.height=d.width):w===DIRECTION.WEST?(C.y=d.height,C.x=d.width,C.width=d.x,C.height=d.y):w===DIRECTION.NORTH&&(C.y=d.width,C.x=d.y,C.width=d.height,C.height=d.x),new Rectangle(x.x+C.x,x.y+C.y,x.width-C.width-C.x,x.height-C.height-C.y)},contains=(x,d,g)=>x.x<=d&&x.x+x.width>=d&&x.y<=g&&x.y+x.height>=g,intersects=(x,d)=>{let g=x.width,E=x.height,b=d.width,w=d.height;if(b<=0||w<=0||g<=0||E<=0)return!1;const C=x.x,S=x.y,P=d.x,I=d.y;return b+=P,w+=I,g+=C,E+=S,(b<P||b>C)&&(w<I||w>S)&&(g<C||g>P)&&(E<S||E>I)},intersectsHotspot=(x,d,g,E,b,w)=>{if(E=E??1,b=b??0,w=w??0,E>0){let C=x.getCenterX(),S=x.getCenterY(),P=x.width,I=x.height;const M=getValue$1(x.style,"startSize")*x.view.scale;M>0&&(getValue$1(x.style,"horizontal",!0)?(S=x.y+M/2,I=M):(C=x.x+M/2,P=M)),P=Math.max(b,P*E),I=Math.max(b,I*E),w>0&&(P=Math.min(P,w),I=Math.min(I,w));const D=new Rectangle(C-P/2,S-I/2,P,I),k=toRadians(getValue$1(x.style,"rotation")||0);if(k!=0){const H=Math.cos(-k),F=Math.sin(-k),j=new Point(x.getCenterX(),x.getCenterY()),$=getRotatedPoint(new Point(d,g),H,F,j);d=$.x,g=$.y}return contains(D,d,g)}return!0},isNumeric=x=>!Number.isNaN(parseFloat(x))&&isFinite(+x)&&(typeof x!="string"||x.toLowerCase().indexOf("0x")<0),mod=(x,d)=>(x%d+d)%d,intersection=(x,d,g,E,b,w,C,S)=>{const P=(S-w)*(g-x)-(C-b)*(E-d),I=(C-b)*(d-w)-(S-w)*(x-b),M=(g-x)*(d-w)-(E-d)*(x-b),D=I/P,k=M/P;if(D>=0&&D<=1&&k>=0&&k<=1){const H=x+D*(g-x),F=d+D*(E-d);return new Point(H,F)}return null},ptSegDistSq=(x,d,g,E,b,w)=>{g-=x,E-=d,b-=x,w-=d;let C=b*g+w*E,S;C<=0?S=0:(b=g-b,w=E-w,C=b*g+w*E,C<=0?S=0:S=C*C/(g*g+E*E));let P=b*b+w*w-S;return P<0&&(P=0),P},relativeCcw=(x,d,g,E,b,w)=>{g-=x,E-=d,b-=x,w-=d;let C=b*E-w*g;return C==0&&(C=b*g+w*E,C>0&&(b-=g,w-=E,C=b*g+w*E,C<0&&(C=0))),C<0?-1:C>0?1:0};class CellPath{constructor(){throw new Error("Static class can't be instantiated!")}static create(d){let g="",E=d.getParent();for(;E;)g=E.getIndex(d)+CellPath.PATH_SEPARATOR+g,d=E,E=d.getParent();const b=g.length;return b>1&&(g=g.substring(0,b-1)),g}static getParentPath(d){const g=d.lastIndexOf(CellPath.PATH_SEPARATOR);return g>=0?d.substring(0,g):d.length>0?"":null}static resolve(d,g){let E=d;const b=g.split(CellPath.PATH_SEPARATOR);for(let w=0;w<b.length;w+=1)E=E.getChildAt(parseInt(b[w]));return E}static compare(d,g){const E=Math.min(d.length,g.length);let b=0;for(let w=0;w<E;w+=1)if(d[w]!==g[w]){if(d[w].length===0||g[w].length===0)b=d[w]===g[w]?0:d[w]>g[w]?1:-1;else{const C=parseInt(d[w]),S=parseInt(g[w]);b=C===S?0:C>S?1:-1}break}if(b===0){const w=d.length,C=g.length;w!==C&&(b=w>C?1:-1)}return b}}CellPath.PATH_SEPARATOR=".";const getCurrentStyle=x=>!x||x.toString()==="[object ShadowRoot]"?null:window.getComputedStyle(x,""),parseCssNumber=x=>{x==="thin"?x="2":x==="medium"?x="4":x==="thick"&&(x="6");let d=parseFloat(x);return Number.isNaN(d)&&(d=0),d},setPrefixedStyle=(x,d,g)=>{let E=null;Client.IS_SF||Client.IS_GC?E="Webkit":Client.IS_MT&&(E="Moz"),x.setProperty(d,g),E!==null&&d.length>0&&(d=E+d.substring(0,1).toUpperCase()+d.substring(1),x.setProperty(d,g))},hasScrollbars=x=>{const d=getCurrentStyle(x);return!!d&&(d.overflow==="scroll"||d.overflow==="auto")},getDocumentSize=()=>{const x=document.body,d=document.documentElement;try{return new Rectangle(0,0,x.clientWidth??d.clientWidth,Math.max(x.clientHeight??0,d.clientHeight))}catch{return new Rectangle}},fit=x=>{const d=getDocumentSize(),g=x.offsetLeft,E=x.offsetWidth,b=getDocumentScrollOrigin(x.ownerDocument),w=b.x,C=b.y,S=w+d.width;g+E>S&&(x.style.left=`${Math.max(w,S-E)}px`);const P=x.offsetTop,I=x.offsetHeight,M=C+d.height;P+I>M&&(x.style.top=`${Math.max(C,M-I)}px`)},getOffset=(x,d=!1)=>{let g=0,E=0,b=!1,w=x;const C=document.body,S=document.documentElement;for(;w!=null&&w!=C&&w!=S&&!b;){const I=getCurrentStyle(w);I!=null&&(b=b||I.position=="fixed"),w=w.parentNode}if(!d&&!b){const I=getDocumentScrollOrigin(x.ownerDocument);g+=I.x,E+=I.y}const P=x.getBoundingClientRect();return P!=null&&(g+=P.left,E+=P.top),new Point(g,E)},getDocumentScrollOrigin=x=>{const d=x.defaultView||x.parentWindow,g=d!=null&&window.pageXOffset!==void 0?window.pageXOffset:(document.documentElement||document.body.parentNode||document.body).scrollLeft,E=d!=null&&window.pageYOffset!==void 0?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop;return new Point(g,E)},getScrollOrigin=(x=null,d=!1,g=!0)=>{const E=x!=null?x.ownerDocument:document,b=E.body,w=E.documentElement,C=new Point;let S=!1;for(;x!=null&&x!=b&&x!=w;){!Number.isNaN(x.scrollLeft)&&!Number.isNaN(x.scrollTop)&&(C.x+=x.scrollLeft,C.y+=x.scrollTop);const P=getCurrentStyle(x);P!=null&&(S=S||P.position=="fixed"),x=d?x.parentNode:null}if(!S&&g){const P=getDocumentScrollOrigin(E);C.x+=P.x,C.y+=P.y}return C},convertPoint=(x,d,g)=>{const E=getScrollOrigin(x,!1),b=getOffset(x);return b.x-=E.x,b.y-=E.y,new Point(d-b.x,g-b.y)},setCellStyles=(x,d,g,E)=>{d.length>0&&x.batchUpdate(()=>{for(let b=0;b<d.length;b+=1){const w=d[b];if(w){const C=w.getClonedStyle();C[g]=E,x.setStyle(w,C)}}})},setCellStyleFlags=(x,d,g,E,b)=>{d.length>0&&x.batchUpdate(()=>{for(let w=0;w<d.length;w+=1){const C=d[w];if(C){const S=setStyleFlag(C.getClonedStyle(),g,E,b);x.setStyle(C,S)}}})},setStyleFlag=(x,d,g,E)=>{const b=x[d];return b===void 0?x[d]=E===void 0||E?g:0:E===void 0?x[d]=b^g:E?x[d]=b|g:x[d]=b&~g,x},setOpacity=(x,d)=>{x.style.opacity=String(d/100)},matchBinaryMask=(x,d)=>(x&d)===d,getSizeForString=(x,d=DEFAULT_FONTSIZE,g=DEFAULT_FONTFAMILY,E=null,b=null)=>{const w=document.createElement("div");if(w.style.fontFamily=g,w.style.fontSize=`${Math.round(d)}px`,w.style.lineHeight=`${Math.round(d*LINE_HEIGHT)}px`,b!==null){matchBinaryMask(b,FONT.BOLD)&&(w.style.fontWeight="bold"),matchBinaryMask(b,FONT.ITALIC)&&(w.style.fontWeight="italic");const S=[];matchBinaryMask(b,FONT.UNDERLINE)&&S.push("underline"),matchBinaryMask(b,FONT.STRIKETHROUGH)&&S.push("line-through"),S.length>0&&(w.style.textDecoration=S.join(" "))}w.style.position="absolute",w.style.visibility="hidden",w.style.display="inline-block",E!==null?(w.style.width=`${E}px`,w.style.whiteSpace="normal"):w.style.whiteSpace="nowrap",w.innerHTML=x,document.body.appendChild(w);const C=new Rectangle(0,0,w.offsetWidth,w.offsetHeight);return document.body.removeChild(w),C},sortCells=(x,d=!0)=>{const g=new Dictionary;return x.sort((E,b)=>{let w=g.get(E);w==null&&(w=CellPath.create(E).split(CellPath.PATH_SEPARATOR),g.put(E,w));let C=g.get(b);C==null&&(C=CellPath.create(b).split(CellPath.PATH_SEPARATOR),g.put(b,C));const S=CellPath.compare(w,C);return S==0?0:S>0==d?1:-1}),x},getAlignmentAsPoint=(x,d)=>{let g=-.5,E=-.5;return x===ALIGN.LEFT?g=0:x===ALIGN.RIGHT&&(g=-1),d===ALIGN.TOP?E=0:d===ALIGN.BOTTOM&&(E=-1),new Point(g,E)};class UrlConverter{constructor(){this.enabled=!0,this.baseUrl=null,this.baseDomain=null}updateBaseUrl(){this.baseDomain=`${location.protocol}//${location.host}`,this.baseUrl=this.baseDomain+location.pathname;const d=this.baseUrl.lastIndexOf("/");d>0&&(this.baseUrl=this.baseUrl.substring(0,d+1))}isEnabled(){return this.enabled}setEnabled(d){this.enabled=d}getBaseUrl(){return this.baseUrl}setBaseUrl(d){this.baseUrl=d}getBaseDomain(){return this.baseDomain}setBaseDomain(d){this.baseDomain=d}isRelativeUrl(d){return d&&d.substring(0,2)!=="//"&&d.substring(0,7)!=="http://"&&d.substring(0,8)!=="https://"&&d.substring(0,10)!=="data:image"&&d.substring(0,7)!=="file://"}convert(d){return this.isEnabled()&&this.isRelativeUrl(d)&&(this.getBaseUrl()||this.updateBaseUrl(),d.charAt(0)==="/"?d=this.getBaseDomain()+d:d=this.getBaseUrl()+d),d}}const clone=function x(d,g=null,E=!1){E=E??!1;let b=null;if(d!=null&&typeof d.constructor=="function"){b=new d.constructor;for(const w in d)w!=ObjectIdentity.FIELD_NAME&&(g==null||g.indexOf(w)<0)&&(!E&&typeof d[w]=="object"?b[w]=x(d[w]):b[w]=d[w])}return b};class AbstractCanvas2D{constructor(){this.state=this.createState(),this.states=[],this.path=[],this.rotateHtml=!0,this.lastX=0,this.lastY=0,this.moveOp="M",this.lineOp="L",this.quadOp="Q",this.curveOp="C",this.closeOp="Z",this.pointerEvents=!1,this.pointerEventsValue=null,this.addOp=(d,...g)=>{if(this.path.push(d),g.length>1){const E=this.state;for(let b=1;b<g.length;b+=2)this.lastX=g[b-1],this.lastY=g[b],this.path.push(this.format((this.lastX+E.dx)*E.scale)),this.path.push(this.format((this.lastY+E.dy)*E.scale))}},this.converter=this.createUrlConverter(),this.reset()}createUrlConverter(){return new UrlConverter}reset(){this.state=this.createState(),this.states=[]}createState(){return{dx:0,dy:0,scale:1,alpha:1,fillAlpha:1,strokeAlpha:1,fillColor:NONE,gradientFillAlpha:1,gradientColor:NONE,gradientAlpha:1,gradientDirection:DIRECTION.EAST,strokeColor:NONE,strokeWidth:1,dashed:!1,dashPattern:"3 3",fixDash:!1,lineCap:"flat",lineJoin:"miter",miterLimit:10,fontColor:"#000000",fontBackgroundColor:NONE,fontBorderColor:NONE,fontSize:DEFAULT_FONTSIZE,fontFamily:DEFAULT_FONTFAMILY,fontStyle:0,shadow:!1,shadowColor:SHADOWCOLOR,shadowAlpha:SHADOW_OPACITY,shadowDx:SHADOW_OFFSET_X,shadowDy:SHADOW_OFFSET_Y,rotation:0,rotationCx:0,rotationCy:0}}format(d){return Math.round(d)}rotatePoint(d,g,E,b,w){const C=E*(Math.PI/180);return getRotatedPoint(new Point(d,g),Math.cos(C),Math.sin(C),new Point(b,w))}save(){this.states.push(this.state),this.state=clone(this.state)}restore(){const d=this.states.pop();d&&(this.state=d)}setLink(d){}scale(d){this.state.scale*=d,this.state.strokeWidth!==null&&(this.state.strokeWidth*=d)}translate(d,g){this.state.dx+=d,this.state.dy+=g}rotate(d,g,E,b,w){}setAlpha(d){this.state.alpha=d}setFillAlpha(d){this.state.fillAlpha=d}setStrokeAlpha(d){this.state.strokeAlpha=d}setFillColor(d){this.state.fillColor=d??NONE,this.state.gradientColor=NONE}setGradient(d,g,E,b,w,C,S,P=1,I=1){const M=this.state;M.fillColor=d,M.gradientFillAlpha=P,M.gradientColor=g,M.gradientAlpha=I,M.gradientDirection=S}setStrokeColor(d){this.state.strokeColor=d??NONE}setStrokeWidth(d){this.state.strokeWidth=d}setDashed(d,g=!1){this.state.dashed=d,this.state.fixDash=g}setDashPattern(d){this.state.dashPattern=d}setLineCap(d){this.state.lineCap=d}setLineJoin(d){this.state.lineJoin=d}setMiterLimit(d){this.state.miterLimit=d}setFontColor(d){this.state.fontColor=d??NONE}setFontBackgroundColor(d){this.state.fontBackgroundColor=d??NONE}setFontBorderColor(d){this.state.fontBorderColor=d??NONE}setFontSize(d){this.state.fontSize=d}setFontFamily(d){this.state.fontFamily=d}setFontStyle(d){this.state.fontStyle=d}setShadow(d){this.state.shadow=d}setShadowColor(d){this.state.shadowColor=d??NONE}setShadowAlpha(d){this.state.shadowAlpha=d}setShadowOffset(d,g){this.state.shadowDx=d,this.state.shadowDy=g}begin(){this.lastX=0,this.lastY=0,this.path=[]}moveTo(d,g){this.addOp(this.moveOp,d,g)}lineTo(d,g){this.addOp(this.lineOp,d,g)}quadTo(d,g,E,b){this.addOp(this.quadOp,d,g,E,b)}curveTo(d,g,E,b,w,C){this.addOp(this.curveOp,d,g,E,b,w,C)}arcTo(d,g,E,b,w,C,S){const P=arcToCurves(this.lastX,this.lastY,d,g,E,b,w,C,S);if(P!=null)for(let I=0;I<P.length;I+=6)this.curveTo(P[I],P[I+1],P[I+2],P[I+3],P[I+4],P[I+5])}close(d,g,E,b,w,C){this.addOp(this.closeOp)}}const equalPoints=(x,d)=>{if(!x&&d||x&&!d||x&&d&&x.length!=d.length)return!1;if(x&&d)for(let g=0;g<x.length;g+=1){const E=x[g];if(!E||E&&!E.equals(d[g]))return!1}return!0},equalEntries=(x,d)=>{let g=0;if(!x&&d||x&&!d||x&&d&&x.length!=d.length)return!1;if(x&&d){for(const E in d)g++;for(const E in x)if(g--,(!Number.isNaN(x[E])||!Number.isNaN(d[E]))&&x[E]!==d[E])return!1}return g===0},removeDuplicates=x=>{const d=new Dictionary,g=[];for(let E=0;E<x.length;E+=1)d.get(x[E])||(g.push(x[E]),d.put(x[E],!0));return g};class Geometry extends Rectangle{constructor(d=0,g=0,E=0,b=0){super(d,g,E,b),this.TRANSLATE_CONTROL_POINTS=!0,this.alternateBounds=null,this.sourcePoint=null,this.targetPoint=null,this.points=null,this.offset=null,this.relative=!1}setRelative(d){this.relative=d}swap(){if(this.alternateBounds){const d=new Rectangle(this.x,this.y,this.width,this.height);this.x=this.alternateBounds.x,this.y=this.alternateBounds.y,this.width=this.alternateBounds.width,this.height=this.alternateBounds.height,this.alternateBounds=d}}getTerminalPoint(d){return d?this.sourcePoint:this.targetPoint}setTerminalPoint(d,g){return g?this.sourcePoint=d:this.targetPoint=d,d}rotate(d,g){const E=toRadians(d),b=Math.cos(E),w=Math.sin(E);if(!this.relative){const C=new Point(this.getCenterX(),this.getCenterY()),S=getRotatedPoint(C,b,w,g);this.x=Math.round(S.x-this.width/2),this.y=Math.round(S.y-this.height/2)}if(this.sourcePoint){const C=getRotatedPoint(this.sourcePoint,b,w,g);this.sourcePoint.x=Math.round(C.x),this.sourcePoint.y=Math.round(C.y)}if(this.targetPoint){const C=getRotatedPoint(this.targetPoint,b,w,g);this.targetPoint.x=Math.round(C.x),this.targetPoint.y=Math.round(C.y)}if(this.points){for(let C=0;C<this.points.length;C+=1)if(this.points[C]){const S=getRotatedPoint(this.points[C],b,w,g);this.points[C].x=Math.round(S.x),this.points[C].y=Math.round(S.y)}}}translate(d,g){if(this.relative||(this.x+=d,this.y+=g),this.sourcePoint&&(this.sourcePoint.x=this.sourcePoint.x+d,this.sourcePoint.y=this.sourcePoint.y+g),this.targetPoint&&(this.targetPoint.x=this.targetPoint.x+d,this.targetPoint.y=this.targetPoint.y+g),this.TRANSLATE_CONTROL_POINTS&&this.points)for(let E=0;E<this.points.length;E+=1)this.points[E]&&(this.points[E].x=this.points[E].x+d,this.points[E].y=this.points[E].y+g)}scale(d,g,E){if(this.sourcePoint&&(this.sourcePoint.x=this.sourcePoint.x*d,this.sourcePoint.y=this.sourcePoint.y*g),this.targetPoint&&(this.targetPoint.x=this.targetPoint.x*d,this.targetPoint.y=this.targetPoint.y*g),this.points)for(let b=0;b<this.points.length;b+=1)this.points[b]&&(this.points[b].x=this.points[b].x*d,this.points[b].y=this.points[b].y*g);this.relative||(this.x*=d,this.y*=g,E&&(g=d=Math.min(d,g)),this.width*=d,this.height*=g)}equals(d){var g,E,b,w;return d?super.equals(d)&&this.relative===d.relative&&(this.sourcePoint===null&&d.sourcePoint===null||!!((g=this.sourcePoint)!=null&&g.equals(d.sourcePoint)))&&(this.targetPoint===null&&d.targetPoint===null||!!((E=this.targetPoint)!=null&&E.equals(d.targetPoint)))&&equalPoints(this.points,d.points)&&(this.alternateBounds===null&&d.alternateBounds===null||!!((b=this.alternateBounds)!=null&&b.equals(d.alternateBounds)))&&(this.offset===null&&d.offset===null||!!((w=this.offset)!=null&&w.equals(d.offset))):!1}clone(){return clone(this)}}class MaxXmlRequest{constructor(d,g=null,E="POST",b=!0,w=null,C=null){this.binary=!1,this.withCredentials=!1,this.request=null,this.decodeSimulateValues=!1,this.url=d,this.params=g,this.method=E||"POST",this.async=b,this.username=w,this.password=C}isBinary(){return this.binary}setBinary(d){this.binary=d}getText(){return this.request.responseText}isReady(){return this.request.readyState===4}getDocumentElement(){const d=this.getXml();return d!=null?d.documentElement:null}getXml(){let d=this.request.responseXML;return(d==null||d.documentElement==null)&&(d=new DOMParser().parseFromString(this.request.responseText,"text/xml")),d}getStatus(){return this.request!=null?this.request.status:null}create(){const d=new XMLHttpRequest;return this.isBinary()&&d.overrideMimeType&&d.overrideMimeType("text/plain; charset=x-user-defined"),d}send(d=null,g=null,E=null,b=null){this.request=this.create(),this.request!=null&&(d!=null&&(this.request.onreadystatechange=()=>{this.isReady()&&(d(this),this.request.onreadystatechange=null)}),this.request.open(this.method,this.url,this.async,this.username,this.password),this.setRequestHeaders(this.request,this.params),window.XMLHttpRequest&&this.withCredentials&&(this.request.withCredentials="true"),window.XMLHttpRequest&&E!=null&&b!=null&&(this.request.timeout=E,this.request.ontimeout=b),this.request.send(this.params))}setRequestHeaders(d,g){g!=null&&d.setRequestHeader("Content-Type","application/x-www-form-urlencoded")}simulate(d,g=null){d=d||document;let E=null;d===document&&(E=window.onbeforeunload,window.onbeforeunload=null);const b=d.createElement("form");b.setAttribute("method",this.method),b.setAttribute("action",this.url),g!=null&&b.setAttribute("target",g),b.style.display="none",b.style.visibility="hidden";const w=this.params,C=w.indexOf("&")>0?w.split("&"):w.split(" ");for(let S=0;S<C.length;S+=1){const P=C[S].indexOf("=");if(P>0){const I=C[S].substring(0,P);let M=C[S].substring(P+1);this.decodeSimulateValues&&(M=decodeURIComponent(M));const D=d.createElement("textarea");D.setAttribute("wrap","off"),D.setAttribute("name",I),write(D,M),b.appendChild(D)}}d.body.appendChild(b),b.submit(),b.parentNode!=null&&b.parentNode.removeChild(b),E!=null&&(window.onbeforeunload=E)}}const load=x=>{const d=new MaxXmlRequest(x,null,"GET",!1);return d.send(),d},get$2=(x,d=null,g=null,E=!1,b=null,w=null,C=null)=>{const S=new MaxXmlRequest(x,null,"GET"),{setRequestHeaders:P}=S;return C&&(S.setRequestHeaders=(I,M)=>{P.apply(void 0,[I,M]);for(const D in C)I.setRequestHeader(D,C[D])}),E!=null&&S.setBinary(E),S.send(d,g,b,w),S};class Cell{constructor(d=null,g=null,E={}){this.invalidating=!1,this.onInit=null,this.overlays=[],this.id=null,this.value=null,this.geometry=null,this.style={},this.vertex=!1,this.edge=!1,this.connectable=!0,this.visible=!0,this.collapsed=!1,this.parent=null,this.source=null,this.target=null,this.children=[],this.edges=[],this.mxTransient=["id","value","parent","source","target","children","edges"],this.value=d,this.setGeometry(g),this.setStyle(E),this.onInit&&this.onInit()}getChildren(){return this.children||[]}getId(){return this.id}setId(d){this.id=d}getValue(){return this.value}setValue(d){this.value=d}valueChanged(d){const g=this.getValue();return this.setValue(d),g}getGeometry(){return this.geometry}setGeometry(d){this.geometry=d}getStyle(){return this.style}getClonedStyle(){return clone(this.getStyle())}setStyle(d){this.style=d}isVertex(){return this.vertex}setVertex(d){this.vertex=d}isEdge(){return this.edge}setEdge(d){this.edge=d}isConnectable(){return this.connectable}setConnectable(d){this.connectable=d}isVisible(){return this.visible}setVisible(d){this.visible=d}isCollapsed(){return this.collapsed}setCollapsed(d){this.collapsed=d}getParent(){return this.parent}setParent(d){this.parent=d}getTerminal(d=!1){return d?this.source:this.target}setTerminal(d,g){return g?this.source=d:this.target=d,d}getChildCount(){return this.children.length}getIndex(d){return d===null?-1:this.children.indexOf(d)}getChildAt(d){return this.children[d]}insert(d,g){return g===void 0&&(g=this.getChildCount(),d.getParent()===this&&g--),d.removeFromParent(),d.setParent(this),this.children.splice(g,0,d),d}remove(d){let g=null;return d>=0&&(g=this.getChildAt(d),g&&(this.children.splice(d,1),g.setParent(null))),g}removeFromParent(){if(this.parent){const d=this.parent.getIndex(this);this.parent.remove(d)}}getEdgeCount(){return this.edges.length}getEdgeIndex(d){return this.edges.indexOf(d)}getEdgeAt(d){return this.edges[d]}insertEdge(d,g=!1){return d.removeFromTerminal(g),d.setTerminal(this,g),(this.edges.length===0||d.getTerminal(!g)!==this||this.edges.indexOf(d)<0)&&this.edges.push(d),d}removeEdge(d,g=!1){if(d!=null){if(d.getTerminal(!g)!==this&&this.edges!=null){const E=this.getEdgeIndex(d);E>=0&&this.edges.splice(E,1)}d.setTerminal(null,g)}return d}removeFromTerminal(d){const g=this.getTerminal(d);g&&g.removeEdge(this,d)}hasAttribute(d){var E;const g=this.getValue();return isNotNullish(g)&&(g.nodeType===NODETYPE.ELEMENT&&g.hasAttribute?g.hasAttribute(d):isNotNullish((E=g.getAttribute)==null?void 0:E.call(g,d)))}getAttribute(d,g){var w;const E=this.getValue();return(isNotNullish(E)&&E.nodeType===NODETYPE.ELEMENT?(w=E.getAttribute)==null?void 0:w.call(E,d):null)??g}setAttribute(d,g){var b;const E=this.getValue();isNotNullish(E)&&E.nodeType===NODETYPE.ELEMENT&&((b=E.setAttribute)==null||b.call(E,d,g))}clone(){const d=clone(this,this.mxTransient);return d.setValue(this.cloneValue()),d}cloneValue(){let d=this.getValue();return isNotNullish(d)&&(typeof d.clone=="function"?d=d.clone():isNotNullish(d.nodeType)&&d.cloneNode&&(d=d.cloneNode(!0))),d}getNearestCommonAncestor(d){let g=CellPath.create(d);if(g.length>0){let E=this,b=CellPath.create(E);if(g.length<b.length){E=d;const w=b;b=g,g=w}for(;E&&b;){const w=E.getParent();if(g.indexOf(b+CellPath.PATH_SEPARATOR)===0&&w)return E;b=CellPath.getParentPath(b),E=w}}return null}isAncestor(d){for(;d&&d!==this;)d=d.getParent();return d===this}getChildVertices(){return this.getChildCells(!0,!1)}getChildEdges(){return this.getChildCells(!1,!0)}getChildCells(d=!1,g=!1){const E=this.getChildCount(),b=[];for(let w=0;w<E;w+=1){const C=this.getChildAt(w);(!g&&!d||g&&C.isEdge()||d&&C.isVertex())&&b.push(C)}return b}getDirectedEdgeCount(d,g=null){let E=0;const b=this.getEdgeCount();for(let w=0;w<b;w+=1){const C=this.getEdgeAt(w);C!==g&&C&&C.getTerminal(d)===this&&(E+=1)}return E}getConnections(){return this.getEdges(!0,!0,!1)}getIncomingEdges(){return this.getEdges(!0,!1,!1)}getOutgoingEdges(){return this.getEdges(!1,!0,!1)}getEdges(d=!0,g=!0,E=!0){const b=this.getEdgeCount(),w=[];for(let C=0;C<b;C+=1){const S=this.getEdgeAt(C),P=S.getTerminal(!0),I=S.getTerminal(!1);(E&&P===I||P!==I&&(d&&I===this||g&&P===this))&&w.push(S)}return w}getOrigin(){let d=new Point;const g=this.getParent();if(g&&(d=g.getOrigin(),!this.isEdge())){const E=this.getGeometry();E&&(d.x+=E.x,d.y+=E.y)}return d}getDescendants(){return this.filterDescendants(null)}filterDescendants(d){let g=[];(d===null||d(this))&&g.push(this);const E=this.getChildCount();for(let b=0;b<E;b+=1){const w=this.getChildAt(b);g=g.concat(w.filterDescendants(d))}return g}getRoot(){let d=this,g=d;for(;d;)g=d,d=d.getParent();return g}}const getXml=(x,d="&#xa;")=>{let E=new XMLSerializer().serializeToString(x);return E=E.replace(/\n/g,d),E},useAbsoluteIds=typeof DOMParser=="function"&&!Client.IS_CHROMEAPP&&!Client.IS_EDGE&&document.getElementsByTagName("base").length>0;class SvgCanvas2D extends AbstractCanvas2D{constructor(d,g){super(),this.defs=null,this.styleEnabled=!0,this.node=null,this.matchHtmlAlignment=!0,this.textEnabled=!0,this.foEnabled=!0,this.foAltText="[Object]",this.foOffset=0,this.textOffset=0,this.imageOffset=0,this.strokeTolerance=0,this.minStrokeWidth=1,this.refCount=0,this.lineHeightCorrection=1,this.pointerEventsValue="all",this.fontMetricsPadding=10,this.cacheOffsetSize=!0,this.originalRoot=null,this.root=d,this.gradients={},this.defs=null,this.styleEnabled=g??!1;let E=null;if(d.ownerDocument!==document){let b=d;for(;b&&b.nodeName!=="svg";)b=b.parentElement;E=b}E&&(E.getElementsByTagName("defs").length>0&&(this.defs=E.getElementsByTagName("defs")[0]),this.defs||(this.defs=this.createElement("defs"),E.firstChild!=null?E.insertBefore(this.defs,E.firstChild):E.appendChild(this.defs)),this.styleEnabled&&this.defs.appendChild(this.createStyle()))}format(d){return parseFloat(d.toFixed(2))}getBaseUrl(){let{href:d}=window.location;const g=d.lastIndexOf("#");return g>0&&(d=d.substring(0,g)),d}reset(){super.reset(),this.gradients={}}end(){}createStyle(){const d=this.createElement("style");return d.setAttribute("type","text/css"),write(d,`svg{font-family:${DEFAULT_FONTFAMILY};font-size:${DEFAULT_FONTSIZE};fill:none;stroke-miterlimit:10}`),d}createElement(d,g){var E;return(E=this.root)==null?void 0:E.ownerDocument.createElementNS(g||NS_SVG,d)}getAlternateText(d,g,E,b,w,C,S,P,I,M,D,k,H){return isNotNullish(C)?this.foAltText:null}createAlternateContent(d,g,E,b,w,C,S,P,I,M,D,k,H){const F=this.getAlternateText(d,g,E,b,w,C,S,P,I,M,D,k,H),j=this.state;if(isNotNullish(F)&&j.fontSize>0){const $=P===ALIGN.TOP?1:P===ALIGN.BOTTOM?0:.3,z=S===ALIGN.RIGHT?"end":S===ALIGN.LEFT?"start":"middle",U=this.createElement("text");U.setAttribute("x",String(Math.round(g+j.dx))),U.setAttribute("y",String(Math.round(E+j.dy+$*j.fontSize))),U.setAttribute("fill",j.fontColor||"black"),U.setAttribute("font-family",j.fontFamily),U.setAttribute("font-size",`${Math.round(j.fontSize)}px`),z!=="start"&&U.setAttribute("text-anchor",z);const W=j.fontStyle;matchBinaryMask(W,FONT.BOLD)&&U.setAttribute("font-weight","bold"),matchBinaryMask(W,FONT.ITALIC)&&U.setAttribute("font-style","italic");const q=[];return matchBinaryMask(W,FONT.UNDERLINE)&&q.push("underline"),matchBinaryMask(W,FONT.STRIKETHROUGH)&&q.push("line-through"),q.length>0&&U.setAttribute("text-decoration",q.join(" ")),write(U,F),U}return null}createGradientId(d,g,E,b,w){d.charAt(0)==="#"&&(d=d.substring(1)),g.charAt(0)==="#"&&(g=g.substring(1)),d=`${d.toLowerCase()}-${E}`,g=`${g.toLowerCase()}-${b}`;let C=null;if(w==null||w===DIRECTION.SOUTH)C="s";else if(w===DIRECTION.EAST)C="e";else{const S=d;d=g,g=S,w===DIRECTION.NORTH?C="s":w===DIRECTION.WEST&&(C="e")}return`mx-gradient-${d}-${g}-${C}`}getSvgGradient(d,g,E,b,w){const C=this.createGradientId(d,g,E,b,w);let S=this.gradients[C];if(!S){const P=this.root.ownerSVGElement;let I=0,M=`${C}-${I}`;if(P)for(S=P.ownerDocument.getElementById(M);S&&S.ownerSVGElement!==P;)M=`${C}-${I++}`,S=P.ownerDocument.getElementById(M);else M=`id${++this.refCount}`;S||(S=this.createSvgGradient(d,g,E,b,w),S.setAttribute("id",M),this.defs?this.defs.appendChild(S):P&&P.appendChild(S)),this.gradients[C]=S}return S.getAttribute("id")}createSvgGradient(d,g,E,b,w){const C=this.createElement("linearGradient");C.setAttribute("x1","0%"),C.setAttribute("y1","0%"),C.setAttribute("x2","0%"),C.setAttribute("y2","0%"),w==null||w===DIRECTION.SOUTH?C.setAttribute("y2","100%"):w===DIRECTION.EAST?C.setAttribute("x2","100%"):w===DIRECTION.NORTH?C.setAttribute("y1","100%"):w===DIRECTION.WEST&&C.setAttribute("x1","100%");let S=E<1?`;stop-opacity:${E}`:"",P=this.createElement("stop");return P.setAttribute("offset","0%"),P.setAttribute("style",`stop-color:${d}${S}`),C.appendChild(P),S=b<1?`;stop-opacity:${b}`:"",P=this.createElement("stop"),P.setAttribute("offset","100%"),P.setAttribute("style",`stop-color:${g}${S}`),C.appendChild(P),C}addNode(d,g){const{node:E}=this,b=this.state;if(E){if(E.nodeName==="path")if(this.path&&this.path.length>0)E.setAttribute("d",this.path.join(" "));else return;d&&b.fillColor!==NONE?this.updateFill():this.styleEnabled||(E.nodeName==="ellipse"&&Client.IS_FF?E.setAttribute("fill","transparent"):E.setAttribute("fill",NONE),d=!1),g&&b.strokeColor!==NONE?this.updateStroke():this.styleEnabled||E.setAttribute("stroke",NONE),b.transform&&b.transform.length>0&&E.setAttribute("transform",b.transform),b.shadow&&this.root.appendChild(this.createShadow(E)),this.strokeTolerance>0&&!d&&this.root.appendChild(this.createTolerance(E)),this.pointerEvents?E.setAttribute("pointer-events",this.pointerEventsValue):!this.pointerEvents&&!this.originalRoot&&E.setAttribute("pointer-events",NONE),(E.nodeName!=="rect"&&E.nodeName!=="path"&&E.nodeName!=="ellipse"||E.getAttribute("fill")!==NONE&&E.getAttribute("fill")!=="transparent"||E.getAttribute("stroke")!==NONE||E.getAttribute("pointer-events")!==NONE)&&this.root.appendChild(E),this.node=null}}updateFill(){var g;const d=this.state;if((d.alpha<1||d.fillAlpha<1)&&this.node.setAttribute("fill-opacity",String(d.alpha*d.fillAlpha)),d.fillColor!==NONE)if(d.gradientColor!==NONE){const E=this.getSvgGradient(d.fillColor,d.gradientColor,d.gradientFillAlpha,d.gradientAlpha,d.gradientDirection);if(((g=this.root)==null?void 0:g.ownerDocument)===document&&useAbsoluteIds){const b=this.getBaseUrl().replace(/([()])/g,"\\$1");this.node.setAttribute("fill",`url(${b}#${E})`)}else this.node.setAttribute("fill",`url(#${E})`)}else this.node.setAttribute("fill",d.fillColor.toLowerCase())}getCurrentStrokeWidth(){return Math.max(this.minStrokeWidth,Math.max(.01,this.format(this.state.strokeWidth*this.state.scale)))}updateStroke(){const d=this.state;d.strokeColor&&d.strokeColor!==NONE&&this.node.setAttribute("stroke",d.strokeColor.toLowerCase()),(d.alpha<1||d.strokeAlpha<1)&&this.node.setAttribute("stroke-opacity",String(d.alpha*d.strokeAlpha));const g=this.getCurrentStrokeWidth();g!==1&&this.node.setAttribute("stroke-width",String(g)),this.node.nodeName==="path"&&this.updateStrokeAttributes(),d.dashed&&this.node.setAttribute("stroke-dasharray",this.createDashPattern((d.fixDash?1:d.strokeWidth)*d.scale))}updateStrokeAttributes(){const d=this.state;if(d.lineJoin&&d.lineJoin!=="miter"&&this.node.setAttribute("stroke-linejoin",d.lineJoin),d.lineCap){let g=d.lineCap;g==="flat"&&(g="butt"),g!=="butt"&&this.node.setAttribute("stroke-linecap",g)}d.miterLimit!=null&&(!this.styleEnabled||d.miterLimit!==10)&&this.node.setAttribute("stroke-miterlimit",String(d.miterLimit))}createDashPattern(d){const g=[];if(typeof this.state.dashPattern=="string"){const E=this.state.dashPattern.split(" ");if(E.length>0)for(let b=0;b<E.length;b+=1)g[b]=Number(E[b])*d}return g.join(" ")}createTolerance(d){const g=d.cloneNode(!0),E=parseFloat(g.getAttribute("stroke-width")||"1")+this.strokeTolerance;return g.setAttribute("pointer-events","stroke"),g.setAttribute("visibility","hidden"),g.removeAttribute("stroke-dasharray"),g.setAttribute("stroke-width",String(E)),g.setAttribute("fill","none"),g.setAttribute("stroke","white"),g}createShadow(d){const g=d.cloneNode(!0),E=this.state;return g.getAttribute("fill")!=="none"&&(!Client.IS_FF||g.getAttribute("fill")!=="transparent")&&g.setAttribute("fill",E.shadowColor?E.shadow:SHADOWCOLOR),g.getAttribute("stroke")!=="none"&&E.shadowColor&&E.shadowColor!==NONE&&g.setAttribute("stroke",E.shadowColor),g.setAttribute("transform",`translate(${this.format(E.shadowDx*E.scale)},${this.format(E.shadowDy*E.scale)})${E.transform||""}`),g.setAttribute("opacity",String(E.shadowAlpha)),g}setLink(d){if(!d)this.root=this.originalRoot;else{this.originalRoot=this.root;const g=this.createElement("a");g.setAttributeNS==null||this.root.ownerDocument!==document?g.setAttribute("xlink:href",d):g.setAttributeNS(NS_XLINK,"xlink:href",d),this.root.appendChild(g),this.root=g}}rotate(d,g,E,b,w){if(d!==0||g||E){const C=this.state;if(b+=C.dx,w+=C.dy,b*=C.scale,w*=C.scale,C.transform=C.transform||"",g&&E)d+=180;else if(g!==E){const S=g?b:0,P=g?-1:1,I=E?w:0,M=E?-1:1;C.transform+=`translate(${this.format(S)},${this.format(I)})scale(${this.format(P)},${this.format(M)})translate(${this.format(-S)},${this.format(-I)})`}(g?!E:E)&&(d*=-1),d!==0&&(C.transform+=`rotate(${this.format(d)},${this.format(b)},${this.format(w)})`),C.rotation+=d,C.rotationCx=b,C.rotationCy=w}}begin(){super.begin(),this.node=this.createElement("path")}rect(d,g,E,b){const w=this.state,C=this.createElement("rect");C.setAttribute("x",String(this.format((d+w.dx)*w.scale))),C.setAttribute("y",String(this.format((g+w.dy)*w.scale))),C.setAttribute("width",String(this.format(E*w.scale))),C.setAttribute("height",String(this.format(b*w.scale))),this.node=C}roundrect(d,g,E,b,w,C){this.rect(d,g,E,b),w>0&&this.node.setAttribute("rx",String(this.format(w*this.state.scale))),C>0&&this.node.setAttribute("ry",String(this.format(C*this.state.scale)))}ellipse(d,g,E,b){const w=this.state,C=this.createElement("ellipse");C.setAttribute("cx",String(this.format((d+E/2+w.dx)*w.scale))),C.setAttribute("cy",String(this.format((g+b/2+w.dy)*w.scale))),C.setAttribute("rx",String(E/2*w.scale)),C.setAttribute("ry",String(b/2*w.scale)),this.node=C}image(d,g,E,b,w,C=!0,S=!1,P=!1){w=this.converter.convert(w);const I=this.state;d+=I.dx,g+=I.dy;const M=this.createElement("image");M.setAttribute("x",String(this.format(d*I.scale)+this.imageOffset)),M.setAttribute("y",String(this.format(g*I.scale)+this.imageOffset)),M.setAttribute("width",String(this.format(E*I.scale))),M.setAttribute("height",String(this.format(b*I.scale))),M.setAttributeNS?M.setAttributeNS(NS_XLINK,"xlink:href",w):M.setAttribute("xlink:href",w),C||M.setAttribute("preserveAspectRatio","none"),(I.alpha<1||I.fillAlpha<1)&&M.setAttribute("opacity",String(I.alpha*I.fillAlpha));let D=this.state.transform||"";if(S||P){let k=1,H=1,F=0,j=0;S&&(k=-1,F=-E-2*d),P&&(H=-1,j=-b-2*g),D+=`scale(${k},${H})translate(${F*I.scale},${j*I.scale})`}D.length>0&&M.setAttribute("transform",D),this.pointerEvents||M.setAttribute("pointer-events","none"),this.root.appendChild(M)}convertHtml(d){const g=new DOMParser().parseFromString(d,"text/html");return g!=null&&(d=new XMLSerializer().serializeToString(g.body),d.substring(0,5)==="<body"&&(d=d.substring(d.indexOf(">",5)+1)),d.substring(d.length-7,d.length)==="</body>"&&(d=d.substring(0,d.length-7))),d}createDiv(d){let g=d;if(isNode(g)||(g=`<div><div>${this.convertHtml(g)}</div></div>`),document.createElementNS){const E=document.createElementNS("http://www.w3.org/1999/xhtml","div");if(isNode(g)){const b=g,w=document.createElement("div"),C=w.cloneNode(!1);this.root.ownerDocument!==document?w.appendChild(b.cloneNode(!0)):w.appendChild(b),C.appendChild(w),E.appendChild(C)}else E.innerHTML=g;return E}return isNode(g)&&(g=`<div><div>${getXml(g)}</div></div>`),g=`<div xmlns="http://www.w3.org/1999/xhtml">${g}</div>`,new DOMParser().parseFromString(g,"text/xml").documentElement}updateText(d,g,E,b,w,C,S,P,I,M,D){D&&D.firstChild&&D.firstChild.firstChild&&this.updateTextNodes(d,g,E,b,w,C,S,P,I,M,D.firstChild)}addForeignObject(d,g,E,b,w,C,S,P,I,M,D,k,H,F,j){var U;const $=this.createElement("g"),z=this.createElement("foreignObject");if(z.setAttribute("style","overflow: visible; text-align: left;"),z.setAttribute("pointer-events","none"),z.appendChild(F),$.appendChild(z),this.updateTextNodes(d,g,E,b,C,S,P,M,D,k,$),((U=this.root)==null?void 0:U.ownerDocument)!==document){const W=this.createAlternateContent(z,d,g,E,b,w,C,S,P,I,M,D,k);if(W!=null){z.setAttribute("requiredFeatures","http://www.w3.org/TR/SVG11/feature#Extensibility");const q=this.createElement("switch");q.appendChild(z),q.appendChild(W),$.appendChild(q)}}j.appendChild($)}updateTextNodes(d,g,E,b,w,C,S,P,I,M,D){const k=this.state.scale;SvgCanvas2D.createCss(E+2,b,w,C,S,P,I,this.state.fontBackgroundColor!=null?this.state.fontBackgroundColor:null,this.state.fontBorderColor!=null?this.state.fontBorderColor:null,`display: flex; align-items: unsafe ${C===ALIGN.TOP?"flex-start":C===ALIGN.BOTTOM?"flex-end":"center"}; justify-content: unsafe ${w===ALIGN.LEFT?"flex-start":w===ALIGN.RIGHT?"flex-end":"center"}; `,this.getTextCss(),k,(H,F,j,$,z)=>{d+=this.state.dx,g+=this.state.dy;const U=D.firstChild,W=U.firstChild,q=W.firstChild,Z=q.firstChild,X=(this.rotateHtml?this.state.rotation:0)+(M??0);let K=(this.foOffset!==0?`translate(${this.foOffset} ${this.foOffset})`:"")+(k!==1?`scale(${k})`:"");Z.setAttribute("style",z),q.setAttribute("style",$),U.setAttribute("width",`${Math.ceil(1/Math.min(1,k)*100)}%`),U.setAttribute("height",`${Math.ceil(1/Math.min(1,k)*100)}%`);const ee=Math.round(g+F);ee<0?U.setAttribute("y",String(ee)):(U.removeAttribute("y"),j+=`padding-top: ${ee}px; `),W.setAttribute("style",`${j}margin-left: ${Math.round(d+H)}px;`),K+=X!==0?`rotate(${X} ${d} ${g})`:"",K!==""?D.setAttribute("transform",K):D.removeAttribute("transform"),this.state.alpha!==1?D.setAttribute("opacity",String(this.state.alpha)):D.removeAttribute("opacity")})}getTextCss(){const d=this.state,g=LINE_HEIGHT*this.lineHeightCorrection;let E=`display: inline-block; font-size: ${d.fontSize}px; font-family: ${d.fontFamily}; color: ${d.fontColor}; line-height: ${g}; pointer-events: ${this.pointerEvents?this.pointerEventsValue:"none"}; `;const b=d.fontStyle;matchBinaryMask(b,FONT.BOLD)&&(E+="font-weight: bold; "),matchBinaryMask(b,FONT.ITALIC)&&(E+="font-style: italic; ");const w=[];return matchBinaryMask(b,FONT.UNDERLINE)&&w.push("underline"),matchBinaryMask(b,FONT.STRIKETHROUGH)&&w.push("line-through"),w.length>0&&(E+=`text-decoration: ${w.join(" ")}; `),E}text(d,g,E,b,w,C,S,P,I,M,D,k=0,H){if(this.textEnabled&&w!=null)if(k=k??0,this.foEnabled&&I==="html"){const F=this.createDiv(w);F!=null&&(H!=null&&F.setAttribute("dir",H),this.addForeignObject(d,g,E,b,w,C,S,P,I,M,D,k,H,F,this.root))}else this.plainText(d+this.state.dx,g+this.state.dy,E,b,w,C,S,P,M,D,k,H)}createClip(d,g,E,b){d=Math.round(d),g=Math.round(g),E=Math.round(E),b=Math.round(b);const w=`mx-clip-${d}-${g}-${E}-${b}`;let C=0,S=`${w}-${C}`;for(;document.getElementById(S)!=null;)S=`${w}-${++C}`;const P=this.createElement("clipPath");P.setAttribute("id",S);const I=this.createElement("rect");return I.setAttribute("x",String(d)),I.setAttribute("y",String(g)),I.setAttribute("width",String(E)),I.setAttribute("height",String(b)),P.appendChild(I),P}plainText(d,g,E,b,w,C,S,P,I,M,D=0,k){const H=this.state,F=H.fontSize,j=this.createElement("g");let $=H.transform||"";if(this.updateFont(j),!this.pointerEvents&&this.originalRoot==null&&j.setAttribute("pointer-events","none"),D!==0&&($+=`rotate(${D},${this.format(d*H.scale)},${this.format(g*H.scale)})`),k!=null&&j.setAttribute("direction",k),M&&E>0&&b>0){let X=d,K=g;C===ALIGN.CENTER?X-=E/2:C===ALIGN.RIGHT&&(X-=E),I!=="fill"&&(S===ALIGN.MIDDLE?K-=b/2:S===ALIGN.BOTTOM&&(K-=b));const ee=this.createClip(X*H.scale-2,K*H.scale-2,E*H.scale+4,b*H.scale+4);if(this.defs!=null?this.defs.appendChild(ee):this.root.appendChild(ee),!Client.IS_CHROMEAPP&&!Client.IS_EDGE&&this.root.ownerDocument===document){const te=this.getBaseUrl().replace(/([()])/g,"\\$1");j.setAttribute("clip-path",`url(${te}#${ee.getAttribute("id")})`)}else j.setAttribute("clip-path",`url(#${ee.getAttribute("id")})`)}const z=C===ALIGN.RIGHT?"end":C===ALIGN.CENTER?"middle":"start";z!=="start"&&j.setAttribute("text-anchor",z),(!this.styleEnabled||F!==DEFAULT_FONTSIZE)&&j.setAttribute("font-size",`${F*H.scale}px`),$.length>0&&j.setAttribute("transform",$),H.alpha<1&&j.setAttribute("opacity",String(H.alpha));const U=w.split(`
`),W=Math.round(F*LINE_HEIGHT),q=F+(U.length-1)*W;let Z=g+F-1;if(S===ALIGN.MIDDLE)if(I==="fill")Z-=b/2;else{const X=(this.matchHtmlAlignment&&M&&b>0?Math.min(q,b):q)/2;Z-=X}else if(S===ALIGN.BOTTOM)if(I==="fill")Z-=b;else{const X=this.matchHtmlAlignment&&M&&b>0?Math.min(q,b):q;Z-=X+1}for(let X=0;X<U.length;X+=1){const K=trim(U[X]);if(K){const ee=this.createElement("text");ee.setAttribute("x",String(this.format(d*H.scale)+this.textOffset)),ee.setAttribute("y",String(this.format(Z*H.scale)+this.textOffset)),write(ee,K),j.appendChild(ee)}Z+=W}this.root.appendChild(j),this.addTextBackground(j,w,d,g,E,I==="fill"?b:q,C,S,I)}updateFont(d){const g=this.state;g.fontColor&&g.fontColor!==NONE&&d.setAttribute("fill",g.fontColor),(!this.styleEnabled||g.fontFamily!==DEFAULT_FONTFAMILY)&&d.setAttribute("font-family",g.fontFamily);const E=g.fontStyle;matchBinaryMask(E,FONT.BOLD)&&d.setAttribute("font-weight","bold"),matchBinaryMask(E,FONT.ITALIC)&&d.setAttribute("font-style","italic");const b=[];matchBinaryMask(E,FONT.UNDERLINE)&&b.push("underline"),matchBinaryMask(E,FONT.STRIKETHROUGH)&&b.push("line-through"),b.length>0&&d.setAttribute("text-decoration",b.join(" "))}addTextBackground(d,g,E,b,w,C,S,P,I){var D;const M=this.state;if(M.fontBackgroundColor!=null||M.fontBorderColor!=null){let k=null;if(I==="fill"||I==="width")S===ALIGN.CENTER?E-=w/2:S===ALIGN.RIGHT&&(E-=w),P===ALIGN.MIDDLE?b-=C/2:P===ALIGN.BOTTOM&&(b-=C),k=new Rectangle((E+1)*M.scale,b*M.scale,(w-2)*M.scale,(C+2)*M.scale);else if(d.getBBox!=null&&this.root.ownerDocument===document)try{k=d.getBBox(),k=new Rectangle(k.x,k.y+1,k.width,k.height+0)}catch{}if(k==null||k.width===0||k.height===0){const H=document.createElement("div");H.style.lineHeight=String(LINE_HEIGHT),H.style.fontSize=`${M.fontSize}px`,H.style.fontFamily=M.fontFamily,H.style.whiteSpace="nowrap",H.style.position="absolute",H.style.visibility="hidden",H.style.display="inline-block",matchBinaryMask(M.fontStyle,FONT.BOLD)&&(H.style.fontWeight="bold"),matchBinaryMask(M.fontStyle,FONT.ITALIC)&&(H.style.fontStyle="italic"),g=htmlEntities(g,!1),H.innerHTML=g.replace(/\n/g,"<br/>"),document.body.appendChild(H);const F=H.offsetWidth,j=H.offsetHeight;document.body.removeChild(H),S===ALIGN.CENTER?E-=F/2:S===ALIGN.RIGHT&&(E-=F),P===ALIGN.MIDDLE?b-=j/2:P===ALIGN.BOTTOM&&(b-=j),k=new Rectangle((E+1)*M.scale,(b+2)*M.scale,F*M.scale,(j+1)*M.scale)}if(k!=null){const H=this.createElement("rect");H.setAttribute("fill",M.fontBackgroundColor||"none"),H.setAttribute("stroke",M.fontBorderColor||"none"),H.setAttribute("x",String(Math.floor(k.x-1))),H.setAttribute("y",String(Math.floor(k.y-1))),H.setAttribute("width",String(Math.ceil(k.width+2))),H.setAttribute("height",String(Math.ceil(k.height)));const F=M.fontBorderColor?Math.max(1,this.format(M.scale)):0;H.setAttribute("stroke-width",String(F)),((D=this.root)==null?void 0:D.ownerDocument)===document&&mod(F,2)===1&&H.setAttribute("transform","translate(0.5, 0.5)"),d.insertBefore(H,d.firstChild)}}}stroke(){this.addNode(!1,!0)}fill(){this.addNode(!0,!1)}fillAndStroke(){this.addNode(!0,!0)}}SvgCanvas2D.createCss=(x,d,g,E,b,w,C,S,P,I,M,D,k)=>{let H=`box-sizing: border-box; font-size: 0; text-align: ${g===ALIGN.LEFT?"left":g===ALIGN.RIGHT?"right":"center"}; `;const F=getAlignmentAsPoint(g,E);let j="overflow: hidden; ",$="width: 1px; ",z="height: 1px; ",U=F.x*x,W=F.y*d;C?($=`width: ${Math.round(x)}px; `,H+=`max-height: ${Math.round(d)}px; `,W=0):w==="fill"?($=`width: ${Math.round(x)}px; `,z=`height: ${Math.round(d)}px; `,M+="width: 100%; height: 100%; ",H+=$+z):w==="width"?($=`width: ${Math.round(x)}px; `,M+="width: 100%; ",H+=$,W=0,d>0&&(H+=`max-height: ${Math.round(d)}px; `)):(j="",W=0);let q="";S&&(q+=`background-color: ${S}; `),P&&(q+=`border: 1px solid ${P}; `),j==""||C?M+=q:H+=q,b&&x>0?(M+=`white-space: normal; word-wrap: ${WORD_WRAP}; `,$=`width: ${Math.round(x)}px; `,j!==""&&w!=="fill"&&(W=0)):(M+="white-space: nowrap; ",j===""&&(U=0)),k(U,W,I+$+z,H+j,M,j)};class Shape{constructor(d=null){this.preserveImageAspect=!1,this.overlay=null,this.indicator=null,this.indicatorShape=null,this.opacity=100,this.isDashed=!1,this.fill=NONE,this.gradient=NONE,this.gradientDirection=DIRECTION.EAST,this.fillOpacity=100,this.strokeOpacity=100,this.stroke=NONE,this.strokeWidth=1,this.spacing=0,this.startSize=1,this.endSize=1,this.startArrow=NONE,this.endArrow=NONE,this.direction=DIRECTION.EAST,this.flipH=!1,this.flipV=!1,this.isShadow=!1,this.isRounded=!1,this.rotation=0,this.cursor="",this.verticalTextRotation=0,this.oldGradients={},this.glass=!1,this.dialect=null,this.scale=1,this.antiAlias=!0,this.minSvgStrokeWidth=1,this.bounds=null,this.points=[],this.state=null,this.style=null,this.boundingBox=null,this.stencil=null,this.svgStrokeTolerance=8,this.pointerEvents=!0,this.originalPointerEvents=null,this.svgPointerEvents="all",this.shapePointerEvents=!1,this.stencilPointerEvents=!1,this.outline=!1,this.visible=!0,this.useSvgBoundingBox=!0,this.image=null,this.imageSrc=null,this.indicatorColor=NONE,this.indicatorStrokeColor=NONE,this.indicatorGradientColor=NONE,this.indicatorDirection=DIRECTION.EAST,this.indicatorImageSrc=null,d&&(this.stencil=d),this.node=this.create()}init(d){this.node.parentNode||d.appendChild(this.node)}initStyles(){this.strokeWidth=1,this.rotation=0,this.opacity=100,this.fillOpacity=100,this.strokeOpacity=100,this.flipH=!1,this.flipV=!1}isHtmlAllowed(){return!1}getSvgScreenOffset(){const d=this.stencil&&this.stencil.strokeWidthValue!=="inherit"?Number(this.stencil.strokeWidthValue):this.strokeWidth??0;return mod(Math.max(1,Math.round(d*this.scale)),2)===1?.5:0}create(){return document.createElementNS("http://www.w3.org/2000/svg","g")}redraw(){this.updateBoundsFromPoints(),this.visible&&this.checkBounds()?(this.node.style.visibility="visible",this.clear(),this.redrawShape(),this.updateBoundingBox()):(this.node.style.visibility="hidden",this.boundingBox=null)}clear(){for(;this.node.lastChild;)this.node.removeChild(this.node.lastChild)}updateBoundsFromPoints(){const d=this.points;if(d.length>0&&d[0]){this.bounds=new Rectangle(Math.round(d[0].x),Math.round(d[0].y),1,1);for(const g of d)g&&this.bounds.add(new Rectangle(Math.round(g.x),Math.round(g.y),1,1))}}getLabelBounds(d){var w,C,S;const g=((w=this.style)==null?void 0:w.direction)??DIRECTION.EAST;let E=d.clone();g!==DIRECTION.SOUTH&&g!==DIRECTION.NORTH&&this.state&&this.state.text&&this.state.text.isPaintBoundsInverted()&&(E=E.clone(),[E.width,E.height]=[E.height,E.width]);let b=this.getLabelMargins(E);if(b){b=b.clone();let P=((C=this.style)==null?void 0:C.flipH)??!1,I=((S=this.style)==null?void 0:S.flipV)??!1;if(this.state&&this.state.text&&this.state.text.isPaintBoundsInverted()){const M=b.x;b.x=b.height,b.height=b.width,b.width=b.y,b.y=M,[P,I]=[I,P]}return getDirectedBounds(d,b,this.style,P,I)}return d}getLabelMargins(d){return null}checkBounds(){return!Number.isNaN(this.scale)&&Number.isFinite(this.scale)&&this.scale>0&&this.bounds&&!Number.isNaN(this.bounds.x)&&!Number.isNaN(this.bounds.y)&&!Number.isNaN(this.bounds.width)&&!Number.isNaN(this.bounds.height)&&this.bounds.width>0&&this.bounds.height>0}redrawShape(){const d=this.createCanvas();d&&(d.pointerEvents=this.pointerEvents,this.beforePaint(d),this.paint(d),this.afterPaint(d),this.node!==d.root&&d.root&&this.node.insertAdjacentHTML("beforeend",d.root.outerHTML),this.destroyCanvas(d))}createCanvas(){const d=this.createSvgCanvas();return d&&this.outline&&(d.setStrokeWidth(this.strokeWidth),d.setStrokeColor(this.stroke),this.isDashed&&d.setDashed(this.isDashed),d.setStrokeWidth=()=>{},d.setStrokeColor=()=>{},d.setFillColor=()=>{},d.setGradient=()=>{},d.setDashed=()=>{},d.text=()=>{}),d}createSvgCanvas(){if(!this.node)return null;const d=new SvgCanvas2D(this.node,!1);d.strokeTolerance=this.pointerEvents?this.svgStrokeTolerance:0,d.pointerEventsValue=this.svgPointerEvents;const g=this.getSvgScreenOffset();return g!==0?this.node.setAttribute("transform",`translate(${g},${g})`):this.node.removeAttribute("transform"),d.minStrokeWidth=this.minSvgStrokeWidth,this.antiAlias||(d.format=E=>Math.round(E)),d}destroyCanvas(d){if(d instanceof SvgCanvas2D){for(const g in d.gradients){const E=d.gradients[g];E&&(E.mxRefCount=(E.mxRefCount||0)+1)}this.releaseSvgGradients(this.oldGradients),this.oldGradients=d.gradients}}beforePaint(d){}afterPaint(d){}paint(d){let g=!1;if(d&&this.outline){const{stroke:w}=d;d.stroke=(...S)=>{g=!0,w.apply(d,S)};const{fillAndStroke:C}=d;d.fillAndStroke=(...S)=>{g=!0,C.apply(d,S)}}const E=this.scale,b=this.bounds;if(b){let w=b.x/E,C=b.y/E,S=b.width/E,P=b.height/E;if(this.isPaintBoundsInverted()){const M=(S-P)/2;w+=M,C-=M;const D=S;S=P,P=D}this.updateTransform(d,w,C,S,P),this.configureCanvas(d,w,C,S,P);let I=null;if(!this.stencil&&this.points.length===0&&this.shapePointerEvents||this.stencil&&this.stencilPointerEvents){const M=this.createBoundingBox();M&&this.node&&(I=this.createTransparentSvgRectangle(M.x,M.y,M.width,M.height),this.node.appendChild(I))}if(this.stencil)this.stencil.drawShape(d,this,w,C,S,P);else if(d.setStrokeWidth(this.strokeWidth),this.points.length>0){const M=[];for(let D=0;D<this.points.length;D+=1){const k=this.points[D];k&&M.push(new Point(k.x/E,k.y/E))}this.paintEdgeShape(d,M)}else this.paintVertexShape(d,w,C,S,P);I&&d.state&&isNotNullish(d.state.transform)&&I.setAttribute("transform",d.state.transform),d&&this.outline&&!g&&(d.rect(w,C,S,P),d.stroke())}}configureCanvas(d,g,E,b,w){var S;let C=null;if(this.style&&this.style.dashPattern!=null&&(C=this.style.dashPattern),d.setAlpha(this.opacity/100),d.setFillAlpha(this.fillOpacity/100),d.setStrokeAlpha(this.strokeOpacity/100),this.isShadow&&d.setShadow(this.isShadow),this.isDashed&&d.setDashed(this.isDashed,((S=this.style)==null?void 0:S.fixDash)??!1),C&&d.setDashPattern(C),this.fill!==NONE&&this.gradient!==NONE){const P=this.getGradientBounds(d,g,E,b,w);d.setGradient(this.fill,this.gradient,P.x,P.y,P.width,P.height,this.gradientDirection)}else d.setFillColor(this.fill);d.setStrokeColor(this.stroke)}getGradientBounds(d,g,E,b,w){return new Rectangle(g,E,b,w)}updateTransform(d,g,E,b,w){d.scale(this.scale),d.rotate(this.getShapeRotation(),this.flipH,this.flipV,g+b/2,E+w/2)}paintVertexShape(d,g,E,b,w){this.paintBackground(d,g,E,b,w),(!this.outline||!this.style||!(this.style.backgroundOutline??!1))&&(d.setShadow(!1),this.paintForeground(d,g,E,b,w))}paintBackground(d,g,E,b,w){}paintForeground(d,g,E,b,w){}paintEdgeShape(d,g){}getArcSize(d,g){var b,w,C;let E=0;if(((b=this.style)==null?void 0:b.absoluteArcSize)??!1)E=Math.min(d/2,Math.min(g/2,(((w=this.style)==null?void 0:w.arcSize)??LINE_ARCSIZE)/2));else{const S=(((C=this.style)==null?void 0:C.arcSize)??RECTANGLE_ROUNDING_FACTOR*100)/100;E=Math.min(d*S,g*S)}return E}paintGlassEffect(d,g,E,b,w,C){const S=Math.ceil((this.strokeWidth??0)/2),P=.4;d.setGradient("#ffffff","#ffffff",g,E,b,w*.6,"south",.9,.1),d.begin(),C+=2*S,this.isRounded?(d.moveTo(g-S+C,E-S),d.quadTo(g-S,E-S,g-S,E-S+C),d.lineTo(g-S,E+w*P),d.quadTo(g+b*.5,E+w*.7,g+b+S,E+w*P),d.lineTo(g+b+S,E-S+C),d.quadTo(g+b+S,E-S,g+b+S-C,E-S)):(d.moveTo(g-S,E-S),d.lineTo(g-S,E+w*P),d.quadTo(g+b*.5,E+w*.7,g+b+S,E+w*P),d.lineTo(g+b+S,E-S)),d.close(),d.fill()}addPoints(d,g,E=!1,b,w=!1,C=[],S=!0){if(g.length>0){const P=g[g.length-1];if(w&&E){g=g.slice();const D=g[0],k=new Point(P.x+(D.x-P.x)/2,P.y+(D.y-P.y)/2);g.splice(0,0,k)}let I=g[0],M=1;for(S?d.moveTo(I.x,I.y):d.lineTo(I.x,I.y);M<(w?g.length:g.length-1);){let D=g[mod(M,g.length)],k=I.x-D.x,H=I.y-D.y;if(E&&(k!==0||H!==0)&&C.indexOf(M-1)<0){let F=Math.sqrt(k*k+H*H);const j=k*Math.min(b,F/2)/F,$=H*Math.min(b,F/2)/F,z=D.x+j,U=D.y+$;d.lineTo(z,U);let W=g[mod(M+1,g.length)];for(;M<g.length-2&&Math.round(W.x-D.x)===0&&Math.round(W.y-D.y)===0;)W=g[mod(M+2,g.length)],M++;k=W.x-D.x,H=W.y-D.y,F=Math.max(1,Math.sqrt(k*k+H*H));const q=k*Math.min(b,F/2)/F,Z=H*Math.min(b,F/2)/F,X=D.x+q,K=D.y+Z;d.quadTo(D.x,D.y,X,K),D=new Point(X,K)}else d.lineTo(D.x,D.y);I=D,M+=1}w?d.close():d.lineTo(P.x,P.y)}}resetStyles(){this.initStyles(),this.spacing=0,this.fill=NONE,this.gradient=NONE,this.gradientDirection=DIRECTION.EAST,this.stroke=NONE,this.startSize=1,this.endSize=1,this.startArrow=NONE,this.endArrow=NONE,this.direction=DIRECTION.EAST,this.isShadow=!1,this.isDashed=!1,this.isRounded=!1,this.glass=!1}apply(d){if(this.state=d,this.style=d.style,this.style){if(this.fill=this.style.fillColor??this.fill,this.gradient=this.style.gradientColor??this.gradient,this.gradientDirection=this.style.gradientDirection??this.gradientDirection,this.opacity=this.style.opacity??this.opacity,this.fillOpacity=this.style.fillOpacity??this.fillOpacity,this.strokeOpacity=this.style.strokeOpacity??this.strokeOpacity,this.stroke=this.style.strokeColor??this.stroke,this.strokeWidth=this.style.strokeWidth??this.strokeWidth,this.spacing=this.style.spacing??this.spacing,this.startSize=this.style.startSize??this.startSize,this.endSize=this.style.endSize??this.endSize,this.startArrow=this.style.startArrow??this.startArrow,this.endArrow=this.style.endArrow??this.endArrow,this.rotation=this.style.rotation??this.rotation,this.direction=this.style.direction??this.direction,this.flipH=!!this.style.flipH,this.flipV=!!this.style.flipV,this.direction===DIRECTION.NORTH||this.direction===DIRECTION.SOUTH){const g=this.flipH;this.flipH=this.flipV,this.flipV=g}this.isShadow=this.style.shadow??this.isShadow,this.isDashed=this.style.dashed??this.isDashed,this.isRounded=this.style.rounded??this.isRounded,this.glass=this.style.glass??this.glass}}setCursor(d){this.cursor=d,this.node.style.cursor=d}getCursor(){return this.cursor}isRoundable(d,g,E,b,w){return!1}updateBoundingBox(){if(this.useSvgBoundingBox&&this.node.ownerSVGElement)try{const d=this.node.getBBox();if(d.width>0&&d.height>0){this.boundingBox=new Rectangle(d.x,d.y,d.width,d.height),this.boundingBox.grow((this.strokeWidth??0)*this.scale/2);return}}catch{}if(this.bounds){let d=this.createBoundingBox();if(d){this.augmentBoundingBox(d);const g=this.getShapeRotation();g!==0&&(d=getBoundingBox(d,g))}this.boundingBox=d}}createBoundingBox(){if(!this.bounds)return null;const d=this.bounds.clone();return(this.stencil&&(this.direction===DIRECTION.NORTH||this.direction===DIRECTION.SOUTH)||this.isPaintBoundsInverted())&&d.rotate90(),d}augmentBoundingBox(d){this.isShadow&&(d.width+=Math.ceil(SHADOW_OFFSET_X*this.scale),d.height+=Math.ceil(SHADOW_OFFSET_Y*this.scale)),d.grow((this.strokeWidth??0)*this.scale/2)}isPaintBoundsInverted(){return!this.stencil&&(this.direction===DIRECTION.NORTH||this.direction===DIRECTION.SOUTH)}getRotation(){return this.rotation??0}getTextRotation(){var g;let d=this.getRotation();return(((g=this.style)==null?void 0:g.horizontal)??!0)||(d+=this.verticalTextRotation||-90),d}getShapeRotation(){let d=this.getRotation();return this.direction===DIRECTION.NORTH?d+=270:this.direction===DIRECTION.WEST?d+=180:this.direction===DIRECTION.SOUTH&&(d+=90),d}createTransparentSvgRectangle(d,g,E,b){const w=document.createElementNS("http://www.w3.org/2000/svg","rect");return w.setAttribute("x",String(d)),w.setAttribute("y",String(g)),w.setAttribute("width",String(E)),w.setAttribute("height",String(b)),w.setAttribute("fill",NONE),w.setAttribute("stroke",NONE),w.setAttribute("pointer-events","all"),w}redrawHtmlShape(){}setTransparentBackgroundImage(d){d.style.backgroundImage=`url('${Client.imageBasePath}/transparent.gif')`}releaseSvgGradients(d){for(const g in d){const E=d[g];E&&(E.mxRefCount=(E.mxRefCount||0)-1,E.mxRefCount===0&&E.parentNode&&E.parentNode.removeChild(E))}}destroy(){InternalEvent.release(this.node),this.node.parentNode&&this.node.parentNode.removeChild(this.node),this.node.innerHTML="",this.releaseSvgGradients(this.oldGradients),this.oldGradients={}}}class RectangleShape extends Shape{constructor(d,g,E,b=1){super(),this.bounds=d,this.fill=g,this.stroke=E,this.strokeWidth=b}isHtmlAllowed(){let d=!0;return this.style&&this.style.pointerEvents!=null&&(d=this.style.pointerEvents),!this.isRounded&&!this.glass&&this.rotation===0&&(d||this.fill!==NONE)}paintBackground(d,g,E,b,w){var S,P,I;let C=!0;if(this.style&&this.style.pointerEvents!=null&&(C=this.style.pointerEvents),C||this.fill!==NONE||this.stroke!==NONE){if(!C&&this.fill===NONE&&(d.pointerEvents=!1),this.isRounded){let M=0;if(((S=this.style)==null?void 0:S.absoluteArcSize)??!1)M=Math.min(b/2,Math.min(w/2,(((P=this.style)==null?void 0:P.arcSize)??LINE_ARCSIZE)/2));else{const D=(((I=this.style)==null?void 0:I.arcSize)??RECTANGLE_ROUNDING_FACTOR*100)/100;M=Math.min(b*D,w*D)}d.roundrect(g,E,b,w,M,M)}else d.rect(g,E,b,w);d.fillAndStroke()}}isRoundable(d,g,E,b,w){return!0}paintForeground(d,g,E,b,w){this.glass&&!this.outline&&this.fill!==NONE&&this.paintGlassEffect(d,g,E,b,w,this.getArcSize(b+this.strokeWidth,w+this.strokeWidth))}}class CellState extends Rectangle{constructor(d=null,g=null,E=null){super(),this.node=null,this.cellBounds=null,this.paintBounds=null,this.boundingBox=null,this.control=null,this.overlays=new Dictionary,this.invalidStyle=!1,this.invalid=!0,this.absolutePoints=[],this.visibleSourceState=null,this.visibleTargetState=null,this.terminalDistance=0,this.length=0,this.segments=[],this.shape=null,this.text=null,this.unscaledWidth=0,this.unscaledHeight=0,this.parentHighlight=null,this.point=null,d&&(this.view=d),g&&(this.cell=g),this.style=E??{},this.origin=new Point,this.absoluteOffset=new Point}getPerimeterBounds(d=0,g=new Rectangle(this.x,this.y,this.width,this.height)){var E,b;if(((b=(E=this.shape)==null?void 0:E.stencil)==null?void 0:b.aspect)==="fixed"){const w=this.shape.stencil.computeAspect(this.shape,g.x,g.y,g.width,g.height);g.x=w.x,g.y=w.y,g.width=this.shape.stencil.w0*w.width,g.height=this.shape.stencil.h0*w.height}return d!==0&&g.grow(d),g}setAbsoluteTerminalPoint(d,g=!1){g?this.absolutePoints.length===0?this.absolutePoints.push(d):this.absolutePoints[0]=d:this.absolutePoints.length===0?(this.absolutePoints.push(null),this.absolutePoints.push(d)):this.absolutePoints.length===1?this.absolutePoints.push(d):this.absolutePoints[this.absolutePoints.length-1]=d}setCursor(d){this.shape&&this.shape.setCursor(d),this.text&&this.text.setCursor(d)}getVisibleTerminal(d=!1){var g;return((g=this.getVisibleTerminalState(d))==null?void 0:g.cell)??null}getVisibleTerminalState(d=!1){return d?this.visibleSourceState:this.visibleTargetState}setVisibleTerminalState(d,g=!1){g?this.visibleSourceState=d:this.visibleTargetState=d}getCellBounds(){return this.cellBounds}getPaintBounds(){return this.paintBounds}updateCachedBounds(){const d=this.view,g=d.translate,E=d.scale;this.cellBounds=new Rectangle(this.x/E-g.x,this.y/E-g.y,this.width/E,this.height/E),this.paintBounds=Rectangle.fromRectangle(this.cellBounds),this.shape&&this.shape.isPaintBoundsInverted()&&this.paintBounds.rotate90()}setState(d){this.view=d.view,this.cell=d.cell,this.style=d.style,this.absolutePoints=d.absolutePoints,this.origin=d.origin,this.absoluteOffset=d.absoluteOffset,this.boundingBox=d.boundingBox,this.terminalDistance=d.terminalDistance,this.segments=d.segments,this.length=d.length,this.x=d.x,this.y=d.y,this.width=d.width,this.height=d.height,this.unscaledWidth=d.unscaledWidth,this.unscaledHeight=d.unscaledHeight}clone(){const d=new CellState(this.view,this.cell,this.style);for(let g=0;g<this.absolutePoints.length;g+=1){const E=this.absolutePoints[g];d.absolutePoints[g]=E?E.clone():null}return this.origin&&(d.origin=this.origin.clone()),this.absoluteOffset&&(d.absoluteOffset=this.absoluteOffset.clone()),this.boundingBox&&(d.boundingBox=this.boundingBox.clone()),d.terminalDistance=this.terminalDistance,d.segments=this.segments,d.length=this.length,d.x=this.x,d.y=this.y,d.width=this.width,d.height=this.height,d.unscaledWidth=this.unscaledWidth,d.unscaledHeight=this.unscaledHeight,d}destroy(){this.view.graph.cellRenderer.destroy(this)}isLoop(d){const g=this.getVisibleTerminalState(!0);return g&&g===this.getVisibleTerminalState(!1)}getVerticalAlign(){return this.style.verticalAlign??ALIGN.MIDDLE}isTransparentState(){return(this.style.strokeColor??NONE)===NONE&&(this.style.fillColor??NONE)===NONE&&!this.getImageSrc()}getImageSrc(){return this.style.image||null}getIndicatorColor(){return this.style.indicatorColor||null}getIndicatorGradientColor(){return this.style.gradientColor||null}getIndicatorShape(){return this.style.indicatorShape||null}getIndicatorImageSrc(){return this.style.indicatorImage||null}}class UndoableEdit{constructor(d,g=!0){this.changes=[],this.significant=!0,this.undone=!1,this.redone=!1,this.source=d,this.changes=[],this.significant=g}isEmpty(){return this.changes.length===0}isSignificant(){return this.significant}add(d){this.changes.push(d)}notify(){}die(){}undo(){if(!this.undone){this.source.fireEvent(new EventObject(InternalEvent.START_EDIT));const d=this.changes.length;for(let g=d-1;g>=0;g--){const E=this.changes[g];E.execute?E.execute():E.undo&&E.undo(),this.source.fireEvent(new EventObject(InternalEvent.EXECUTED,{change:E}))}this.undone=!0,this.redone=!1,this.source.fireEvent(new EventObject(InternalEvent.END_EDIT))}this.notify()}redo(){if(!this.redone){this.source.fireEvent(new EventObject(InternalEvent.START_EDIT));const d=this.changes.length;for(let g=0;g<d;g+=1){const E=this.changes[g];E.execute!=null?E.execute():E.redo!=null&&E.redo(),this.source.fireEvent(new EventObject(InternalEvent.EXECUTED,{change:E}))}this.undone=!1,this.redone=!0,this.source.fireEvent(new EventObject(InternalEvent.END_EDIT))}this.notify()}}class ImageShape extends RectangleShape{constructor(d,g,E="#FFFFFF",b="#000000",w=1){super(d,E,b,w),this.overlay=null,this.preserveImageAspect=!0,this.imageSrc=g,this.shadow=!1}getSvgScreenOffset(){return 0}apply(d){super.apply(d),this.fill=NONE,this.stroke=NONE,this.gradient=NONE,this.style&&this.style.imageAspect!=null&&(this.preserveImageAspect=this.style.imageAspect)}isHtmlAllowed(){return!this.preserveImageAspect}isRoundable(d,g,E,b,w){return!1}paintVertexShape(d,g,E,b,w){var C,S;if(this.imageSrc){const P=((C=this.style)==null?void 0:C.imageBackground)??NONE,I=((S=this.style)==null?void 0:S.imageBorder)??NONE;P!==NONE&&(d.setFillColor(P),d.setStrokeColor(I),d.rect(g,E,b,w),d.fillAndStroke()),d.image(g,E,b,w,this.imageSrc,this.preserveImageAspect,!1,!1),I!==NONE&&(d.setShadow(!1),d.setStrokeColor(I),d.rect(g,E,b,w),d.stroke())}else this.paintBackground(d,g,E,b,w)}}class CurrentRootChange{constructor(d,g){if(this.view=d,this.root=g,this.previous=g,this.isUp=g===null,!this.isUp){let E=this.view.currentRoot;for(;E;){if(E===g){this.isUp=!0;break}E=E.getParent()}}}execute(){const d=this.view.currentRoot;this.view.currentRoot=this.previous,this.previous=d;const g=this.view.graph.getTranslateForRoot(this.view.currentRoot);g&&(this.view.translate=new Point(-g.x,-g.y)),this.isUp?(this.view.clear(this.view.currentRoot,!0,!0),this.view.validate(null)):this.view.refresh();const E=this.isUp?InternalEvent.UP:InternalEvent.DOWN;this.view.fireEvent(new EventObject(E,{root:this.view.currentRoot,previous:this.previous})),this.isUp=!this.isUp}}class StyleRegistry{static putValue(d,g){StyleRegistry.values[d]=g}static getValue(d){return StyleRegistry.values[d]}static getName(d){for(const g in StyleRegistry.values)if(StyleRegistry.values[g]===d)return g;return null}}StyleRegistry.values={};class GraphView extends EventSource{constructor(x){super(),this.backgroundImage=null,this.backgroundPageShape=null,this.EMPTY_POINT=new Point,this.doneResource=Client.language!=="none"?"done":"",this.updatingDocumentResource=Client.language!=="none"?"updatingDocument":"",this.allowEval=!1,this.captureDocumentGesture=!0,this.rendering=!0,this.currentRoot=null,this.graphBounds=new Rectangle,this.scale=1,this.translate=new Point,this.states=new Dictionary,this.updateStyle=!1,this.lastNode=null,this.lastHtmlNode=null,this.lastForegroundNode=null,this.lastForegroundHtmlNode=null,this.endHandler=null,this.moveHandler=null,this.graph=x}getGraphBounds(){return this.graphBounds}setGraphBounds(x){this.graphBounds=x}getScale(){return this.scale}setScale(x){const d=this.scale;d!==x&&(this.scale=x,this.isEventsEnabled()&&this.viewStateChanged()),this.fireEvent(new EventObject(InternalEvent.SCALE,{scale:x,previousScale:d}))}getTranslate(){return this.translate}isRendering(){return this.rendering}setRendering(x){this.rendering=x}setTranslate(x,d){const g=new Point(this.translate.x,this.translate.y);(this.translate.x!==x||this.translate.y!==d)&&(this.translate.x=x,this.translate.y=d,this.isEventsEnabled()&&this.viewStateChanged()),this.fireEvent(new EventObject(InternalEvent.TRANSLATE,{translate:this.translate,previousTranslate:g}))}isAllowEval(){return this.allowEval}setAllowEval(x){this.allowEval=x}getStates(){return this.states}setStates(x){this.states=x}getCanvas(){return this.canvas}getBackgroundPane(){return this.backgroundPane}getDrawPane(){return this.drawPane}getOverlayPane(){return this.overlayPane}getDecoratorPane(){return this.decoratorPane}getBounds(x){let d=null;if(x.length>0){for(let g=0;g<x.length;g+=1)if(x[g].isVertex()||x[g].isEdge()){const E=this.getState(x[g]);E&&(d?d.add(E):d=Rectangle.fromRectangle(E))}}return d}setCurrentRoot(x){if(this.currentRoot!==x){const d=new CurrentRootChange(this,x);d.execute();const g=new UndoableEdit(this,!0);g.add(d),this.fireEvent(new EventObject(InternalEvent.UNDO,{edit:g})),this.graph.sizeDidChange(),this.currentRoot=x}return x}scaleAndTranslate(x,d,g){const E=this.scale,b=new Point(this.translate.x,this.translate.y);(this.scale!==x||this.translate.x!==d||this.translate.y!==g)&&(this.scale=x,this.translate.x=d,this.translate.y=g,this.isEventsEnabled()&&this.viewStateChanged()),this.fireEvent(new EventObject(InternalEvent.SCALE_AND_TRANSLATE,{scale:x,previousScale:E,translate:this.translate,previousTranslate:b}))}viewStateChanged(){this.revalidate(),this.graph.sizeDidChange()}refresh(){this.currentRoot&&this.clear(),this.revalidate()}revalidate(){this.invalidate(),this.validate()}clear(x,d=!1,g=!0){if(x||(x=this.graph.getDataModel().getRoot()),x)if(this.removeState(x),g&&(d||x!==this.currentRoot)){const E=x.getChildCount();for(let b=0;b<E;b+=1)this.clear(x.getChildAt(b),d)}else this.invalidate(x)}invalidate(x=null,d=!0,g=!0){const E=this.graph.getDataModel();if(x=x??E.getRoot(),x){const b=this.getState(x);if(b&&(b.invalid=!0),!x.invalidating){if(x.invalidating=!0,d){const w=x.getChildCount();for(let C=0;C<w;C+=1){const S=x.getChildAt(C);this.invalidate(S,d,g)}}if(g){const w=x.getEdgeCount();for(let C=0;C<w;C+=1)this.invalidate(x.getEdgeAt(C),d,g)}x.invalidating=!1}}}validate(x=null){const d=GlobalConfig.logger.enter("GraphView.validate");this.resetValidationState();const g=x||(this.currentRoot??this.graph.getDataModel().getRoot());if(g){const E=this.getBoundingBox(this.validateCellState(g?this.validateCell(g):null));this.setGraphBounds(E??this.getEmptyBounds()),this.validateBackground(),this.resetValidationState()}GlobalConfig.logger.leave("GraphView.validate",d)}getEmptyBounds(){return new Rectangle(this.translate.x*this.scale,this.translate.y*this.scale)}getBoundingBox(x=null,d=!0){let g=null;if(x&&(x.shape&&x.shape.boundingBox&&(g=x.shape.boundingBox.clone()),x.text&&x.text.boundingBox&&(g?g.add(x.text.boundingBox):g=x.text.boundingBox.clone()),d)){const E=x.cell.getChildCount();for(let b=0;b<E;b+=1){const w=this.getBoundingBox(this.getState(x.cell.getChildAt(b)));w&&(g?g.add(w):g=w)}}return g}createBackgroundPageShape(x){return new RectangleShape(x,"white","black")}validateBackground(){this.validateBackgroundImage(),this.validateBackgroundPage()}validateBackgroundImage(){const x=this.graph.getBackgroundImage();if(x){if(!this.backgroundImage||this.backgroundImage.imageSrc!==x.src){this.backgroundImage&&this.backgroundImage.destroy();const d=new Rectangle(0,0,1,1);this.backgroundImage=new ImageShape(d,x.src),this.backgroundImage.dialect=this.graph.dialect,this.backgroundImage.init(this.backgroundPane),this.backgroundImage.redraw()}this.redrawBackgroundImage(this.backgroundImage,x)}else this.backgroundImage&&(this.backgroundImage.destroy(),this.backgroundImage=null)}validateBackgroundPage(){const x=this.graph;if(x.pageVisible){const d=this.getBackgroundPageBounds();this.backgroundPageShape==null?(this.backgroundPageShape=this.createBackgroundPageShape(d),this.backgroundPageShape.scale=this.scale,this.backgroundPageShape.isShadow=!0,this.backgroundPageShape.dialect=this.graph.dialect,this.backgroundPageShape.init(this.backgroundPane),this.backgroundPageShape.redraw(),this.backgroundPageShape.node&&(x.isNativeDblClickEnabled()&&InternalEvent.addListener(this.backgroundPageShape.node,"dblclick",(g=>{x.dblClick(g)})),InternalEvent.addGestureListeners(this.backgroundPageShape.node,g=>{x.fireMouseEvent(InternalEvent.MOUSE_DOWN,new InternalMouseEvent(g))},g=>{const E=x.getPlugin("TooltipHandler");E&&E.isHideOnHover()&&E.hide(),x.isMouseDown&&!isConsumed(g)&&x.fireMouseEvent(InternalEvent.MOUSE_MOVE,new InternalMouseEvent(g))},g=>{x.fireMouseEvent(InternalEvent.MOUSE_UP,new InternalMouseEvent(g))}))):(this.backgroundPageShape.scale=this.scale,this.backgroundPageShape.bounds=d,this.backgroundPageShape.redraw())}else this.backgroundPageShape&&(this.backgroundPageShape.destroy(),this.backgroundPageShape=null)}getBackgroundPageBounds(){const x=this.graph.pageFormat,d=this.scale*this.graph.pageScale;return new Rectangle(this.scale*this.translate.x,this.scale*this.translate.y,x.width*d,x.height*d)}redrawBackgroundImage(x,d){if(x.scale=this.scale,x.bounds){const g=x.bounds;g.x=this.scale*this.translate.x,g.y=this.scale*this.translate.y,g.width=this.scale*d.width,g.height=this.scale*d.height}x.redraw()}validateCell(x,d=!0){if(d=d&&x.isVisible(),this.getState(x,d)&&!d)this.removeState(x);else{const E=x.getChildCount();for(let b=0;b<E;b+=1)this.validateCell(x.getChildAt(b),d&&(!x.isCollapsed()||x===this.currentRoot))}return x}validateCellState(x,d=!0){let g=null;if(x&&(g=this.getState(x),g&&(g.invalid&&(g.invalid=!1,(!g.style||g.invalidStyle)&&(g.style=this.graph.getCellStyle(g.cell),g.invalidStyle=!1),x!==this.currentRoot&&this.validateCellState(x.getParent(),!1),g.setVisibleTerminalState(this.validateCellState(this.getVisibleTerminal(x,!0),!1),!0),g.setVisibleTerminalState(this.validateCellState(this.getVisibleTerminal(x,!1),!1),!1),this.updateCellState(g),x!==this.currentRoot&&!g.invalid&&(this.graph.cellRenderer.redraw(g,!1,this.isRendering()),g.updateCachedBounds())),d&&!g.invalid))){g.shape&&this.stateValidated(g);const E=x.getChildCount();for(let b=0;b<E;b+=1)this.validateCellState(x.getChildAt(b))}return g}updateCellState(x){const d=x.absoluteOffset,g=x.origin;if(d.x=0,d.y=0,g.x=0,g.y=0,x.length=0,x.cell!==this.currentRoot){const E=x.cell.getParent(),b=E?this.getState(E):null;b&&b.cell!==this.currentRoot&&(g.x+=b.origin.x,g.y+=b.origin.y);let w=this.graph.getChildOffsetForCell(x.cell);w&&(g.x+=w.x,g.y+=w.y);const C=x.cell.getGeometry();if(C){if(!x.cell.isEdge())if(w=C.offset?C.offset:this.EMPTY_POINT,C.relative&&b)if(b.cell.isEdge()){const S=this.getPoint(b,C);S&&(g.x+=S.x/this.scale-b.origin.x-this.translate.x,g.y+=S.y/this.scale-b.origin.y-this.translate.y)}else g.x+=C.x*b.unscaledWidth+w.x,g.y+=C.y*b.unscaledHeight+w.y;else d.x=this.scale*w.x,d.y=this.scale*w.y,g.x+=C.x,g.y+=C.y;x.x=this.scale*(this.translate.x+g.x),x.y=this.scale*(this.translate.y+g.y),x.width=this.scale*C.width,x.unscaledWidth=C.width,x.height=this.scale*C.height,x.unscaledHeight=C.height,x.cell.isVertex()&&this.updateVertexState(x,C),x.cell.isEdge()&&this.updateEdgeState(x,C)}}x.updateCachedBounds()}updateVertexState(x,d){const g=x.cell.getParent(),E=g?this.getState(g):null;if(d.relative&&E&&!E.cell.isEdge()){const b=toRadians(E.style.rotation??0);if(b!==0){const w=Math.cos(b),C=Math.sin(b),S=new Point(x.getCenterX(),x.getCenterY()),P=new Point(E.getCenterX(),E.getCenterY()),I=getRotatedPoint(S,w,C,P);x.x=I.x-x.width/2,x.y=I.y-x.height/2}}this.updateVertexLabelOffset(x)}updateEdgeState(x,d){const g=x.getVisibleTerminalState(!0),E=x.getVisibleTerminalState(!1);if(x.cell.getTerminal(!0)&&!g||!g&&!d.getTerminalPoint(!0)||x.cell.getTerminal(!1)&&!E||!E&&!d.getTerminalPoint(!1))this.clear(x.cell,!0);else{this.updateFixedTerminalPoints(x,g,E),this.updatePoints(x,d.points,g,E),this.updateFloatingTerminalPoints(x,g,E);const b=x.absolutePoints;x.cell!==this.currentRoot&&(b==null||b.length<2||b[0]==null||b[b.length-1]==null)?this.clear(x.cell,!0):(this.updateEdgeBounds(x),this.updateEdgeLabelOffset(x))}}updateVertexLabelOffset(x){const d=x.style.labelPosition??ALIGN.CENTER;if(d===ALIGN.LEFT){let E=x.style.labelWidth??null;E!=null?E*=this.scale:E=x.width,x.absoluteOffset.x-=E}else if(d===ALIGN.RIGHT)x.absoluteOffset.x+=x.width;else if(d===ALIGN.CENTER){const E=x.style.labelWidth??null;if(E!=null){const b=x.style.align??ALIGN.CENTER;let w=0;b===ALIGN.CENTER?w=.5:b===ALIGN.RIGHT&&(w=1),w!==0&&(x.absoluteOffset.x-=(E*this.scale-x.width)*w)}}const g=x.style.verticalLabelPosition??ALIGN.MIDDLE;g===ALIGN.TOP?x.absoluteOffset.y-=x.height:g===ALIGN.BOTTOM&&(x.absoluteOffset.y+=x.height)}resetValidationState(){this.lastNode=null,this.lastHtmlNode=null,this.lastForegroundNode=null,this.lastForegroundHtmlNode=null}stateValidated(x){const d=this.graph,g=x.cell.isEdge()&&d.keepEdgesInForeground||x.cell.isVertex()&&d.keepEdgesInBackground,E=g?this.lastForegroundHtmlNode||this.lastHtmlNode:this.lastHtmlNode,b=g?this.lastForegroundNode||this.lastNode:this.lastNode,w=d.cellRenderer.insertStateAfter(x,b,E);g?(this.lastForegroundHtmlNode=w[1],this.lastForegroundNode=w[0]):(this.lastHtmlNode=w[1],this.lastNode=w[0])}updateFixedTerminalPoints(x,d,g){this.updateFixedTerminalPoint(x,d,!0,this.graph.getConnectionConstraint(x,d,!0)),this.updateFixedTerminalPoint(x,g,!1,this.graph.getConnectionConstraint(x,g,!1))}updateFixedTerminalPoint(x,d,g,E){x.setAbsoluteTerminalPoint(this.getFixedTerminalPoint(x,d,g,E),g)}getFixedTerminalPoint(x,d,g,E){let b=null;if(E&&d&&(b=this.graph.getConnectionPoint(d,E,!1)),!b&&!d){const w=this.scale,C=this.translate,S=x.origin;b=x.cell.getGeometry().getTerminalPoint(g),b&&(b=new Point(w*(C.x+b.x+S.x),w*(C.y+b.y+S.y)))}return b}updateBoundsFromStencil(x){let d=null;if(x&&x.shape&&x.shape.stencil&&x.shape.stencil.aspect==="fixed"){d=Rectangle.fromRectangle(x);const g=x.shape.stencil.computeAspect(null,x.x,x.y,x.width,x.height);x.setRect(g.x,g.y,x.shape.stencil.w0*g.width,x.shape.stencil.h0*g.height)}return d}updatePoints(x,d,g,E){const b=[];b.push(x.absolutePoints[0]);const w=this.getEdgeStyle(x,d,g,E);if(w&&g){const S=this.getTerminalPort(x,g,!0),P=E?this.getTerminalPort(x,E,!1):null,I=this.updateBoundsFromStencil(S),M=this.updateBoundsFromStencil(P);w(x,S,P,d,b),S&&I&&S.setRect(I.x,I.y,I.width,I.height),P&&M&&P.setRect(M.x,M.y,M.width,M.height)}else if(d){for(let S=0;S<d.length;S+=1)if(d[S]){const P=clone(d[S]);b.push(this.transformControlPoint(x,P))}}const C=x.absolutePoints;b.push(C[C.length-1]),x.absolutePoints=b}transformControlPoint(x,d,g=!1){if(x&&d){const E=x.origin,b=g?1:this.scale;return new Point(b*(d.x+this.translate.x+E.x),b*(d.y+this.translate.y+E.y))}return null}isLoopStyleEnabled(x,d=[],g=null,E=null){const b=this.graph.getConnectionConstraint(x,g,!0),w=this.graph.getConnectionConstraint(x,E,!1);return(d==null||d.length<2)&&!((x.style.orthogonalLoop??!1)||(b==null||b.point==null)&&(w==null||w.point==null))?g!=null&&g===E:!1}getEdgeStyle(edge,points=[],source=null,target=null){let edgeStyle=this.isLoopStyleEnabled(edge,points,source,target)?edge.style.loopStyle??this.graph.defaultLoopStyle:edge.style.noEdgeStyle??!1?null:edge.style.edgeStyle;if(typeof edgeStyle=="string"){let tmp=StyleRegistry.getValue(edgeStyle);!tmp&&this.isAllowEval()&&(tmp=eval(edgeStyle)),edgeStyle=tmp}return typeof edgeStyle=="function"?edgeStyle:null}updateFloatingTerminalPoints(x,d,g){const E=x.absolutePoints,b=E[0];!E[E.length-1]&&g&&this.updateFloatingTerminalPoint(x,g,d,!1),!b&&d&&this.updateFloatingTerminalPoint(x,d,g,!0)}updateFloatingTerminalPoint(x,d,g,E){x.setAbsoluteTerminalPoint(this.getFloatingTerminalPoint(x,d,g,E),E)}getFloatingTerminalPoint(x,d,g,E){d=this.getTerminalPort(x,d,E);let b=this.getNextPoint(x,g,E);const w=this.graph.isOrthogonal(x),C=toRadians(d.style.rotation??0),S=new Point(d.getCenterX(),d.getCenterY());if(C!==0){const M=Math.cos(-C),D=Math.sin(-C);b=getRotatedPoint(b,M,D,S)}let P=x.style.perimeterSpacing??0;P+=x.style[E?"sourcePerimeterSpacing":"targetPerimeterSpacing"]??0;let I=this.getPerimeterPoint(d,b,C===0&&w,P);if(I&&C!==0){const M=Math.cos(C),D=Math.sin(C);I=getRotatedPoint(I,M,D,S)}return I}getTerminalPort(x,d,g=!1){const E=g?"sourcePort":"targetPort",b=x.style[E];if(b){const w=this.graph.getDataModel().getCell(b);if(w){const C=this.getState(w,!1);C&&(d=C)}}return d}getPerimeterPoint(x,d,g,E=0){let b=null;if(x!=null){const w=this.getPerimeterFunction(x);if(w!=null&&d!=null){const C=this.getPerimeterBounds(x,E);if(C.width>0||C.height>0){b=new Point(d.x,d.y);let S=!1,P=!1;x.cell.isVertex()&&(S=!!x.style.flipH,P=!!x.style.flipV,S&&(b.x=2*C.getCenterX()-b.x),P&&(b.y=2*C.getCenterY()-b.y)),b=w(C,x,b,g),b!=null&&(S&&(b.x=2*C.getCenterX()-b.x),P&&(b.y=2*C.getCenterY()-b.y))}}b==null&&(b=this.getPoint(x))}return b}getRoutingCenterX(x){const d=x.style?x.style.routingCenterX??0:0;return x.getCenterX()+d*x.width}getRoutingCenterY(x){const d=x.style?x.style.routingCenterY??0:0;return x.getCenterY()+d*x.height}getPerimeterBounds(x,d=0){return d+=x.style.perimeterSpacing??0,x.getPerimeterBounds(d*this.scale)}getPerimeterFunction(state){let perimeter=state.style.perimeter;if(typeof perimeter=="string"){let tmp=StyleRegistry.getValue(perimeter);tmp==null&&this.isAllowEval()&&(tmp=eval(perimeter)),perimeter=tmp}return typeof perimeter=="function"?perimeter:null}getNextPoint(x,d,g=!1){const E=x.absolutePoints;let b=null;if(E.length>=2){const w=E.length;b=E[g?Math.min(1,w-1):Math.max(0,w-2)]}return!b&&d&&(b=new Point(d.getCenterX(),d.getCenterY())),b}getVisibleTerminal(x,d){const g=this.graph.getDataModel();let E=x.getTerminal(d),b=E;for(;E&&E!==this.currentRoot;)(b&&!b.isVisible()||E.isCollapsed())&&(b=E),E=E.getParent();return b&&(!g.contains(b)||b.getParent()===g.getRoot()||b===this.currentRoot)&&(b=null),b}updateEdgeBounds(x){const d=x.absolutePoints,g=d[0],E=d[d.length-1];if(g&&E&&(g.x!==E.x||g.y!==E.y)){const S=E.x-g.x,P=E.y-g.y;x.terminalDistance=Math.sqrt(S*S+P*P)}else x.terminalDistance=0;let b=0;const w=[];let C=g;if(C){let S=C.x,P=C.y,I=S,M=P;for(let k=1;k<d.length;k+=1){const H=d[k];if(H){const F=C.x-H.x,j=C.y-H.y,$=Math.sqrt(F*F+j*j);w.push($),b+=$,C=H,S=Math.min(C.x,S),P=Math.min(C.y,P),I=Math.max(C.x,I),M=Math.max(C.y,M)}}x.length=b,x.segments=w;const D=1;x.x=S,x.y=P,x.width=Math.max(D,I-S),x.height=Math.max(D,M-P)}}getPoint(x,d=null){let g=x.getCenterX(),E=x.getCenterY();if(x.segments!=null&&(d==null||d.relative)){const b=d!=null?d.x/2:0,w=x.absolutePoints.length,C=Math.round((b+.5)*x.length);let S=x.segments[0],P=0,I=1;for(;C>=Math.round(P+S)&&I<w-1;)P+=S,S=x.segments[I++];const M=S===0?0:(C-P)/S,D=x.absolutePoints[I-1],k=x.absolutePoints[I];if(D!=null&&k!=null){let H=0,F=0,j=0;if(d!=null){H=d.y;const{offset:q}=d;q!=null&&(F=q.x,j=q.y)}const $=k.x-D.x,z=k.y-D.y,U=S===0?0:z/S,W=S===0?0:$/S;g=D.x+$*M+(U*H+F)*this.scale,E=D.y+z*M-(W*H-j)*this.scale}}else if(d!=null){const{offset:b}=d;b!=null&&(g+=b.x,E+=b.y)}return new Point(g,E)}getRelativePoint(x,d,g){const E=x.cell.getGeometry();if(E){const b=x.absolutePoints,w=b.length;if(E.relative&&w>1){const C=x.length,{segments:S}=x;let P=b[0],I=b[1],M=ptSegDistSq(P.x,P.y,I.x,I.y,d,g),D=0,k=0,H=0;for(let se=2;se<w;se+=1){P=I,I=b[se];const ge=ptSegDistSq(P.x,P.y,I.x,I.y,d,g);H+=S[se-2],ge<=M&&(M=ge,k=se-1,D=H)}const F=S[k];P=b[k],I=b[k+1];const j=P.x,$=P.y,z=I.x,U=I.y;let W=d,q=g;const Z=j-z,X=$-U;W-=z,q-=U;let K=0;W=Z-W,q=X-q;const ee=W*Z+q*X;ee<=0?K=0:K=ee*ee/(Z*Z+X*X);let te=Math.sqrt(K);te>F&&(te=F);let ce=Math.sqrt(ptSegDistSq(P.x,P.y,I.x,I.y,d,g));return relativeCcw(P.x,P.y,I.x,I.y,d,g)===-1&&(ce=-ce),new Point((C/2-D-te)/C*-2,ce/this.scale)}}return new Point}updateEdgeLabelOffset(x){const d=x.absolutePoints,g=x.absoluteOffset;if(g.x=x.getCenterX(),g.y=x.getCenterY(),d.length>0&&x.segments){const E=x.cell.getGeometry();if(E)if(E.relative){const b=this.getPoint(x,E);x.absoluteOffset=b}else{const b=d[0],w=d[d.length-1];if(b&&w){const C=w.x-b.x,S=w.y-b.y;let P=0,I=0;const M=E.offset;M&&(P=M.x,I=M.y);const D=b.x+C/2+P*this.scale,k=b.y+S/2+I*this.scale;g.x=D,g.y=k}}}}getState(x,d=!1){let g=this.states.get(x);return d&&(!g||this.updateStyle)&&x.isVisible()&&(g?g.style=this.graph.getCellStyle(x):(g=this.createState(x),this.states.put(x,g))),g}getCellStates(x=null){if(!x)return this.states.getValues();const d=[];for(const g of x){const E=this.getState(g);E&&d.push(E)}return d}removeState(x){const d=this.states.remove(x);return d&&(this.graph.cellRenderer.destroy(d),d.invalid=!0,d.destroy()),d}createState(x){return new CellState(this,x,this.graph.getCellStyle(x))}isContainerEvent(x){const d=getSource(x);return d&&(d===this.graph.container||d.parentNode===this.backgroundPane||d.parentNode&&d.parentNode.parentNode===this.backgroundPane||d===this.canvas.parentNode||d===this.canvas||d===this.backgroundPane||d===this.drawPane||d===this.overlayPane||d===this.decoratorPane)}isScrollEvent(x){const d=this.graph,g=getOffset(d.container),E=new Point(x.clientX-g.x,x.clientY-g.y),b=d.container,w=b.offsetWidth,C=b.clientWidth;if(w>C&&E.x>C+2&&E.x<=w)return!0;const S=b.offsetHeight,P=b.clientHeight;return S>P&&E.y>P+2&&E.y<=S}init(){this.installListeners(),this.createSvg()}installListeners(){const x=this.graph,{container:d}=x;Client.IS_TOUCH&&(InternalEvent.addListener(d,"gesturestart",(b=>{x.fireGestureEvent(b),InternalEvent.consume(b)})),InternalEvent.addListener(d,"gesturechange",(b=>{x.fireGestureEvent(b),InternalEvent.consume(b)})),InternalEvent.addListener(d,"gestureend",(b=>{x.fireGestureEvent(b),InternalEvent.consume(b)})));let g=null;InternalEvent.addGestureListeners(d,(b=>{this.isContainerEvent(b)&&(!Client.IS_GC&&!Client.IS_SF||!this.isScrollEvent(b))&&(x.fireMouseEvent(InternalEvent.MOUSE_DOWN,new InternalMouseEvent(b)),g=b.pointerId)}),b=>{this.isContainerEvent(b)&&(g===null||b.pointerId===g)&&x.fireMouseEvent(InternalEvent.MOUSE_MOVE,new InternalMouseEvent(b))},b=>{this.isContainerEvent(b)&&x.fireMouseEvent(InternalEvent.MOUSE_UP,new InternalMouseEvent(b)),g=null}),InternalEvent.addListener(d,"dblclick",(b=>{this.isContainerEvent(b)&&x.dblClick(b)}));const E=b=>{let w=null;if(Client.IS_TOUCH){const C=getClientX(b),S=getClientY(b),P=convertPoint(d,C,S),I=x.getCellAt(P.x,P.y);I&&(w=x.view.getState(I))}return w};x.addMouseListener({mouseDown:(b,w)=>{const C=x.getPlugin("PopupMenuHandler");C==null||C.hideMenu()},mouseMove:()=>{},mouseUp:()=>{}}),this.moveHandler=b=>{const w=x.getPlugin("TooltipHandler");w&&w.isHideOnHover()&&w.hide(),this.captureDocumentGesture&&x.isMouseDown&&x.container!=null&&!this.isContainerEvent(b)&&x.container.style.display!=="none"&&x.container.style.visibility!=="hidden"&&!isConsumed(b)&&x.fireMouseEvent(InternalEvent.MOUSE_MOVE,new InternalMouseEvent(b,E(b)))},this.endHandler=b=>{this.captureDocumentGesture&&x.isMouseDown&&x.container!=null&&!this.isContainerEvent(b)&&x.container.style.display!=="none"&&x.container.style.visibility!=="hidden"&&x.fireMouseEvent(InternalEvent.MOUSE_UP,new InternalMouseEvent(b))},InternalEvent.addGestureListeners(document,null,this.moveHandler,this.endHandler)}createSvg(){const{container:x}=this.graph,d=this.canvas=document.createElementNS("http://www.w3.org/2000/svg","g");this.backgroundPane=document.createElementNS("http://www.w3.org/2000/svg","g"),d.appendChild(this.backgroundPane),this.drawPane=document.createElementNS("http://www.w3.org/2000/svg","g"),d.appendChild(this.drawPane),this.overlayPane=document.createElementNS("http://www.w3.org/2000/svg","g"),d.appendChild(this.overlayPane),this.decoratorPane=document.createElementNS("http://www.w3.org/2000/svg","g"),d.appendChild(this.decoratorPane);const g=document.createElementNS("http://www.w3.org/2000/svg","svg");g.style.left="0px",g.style.top="0px",g.style.width="100%",g.style.height="100%",g.style.display="block",g.appendChild(this.canvas),x!=null&&(x.appendChild(g),this.updateContainerStyle(x))}createHtml(){const x=this.graph.container;x!=null&&(this.canvas=this.createHtmlPane("100%","100%"),this.canvas.style.overflow="hidden",this.backgroundPane=this.createHtmlPane("1px","1px"),this.drawPane=this.createHtmlPane("1px","1px"),this.overlayPane=this.createHtmlPane("1px","1px"),this.decoratorPane=this.createHtmlPane("1px","1px"),this.canvas.appendChild(this.backgroundPane),this.canvas.appendChild(this.drawPane),this.canvas.appendChild(this.overlayPane),this.canvas.appendChild(this.decoratorPane),x.appendChild(this.canvas),this.updateContainerStyle(x))}updateHtmlCanvasSize(x,d){if(this.graph.container!=null){const g=this.graph.container.offsetWidth,E=this.graph.container.offsetHeight;g<x?this.canvas.style.width=x+"px":this.canvas.style.width="100%",E<d?this.canvas.style.height=d+"px":this.canvas.style.height="100%"}}createHtmlPane(x,d){const g=document.createElement("DIV");return x!=null&&d!=null?(g.style.position="absolute",g.style.left="0px",g.style.top="0px",g.style.width=x,g.style.height=d):g.style.position="relative",g}updateContainerStyle(x){const d=getCurrentStyle(x);d!=null&&d.position=="static"&&(x.style.position="relative"),Client.IS_POINTER&&(x.style.touchAction="none")}destroy(){let x=null;this.canvas&&this.canvas instanceof SVGElement&&(x=this.canvas.ownerSVGElement),x||(x=this.canvas),x&&x.parentNode&&(this.clear(this.currentRoot,!0),InternalEvent.removeGestureListeners(document,null,this.moveHandler,this.endHandler),InternalEvent.release(this.graph.container),x.parentNode.removeChild(x),this.moveHandler=null,this.endHandler=null,this.canvas=null,this.backgroundPane=null,this.drawPane=null,this.overlayPane=null,this.decoratorPane=null)}}class PolylineShape extends Shape{constructor(d,g,E=1){super(),this.points=d,this.stroke=g,this.strokeWidth=E}getRotation(){return 0}getShapeRotation(){return 0}isPaintBoundsInverted(){return!1}paintEdgeShape(d,g){const E=d.pointerEventsValue;d.pointerEventsValue="stroke",!this.style||!this.style.curved?this.paintLine(d,g,this.isRounded):this.paintCurvedLine(d,g),d.pointerEventsValue=E}paintLine(d,g,E){var w;const b=((w=this.style)==null?void 0:w.arcSize)??LINE_ARCSIZE;d.begin(),this.addPoints(d,g,E,b,!1),d.stroke()}paintCurvedLine(d,g){d.begin();const E=g[0],b=g.length;d.moveTo(E.x,E.y);for(let S=1;S<b-2;S+=1){const P=g[S],I=g[S+1],M=(P.x+I.x)/2,D=(P.y+I.y)/2;d.quadTo(P.x,P.y,M,D)}const w=g[b-2],C=g[b-1];d.quadTo(w.x,w.y,C.x,C.y),d.stroke()}}class MarkerShape{static addMarker(d,g){MarkerShape.markers[d]=g}static createMarker(d,g,E,b,w,C,S,P,I,M){const D=MarkerShape.markers[E];return D?D(d,g,E,b,w,C,S,P,I,M):null}}MarkerShape.markers={};function createArrow(x){return(d,g,E,b,w,C,S,P,I,M)=>{const D=w*I*1.118,k=C*I*1.118;w*=S+I,C*=S+I;const H=b.clone();H.x-=D,H.y-=k;const F=E!==ARROW.CLASSIC&&E!==ARROW.CLASSIC_THIN?1:3/4;return b.x+=-w*F-D,b.y+=-C*F-k,()=>{d.begin(),d.moveTo(H.x,H.y),d.lineTo(H.x-w-C/x,H.y-C+w/x),(E===ARROW.CLASSIC||E===ARROW.CLASSIC_THIN)&&d.lineTo(H.x-w*3/4,H.y-C*3/4),d.lineTo(H.x+C/x-w,H.y-C-w/x),d.close(),M?d.fillAndStroke():d.stroke()}}}function createOpenArrow(x){return(d,g,E,b,w,C,S,P,I,M)=>{const D=w*I*1.118,k=C*I*1.118;w*=S+I,C*=S+I;const H=b.clone();return H.x-=D,H.y-=k,b.x+=-D*2,b.y+=-k*2,()=>{d.begin(),d.moveTo(H.x-w-C/x,H.y-C+w/x),d.lineTo(H.x,H.y),d.lineTo(H.x+C/x-w,H.y-C-w/x),d.stroke()}}}const oval=(x,d,g,E,b,w,C,S,P,I)=>{const M=C/2,D=E.clone();return E.x-=b*M,E.y-=w*M,()=>{x.ellipse(D.x-M,D.y-M,C,C),I?x.fillAndStroke():x.stroke()}};function diamond(x,d,g,E,b,w,C,S,P,I){const M=g===ARROW.DIAMOND?.7071:.9862,D=b*P*M,k=w*P*M;b*=C+P,w*=C+P;const H=E.clone();H.x-=D,H.y-=k,E.x+=-b-D,E.y+=-w-k;const F=g===ARROW.DIAMOND?2:3.4;return()=>{x.begin(),x.moveTo(H.x,H.y),x.lineTo(H.x-b/2-w/F,H.y+b/F-w/2),x.lineTo(H.x-b,H.y-w),x.lineTo(H.x-b/2+w/F,H.y-w/2-b/F),x.close(),I?x.fillAndStroke():x.stroke()}}let isDefaultMarkersRegistered=!1;const registerDefaultEdgeMarkers=()=>{isDefaultMarkersRegistered||(MarkerShape.addMarker("classic",createArrow(2)),MarkerShape.addMarker("classicThin",createArrow(3)),MarkerShape.addMarker("block",createArrow(2)),MarkerShape.addMarker("blockThin",createArrow(3)),MarkerShape.addMarker("open",createOpenArrow(2)),MarkerShape.addMarker("openThin",createOpenArrow(3)),MarkerShape.addMarker("oval",oval),MarkerShape.addMarker("diamond",diamond),MarkerShape.addMarker("diamondThin",diamond),isDefaultMarkersRegistered=!0)};class ConnectorShape extends PolylineShape{constructor(d,g,E){super(d,g,E)}updateBoundingBox(){var d;this.useSvgBoundingBox=!!((d=this.style)!=null&&d.curved),super.updateBoundingBox()}paintEdgeShape(d,g){var w,C,S,P;const E=this.createMarker(d,g,!0),b=this.createMarker(d,g,!1);if(super.paintEdgeShape(d,g),d.setShadow(!1),d.setDashed(!1),E){const I=((w=this.style)==null?void 0:w.startStrokeColor)??this.stroke;d.setStrokeColor(I),d.setFillColor(((C=this.style)==null?void 0:C.startFillColor)??I),E()}if(b){const I=((S=this.style)==null?void 0:S.endStrokeColor)??this.stroke;d.setStrokeColor(I),d.setFillColor(((P=this.style)==null?void 0:P.endFillColor)??I),b()}}createMarker(d,g,E){if(!this.style)return null;let b=null;const w=g.length,C=(E?this.style.startArrow:this.style.endArrow)||NONE;let S=E?g[1]:g[w-2];const P=E?g[0]:g[w-1];if(C!==NONE&&S!==null&&P!==null){let I=1;for(;I<w-1&&Math.round(S.x-P.x)===0&&Math.round(S.y-P.y)===0;)S=E?g[1+I]:g[w-2-I],I++;const M=P.x-S.x,D=P.y-S.y,k=Math.max(1,Math.sqrt(M*M+D*D)),H=M/k,F=D/k,j=(E?this.style.startSize:this.style.endSize)??DEFAULT_MARKERSIZE,$=(E?this.style.startFill:this.style.endFill)??!0;b=MarkerShape.createMarker(d,this,C,P,H,F,j,E,this.strokeWidth,$)}return b}augmentBoundingBox(d){if(super.augmentBoundingBox(d),!this.style)return;let g=0;this.style.startArrow!==NONE&&(g=(this.style.startSize??DEFAULT_MARKERSIZE)+1),this.style.endArrow!==NONE&&(g=Math.max(g,this.style.endSize??DEFAULT_MARKERSIZE)+1),d.grow(g*this.scale)}}class TextShape extends Shape{constructor(d,g,E=ALIGN.CENTER,b=ALIGN.MIDDLE,w="black",C=DEFAULT_FONTFAMILY,S=DEFAULT_FONTSIZE,P=DEFAULT_FONTSTYLE,I=2,M=0,D=0,k=0,H=0,F=!0,j=NONE,$=NONE,z=!1,U=!1,W="visible",q=0,Z=DEFAULT_TEXT_DIRECTION){super(),this.margin=null,this.unrotatedBoundingBox=null,this.flipH=!1,this.flipV=!1,this.baseSpacingTop=0,this.baseSpacingBottom=0,this.baseSpacingLeft=0,this.baseSpacingRight=0,this.replaceLinefeeds=!0,this.verticalTextRotation=-90,this.ignoreClippedStringSize=!0,this.ignoreStringSize=!1,this.lastValue=null,this.cacheEnabled=!0,this.value=d,this.bounds=g,this.color=w??"black",this.align=E??ALIGN.CENTER,this.valign=b??ALIGN.MIDDLE,this.family=C??DEFAULT_FONTFAMILY,this.size=S??DEFAULT_FONTSIZE,this.fontStyle=P??DEFAULT_FONTSTYLE,this.spacing=I??2,this.spacingTop=this.spacing+(M??0),this.spacingRight=this.spacing+(D??0),this.spacingBottom=this.spacing+(k??0),this.spacingLeft=this.spacing+(H??0),this.horizontal=F??!0,this.background=j,this.border=$,this.wrap=z??!1,this.clipped=U??!1,this.overflow=W??"visible",this.labelPadding=q??0,this.textDirection=Z,this.rotation=0,this.updateMargin()}getSvgScreenOffset(){return 0}checkBounds(){return!isNaN(this.scale)&&isFinite(this.scale)&&this.scale>0&&this.bounds&&!isNaN(this.bounds.x)&&!isNaN(this.bounds.y)&&!isNaN(this.bounds.width)&&!isNaN(this.bounds.height)}paint(d,g=!1){const E=this.scale,b=this.bounds.x/E,w=this.bounds.y/E,C=this.bounds.width/E,S=this.bounds.height/E;if(this.updateTransform(d,b,w,C,S),this.configureCanvas(d,b,w,C,S),g)d.updateText(b,w,C,S,this.align,this.valign,this.wrap,this.overflow,this.clipped,this.getTextRotation(),this.node);else{const P=isNode(this.value)||this.dialect===DIALECT.STRICTHTML,I=P?"html":"";let M=this.value;!P&&I==="html"&&(M=htmlEntities(M,!1)),I==="html"&&!isNode(this.value)&&(M=replaceTrailingNewlines(M,"<div><br></div>")),M=!isNode(this.value)&&this.replaceLinefeeds&&I==="html"?M.replace(/\n/g,"<br/>"):M;let D=this.textDirection;D===TEXT_DIRECTION.AUTO&&!P&&(D=this.getAutoDirection()),D!==TEXT_DIRECTION.LTR&&D!==TEXT_DIRECTION.RTL&&(D=TEXT_DIRECTION.DEFAULT),d.text(b,w,C,S,M,this.align,this.valign,this.wrap,I,this.overflow,this.clipped,this.getTextRotation(),D)}}redraw(){if(this.visible&&this.checkBounds()&&this.cacheEnabled&&this.lastValue===this.value&&(isNode(this.value)||this.dialect===DIALECT.STRICTHTML))if(this.node.nodeName==="DIV")this.redrawHtmlShape(),this.updateBoundingBox();else{const d=this.createCanvas();d&&(d.pointerEvents=this.pointerEvents,this.paint(d,!0),this.destroyCanvas(d),this.updateBoundingBox())}else super.redraw(),isNode(this.value)||this.dialect===DIALECT.STRICTHTML?this.lastValue=this.value:this.lastValue=null}resetStyles(){super.resetStyles(),this.color="black",this.align=ALIGN.CENTER,this.valign=ALIGN.MIDDLE,this.family=DEFAULT_FONTFAMILY,this.size=DEFAULT_FONTSIZE,this.fontStyle=DEFAULT_FONTSTYLE,this.spacing=2,this.spacingTop=2,this.spacingRight=2,this.spacingBottom=2,this.spacingLeft=2,this.horizontal=!0,this.background=NONE,this.border=NONE,this.textDirection=DEFAULT_TEXT_DIRECTION,this.margin=null}apply(d){const g=this.spacing;super.apply(d),this.style&&(this.fontStyle=this.style.fontStyle??this.fontStyle,this.family=this.style.fontFamily??this.family,this.size=this.style.fontSize??this.size,this.color=this.style.fontColor??this.color,this.align=this.style.align??this.align,this.valign=this.style.verticalAlign??this.valign,this.spacing=this.style.spacing??this.spacing,this.spacingTop=(this.style.spacingTop??this.spacingTop-g)+this.spacing,this.spacingRight=(this.style.spacingRight??this.spacingRight-g)+this.spacing,this.spacingBottom=(this.style.spacingBottom??this.spacingBottom-g)+this.spacing,this.spacingLeft=(this.style.spacingLeft??this.spacingLeft-g)+this.spacing,this.horizontal=this.style.horizontal??this.horizontal,this.background=this.style.labelBackgroundColor??this.background,this.border=this.style.labelBorderColor??this.border,this.textDirection=this.style.textDirection??DEFAULT_TEXT_DIRECTION,this.opacity=this.style.textOpacity??100,this.updateMargin()),this.flipV=!1,this.flipH=!1}getAutoDirection(){const d=/[A-Za-z\u05d0-\u065f\u066a-\u06ef\u06fa-\u07ff\ufb1d-\ufdff\ufe70-\ufefc]/.exec(String(this.value));return d&&d.length>0&&d[0]>"z"?TEXT_DIRECTION.RTL:TEXT_DIRECTION.LTR}getContentNode(){let d=this.node;return d&&(d.ownerSVGElement?d=d.firstChild.firstChild.firstChild.firstChild.firstChild:d=this.node.firstChild.firstChild),d}updateBoundingBox(){var w,C,S;let{node:d}=this;this.boundingBox=this.bounds.clone();const g=this.getTextRotation(),E=((w=this.style)==null?void 0:w.labelPosition)??ALIGN.CENTER,b=((C=this.style)==null?void 0:C.verticalLabelPosition)??ALIGN.MIDDLE;if(!this.ignoreStringSize&&d&&this.overflow!=="fill"&&(!this.clipped||!this.ignoreClippedStringSize||E!==ALIGN.CENTER||b!==ALIGN.MIDDLE)){let P=null,I=null;if(d.firstChild&&d.firstChild.firstChild&&d.firstChild.firstChild.nodeName==="foreignObject")d=d.firstChild.firstChild.firstChild.firstChild,I=d.offsetHeight*this.scale,this.overflow==="width"?P=this.boundingBox.width:P=d.offsetWidth*this.scale;else try{const M=d.getBBox();typeof this.value=="string"&&((S=trim(this.value))==null?void 0:S.length)===0?this.boundingBox=null:M.width===0&&M.height===0?this.boundingBox=null:this.boundingBox=new Rectangle(M.x,M.y,M.width,M.height);return}catch{}P&&I&&(this.boundingBox=new Rectangle(this.bounds.x,this.bounds.y,P,I))}if(this.boundingBox){const P=this.margin;if(g!==0){const I=getBoundingBox(new Rectangle(P.x*this.boundingBox.width,P.y*this.boundingBox.height,this.boundingBox.width,this.boundingBox.height),g,new Point(0,0));this.unrotatedBoundingBox=Rectangle.fromRectangle(this.boundingBox),this.unrotatedBoundingBox.x+=P.x*this.unrotatedBoundingBox.width,this.unrotatedBoundingBox.y+=P.y*this.unrotatedBoundingBox.height,this.boundingBox.x+=I.x,this.boundingBox.y+=I.y,this.boundingBox.width=I.width,this.boundingBox.height=I.height}else this.boundingBox.x+=P.x*this.boundingBox.width,this.boundingBox.y+=P.y*this.boundingBox.height,this.unrotatedBoundingBox=null}}getShapeRotation(){return 0}getTextRotation(){return this.state&&this.state.shape?this.state.shape.getTextRotation():0}isPaintBoundsInverted(){return!this.horizontal&&!!this.state&&this.state.cell.isVertex()}configureCanvas(d,g,E,b,w){super.configureCanvas(d,g,E,b,w),d.setFontColor(this.color),d.setFontBackgroundColor(this.background),d.setFontBorderColor(this.border),d.setFontFamily(this.family),d.setFontSize(this.size),d.setFontStyle(this.fontStyle)}getHtmlValue(){let d=this.value;return this.dialect!==DIALECT.STRICTHTML&&(d=htmlEntities(d,!1)),d=replaceTrailingNewlines(d,"<div><br></div>"),d=this.replaceLinefeeds?d.replace(/\n/g,"<br/>"):d,d}getTextCss(){const d=LINE_HEIGHT;let g=`display: inline-block; font-size: ${this.size}px; font-family: ${this.family}; color: ${this.color}; line-height: ${d}; pointer-events: ${this.pointerEvents?"all":"none"}; `;matchBinaryMask(this.fontStyle,FONT.BOLD)&&(g+="font-weight: bold; "),matchBinaryMask(this.fontStyle,FONT.ITALIC)&&(g+="font-style: italic; ");const E=[];return matchBinaryMask(this.fontStyle,FONT.UNDERLINE)&&E.push("underline"),matchBinaryMask(this.fontStyle,FONT.STRIKETHROUGH)&&E.push("line-through"),E.length>0&&(g+=`text-decoration: ${E.join(" ")}; `),g}redrawHtmlShape(){const d=Math.max(0,Math.round(this.bounds.width/this.scale)),g=Math.max(0,Math.round(this.bounds.height/this.scale)),E=`position: absolute; left: ${Math.round(this.bounds.x)}px; top: ${Math.round(this.bounds.y)}px; pointer-events: none; `,b=this.getTextCss(),w=this.margin,C=this.node;SvgCanvas2D.createCss(d+2,g,this.align,this.valign,this.wrap,this.overflow,this.clipped,this.background!==NONE?htmlEntities(this.background,!0):null,this.border!==NONE?htmlEntities(this.border,!0):null,E,b,this.scale,(S,P,I,M,D,k)=>{const H=this.getTextRotation();let F=(this.scale!==1?`scale(${this.scale}) `:"")+(H!==0?`rotate(${H}deg) `:"")+(w.x!==0||w.y!==0?`translate(${w.x*100}%,${w.y*100}%)`:"");F!==""&&(F=`transform-origin: 0 0; transform: ${F}; `),k===""?(I+=M,M=`display:inline-block; min-width: 100%; ${F}`):(M+=F,Client.IS_SF&&(M+="-webkit-clip-path: content-box;")),this.opacity<100&&(D+=`opacity: ${this.opacity/100}; `),C.setAttribute("style",I);const j=isNode(this.value)?this.value.outerHTML:this.getHtmlValue();C.firstChild||(C.innerHTML=`<div><div>${j}</div></div>`),C.firstChild.firstChild.setAttribute("style",D),C.firstChild.setAttribute("style",M)})}updateInnerHtml(d){if(isNode(this.value))d.innerHTML=this.value.outerHTML;else{let g=this.value;this.dialect!==DIALECT.STRICTHTML&&(g=htmlEntities(g,!1)),g=replaceTrailingNewlines(g,"<div>&nbsp;</div>"),g=this.replaceLinefeeds?g.replace(/\n/g,"<br/>"):g,g=`<div style="display:inline-block;_display:inline;">${g}</div>`,d.innerHTML=g}}updateValue(){const d=this.node;if(isNode(this.value))d.innerHTML="",d.appendChild(this.value);else{let g=this.value;this.dialect!==DIALECT.STRICTHTML&&(g=htmlEntities(g,!1)),g=replaceTrailingNewlines(g,"<div><br></div>"),g=this.replaceLinefeeds?g.replace(/\n/g,"<br/>"):g;const E=this.background!==NONE?this.background:null,b=this.border!==NONE?this.border:null;if(this.overflow==="fill"||this.overflow==="width")E&&(d.style.backgroundColor=E),b&&(d.style.border=`1px solid ${b}`);else{let C="";E&&(C+=`background-color:${htmlEntities(E,!0)};`),b&&(C+=`border:1px solid ${htmlEntities(b,!0)};`),g=`<div style="zoom:1;${C}display:inline-block;_display:inline;text-decoration:inherit;padding-bottom:1px;padding-right:1px;line-height:${LINE_HEIGHT}">${g}</div>`}d.innerHTML=g;const w=d.getElementsByTagName("div");if(w.length>0){let C=this.textDirection;C===TEXT_DIRECTION.AUTO&&this.dialect!==DIALECT.STRICTHTML&&(C=this.getAutoDirection()),C===TEXT_DIRECTION.LTR||C===TEXT_DIRECTION.RTL?w[w.length-1].setAttribute("dir",C):w[w.length-1].removeAttribute("dir")}}}updateFont(d){const{style:g}=d;g.lineHeight=LINE_HEIGHT,g.fontSize=`${this.size}px`,g.fontFamily=this.family,g.verticalAlign="top",g.color=this.color,matchBinaryMask(this.fontStyle,FONT.BOLD)?g.fontWeight="bold":g.fontWeight="",matchBinaryMask(this.fontStyle,FONT.ITALIC)?g.fontStyle="italic":g.fontStyle="";const E=[];matchBinaryMask(this.fontStyle,FONT.UNDERLINE)&&E.push("underline"),matchBinaryMask(this.fontStyle,FONT.STRIKETHROUGH)&&E.push("line-through"),E.length>0&&(g.textDecoration=E.join(" ")),this.align===ALIGN.CENTER?g.textAlign="center":this.align===ALIGN.RIGHT?g.textAlign="right":g.textAlign="left"}updateSize(d,g=!1){const E=Math.max(0,Math.round(this.bounds.width/this.scale)),b=Math.max(0,Math.round(this.bounds.height/this.scale)),{style:w}=d;if(this.clipped?(w.overflow="hidden",w.maxHeight=`${b}px`,w.maxWidth=`${E}px`):this.overflow==="fill"?(w.width=`${E+1}px`,w.height=`${b+1}px`,w.overflow="hidden"):this.overflow==="width"&&(w.width=`${E+1}px`,w.maxHeight=`${b+1}px`,w.overflow="hidden"),this.wrap&&E>0){if(w.wordWrap=WORD_WRAP,w.whiteSpace="normal",w.width=`${E}px`,g&&this.overflow!=="fill"&&this.overflow!=="width"){let C=d;C.firstChild!=null&&C.firstChild.nodeName==="DIV"&&(C=C.firstChild,d.style.wordWrap==="break-word"&&(C.style.width="100%"));let S=C.offsetWidth;if(S===0){const P=d.parentNode;d.style.visibility="hidden",document.body.appendChild(d),S=C.offsetWidth,d.style.visibility="",P.appendChild(d)}S+=3,this.clipped&&(S=Math.min(S,E)),w.width=`${S}px`}}else w.whiteSpace="nowrap"}updateMargin(){this.margin=getAlignmentAsPoint(this.align,this.valign)}getSpacing(){let d=0,g=0;return this.align===ALIGN.CENTER?d=(this.spacingLeft-this.spacingRight)/2:this.align===ALIGN.RIGHT?d=-this.spacingRight-this.baseSpacingRight:d=this.spacingLeft+this.baseSpacingLeft,this.valign===ALIGN.MIDDLE?g=(this.spacingTop-this.spacingBottom)/2:this.valign===ALIGN.BOTTOM?g=-this.spacingBottom-this.baseSpacingBottom:g=this.spacingTop+this.baseSpacingTop,new Point(d,g)}}class StencilShapeRegistry{static addStencil(d,g){StencilShapeRegistry.stencils[d]=g}static getStencil(d){return StencilShapeRegistry.stencils[d]}}StencilShapeRegistry.stencils={};const placeholderStyleValues=["inherit","swimlane","indicated"],placeholderStyleProperties=["fillColor","strokeColor","gradientColor","fontColor"];class CellRenderer{constructor(){this.defaultEdgeShape=ConnectorShape,this.defaultVertexShape=RectangleShape,this.defaultTextShape=TextShape,this.legacyControlPosition=!0,this.legacySpacing=!0,this.antiAlias=!0,this.minSvgStrokeWidth=1,this.forceControlClickHandler=!1}static registerShape(d,g){CellRenderer.defaultShapes[d]=g}initializeShape(d){d.shape&&(d.shape.dialect=d.view.graph.dialect,this.configureShape(d),d.shape.init(d.view.getDrawPane()))}createShape(d){let g=null;const E=StencilShapeRegistry.getStencil(d.style.shape);if(E)g=new Shape(E);else{const b=this.getShapeConstructor(d);g=new b}return g}createIndicatorShape(d){d.shape&&(d.shape.indicatorShape=this.getShape(d.getIndicatorShape()||null))}getShape(d){return d?CellRenderer.defaultShapes[d]:null}getShapeConstructor(d){let g=this.getShape(d.style.shape||null);return g||(g=d.cell.isEdge()?this.defaultEdgeShape:this.defaultVertexShape),g}configureShape(d){const g=d.shape;g&&(g.apply(d),g.imageSrc=d.getImageSrc()||null,g.indicatorColor=d.getIndicatorColor()||NONE,g.indicatorStrokeColor=d.style.indicatorStrokeColor||NONE,g.indicatorGradientColor=d.getIndicatorGradientColor()||NONE,d.style.indicatorDirection&&(g.indicatorDirection=d.style.indicatorDirection),g.indicatorImageSrc=d.getIndicatorImageSrc()||null,this.postConfigureShape(d))}postConfigureShape(d){d.shape&&(this.resolveColor(d,"indicatorGradientColor","gradientColor"),this.resolveColor(d,"indicatorColor","fillColor"),this.resolveColor(d,"gradient","gradientColor"),this.resolveColor(d,"stroke","strokeColor"),this.resolveColor(d,"fill","fillColor"))}checkPlaceholderStyles(d){for(const g of placeholderStyleProperties)if(placeholderStyleValues.includes(d.style[g]))return!0;return!1}resolveColor(d,g,E){const b=E==="fontColor"?d.text:d.shape;if(b){const w=d.view.graph,C=b[g];let S=null;if(C==="inherit"?S=d.cell.getParent():C==="swimlane"?(b[g]=E==="strokeColor"||E==="fontColor"?"#000000":"#ffffff",d.cell.getTerminal(!1)?S=d.cell.getTerminal(!1):S=d.cell,S=w.getSwimlane(S),E=w.swimlaneIndicatorColorAttribute):C==="indicated"&&d.shape?b[g]=d.shape.indicatorColor:E!=="fillColor"&&C==="fillColor"&&d.shape?b[g]=d.style.fillColor:E!=="strokeColor"&&C==="strokeColor"&&d.shape&&(b[g]=d.style.strokeColor),S){const P=w.getView().getState(S);if(b[g]=null,P){const I=E==="fontColor"?P.text:P.shape;I&&g!=="indicatorColor"?b[g]=I[g]:b[g]=P.style[E]}}}}getLabelValue(d){return d.view.graph.getLabel(d.cell)}createLabel(d,g){const E=d.view.graph;if((d.style.fontSize||0)>0||d.style.fontSize==null){const b=E.isHtmlLabel(d.cell)||isNode(g);d.text=new this.defaultTextShape(g,new Rectangle,d.style.align??ALIGN.CENTER,d.getVerticalAlign(),d.style.fontColor,d.style.fontFamily,d.style.fontSize,d.style.fontStyle,d.style.spacing,d.style.spacingTop,d.style.spacingRight,d.style.spacingBottom,d.style.spacingLeft,d.style.horizontal,d.style.labelBackgroundColor,d.style.labelBorderColor,E.isWrapping(d.cell)&&E.isHtmlLabel(d.cell),E.isLabelClipped(d.cell),d.style.overflow,d.style.labelPadding,d.style.textDirection??DEFAULT_TEXT_DIRECTION),d.text.opacity=d.style.textOpacity??100,d.text.dialect=b?DIALECT.STRICTHTML:E.dialect,d.text.style=d.style,d.text.state=d,this.initializeLabel(d,d.text);let w=!1;const C=S=>{let P=d;if(Client.IS_TOUCH||w){const I=getClientX(S),M=getClientY(S),D=convertPoint(E.container,I,M);P=E.view.getState(E.getCellAt(D.x,D.y))}return P};InternalEvent.addGestureListeners(d.text.node,S=>{if(this.isLabelEvent(d,S)){E.fireMouseEvent(InternalEvent.MOUSE_DOWN,new InternalMouseEvent(S,d));const P=getSource(S);w=E.dialect!==DIALECT.SVG&&P.nodeName==="IMG"}},S=>{this.isLabelEvent(d,S)&&E.fireMouseEvent(InternalEvent.MOUSE_MOVE,new InternalMouseEvent(S,C(S)))},S=>{this.isLabelEvent(d,S)&&(E.fireMouseEvent(InternalEvent.MOUSE_UP,new InternalMouseEvent(S,C(S))),w=!1)}),E.isNativeDblClickEnabled()&&InternalEvent.addListener(d.text.node,"dblclick",S=>{this.isLabelEvent(d,S)&&(E.dblClick(S,d.cell),InternalEvent.consume(S))})}}initializeLabel(d,g){if(Client.IS_SVG&&Client.NO_FO&&g.dialect!==DIALECT.SVG){const E=d.view.graph;g.init(E.container)}else g.init(d.view.getDrawPane())}createCellOverlays(d){const g=d.view.graph,E=g.getCellOverlays(d.cell),b=new Dictionary;for(let w=0;w<E.length;w+=1){const C=d.overlays.remove(E[w]);if(C)b.put(E[w],C);else{const S=new ImageShape(new Rectangle,E[w].image.src);S.dialect=g.dialect,S.preserveImageAspect=!1,S.overlay=E[w],this.initializeOverlay(d,S),this.installCellOverlayListeners(d,E[w],S),E[w].cursor&&(S.node.style.cursor=E[w].cursor),b.put(E[w],S)}}d.overlays.visit((w,C)=>{C.destroy()}),d.overlays=b}initializeOverlay(d,g){g.init(d.view.getOverlayPane())}installCellOverlayListeners(d,g,E){const b=d.view.graph;InternalEvent.addListener(E.node,"click",w=>{b.isEditing()&&b.stopEditing(!b.isInvokesStopCellEditing()),g.fireEvent(new EventObject(InternalEvent.CLICK,{event:w,cell:d.cell}))}),InternalEvent.addGestureListeners(E.node,w=>{InternalEvent.consume(w)},w=>{b.fireMouseEvent(InternalEvent.MOUSE_MOVE,new InternalMouseEvent(w,d))}),Client.IS_TOUCH&&InternalEvent.addListener(E.node,"touchend",w=>{g.fireEvent(new EventObject(InternalEvent.CLICK,{event:w,cell:d.cell}))})}createControl(d){const g=d.view.graph,E=g.getFoldingImage(d);if(g.isFoldingEnabled()&&E){if(!d.control){const b=new Rectangle(0,0,E.width,E.height);d.control=new ImageShape(b,E.src),d.control.preserveImageAspect=!1,d.control.dialect=g.dialect,this.initControl(d,d.control,!0,this.createControlClickHandler(d))}}else d.control&&(d.control.destroy(),d.control=null)}createControlClickHandler(d){const g=d.view.graph;return E=>{if(this.forceControlClickHandler||g.isEnabled()){const b=!d.cell.isCollapsed();g.foldCells(b,!1,[d.cell],!1,E),InternalEvent.consume(E)}}}initControl(d,g,E,b){const w=d.view.graph;w.isHtmlLabel(d.cell)&&Client.NO_FO&&w.dialect===DIALECT.SVG?(g.dialect=DIALECT.PREFERHTML,g.init(w.container),g.node.style.zIndex=String(1)):g.init(d.view.getOverlayPane());const S=g.node;if(b&&!Client.IS_IOS&&(w.isEnabled()&&(S.style.cursor="pointer"),InternalEvent.addListener(S,"click",b)),E){let P=null;InternalEvent.addGestureListeners(S,I=>{P=new Point(getClientX(I),getClientY(I)),w.fireMouseEvent(InternalEvent.MOUSE_DOWN,new InternalMouseEvent(I,d)),InternalEvent.consume(I)},I=>{w.fireMouseEvent(InternalEvent.MOUSE_MOVE,new InternalMouseEvent(I,d))},I=>{w.fireMouseEvent(InternalEvent.MOUSE_UP,new InternalMouseEvent(I,d)),InternalEvent.consume(I)}),b&&Client.IS_IOS&&S.addEventListener("touchend",I=>{if(P){const M=w.getEventTolerance();Math.abs(P.x-getClientX(I))<M&&Math.abs(P.y-getClientY(I))<M&&(b.call(b,I),InternalEvent.consume(I))}},!0)}return S}isShapeEvent(d,g){return!0}isLabelEvent(d,g){return!0}installListeners(d){const g=d.view.graph,E=b=>{let w=d;const C=getSource(b);if(C&&g.dialect!==DIALECT.SVG&&C.nodeName==="IMG"||Client.IS_TOUCH){const S=getClientX(b),P=getClientY(b),I=convertPoint(g.container,S,P),M=g.getCellAt(I.x,I.y);w=M?g.view.getState(M):null}return w};d.shape&&(InternalEvent.addGestureListeners(d.shape.node,b=>{this.isShapeEvent(d,b)&&g.fireMouseEvent(InternalEvent.MOUSE_DOWN,new InternalMouseEvent(b,d))},b=>{this.isShapeEvent(d,b)&&g.fireMouseEvent(InternalEvent.MOUSE_MOVE,new InternalMouseEvent(b,E(b)))},b=>{this.isShapeEvent(d,b)&&g.fireMouseEvent(InternalEvent.MOUSE_UP,new InternalMouseEvent(b,E(b)))}),g.isNativeDblClickEnabled()&&InternalEvent.addListener(d.shape.node,"dblclick",b=>{this.isShapeEvent(d,b)&&(g.dblClick(b,d.cell),InternalEvent.consume(b))}))}redrawLabel(d,g){const E=d.view.graph,b=this.getLabelValue(d),w=E.isWrapping(d.cell),C=E.isLabelClipped(d.cell),P=E.isHtmlLabel(d.cell)||b&&isNode(b)?DIALECT.STRICTHTML:E.dialect,I=d.style.overflow??"visible";if(d.text&&(d.text.wrap!==w||d.text.clipped!==C||d.text.overflow!==I||d.text.dialect!==P)&&(d.text.destroy(),d.text=null),d.text==null&&b!=null&&(isNode(b)||b.length>0)?this.createLabel(d,b):d.text!=null&&(b==null||b.length==0)&&(d.text.destroy(),d.text=null),d.text!=null){g&&(d.text.lastValue!=null&&this.isTextShapeInvalid(d,d.text)&&(d.text.lastValue=null),d.text.resetStyles(),d.text.apply(d),d.text.valign=d.getVerticalAlign());const M=this.getLabelBounds(d),D=this.getTextScale(d);if(this.resolveColor(d,"color","fontColor"),g||d.text.value!==b||d.text.wrap!==w||d.text.overflow!==I||d.text.clipped!==C||d.text.scale!==D||d.text.dialect!==P||d.text.bounds==null||!d.text.bounds.equals(M)){d.text.dialect=P,d.text.value=b,d.text.bounds=M,d.text.scale=D,d.text.wrap=w,d.text.clipped=C,d.text.overflow=I;const k=d.text.node.style.visibility;this.redrawLabelShape(d.text),d.text.node.style.visibility=k}}}isTextShapeInvalid(d,g){function E(b,w,C){let S=!1;return w==="spacingTop"||w==="spacingRight"||w==="spacingBottom"||w==="spacingLeft"?S=parseFloat(String(g[b]))-parseFloat(String(g.spacing))!==(d.style[w]||C):S=g[b]!==(d.style[w]||C),S}return E("fontStyle","fontStyle",DEFAULT_FONTSTYLE)||E("family","fontFamily",DEFAULT_FONTFAMILY)||E("size","fontSize",DEFAULT_FONTSIZE)||E("color","fontColor","black")||E("align","align","")||E("valign","verticalAlign","")||E("spacing","spacing",2)||E("spacingTop","spacingTop",0)||E("spacingRight","spacingRight",0)||E("spacingBottom","spacingBottom",0)||E("spacingLeft","spacingLeft",0)||E("horizontal","horizontal",!0)||E("background","labelBackgroundColor",null)||E("border","labelBorderColor",null)||E("opacity","textOpacity",100)||E("textDirection","textDirection",DEFAULT_TEXT_DIRECTION)}redrawLabelShape(d){d.redraw()}getTextScale(d){return d.view.scale}getLabelBounds(d){const{scale:g}=d.view,E=d.cell.isEdge();let b=new Rectangle(d.absoluteOffset.x,d.absoluteOffset.y);if(E){const C=d.text.getSpacing();b.x+=C.x*g,b.y+=C.y*g;const S=d.cell.getGeometry();S!=null&&(b.width=Math.max(0,S.width*g),b.height=Math.max(0,S.height*g))}else{if(d.text.isPaintBoundsInverted()){const C=b.x;b.x=b.y,b.y=C}b.x+=d.x,b.y+=d.y,b.width=Math.max(1,d.width),b.height=Math.max(1,d.height)}if(d.text.isPaintBoundsInverted()){const C=(d.width-d.height)/2;b.x+=C,b.y-=C;const S=b.width;b.width=b.height,b.height=S}if(d.shape!=null){const C=d.style.labelPosition??ALIGN.CENTER,S=d.style.verticalLabelPosition??ALIGN.MIDDLE;C===ALIGN.CENTER&&S===ALIGN.MIDDLE&&(b=d.shape.getLabelBounds(b))}const w=d.style.labelWidth??null;return w!=null&&(b.width=w*g),E||this.rotateLabelBounds(d,b),b}rotateLabelBounds(d,g){if(g.y-=d.text.margin.y*g.height,g.x-=d.text.margin.x*g.width,!this.legacySpacing||d.style.overflow!=="fill"&&d.style.overflow!=="width"){const b=d.view.scale,w=d.text.getSpacing();g.x+=w.x*b,g.y+=w.y*b;const C=d.style.labelPosition??ALIGN.CENTER,S=d.style.verticalLabelPosition??ALIGN.MIDDLE,P=d.style.labelWidth??null;g.width=Math.max(0,g.width-(C===ALIGN.CENTER&&P==null?d.text.spacingLeft*b+d.text.spacingRight*b:0)),g.height=Math.max(0,g.height-(S===ALIGN.MIDDLE?d.text.spacingTop*b+d.text.spacingBottom*b:0))}const E=d.text.getTextRotation();if(E!==0&&d!=null&&d.cell.isVertex()){const b=d.getCenterX(),w=d.getCenterY();if(g.x!==b||g.y!==w){const C=E*(Math.PI/180),S=getRotatedPoint(new Point(g.x,g.y),Math.cos(C),Math.sin(C),new Point(b,w));g.x=S.x,g.y=S.y}}}redrawCellOverlays(d,g=!1){if(this.createCellOverlays(d),d.overlays!=null){const E=mod(d.style.rotation??0,90),b=toRadians(E),w=Math.cos(b),C=Math.sin(b);d.overlays.visit((S,P)=>{const I=P.overlay.getBounds(d);if(!d.cell.isEdge()&&d.shape!=null&&E!==0){let M=I.getCenterX(),D=I.getCenterY();const k=getRotatedPoint(new Point(M,D),w,C,new Point(d.getCenterX(),d.getCenterY()));M=k.x,D=k.y,I.x=Math.round(M-I.width/2),I.y=Math.round(D-I.height/2)}(g||P.bounds==null||P.scale!==d.view.scale||!P.bounds.equals(I))&&(P.bounds=I,P.scale=d.view.scale,P.redraw())})}}redrawControl(d,g=!1){const E=d.view.graph.getFoldingImage(d);if(d.control!=null&&E!=null){const b=this.getControlBounds(d,E.width,E.height),w=this.legacyControlPosition?d.style.rotation??0:d.shape.getTextRotation(),C=d.view.scale;(g||d.control.scale!==C||!d.control.bounds.equals(b)||d.control.rotation!==w)&&(d.control.rotation=w,d.control.bounds=b,d.control.scale=C,d.control.redraw())}}getControlBounds(d,g,E){if(d.control!=null){const b=d.view.scale;let w=d.getCenterX(),C=d.getCenterY();if(!d.cell.isEdge()&&(w=d.x+g*b,C=d.y+E*b,d.shape!=null)){let S=d.shape.getShapeRotation();if(this.legacyControlPosition)S=d.style.rotation??0;else if(d.shape.isPaintBoundsInverted()){const P=(d.width-d.height)/2;w+=P,C-=P}if(S!==0){const P=toRadians(S),I=Math.cos(P),M=Math.sin(P),D=getRotatedPoint(new Point(w,C),I,M,new Point(d.getCenterX(),d.getCenterY()));w=D.x,C=D.y}}return d.cell.isEdge()?new Rectangle(Math.round(w-g/2*b),Math.round(C-E/2*b),Math.round(g*b),Math.round(E*b)):new Rectangle(Math.round(w-g/2*b),Math.round(C-E/2*b),Math.round(g*b),Math.round(E*b))}return null}insertStateAfter(d,g,E){const b=d.view.graph,w=this.getShapesForState(d);for(let C=0;C<w.length;C+=1)if(w[C]!=null&&w[C].node!=null){const S=w[C].node.parentNode!==d.view.getDrawPane()&&w[C].node.parentNode!==d.view.getOverlayPane(),P=S?E:g;if(P!=null&&P.nextSibling!==w[C].node)P.nextSibling==null?P.parentNode.appendChild(w[C].node):P.parentNode.insertBefore(w[C].node,P.nextSibling);else if(P==null){const I=w[C].node;if(I.parentNode===b.container){let{canvas:M}=d.view;for(;M!=null&&M.parentNode!==b.container;)M=M.parentNode;M!=null&&M.nextSibling!=null?M.nextSibling!==I&&I.parentNode.insertBefore(I,M.nextSibling):I.parentNode.appendChild(I)}else I.parentNode!=null&&I.parentNode.firstChild!=null&&I.parentNode.firstChild!=I&&I.parentNode.insertBefore(I,I.parentNode.firstChild)}S?E=w[C].node:g=w[C].node}return[g,E]}getShapesForState(d){return[d.shape,d.text,d.control]}redraw(d,g=!1,E=!0){const b=this.redrawShape(d,g,E);d.shape!=null&&E&&(this.redrawLabel(d,b),this.redrawCellOverlays(d,b),this.redrawControl(d,b))}redrawShape(d,g=!1,E=!0){let b=!1;const w=d.view.graph;if(d.shape!=null&&d.shape.style!=null&&d.style!=null&&d.shape.style.shape!==d.style.shape&&(d.shape.destroy(),d.shape=null),d.shape==null&&w.container!=null&&d.cell!==d.view.currentRoot&&(d.cell.isVertex()||d.cell.isEdge())){if(d.shape=this.createShape(d),d.shape!=null){d.shape.minSvgStrokeWidth=this.minSvgStrokeWidth,d.shape.antiAlias=this.antiAlias,this.createIndicatorShape(d),this.initializeShape(d),this.createCellOverlays(d),this.installListeners(d);const C=w.getPlugin("SelectionCellsHandler");C==null||C.updateHandler(d)}}else if(!g&&d.shape!=null&&(!equalEntries(d.shape.style,d.style)||this.checkPlaceholderStyles(d))){d.shape.resetStyles(),this.configureShape(d);const C=w.getPlugin("SelectionCellsHandler");C==null||C.updateHandler(d),g=!0}return d.shape!=null&&d.shape.indicatorShape!=this.getShape(d.getIndicatorShape())&&(d.shape.indicator!=null&&(d.shape.indicator.destroy(),d.shape.indicator=null),this.createIndicatorShape(d),d.shape.indicatorShape!=null&&(d.shape.indicator=new d.shape.indicatorShape,d.shape.indicator.dialect=d.shape.dialect,d.shape.indicator.init(d.node),g=!0)),d.shape&&(this.createControl(d),(g||this.isShapeInvalid(d,d.shape))&&(d.absolutePoints.length>0?(d.shape.points=d.absolutePoints.slice(),d.shape.bounds=null):(d.shape.points=[],d.shape.bounds=new Rectangle(d.x,d.y,d.width,d.height)),d.shape.scale=d.view.scale,E==null||E?this.doRedrawShape(d):d.shape.updateBoundingBox(),b=!0)),b}doRedrawShape(d){var g;(g=d.shape)==null||g.redraw()}isShapeInvalid(d,g){return g.bounds==null||g.scale!==d.view.scale||d.absolutePoints.length===0&&!g.bounds.equals(d)||d.absolutePoints.length>0&&!equalPoints(g.points,d.absolutePoints)}destroy(d){d.shape&&(d.text&&(d.text.destroy(),d.text=null),d.overlays.visit((g,E)=>{E.destroy()}),d.overlays=new Dictionary,d.control&&(d.control.destroy(),d.control=null),d.shape.destroy(),d.shape=null)}}CellRenderer.defaultShapes={};class ChildChange{constructor(d,g,E,b=0){this.model=d,this.parent=g,this.previous=g,this.child=E,this.index=b,this.previousIndex=b}execute(){let d=this.child.getParent();const g=d?d.getIndex(this.child):0;this.previous||this.connect(this.child,!1),d=this.model.parentForCellChanged(this.child,this.previous,this.previousIndex),this.previous&&this.connect(this.child,!0),this.parent=this.previous,this.previous=d,this.index=this.previousIndex,this.previousIndex=g}connect(d,g=!0){const E=d.getTerminal(!0),b=d.getTerminal(!1);E&&(g?this.model.terminalForCellChanged(d,E,!0):this.model.terminalForCellChanged(d,null,!0)),b&&(g?this.model.terminalForCellChanged(d,b,!1):this.model.terminalForCellChanged(d,null,!1)),d.setTerminal(E,!0),d.setTerminal(b,!1);const w=d.getChildCount();for(let C=0;C<w;C+=1)this.connect(d.getChildAt(C),g)}}class CollapseChange{constructor(d,g,E){this.model=d,this.cell=g,this.collapsed=E,this.previous=E}execute(){this.collapsed=this.previous,this.previous=this.model.collapsedStateForCellChanged(this.cell,this.previous)}}class GeometryChange{constructor(d,g,E){this.model=d,this.cell=g,this.geometry=E,this.previous=E}execute(){this.geometry=this.previous,this.previous=this.model.geometryForCellChanged(this.cell,this.previous)}}class RootChange{constructor(d,g){this.model=d,this.root=g,this.previous=g}execute(){this.root=this.previous,this.previous=this.model.rootChanged(this.previous)}}class StyleChange{constructor(d,g,E){this.model=d,this.cell=g,this.style=E,this.previous=E}execute(){this.style=this.previous,this.previous=this.model.styleForCellChanged(this.cell,this.previous)}}class TerminalChange{constructor(d,g,E,b){this.model=d,this.cell=g,this.terminal=E,this.previous=E,this.source=b}execute(){this.terminal=this.previous,this.previous=this.model.terminalForCellChanged(this.cell,this.previous,this.source)}}class ValueChange{constructor(d,g,E){this.model=d,this.cell=g,this.value=E,this.previous=E}execute(){this.value=this.previous,this.previous=this.model.valueForCellChanged(this.cell,this.previous)}}class VisibleChange{constructor(d,g,E){this.model=d,this.cell=g,this.visible=E,this.previous=E}execute(){this.visible=this.previous,this.previous=this.model.visibleStateForCellChanged(this.cell,this.previous)}}const filterCells=x=>d=>{const g=[];for(let E=0;E<d.length;E+=1)x(d[E])&&g.push(d[E]);return g},getTopmostCells=x=>{const d=new Dictionary,g=[];for(let E=0;E<x.length;E+=1)d.put(x[E],!0);for(let E=0;E<x.length;E+=1){const b=x[E];let w=!0,C=b.getParent();for(;C!=null;){if(d.get(C)){w=!1;break}C=C.getParent()}w&&g.push(b)}return g},cloneCells=(x,d=!0,g={})=>{const E=[];for(const b of x)E.push(cloneCellImpl(b,g,d));for(let b=0;b<E.length;b+=1)E[b]!=null&&restoreClone(E[b],x[b],g);return E},cloneCellImpl=(x,d={},g=!1)=>{const E=ObjectIdentity.get(x);let b=d?d[E]:null;if(b==null&&(b=x.clone(),d[E]=b,g)){const w=x.getChildCount();for(let C=0;C<w;C+=1){const S=cloneCellImpl(x.getChildAt(C),d,!0);b.insert(S)}}return b},restoreClone=(x,d,g)=>{const E=d.getTerminal(!0);if(E!=null){const C=g[ObjectIdentity.get(E)];C!=null&&C.insertEdge(x,!0)}const b=d.getTerminal(!1);if(b!=null){const C=g[ObjectIdentity.get(b)];C!=null&&C.insertEdge(x,!1)}const w=x.getChildCount();for(let C=0;C<w;C+=1)restoreClone(x.getChildAt(C),d.getChildAt(C),g)};class GraphDataModel extends EventSource{constructor(d=null){super(),this.root=null,this.cells={},this.maintainEdgeParent=!0,this.ignoreRelativeEdgeParent=!0,this.createIds=!0,this.prefix="",this.postfix="",this.nextId=0,this.currentEdit=null,this.updateLevel=0,this.endingUpdate=!1,this.currentEdit=this.createUndoableEdit(),d!=null?this.setRoot(d):this.clear()}clear(){this.setRoot(this.createRoot())}isCreateIds(){return this.createIds}setCreateIds(d){this.createIds=d}createRoot(){const d=new Cell;return d.insert(new Cell),d}getCell(d){return this.cells?this.cells[d]:null}filterCells(d,g){return filterCells(g)(d)}getRoot(d=null){return d?d.getRoot():this.root}setRoot(d){return this.execute(new RootChange(this,d)),d}rootChanged(d){const g=this.root;return this.root=d,this.nextId=0,this.cells=null,this.cellAdded(d),g}isRoot(d=null){return d!=null&&this.root===d}isLayer(d){return d?this.isRoot(d.getParent()):!1}contains(d){return this.root.isAncestor(d)}add(d,g,E=null){if(g!==d&&d!=null&&g!=null){E==null&&(E=d.getChildCount());const b=d!==g.getParent();this.execute(new ChildChange(this,d,g,E)),this.maintainEdgeParent&&b&&this.updateEdgeParents(g)}return g}cellAdded(d){if(d!=null){if(d.getId()==null&&this.createIds&&d.setId(this.createId(d)),d.getId()!=null){let g=this.getCell(d.getId());if(g!==d){for(;g!=null;)d.setId(this.createId(d)),g=this.getCell(d.getId());this.cells==null&&(this.cells={}),this.cells[d.getId()]=d}}isNumeric(String(d.getId()))&&(this.nextId=Math.max(this.nextId,parseInt(d.getId())));for(const g of d.getChildren())this.cellAdded(g)}}createId(d){const g=this.nextId;return this.nextId++,this.prefix+g+this.postfix}updateEdgeParents(d,g=this.getRoot(d)){const E=d.getChildCount();for(let C=0;C<E;C+=1){const S=d.getChildAt(C);this.updateEdgeParents(S,g)}const b=d.getEdgeCount(),w=[];for(let C=0;C<b;C+=1)w.push(d.getEdgeAt(C));for(let C=0;C<w.length;C+=1){const S=w[C];g.isAncestor(S)&&this.updateEdgeParent(S,g)}}updateEdgeParent(d,g){let E=d.getTerminal(!0),b=d.getTerminal(!1),w=null;for(;E!=null&&!E.isEdge()&&E.geometry!=null&&E.geometry.relative;)E=E.getParent();for(;b!=null&&this.ignoreRelativeEdgeParent&&!b.isEdge()&&b.geometry!=null&&b.geometry.relative;)b=b.getParent();if(g.isAncestor(E)&&g.isAncestor(b)&&(E===b?w=E?E.getParent():null:E&&(w=E.getNearestCommonAncestor(b)),w!=null&&(w.getParent()!==this.root||w.isAncestor(d))&&d&&d.getParent()!==w)){let C=d.getGeometry();if(C!=null){const S=d.getParent().getOrigin(),P=w.getOrigin(),I=P.x-S.x,M=P.y-S.y;C=C.clone(),C.translate(-I,-M),this.setGeometry(d,C)}this.add(w,d,w.getChildCount())}}remove(d){return d===this.root?this.setRoot(null):d.getParent()!=null&&this.execute(new ChildChange(this,null,d)),d}cellRemoved(d){if(d!=null&&this.cells!=null){const g=d.getChildCount();for(let E=g-1;E>=0;E--)this.cellRemoved(d.getChildAt(E));this.cells!=null&&d.getId()!=null&&delete this.cells[d.getId()]}}parentForCellChanged(d,g,E){const b=d.getParent();if(g!=null)(g!==b||b.getIndex(d)!==E)&&g.insert(d,E);else if(b!=null){const S=b.getIndex(d);b.remove(S)}const w=g?this.contains(g):null,C=this.contains(b);return w&&!C?this.cellAdded(d):C&&!w&&this.cellRemoved(d),b}setTerminal(d,g,E){const b=g!==d.getTerminal(E);return this.execute(new TerminalChange(this,d,g,E)),this.maintainEdgeParent&&b&&this.updateEdgeParent(d,this.getRoot()),g}setTerminals(d,g,E){this.beginUpdate();try{this.setTerminal(d,g,!0),this.setTerminal(d,E,!1)}finally{this.endUpdate()}}terminalForCellChanged(d,g,E=!1){const b=d.getTerminal(E);return g!=null?g.insertEdge(d,E):b!=null&&b.removeEdge(d,E),b}getEdgesBetween(d,g,E=!1){const b=d.getEdgeCount(),w=g.getEdgeCount();let C=d,S=b;w<b&&(S=w,C=g);const P=[];for(let I=0;I<S;I+=1){const M=C.getEdgeAt(I),D=M.getTerminal(!0),k=M.getTerminal(!1);(D===d&&k===g||!E&&(k===d&&D===g))&&P.push(M)}return P}setValue(d,g){return this.execute(new ValueChange(this,d,g)),g}valueForCellChanged(d,g){return d.valueChanged(g)}setGeometry(d,g){return g!==d.getGeometry()&&this.execute(new GeometryChange(this,d,g)),g}geometryForCellChanged(d,g){const E=d.getGeometry();return d.setGeometry(g),E}setStyle(d,g){g!==d.getStyle()&&this.execute(new StyleChange(this,d,g))}styleForCellChanged(d,g){const E=d.getStyle();return d.setStyle(g),E}setCollapsed(d,g){return g!==d.isCollapsed()&&this.execute(new CollapseChange(this,d,g)),g}collapsedStateForCellChanged(d,g){const E=d.isCollapsed();return d.setCollapsed(g),E}setVisible(d,g){return g!==d.isVisible()&&this.execute(new VisibleChange(this,d,g)),g}visibleStateForCellChanged(d,g){const E=d.isVisible();return d.setVisible(g),E}execute(d){d.execute(),this.beginUpdate(),this.currentEdit.add(d),this.fireEvent(new EventObject(InternalEvent.EXECUTE,{change:d})),this.fireEvent(new EventObject(InternalEvent.EXECUTED,{change:d})),this.endUpdate()}batchUpdate(d){this.beginUpdate();try{d()}finally{this.endUpdate()}}beginUpdate(){this.updateLevel+=1,this.fireEvent(new EventObject(InternalEvent.BEGIN_UPDATE)),this.updateLevel===1&&this.fireEvent(new EventObject(InternalEvent.START_EDIT))}endUpdate(){if(this.updateLevel-=1,this.updateLevel===0&&this.fireEvent(new EventObject(InternalEvent.END_EDIT)),!this.endingUpdate){this.endingUpdate=this.updateLevel===0,this.fireEvent(new EventObject(InternalEvent.END_UPDATE,{edit:this.currentEdit}));try{if(this.endingUpdate&&!this.currentEdit.isEmpty()){this.fireEvent(new EventObject(InternalEvent.BEFORE_UNDO,{edit:this.currentEdit}));const d=this.currentEdit;this.currentEdit=this.createUndoableEdit(),d.notify(),this.fireEvent(new EventObject(InternalEvent.UNDO,{edit:d}))}}finally{this.endingUpdate=!1}}}createUndoableEdit(d=!0){const g=new UndoableEdit(this,d);return g.notify=()=>{g.source.fireEvent(new EventObject(InternalEvent.CHANGE,{edit:g,changes:g.changes})),g.source.fireEvent(new EventObject(InternalEvent.NOTIFY,{edit:g,changes:g.changes}))},g}mergeChildren(d,g,E=!0){this.beginUpdate();try{const b={};this.mergeChildrenImpl(d,g,E,b);for(const w in b){const C=b[w];let S=C.getTerminal(!0);S!=null&&(S=b[CellPath.create(S)],this.setTerminal(C,S,!0)),S=C.getTerminal(!1),S!=null&&(S=b[CellPath.create(S)],this.setTerminal(C,S,!1))}}finally{this.endUpdate()}}mergeChildrenImpl(d,g,E,b={}){this.beginUpdate();try{const w=d.getChildCount();for(let C=0;C<w;C+=1){const S=d.getChildAt(C);if(typeof S.getId=="function"){const P=S.getId();let I=P!=null&&(!S.isEdge()||!E)?this.getCell(P):null;if(I==null){const M=S.clone();M.setId(P),M.setTerminal(S.getTerminal(!0),!0),M.setTerminal(S.getTerminal(!1),!1),I=g.insert(M),this.cellAdded(I)}b[CellPath.create(S)]=I,this.mergeChildrenImpl(S,I,E,b)}}}finally{this.endUpdate()}}}class Stylesheet{constructor(){this.styles=new Map,this.putDefaultVertexStyle(this.createDefaultVertexStyle()),this.putDefaultEdgeStyle(this.createDefaultEdgeStyle())}createDefaultVertexStyle(){const d={};return d.shape=SHAPE.RECTANGLE,d.perimeter="rectanglePerimeter",d.verticalAlign=ALIGN.MIDDLE,d.align=ALIGN.CENTER,d.fillColor="#C3D9FF",d.strokeColor="#6482B9",d.fontColor="#774400",d}createDefaultEdgeStyle(){const d={};return d.shape=SHAPE.CONNECTOR,d.endArrow=ARROW.CLASSIC,d.verticalAlign=ALIGN.MIDDLE,d.align=ALIGN.CENTER,d.strokeColor="#6482B9",d.fontColor="#446299",d}putDefaultVertexStyle(d){this.putCellStyle("defaultVertex",d)}putDefaultEdgeStyle(d){this.putCellStyle("defaultEdge",d)}getDefaultVertexStyle(){return this.styles.get("defaultVertex")}getDefaultEdgeStyle(){return this.styles.get("defaultEdge")}putCellStyle(d,g){this.styles.set(d,g)}getCellStyle(d,g){let E=d.ignoreDefaultStyle?{}:{...g};d.baseStyleNames&&(E=d.baseStyleNames.reduce((b,w)=>({...b,...this.styles.get(w)}),E));for(const b of Object.keys(d))d[b]!==void 0&&(d[b]==NONE?delete E[b]:E[b]=d[b]);return"baseStyleNames"in E&&delete E.baseStyleNames,"ignoreDefaultStyle"in E&&delete E.ignoreDefaultStyle,E}}function scalePointArray(x,d){let g=[];if(x!=null)for(let E=0;E<x.length;E+=1)x[E]!=null?g[E]=new Point(Math.round(x[E].x/d*10)/10,Math.round(x[E].y/d*10)/10):g[E]=null;else g=null;return g}function scaleCellState(x,d){let g=null;return x!=null&&(g=x.clone(),g.setRect(Math.round(x.x/d*10)/10,Math.round(x.y/d*10)/10,Math.round(x.width/d*10)/10,Math.round(x.height/d*10)/10)),g}const SideToSide=(x,d,g,E,b)=>{const{view:w}=x;let C=E!=null&&E.length>0?E[0]:null;const S=x.absolutePoints,P=S[0],I=S[S.length-1];if(C!=null&&(C=w.transformControlPoint(x,C)),P!=null&&(d=new CellState,d.x=P.x,d.y=P.y),I!=null&&(g=new CellState,g.x=I.x,g.y=I.y),d!=null&&g!=null){const M=Math.max(d.x,g.x),D=Math.min(d.x+d.width,g.x+g.width),k=C!=null?C.x:Math.round(D+(M-D)/2);let H=w.getRoutingCenterY(d),F=w.getRoutingCenterY(g);if(C!=null&&(C.y>=d.y&&C.y<=d.y+d.height&&(H=C.y),C.y>=g.y&&C.y<=g.y+g.height&&(F=C.y)),!contains(g,k,H)&&!contains(d,k,H)&&b.push(new Point(k,H)),!contains(g,k,F)&&!contains(d,k,F)&&b.push(new Point(k,F)),b.length===1)if(C!=null)!contains(g,k,C.y)&&!contains(d,k,C.y)&&b.push(new Point(k,C.y));else{const j=Math.max(d.y,g.y),$=Math.min(d.y+d.height,g.y+g.height);b.push(new Point(k,j+($-j)/2))}}},TopToBottom=(x,d,g,E,b)=>{const{view:w}=x;let C=E!=null&&E.length>0?E[0]:null;const S=x.absolutePoints,P=S[0],I=S[S.length-1];if(C!=null&&(C=w.transformControlPoint(x,C)),P!=null&&(d=new CellState,d.x=P.x,d.y=P.y),I!=null&&(g=new CellState,g.x=I.x,g.y=I.y),d!=null&&g!=null){const M=Math.max(d.y,g.y),D=Math.min(d.y+d.height,g.y+g.height);let k=w.getRoutingCenterX(d);C!=null&&C.x>=d.x&&C.x<=d.x+d.width&&(k=C.x);const H=C!=null?C.y:Math.round(D+(M-D)/2);if(!contains(g,k,H)&&!contains(d,k,H)&&b.push(new Point(k,H)),C!=null&&C.x>=g.x&&C.x<=g.x+g.width?k=C.x:k=w.getRoutingCenterX(g),!contains(g,k,H)&&!contains(d,k,H)&&b.push(new Point(k,H)),b.length===1)if(C!=null&&b.length===1)!contains(g,C.x,H)&&!contains(d,C.x,H)&&b.push(new Point(C.x,H));else{const F=Math.max(d.x,g.x),j=Math.min(d.x+d.width,g.x+g.width);b.push(new Point(F+(j-F)/2,H))}}},ElbowConnector=(x,d,g,E,b)=>{let w=E!=null&&E.length>0?E[0]:null,C=!1,S=!1;if(d!=null&&g!=null)if(w!=null){const P=Math.min(d.x,g.x),I=Math.max(d.x+d.width,g.x+g.width),M=Math.min(d.y,g.y),D=Math.max(d.y+d.height,g.y+g.height);w=x.view.transformControlPoint(x,w),C=w.y<M||w.y>D,S=w.x<P||w.x>I}else{const P=Math.max(d.x,g.x),I=Math.min(d.x+d.width,g.x+g.width);if(C=P===I,!C){const M=Math.max(d.y,g.y),D=Math.min(d.y+d.height,g.y+g.height);S=M===D}}!S&&(C||x.style.elbow===ELBOW.VERTICAL)?TopToBottom(x,d,g,E,b):SideToSide(x,d,g,E,b)},EntityRelation=(x,d,g,E,b)=>{const{view:w}=x,C=getValue$1(x.style,"segment",ENTITY_SEGMENT)*w.scale,S=x.absolutePoints,P=S[0],I=S[S.length-1];let M=!1;if(d!=null){const k=d.cell.getGeometry();k.relative?M=k.x<=.5:g!=null&&(M=(I!=null?I.x:g.x+g.width)<(P!=null?P.x:d.x))}if(P!=null)d=new CellState,d.x=P.x,d.y=P.y;else if(d!=null){const k=getPortConstraints(d,x,!0,DIRECTION_MASK.NONE);k!==DIRECTION_MASK.NONE&&k!==DIRECTION_MASK.WEST+DIRECTION_MASK.EAST&&(M=k===DIRECTION_MASK.WEST)}else return;let D=!0;if(g!=null){const k=g.cell.getGeometry();k.relative?D=k.x<=.5:d!=null&&(D=(P!=null?P.x:d.x+d.width)<(I!=null?I.x:g.x))}if(I!=null)g=new CellState,g.x=I.x,g.y=I.y;else if(g!=null){const k=getPortConstraints(g,x,!1,DIRECTION_MASK.NONE);k!==DIRECTION_MASK.NONE&&k!=DIRECTION_MASK.WEST+DIRECTION_MASK.EAST&&(D=k===DIRECTION_MASK.WEST)}if(d!=null&&g!=null){const k=M?d.x:d.x+d.width,H=w.getRoutingCenterY(d),F=D?g.x:g.x+g.width,j=w.getRoutingCenterY(g),$=C;let z=M?-$:$;const U=new Point(k+z,H);z=D?-$:$;const W=new Point(F+z,j);if(M===D){const q=M?Math.min(k,F)-C:Math.max(k,F)+C;b.push(new Point(q,H)),b.push(new Point(q,j))}else if(U.x<W.x===M){const q=H+(j-H)/2;b.push(U),b.push(new Point(U.x,q)),b.push(new Point(W.x,q)),b.push(W)}else b.push(U),b.push(W)}},Loop=(x,d,g,E,b)=>{const w=x.absolutePoints,C=w[0],S=w[w.length-1];if(C!=null&&S!=null){if(E!=null&&E.length>0)for(let P=0;P<E.length;P+=1){let I=E[P];I=x.view.transformControlPoint(x,I),b.push(new Point(I.x,I.y))}return}if(d!=null){const{view:P}=x,{graph:I}=P;let M=E!=null&&E.length>0?E[0]:null;M!=null&&(M=P.transformControlPoint(x,M),contains(d,M.x,M.y)&&(M=null));let D=0,k=0,H=0,F=0;const j=getValue$1(x.style,"segment",I.gridSize)*P.scale,$=getValue$1(x.style,"direction",DIRECTION.WEST);$===DIRECTION.NORTH||$===DIRECTION.SOUTH?(D=P.getRoutingCenterX(d),k=j):(H=P.getRoutingCenterY(d),F=j),M==null||M.x<d.x||M.x>d.x+d.width?M!=null?(D=M.x,F=Math.max(Math.abs(H-M.y),F)):$===DIRECTION.NORTH?H=d.y-2*k:$===DIRECTION.SOUTH?H=d.y+d.height+2*k:$===DIRECTION.EAST?D=d.x-2*F:D=d.x+d.width+2*F:M!==null&&(D=P.getRoutingCenterX(d),k=Math.max(Math.abs(D-M.x),F),H=M.y,F=0),b.push(new Point(D-k,H-F)),b.push(new Point(D+k,H+F))}},SegmentConnector=(x,d,g,E,b)=>{const w=scalePointArray(x.absolutePoints,x.view.scale),C=scaleCellState(d,x.view.scale),S=scaleCellState(g,x.view.scale),P=1;let I=b.length>0?b[0]:null,M=!0,D=null;function k($){return $.x=Math.round($.x*x.view.scale*10)/10,$.y=Math.round($.y*x.view.scale*10)/10,(I==null||Math.abs(I.x-$.x)>=P||Math.abs(I.y-$.y)>=Math.max(1,x.view.scale))&&(b.push($),I=$),I}let H=w[0];H==null&&C!=null?H=new Point(x.view.getRoutingCenterX(C),x.view.getRoutingCenterY(C)):H!=null&&(H=H.clone());const F=w.length-1;let j=null;if(E!=null&&E.length>0){let $=[];for(let X=0;X<E.length;X+=1){const K=x.view.transformControlPoint(x,E[X],!0);K!=null&&$.push(K)}if($.length===0)return;H!=null&&$[0]!=null&&(Math.abs($[0].x-H.x)<P&&($[0].x=H.x),Math.abs($[0].y-H.y)<P&&($[0].y=H.y)),j=w[F],j!=null&&$[$.length-1]!=null&&(Math.abs($[$.length-1].x-j.x)<P&&($[$.length-1].x=j.x),Math.abs($[$.length-1].y-j.y)<P&&($[$.length-1].y=j.y)),D=$[0];let z=C,U=w[0],W=!1,q=!1,Z=D;U!=null&&(z=null);for(let X=0;X<2;X+=1){const K=U!=null&&U.x===Z.x,ee=U!=null&&U.y===Z.y,te=z!=null&&Z.y>=z.y&&Z.y<=z.y+z.height,ce=z!=null&&Z.x>=z.x&&Z.x<=z.x+z.width;if(W=ee||U==null&&te,q=K||U==null&&ce,!(X==0&&(W&&q||K&&ee))){if(U!=null&&!ee&&!K&&(te||ce)){M=!te;break}if(q||W){M=W,X===1&&(M=$.length%2===0?W:q);break}}z=S,U=w[F],U!=null&&(z=null),Z=$[$.length-1],K&&ee&&($=$.slice(1))}M&&(w[0]!=null&&w[0].y!==D.y||w[0]==null&&C!=null&&(D.y<C.y||D.y>C.y+C.height))?k(new Point(H.x,D.y)):!M&&(w[0]!=null&&w[0].x!==D.x||w[0]==null&&C!=null&&(D.x<C.x||D.x>C.x+C.width))&&k(new Point(D.x,H.y)),M?H.y=D.y:H.x=D.x;for(let X=0;X<$.length;X+=1)M=!M,D=$[X],M?H.y=D.y:H.x=D.x,k(H.clone())}else D=H,M=!0;if(H=w[F],H==null&&S!=null&&(H=new Point(x.view.getRoutingCenterX(S),x.view.getRoutingCenterY(S))),H!=null&&D!=null&&(M&&(w[F]!=null&&w[F].y!==D.y||w[F]==null&&S!=null&&(D.y<S.y||D.y>S.y+S.height))?k(new Point(H.x,D.y)):!M&&(w[F]!=null&&w[F].x!==D.x||w[F]==null&&S!=null&&(D.x<S.x||D.x>S.x+S.width))&&k(new Point(D.x,H.y))),w[0]==null&&C!=null)for(;b.length>1&&b[1]!=null&&contains(C,b[1].x,b[1].y);)b.splice(1,1);if(w[F]==null&&S!=null)for(;b.length>1&&b[b.length-1]!=null&&contains(S,b[b.length-1].x,b[b.length-1].y);)b.splice(b.length-1,1);j!=null&&b[b.length-1]!=null&&Math.abs(j.x-b[b.length-1].x)<=P&&Math.abs(j.y-b[b.length-1].y)<=P&&(b.splice(b.length-1,1),b[b.length-1]!=null&&(Math.abs(b[b.length-1].x-j.x)<P&&(b[b.length-1].x=j.x),Math.abs(b[b.length-1].y-j.y)<P&&(b[b.length-1].y=j.y)))};var _a;class EdgeStyle{static getJettySize(d,g){let E=getValue$1(d.style,g?"sourceJettySize":"targetJettySize",getValue$1(d.style,"jettySize",_a.orthBuffer));if(E==="auto")if(getValue$1(d.style,g?"startArrow":"endArrow",NONE)!==NONE){const w=getNumber(d.style,g?"startSize":"endSize",DEFAULT_MARKERSIZE);E=Math.max(2,Math.ceil((w+_a.orthBuffer)/_a.orthBuffer))*_a.orthBuffer}else E=2*_a.orthBuffer;return E}static getRoutePattern(d,g,E,b){let w=d[0]===DIRECTION_MASK.EAST?3:d[0],C=d[1]===DIRECTION_MASK.EAST?3:d[1];w-=g,C-=g,w<1&&(w+=4),C<1&&(C+=4);let S=_a.routePatterns[w-1][C-1];return(E===0||b===0)&&_a.inlineRoutePatterns[w-1][C-1]!=null&&(S=_a.inlineRoutePatterns[w-1][C-1]),S}}_a=EdgeStyle;EdgeStyle.EntityRelation=EntityRelation;EdgeStyle.Loop=Loop;EdgeStyle.ElbowConnector=ElbowConnector;EdgeStyle.SideToSide=SideToSide;EdgeStyle.TopToBottom=TopToBottom;EdgeStyle.SegmentConnector=SegmentConnector;EdgeStyle.orthBuffer=10;EdgeStyle.orthPointsFallback=!0;EdgeStyle.dirVectors=[[-1,0],[0,-1],[1,0],[0,1],[-1,0],[0,-1],[1,0]];EdgeStyle.wayPoints1=[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]];EdgeStyle.routePatterns=[[[513,2308,2081,2562],[513,1090,514,2184,2114,2561],[513,1090,514,2564,2184,2562],[513,2308,2561,1090,514,2568,2308]],[[514,1057,513,2308,2081,2562],[514,2184,2114,2561],[514,2184,2562,1057,513,2564,2184],[514,1057,513,2568,2308,2561]],[[1090,514,1057,513,2308,2081,2562],[2114,2561],[1090,2562,1057,513,2564,2184],[1090,514,1057,513,2308,2561,2568]],[[2081,2562],[1057,513,1090,514,2184,2114,2561],[1057,513,1090,514,2184,2562,2564],[1057,2561,1090,514,2568,2308]]];EdgeStyle.inlineRoutePatterns=[[null,[2114,2568],null,null],[null,[514,2081,2114,2568],null,null],[null,[2114,2561],null,null],[[2081,2562],[1057,2114,2568],[2184,2562],null]];EdgeStyle.vertexSeperations=[];EdgeStyle.limits=[[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0]];EdgeStyle.LEFT_MASK=32;EdgeStyle.TOP_MASK=64;EdgeStyle.RIGHT_MASK=128;EdgeStyle.BOTTOM_MASK=256;EdgeStyle.LEFT=1;EdgeStyle.TOP=2;EdgeStyle.RIGHT=4;EdgeStyle.BOTTOM=8;EdgeStyle.SIDE_MASK=480;EdgeStyle.CENTER_MASK=512;EdgeStyle.SOURCE_MASK=1024;EdgeStyle.TARGET_MASK=2048;EdgeStyle.VERTEX_MASK=3072;EdgeStyle.OrthConnector=(x,d,g,E,b)=>{const w=scalePointArray(x.absolutePoints,x.view.scale),C=scaleCellState(d,x.view.scale),S=scaleCellState(g,x.view.scale),P=C==null?!1:C.cell.isEdge(),I=S==null?!1:S.cell.isEdge(),M=w[0],D=w[w.length-1];let k=C!=null?C.x:M.x,H=C!=null?C.y:M.y,F=C!=null?C.width:0,j=C!=null?C.height:0,$=S!=null?S.x:D.x,z=S!=null?S.y:D.y,U=S!=null?S.width:0,W=S!=null?S.height:0,q=_a.getJettySize(x,!0),Z=_a.getJettySize(x,!1);C!=null&&S===C&&(Z=Math.max(q,Z),q=Z);const X=Z+q;let K=!1;if(M!=null&&D!=null){const be=D.x-M.x,lt=D.y-M.y;K=be*be+lt*lt<X*X}if(K||_a.orthPointsFallback&&E!=null&&E.length>0||P||I){_a.SegmentConnector(x,d,g,E,b);return}const ee=[DIRECTION_MASK.ALL,DIRECTION_MASK.ALL];let te=0;if(C!=null&&(ee[0]=getPortConstraints(C,x,!0,DIRECTION_MASK.ALL),te=C.style.rotation??0,te!==0)){const be=getBoundingBox(new Rectangle(k,H,F,j),te);k=be.x,H=be.y,F=be.width,j=be.height}if(S!=null&&(ee[1]=getPortConstraints(S,x,!1,DIRECTION_MASK.ALL),te=S.style.rotation??0,te!==0)){const be=getBoundingBox(new Rectangle($,z,U,W),te);$=be.x,z=be.y,U=be.width,W=be.height}const ce=[0,0],Q=[[k,H,F,j],[$,z,U,W]],se=[q,Z];for(let be=0;be<2;be+=1)_a.limits[be][1]=Q[be][0]-se[be],_a.limits[be][2]=Q[be][1]-se[be],_a.limits[be][4]=Q[be][0]+Q[be][2]+se[be],_a.limits[be][8]=Q[be][1]+Q[be][3]+se[be];const ge=Q[0][0]+Q[0][2]/2,Ce=Q[0][1]+Q[0][3]/2,oe=Q[1][0]+Q[1][2]/2,he=Q[1][1]+Q[1][3]/2,de=ge-oe,re=Ce-he;let ae=0;de<0?re<0?ae=2:ae=1:re<=0&&(ae=3,de===0&&(ae=2));let pe=null;C!=null&&(pe=M);const J=[[.5,.5],[.5,.5]];for(let be=0;be<2;be+=1)pe!=null&&(J[be][0]=(pe.x-Q[be][0])/Q[be][2],Math.abs(pe.x-Q[be][0])<=1?ce[be]=DIRECTION_MASK.WEST:Math.abs(pe.x-Q[be][0]-Q[be][2])<=1&&(ce[be]=DIRECTION_MASK.EAST),J[be][1]=(pe.y-Q[be][1])/Q[be][3],Math.abs(pe.y-Q[be][1])<=1?ce[be]=DIRECTION_MASK.NORTH:Math.abs(pe.y-Q[be][1]-Q[be][3])<=1&&(ce[be]=DIRECTION_MASK.SOUTH)),pe=null,S!=null&&(pe=D);const ue=Q[0][1]-(Q[1][1]+Q[1][3]),Te=Q[0][0]-(Q[1][0]+Q[1][2]),xe=Q[1][1]-(Q[0][1]+Q[0][3]),we=Q[1][0]-(Q[0][0]+Q[0][2]);_a.vertexSeperations[1]=Math.max(Te-X,0),_a.vertexSeperations[2]=Math.max(ue-X,0),_a.vertexSeperations[4]=Math.max(xe-X,0),_a.vertexSeperations[3]=Math.max(we-X,0);const Re=[],De=[],Ae=[];De[0]=Te>=we?DIRECTION_MASK.WEST:DIRECTION_MASK.EAST,Ae[0]=ue>=xe?DIRECTION_MASK.NORTH:DIRECTION_MASK.SOUTH,De[1]=reversePortConstraints(De[0]),Ae[1]=reversePortConstraints(Ae[0]);const Be=Te>=we?Te:we,We=ue>=xe?ue:xe,Fe=[[0,0],[0,0]];let ze=!1;for(let be=0;be<2;be+=1)ce[be]===0&&((De[be]&ee[be])===0&&(De[be]=reversePortConstraints(De[be])),(Ae[be]&ee[be])===0&&(Ae[be]=reversePortConstraints(Ae[be])),Fe[be][0]=Ae[be],Fe[be][1]=De[be]);We>0&&Be>0&&((De[0]&ee[0])>0&&(Ae[1]&ee[1])>0?(Fe[0][0]=De[0],Fe[0][1]=Ae[0],Fe[1][0]=Ae[1],Fe[1][1]=De[1],ze=!0):(Ae[0]&ee[0])>0&&(De[1]&ee[1])>0&&(Fe[0][0]=Ae[0],Fe[0][1]=De[0],Fe[1][0]=De[1],Fe[1][1]=Ae[1],ze=!0)),We>0&&!ze&&(Fe[0][0]=Ae[0],Fe[0][1]=De[0],Fe[1][0]=Ae[1],Fe[1][1]=De[1],ze=!0),Be>0&&!ze&&(Fe[0][0]=De[0],Fe[0][1]=Ae[0],Fe[1][0]=De[1],Fe[1][1]=Ae[1],ze=!0);for(let be=0;be<2;be+=1)ce[be]===0&&((Fe[be][0]&ee[be])===0&&(Fe[be][0]=Fe[be][1]),Re[be]=Fe[be][0]&ee[be],Re[be]|=(Fe[be][1]&ee[be])<<8,Re[be]|=(Fe[1-be][be]&ee[be])<<16,Re[be]|=(Fe[1-be][1-be]&ee[be])<<24,(Re[be]&15)===0&&(Re[be]=Re[be]<<8),(Re[be]&3840)===0&&(Re[be]=Re[be]&15|Re[be]>>8),(Re[be]&983040)===0&&(Re[be]=Re[be]&65535|(Re[be]&251658240)>>8),ce[be]=Re[be]&15,(ee[be]===DIRECTION_MASK.WEST||ee[be]===DIRECTION_MASK.NORTH||ee[be]===DIRECTION_MASK.EAST||ee[be]===DIRECTION_MASK.SOUTH)&&(ce[be]=ee[be]));let ct=ce[0]===DIRECTION_MASK.EAST?3:ce[0],rt=ce[1]===DIRECTION_MASK.EAST?3:ce[1];ct-=ae,rt-=ae,ct<1&&(ct+=4),rt<1&&(rt+=4);const Le=_a.routePatterns[ct-1][rt-1];switch(_a.wayPoints1[0][0]=Q[0][0],_a.wayPoints1[0][1]=Q[0][1],ce[0]){case DIRECTION_MASK.WEST:_a.wayPoints1[0][0]-=q,_a.wayPoints1[0][1]+=J[0][1]*Q[0][3];break;case DIRECTION_MASK.SOUTH:_a.wayPoints1[0][0]+=J[0][0]*Q[0][2],_a.wayPoints1[0][1]+=Q[0][3]+q;break;case DIRECTION_MASK.EAST:_a.wayPoints1[0][0]+=Q[0][2]+q,_a.wayPoints1[0][1]+=J[0][1]*Q[0][3];break;case DIRECTION_MASK.NORTH:_a.wayPoints1[0][0]+=J[0][0]*Q[0][2],_a.wayPoints1[0][1]-=q;break}let nt=0,qe=(ce[0]&(DIRECTION_MASK.EAST|DIRECTION_MASK.WEST))>0?0:1;const dt=qe;let ht=0;for(let be=0;be<Le.length;be+=1){const lt=Le[be]&15;let et=lt===DIRECTION_MASK.EAST?3:lt;et+=ae,et>4&&(et-=4);const tt=_a.dirVectors[et-1];ht=et%2>0?0:1,ht!==qe&&(nt++,_a.wayPoints1[nt][0]=_a.wayPoints1[nt-1][0],_a.wayPoints1[nt][1]=_a.wayPoints1[nt-1][1]);const xt=(Le[be]&_a.TARGET_MASK)>0,Ke=(Le[be]&_a.SOURCE_MASK)>0;let ft=(Le[be]&_a.SIDE_MASK)>>5;ft<<=ae,ft>15&&(ft>>=4);const ot=(Le[be]&_a.CENTER_MASK)>0;if((Ke||xt)&&ft<9){let vt=0;const pt=Ke?0:1;if(ot&&ht===0?vt=Q[pt][0]+J[pt][0]*Q[pt][2]:ot?vt=Q[pt][1]+J[pt][1]*Q[pt][3]:vt=_a.limits[pt][ft],ht===0){const Ze=_a.wayPoints1[nt][0],Ne=(vt-Ze)*tt[0];Ne>0&&(_a.wayPoints1[nt][0]+=tt[0]*Ne)}else{const Ze=_a.wayPoints1[nt][1],Ne=(vt-Ze)*tt[1];Ne>0&&(_a.wayPoints1[nt][1]+=tt[1]*Ne)}}else ot&&(_a.wayPoints1[nt][0]+=tt[0]*Math.abs(_a.vertexSeperations[et]/2),_a.wayPoints1[nt][1]+=tt[1]*Math.abs(_a.vertexSeperations[et]/2));nt>0&&_a.wayPoints1[nt][ht]===_a.wayPoints1[nt-1][ht]?nt--:qe=ht}for(let be=0;be<=nt&&!(be===nt&&(((ce[1]&(DIRECTION_MASK.EAST|DIRECTION_MASK.WEST))>0?0:1)===dt?0:1)!==(nt+1)%2);be+=1)b.push(new Point(Math.round(_a.wayPoints1[be][0]*x.view.scale*10)/10,Math.round(_a.wayPoints1[be][1]*x.view.scale*10)/10));let st=1;for(;st<b.length;)b[st-1]==null||b[st]==null||b[st-1].x!==b[st].x||b[st-1].y!==b[st].y?st++:b.splice(st,1)};EdgeStyle.MANHATTAN_STEP=12;EdgeStyle.MANHATTAN_MAXIMUM_LOOPS=2e3;EdgeStyle.MANHATTAN_START_DIRECTIONS=[DIRECTION.NORTH,DIRECTION.EAST,DIRECTION.SOUTH,DIRECTION.WEST];EdgeStyle.MANHATTAN_END_DIRECTIONS=[DIRECTION.NORTH,DIRECTION.EAST,DIRECTION.SOUTH,DIRECTION.WEST];EdgeStyle.MANHATTAN_MAX_ALLOWED_DIRECTION_CHANGE=90;EdgeStyle.MANHATTAN_PADDING_BOX=new Geometry(-_a.MANHATTAN_STEP,-_a.MANHATTAN_STEP,_a.MANHATTAN_STEP*2,_a.MANHATTAN_STEP*2);EdgeStyle.ManhattanConnector=(x,d,g,E,b)=>{function w(oe,he){return oe.x+=he.x||0,oe.y+=he.y||0,oe.width+=he.width||0,oe.height+=he.height||0,oe}function C(oe,he){return he*Math.round(oe/he)}function S(oe,he,de){return oe.x=C(oe.x,he),oe.y=C(oe.y,he),oe}function P(oe,he){return he.x>=oe.x&&he.x<=oe.x+oe.width&&he.y>=oe.y&&he.y<=oe.y+oe.height}function I(oe){return new Point(oe.x+oe.width/2,oe.y+oe.height/2)}function M(oe,he){return new Point(oe.x-he.x,oe.y-he.y)}function D(oe,he,de){return oe.x+=he||0,oe.y+=de||0,oe}function k(oe,he){const de=he.clone(),re=-(de.y-oe.y),ae=de.x-oe.x,pe=10;return 180*(re.toFixed(pe)=="0"&&ae.toFixed(pe)=="0"?0:Math.atan2(re,ae))/Math.PI}function H(oe){return new Point(oe.x===0?0:Math.abs(oe.x)/oe.x,oe.y===0?0:Math.abs(oe.y)/oe.y)}function F(oe,he){return Math.abs(he.x-oe.x)+Math.abs(he.y-oe.y)}function j(oe){const he=oe.split(oe.indexOf("@")===-1?" ":"@");return new Point(parseInt(he[0],10),parseInt(he[1],10))}function $(oe){return`${oe.x}@${oe.y}`}function z(oe){var we;const he=oe.view.graph,de=(we=he.getCellBounds(oe.cell,!1,!1))==null?void 0:we.clone();if(!de)return;const re=he.view,{scale:ae,translate:pe}=re,{x:J,y:ue}=pe,Te=Re=>Math.round(Re*10)/10;return new Rectangle(Te(de.x/ae-J),Te(de.y/ae-ue),Te(de.width/ae),Te(de.height/ae))}const U=_a.MANHATTAN_STEP,W={paddingBox:_a.MANHATTAN_PADDING_BOX,directions:[{offsetX:U,offsetY:0,cost:U,angle:ee(k(new Point(0,0),new Point(U,0)))},{offsetX:0,offsetY:U,cost:U,angle:ee(k(new Point(0,0),new Point(0,U)))},{offsetX:-U,offsetY:0,cost:U,angle:ee(k(new Point(0,0),new Point(-U,0)))},{offsetX:0,offsetY:-U,cost:U,angle:ee(k(new Point(0,0),new Point(0,-U)))}],directionMap:{east:{x:1,y:0},south:{x:0,y:1},west:{x:-1,y:0},north:{x:0,y:-1}},penaltiesGenerator:oe=>oe==45||oe==90||oe==180?_a.MANHATTAN_STEP/2:0,draggingRoute:null,previousDirAngle:0};class q{constructor(he){this.options=he,this.mapGridSize=100,this.map=new Map}build(he,de){const re=(he==null?void 0:he.view.graph)||(de==null?void 0:de.view.graph);if(re)return Array.from(re.getView().getCellStates()).filter(ae=>ae.cell&&ae.cell.isVertex()&&!ae.cell.isEdge()).map(ae=>z(ae)).map(ae=>ae?w(ae,this.options.paddingBox):null).forEach(ae=>{if(!ae)return;const pe=S(new Point(ae.x,ae.y),this.mapGridSize),J=S(new Point(ae.x+ae.width,ae.y+ae.height),this.mapGridSize);for(let ue=pe.x;ue<=J.x;ue+=this.mapGridSize)for(let Te=pe.y;Te<=J.y;Te+=this.mapGridSize){const xe=ue+"@"+Te,we=this.map.get(xe)||[];this.map.has(xe)||this.map.set(xe,we),we.push(ae)}})}isPointAccessible(he){const de=$(S(he.clone(),this.mapGridSize)),re=this.map.get(de);return re?re.every(ae=>!P(ae,he)):!0}}class Z{constructor(){this.items=[],this.hash=new Map}add(he,de){const re=this.hash.get(he);re?(re.value=de,this.items.splice(this.items.indexOf(he),1)):this.hash.set(he,{value:de,open:!0}),this.items.push(he),this.items.sort((ae,pe)=>{const J=this.hash.get(ae),ue=this.hash.get(pe);return!J||!ue?0:J.value-ue.value})}remove(he){const de=this.hash.get(he);de&&(de.open=!1)}isOpen(he){const de=this.hash.get(he);return de&&de.open==!0}isClose(he){const de=this.hash.get(he);return de&&de.open==!1}isEmpty(){return this.items.length==0}pop(){const he=this.items.shift();return he&&this.remove(he),he}}function X(oe,he,de,re){const ae=[];let pe=H(M(re,he)),J=he,ue;for(;oe[$(J)];){if(ue=oe[$(J)],!ue)continue;const xe=H(M(J,ue));xe.equals(pe)||(ae.unshift(J),pe=xe),J=ue}return H(M(J,de)).equals(pe)||ae.unshift(J),ae}function K(oe,he,de){const re=_a.MANHATTAN_STEP,ae=I(oe),pe=[];for(const J of he){const ue=de.directionMap[J],Te=ue.x*oe.width/2,xe=ue.y*oe.height/2,we=D(ae.clone(),Te,xe);P(oe,we)&&D(we,ue.x*re,ue.y*re),pe.push(S(we,re))}return pe}function ee(oe){return oe%360+(oe<0?360:0)}function te(oe,he,de){const re=360/de;return Math.floor(ee(k(oe,he)+re/2)/re)*re}function ce(oe,he){const de=Math.abs(oe-he);return de>180?360-de:de}function Q(oe,he){let de=1/0;for(let re=0,ae=he.length;re<ae;re++){const pe=F(oe,he[re]);pe<de&&(de=pe)}return de}function se(oe,he,de,re){const ae=z(de),pe=re?he.style.exitY:he.style.entryY,J=re?_a.MANHATTAN_START_DIRECTIONS.every(xe=>xe!=DIRECTION.NORTH&&xe!=DIRECTION.SOUTH):_a.MANHATTAN_END_DIRECTIONS.every(xe=>xe!=DIRECTION.NORTH&&xe!=DIRECTION.SOUTH);if(pe!=null&&J){const xe=(ae==null?void 0:ae.height)||0;oe.y=(ae==null?void 0:ae.y)!=null?(ae==null?void 0:ae.y)+xe*pe:oe.y-xe/2+xe*pe}const ue=re?he.style.exitX:he.style.entryX,Te=re?_a.MANHATTAN_START_DIRECTIONS.every(xe=>xe!=DIRECTION.WEST&&xe!=DIRECTION.EAST):_a.MANHATTAN_END_DIRECTIONS.every(xe=>xe!=DIRECTION.WEST&&xe!=DIRECTION.EAST);if(ue!=null&&Te){const xe=(ae==null?void 0:ae.width)||0;oe.x=(ae==null?void 0:ae.x)!=null?(ae==null?void 0:ae.x)+xe*ue:oe.x-xe/2+xe*(ue||0)}}function ge(oe,he,de,re){const ae=_a.MANHATTAN_STEP,pe=K(oe,_a.MANHATTAN_START_DIRECTIONS,re).filter(xe=>de.isPointAccessible(xe)),J=S(I(oe),ae),ue=K(he,_a.MANHATTAN_END_DIRECTIONS,re).filter(xe=>de.isPointAccessible(xe)),Te=S(I(he),ae);if(pe.length>0&&ue.length>0){const xe=new Z,we={},Re={};pe.forEach(Fe=>{const ze=$(Fe);xe.add(ze,Q(Fe,ue)),Re[ze]=0});let De=_a.MANHATTAN_MAXIMUM_LOOPS;const Ae=ue.map(Fe=>$(Fe));let Be,We;for(;!xe.isEmpty()&&De>0;){const Fe=xe.pop();if(Fe==null)continue;const ze=j(Fe),ct=Re[Fe];if(We=Be,Be=we[Fe]?te(we[Fe],ze,re.directions.length):re.previousDirAngle!=0?re.previousDirAngle:te(J,ze,re.directions.length),Ae.indexOf(Fe)>=0){const rt=ce(Be,te(ze,Te,re.directions.length));if(ze.equals(Te)||rt<180)return re.previousDirAngle=Be,X(we,ze,J,Te)}for(let rt=0;rt<re.directions.length;rt++){const Le=re.directions[rt],nt=ce(Be,Le.angle);if(We&&nt>_a.MANHATTAN_MAX_ALLOWED_DIRECTION_CHANGE)continue;const qe=D(ze.clone(),Le.offsetX,Le.offsetY),dt=$(qe);if(xe.isClose(dt)||!de.isPointAccessible(qe))continue;const ht=ct+Le.cost+re.penaltiesGenerator(nt);(!xe.isOpen(dt)||ht<Re[dt])&&(we[dt]=ze,Re[dt]=ht,xe.add(dt,ht+Q(qe,ue)))}De--}return null}return null}function Ce(oe,he,de,re,ae,pe){if(re!=null&&re.length>0||he==null||de==null){_a.SegmentConnector(oe,he,de,re,ae);return}let J=z(he);J=J?w(J,pe.paddingBox):void 0;let ue=z(de);ue=ue?w(ue,pe.paddingBox):void 0;const Te=new q(pe);if(Te.build(he,de),!J||!ue)return _a.OrthConnector(oe,he,de,re,ae);const xe=ge(J,ue,Te,pe);if(xe==null||xe.length==0)return _a.OrthConnector(oe,he,de,re,ae);oe.style&&(oe.visibleSourceState&&xe.length>0&&se(xe[0],oe,oe.visibleSourceState,!0),oe.visibleTargetState&&xe.length>1&&se(xe[xe.length-1],oe,oe.visibleTargetState,!1));const we=oe.view.scale;xe.forEach(Re=>ae.push(new Point(Math.round((Re.x+oe.view.translate.x)*we*10)/10,Math.round((Re.y+oe.view.translate.y)*we*10)/10)))}Ce(x,d,g,E,b,W)};class CellHighlight{constructor(d,g,E,b){this.strokeWidth=0,this.dashed=!1,this.opacity=100,this.shape=null,this.keepOnTop=!1,this.state=null,this.spacing=2,this.graph=d,this.highlightColor=g??DEFAULT_VALID_COLOR,this.strokeWidth=E??HIGHLIGHT_STROKEWIDTH,this.dashed=b??!1,this.opacity=HIGHLIGHT_OPACITY,this.repaintHandler=()=>{if(this.state){const w=this.graph.view.getState(this.state.cell);w?(this.state=w,this.repaint()):this.hide()}},this.graph.getView().addListener(InternalEvent.SCALE,this.repaintHandler),this.graph.getView().addListener(InternalEvent.TRANSLATE,this.repaintHandler),this.graph.getView().addListener(InternalEvent.SCALE_AND_TRANSLATE,this.repaintHandler),this.graph.getDataModel().addListener(InternalEvent.CHANGE,this.repaintHandler),this.resetHandler=()=>{this.hide()},this.graph.getView().addListener(InternalEvent.DOWN,this.resetHandler),this.graph.getView().addListener(InternalEvent.UP,this.resetHandler)}setHighlightColor(d){this.highlightColor=d,this.shape&&(this.shape.stroke=d)}drawHighlight(){var d;if(this.shape=this.createShape(),this.repaint(),this.shape){const g=this.shape.node;!this.keepOnTop&&((d=g==null?void 0:g.parentNode)==null?void 0:d.firstChild)!==g&&g.parentNode&&g.parentNode.insertBefore(g,g.parentNode.firstChild)}}createShape(){if(!this.state)return null;const d=this.graph.cellRenderer.createShape(this.state);return d.svgStrokeTolerance=this.graph.getEventTolerance(),d.points=this.state.absolutePoints,d.apply(this.state),d.stroke=this.highlightColor,d.opacity=this.opacity,d.isDashed=this.dashed,d.isShadow=!1,d.dialect=DIALECT.SVG,d.init(this.graph.getView().getOverlayPane()),InternalEvent.redirectMouseEvents(d.node,this.graph,this.state),this.graph.dialect!==DIALECT.SVG?d.pointerEvents=!1:d.svgPointerEvents="stroke",d}getStrokeWidth(d=null){return this.strokeWidth}repaint(){this.state&&this.shape&&(this.shape.scale=this.state.view.scale,this.state.cell.isEdge()?(this.shape.strokeWidth=this.getStrokeWidth(),this.shape.points=this.state.absolutePoints,this.shape.outline=!1):(this.shape.bounds=new Rectangle(this.state.x-this.spacing,this.state.y-this.spacing,this.state.width+2*this.spacing,this.state.height+2*this.spacing),this.shape.rotation=this.state.style.rotation??0,this.shape.strokeWidth=this.getStrokeWidth()/this.state.view.scale,this.shape.outline=!0),this.state.shape&&this.shape.setCursor(this.state.shape.getCursor()),this.shape.redraw())}hide(){this.highlight(null)}highlight(d=null){this.state!==d&&(this.shape&&(this.shape.destroy(),this.shape=null),this.state=d,this.state&&this.drawHighlight())}isHighlightAt(d,g){let E=!1;if(this.shape&&document.elementFromPoint){let b=document.elementFromPoint(d,g);for(;b;){if(b===this.shape.node){E=!0;break}b=b.parentNode}}return E}destroy(){const d=this.graph;d.getView().removeListener(this.resetHandler),d.getView().removeListener(this.repaintHandler),d.getDataModel().removeListener(this.repaintHandler),this.shape&&(this.shape.destroy(),this.shape=null)}}class CellMarker extends EventSource{constructor(d,g=DEFAULT_VALID_COLOR,E=DEFAULT_INVALID_COLOR,b=DEFAULT_HOTSPOT){super(),this.enabled=!0,this.hotspot=DEFAULT_HOTSPOT,this.hotspotEnabled=!1,this.currentColor=NONE,this.validState=null,this.markedState=null,this.graph=d,this.validColor=g,this.invalidColor=E,this.hotspot=b,this.highlight=new CellHighlight(d)}setEnabled(d){this.enabled=d}isEnabled(){return this.enabled}setHotspot(d){this.hotspot=d}getHotspot(){return this.hotspot}setHotspotEnabled(d){this.hotspotEnabled=d}isHotspotEnabled(){return this.hotspotEnabled}hasValidState(){return!!this.validState}getValidState(){return this.validState}getMarkedState(){return this.markedState}reset(){this.validState=null,this.markedState&&(this.markedState=null,this.unmark())}process(d){let g=null;return this.isEnabled()&&(g=this.getState(d),this.setCurrentState(g,d)),g}setCurrentState(d,g,E){const b=d?this.isValidState(d):!1;E=E??this.getMarkerColor(g.getEvent(),d,b),b?this.validState=d:this.validState=null,(d!==this.markedState||E!==this.currentColor)&&(this.currentColor=E,d&&this.currentColor!==NONE?(this.markedState=d,this.mark()):this.markedState&&(this.markedState=null,this.unmark()))}markCell(d,g){const E=this.graph.getView().getState(d);E&&(this.currentColor=g??this.validColor,this.markedState=E,this.mark())}mark(){this.highlight.setHighlightColor(this.currentColor),this.highlight.highlight(this.markedState),this.fireEvent(new EventObject(InternalEvent.MARK,"state",this.markedState))}unmark(){this.mark()}isValidState(d){return!0}getMarkerColor(d,g,E){return E?this.validColor:this.invalidColor}getState(d){const g=this.graph.getView(),E=this.getCell(d);if(!E)return null;const b=this.getStateToMark(g.getState(E));return b&&this.intersects(b,d)?b:null}getCell(d){return d.getCell()}getStateToMark(d){return d}intersects(d,g){const E=g.getGraphX(),b=g.getGraphY();return this.hotspotEnabled?intersectsHotspot(d,E,b,this.hotspot,MIN_HOTSPOT_SIZE,MAX_HOTSPOT_SIZE):!0}destroy(){this.highlight.destroy()}}class ConnectionConstraint{constructor(d,g=!0,E=null,b=0,w=0){this.perimeter=!0,this.name=null,this.dx=0,this.dy=0,this.point=d,this.perimeter=g,this.name=E,this.dx=b,this.dy=w}}class ConstraintHandler{constructor(d){this.pointImage=new ImageBox(`${Client.imageBasePath}/point.gif`,5,5),this.currentFocus=null,this.currentFocusArea=null,this.focusIcons=[],this.constraints=null,this.currentConstraint=null,this.focusHighlight=null,this.focusPoints=[],this.currentPoint=null,this.enabled=!0,this.highlightColor=DEFAULT_VALID_COLOR,this.mouseleaveHandler=null,this.graph=d,this.resetHandler=()=>{this.currentFocus&&!this.graph.view.getState(this.currentFocus.cell)?this.reset():this.redraw()},this.graph.model.addListener(InternalEvent.CHANGE,this.resetHandler),this.graph.view.addListener(InternalEvent.SCALE_AND_TRANSLATE,this.resetHandler),this.graph.view.addListener(InternalEvent.TRANSLATE,this.resetHandler),this.graph.view.addListener(InternalEvent.SCALE,this.resetHandler),this.graph.addListener(InternalEvent.ROOT,this.resetHandler)}isEnabled(){return this.enabled}setEnabled(d){this.enabled=d}reset(){for(let d=0;d<this.focusIcons.length;d+=1)this.focusIcons[d].destroy();this.focusIcons=[],this.focusHighlight&&(this.focusHighlight.destroy(),this.focusHighlight=null),this.currentConstraint=null,this.currentFocusArea=null,this.currentPoint=null,this.currentFocus=null,this.focusPoints=[]}getTolerance(d){return this.graph.getEventTolerance()}getImageForConstraint(d,g,E){return this.pointImage}isEventIgnored(d,g=!1){return!1}isStateIgnored(d,g=!1){return!1}destroyIcons(){for(let d=0;d<this.focusIcons.length;d+=1)this.focusIcons[d].destroy();this.focusIcons=[],this.focusPoints=[]}destroyFocusHighlight(){this.focusHighlight&&(this.focusHighlight.destroy(),this.focusHighlight=null)}isKeepFocusEvent(d){return isShiftDown(d.getEvent())}getCellForEvent(d,g){let E=d.getCell();if(!E&&g&&(d.getGraphX()!==g.x||d.getGraphY()!==g.y)&&(E=this.graph.getCellAt(g.x,g.y)),E&&!E.isConnectable()){const b=E.getParent();b&&b.isVertex()&&b.isConnectable()&&(E=b)}return E?this.graph.isCellLocked(E)?null:E:null}update(d,g,E,b){if(this.isEnabled()&&!this.isEventIgnored(d)){!this.mouseleaveHandler&&this.graph.container&&(this.mouseleaveHandler=()=>{this.reset()},InternalEvent.addListener(this.graph.container,"mouseleave",this.resetHandler));const w=this.getTolerance(d),C=b?b.x:d.getGraphX(),S=b?b.y:d.getGraphY(),P=new Rectangle(C-w,S-w,2*w,2*w),I=new Rectangle(d.getGraphX()-w,d.getGraphY()-w,2*w,2*w),M=this.graph.view.getState(this.getCellForEvent(d,b));!this.isKeepFocusEvent(d)&&(!this.currentFocusArea||!this.currentFocus||M||!this.currentFocus.cell.isVertex()||!intersects(this.currentFocusArea,I))&&M!==this.currentFocus&&(this.currentFocusArea=null,this.currentFocus=null,this.setFocus(d,M,g)),this.currentConstraint=null,this.currentPoint=null;let D=null,k;if(this.focusIcons.length>0&&this.constraints&&(!M||this.currentFocus===M)){const H=I.getCenterX(),F=I.getCenterY();for(let j=0;j<this.focusIcons.length;j+=1){const $=H-this.focusIcons[j].bounds.getCenterX(),z=F-this.focusIcons[j].bounds.getCenterY();if(k=$*$+z*z,(this.intersects(this.focusIcons[j],I,g,E)||b&&this.intersects(this.focusIcons[j],P,g,E))&&(D===null||k<D)){if(this.currentConstraint=this.constraints[j],this.currentPoint=this.focusPoints[j],D=k,k=this.focusIcons[j].bounds.clone(),k.grow(HIGHLIGHT_SIZE+1),k.width-=1,k.height-=1,!this.focusHighlight){const U=this.createHighlightShape();U.dialect=DIALECT.SVG,U.pointerEvents=!1,U.init(this.graph.getView().getOverlayPane()),this.focusHighlight=U;const W=()=>this.currentFocus?this.currentFocus:M;InternalEvent.redirectMouseEvents(U.node,this.graph,W)}this.focusHighlight.bounds=k,this.focusHighlight.redraw()}}}this.currentConstraint||this.destroyFocusHighlight()}else this.currentConstraint=null,this.currentFocus=null,this.currentPoint=null}redraw(){if(this.currentFocus&&this.constraints&&this.focusIcons.length>0){const d=this.graph.view.getState(this.currentFocus.cell);this.currentFocus=d,this.currentFocusArea=new Rectangle(d.x,d.y,d.width,d.height);for(let g=0;g<this.constraints.length;g+=1){const E=this.graph.getConnectionPoint(d,this.constraints[g]),b=this.getImageForConstraint(d,this.constraints[g],E),w=new Rectangle(Math.round(E.x-b.width/2),Math.round(E.y-b.height/2),b.width,b.height);this.focusIcons[g].bounds=w,this.focusIcons[g].redraw(),this.currentFocusArea.add(this.focusIcons[g].bounds),this.focusPoints[g]=E}}}setFocus(d,g,E){var b;if(this.constraints=g&&!this.isStateIgnored(g,E)&&g.cell.isConnectable()?this.isEnabled()?this.graph.getAllConnectionConstraints(g,E)??[]:[]:null,this.constraints&&g){this.currentFocus=g,this.currentFocusArea=new Rectangle(g.x,g.y,g.width,g.height);for(let w=0;w<this.focusIcons.length;w+=1)this.focusIcons[w].destroy();this.focusIcons=[],this.focusPoints=[];for(let w=0;w<this.constraints.length;w+=1){const C=this.graph.getConnectionPoint(g,this.constraints[w]),S=this.getImageForConstraint(g,this.constraints[w],C),{src:P}=S,I=new Rectangle(Math.round(C.x-S.width/2),Math.round(C.y-S.height/2),S.width,S.height),M=new ImageShape(I,P);M.dialect=this.graph.dialect!==DIALECT.SVG?DIALECT.MIXEDHTML:DIALECT.SVG,M.preserveImageAspect=!1,M.init(this.graph.getView().getDecoratorPane()),M.node.previousSibling&&((b=M.node.parentNode)==null||b.insertBefore(M.node,M.node.parentNode.firstChild));const D=()=>this.currentFocus?this.currentFocus:g;M.redraw(),InternalEvent.redirectMouseEvents(M.node,this.graph,D),this.currentFocusArea.add(M.bounds),this.focusIcons.push(M),this.focusPoints.push(C)}this.currentFocusArea.grow(this.getTolerance(d))}else this.destroyIcons(),this.destroyFocusHighlight()}createHighlightShape(){const d=new RectangleShape(new Rectangle,this.highlightColor,this.highlightColor,HIGHLIGHT_STROKEWIDTH);return d.opacity=HIGHLIGHT_OPACITY,d}intersects(d,g,E,b){return intersects(d.bounds,g)}onDestroy(){this.reset(),this.graph.model.removeListener(this.resetHandler),this.graph.view.removeListener(this.resetHandler),this.graph.removeListener(this.resetHandler),this.mouseleaveHandler&&this.graph.container&&(InternalEvent.removeListener(this.graph.container,"mouseleave",this.mouseleaveHandler),this.mouseleaveHandler=null)}}class EdgeHandler{constructor(d){if(this.error=null,this.bends=[],this.cloneEnabled=!0,this.addEnabled=!1,this.removeEnabled=!1,this.dblClickRemoveEnabled=!1,this.mergeRemoveEnabled=!1,this.straightRemoveEnabled=!1,this.virtualBendsEnabled=!1,this.virtualBendOpacity=20,this.parentHighlightEnabled=!1,this.preferHtml=!1,this.allowHandleBoundsCheck=!0,this.snapToTerminals=!1,this.handleImage=null,this.labelHandleImage=null,this.tolerance=0,this.outlineConnect=!1,this.manageLabelHandle=!1,this.currentPoint=null,this.parentHighlight=null,this.index=null,this.isSource=!1,this.isTarget=!1,this.isLabel=!1,this.points=[],this.snapPoint=null,this.abspoints=[],this.startX=0,this.startY=0,this.outline=!0,this.active=!0,this.state=d,this.graph=this.state.view.graph,this.marker=this.createMarker(),this.constraintHandler=new ConstraintHandler(this.graph),this.points=[],this.abspoints=this.getSelectionPoints(this.state),this.shape=this.createSelectionShape(this.abspoints),this.shape.dialect=this.graph.dialect!==DIALECT.SVG?DIALECT.MIXEDHTML:DIALECT.SVG,this.shape.init(this.graph.getView().getOverlayPane()),this.shape.pointerEvents=!1,this.shape.setCursor(CURSOR.MOVABLE_EDGE),InternalEvent.redirectMouseEvents(this.shape.node,this.graph,this.state),this.preferHtml=this.state.text!=null&&this.state.text.node.parentNode===this.graph.container,!this.preferHtml){const E=this.state.getVisibleTerminalState(!0);if(E!=null&&(this.preferHtml=E.text!=null&&E.text.node.parentNode===this.graph.container),!this.preferHtml){const b=this.state.getVisibleTerminalState(!1);b!=null&&(this.preferHtml=b.text!=null&&b.text.node.parentNode===this.graph.container)}}const g=this.graph.getPlugin("SelectionHandler");g&&(this.graph.getSelectionCount()<g.maxCells||g.maxCells<=0)&&(this.bends=this.createBends(),this.isVirtualBendsEnabled()&&(this.virtualBends=this.createVirtualBends())),this.label=new Point(this.state.absoluteOffset.x,this.state.absoluteOffset.y),this.labelShape=this.createLabelHandleShape(),this.initBend(this.labelShape),this.labelShape.setCursor(CURSOR.LABEL_HANDLE),this.customHandles=this.createCustomHandles(),this.updateParentHighlight(),this.redraw(),this.escapeHandler=(E,b)=>{const w=this.index!=null;this.reset(),w&&this.graph.cellRenderer.redraw(this.state,!1,d.view.isRendering())},this.state.view.graph.addListener(InternalEvent.ESCAPE,this.escapeHandler)}isParentHighlightVisible(){const d=this.state.cell.getParent();return d?!this.graph.isCellSelected(d):null}updateParentHighlight(){if(!this.isDestroyed()){const d=this.isParentHighlightVisible(),g=this.state.cell.getParent(),E=g?this.graph.view.getState(g):null;if(this.parentHighlight)if(g&&g.isVertex()&&d){const b=this.parentHighlight.bounds;E&&b&&(b.x!==E.x||b.y!==E.y||b.width!==E.width||b.height!==E.height)&&(this.parentHighlight.bounds=Rectangle.fromRectangle(E),this.parentHighlight.redraw())}else E&&E.parentHighlight===this.parentHighlight&&(E.parentHighlight=null),this.parentHighlight.destroy(),this.parentHighlight=null;else this.parentHighlightEnabled&&d&&g&&g.isVertex()&&E&&!E.parentHighlight&&(this.parentHighlight=this.createParentHighlightShape(E),this.parentHighlight.dialect=DIALECT.SVG,this.parentHighlight.pointerEvents=!1,E.style.rotation&&(this.parentHighlight.rotation=E.style.rotation),this.parentHighlight.init(this.graph.getView().getOverlayPane()),this.parentHighlight.redraw(),E.parentHighlight=this.parentHighlight)}}createCustomHandles(){return[]}isVirtualBendsEnabled(d){return this.virtualBendsEnabled&&(this.state.style.edgeStyle==null||this.state.style.edgeStyle===NONE||this.state.style.noEdgeStyle)&&this.state.style.shape!=="arrow"}isCellEnabled(d){return!0}isAddPointEvent(d){return isShiftDown(d)}isRemovePointEvent(d){return isShiftDown(d)}getSelectionPoints(d){return d.absolutePoints}createParentHighlightShape(d){const g=new RectangleShape(Rectangle.fromRectangle(d),NONE,this.getSelectionColor());return g.strokeWidth=this.getSelectionStrokeWidth(),g.isDashed=this.isSelectionDashed(),g}createSelectionShape(d){const g=this.state.shape.constructor,E=new g;return E.outline=!0,E.apply(this.state),E.isDashed=this.isSelectionDashed(),E.stroke=this.getSelectionColor(),E.isShadow=!1,E}getSelectionColor(){return EDGE_SELECTION_COLOR}getSelectionStrokeWidth(){return EDGE_SELECTION_STROKEWIDTH}isSelectionDashed(){return EDGE_SELECTION_DASHED}isConnectableCell(d){return!0}getCellAt(d,g){return this.outlineConnect?null:this.graph.getCellAt(d,g)}createMarker(){return new EdgeHandlerCellMarker(this.graph,this)}validateConnection(d,g){return this.graph.getEdgeValidationError(this.state.cell,d,g)}createBends(){const{cell:d}=this.state,g=[];for(let E=0;E<this.abspoints.length;E+=1)if(this.isHandleVisible(E)){const b=E===0,w=E===this.abspoints.length-1,C=b||w;(C||this.graph.isCellBendable(d))&&(S=>{const P=this.createHandleShape(S);this.initBend(P,()=>{this.dblClickRemoveEnabled&&this.removePoint(this.state,S)}),this.isHandleEnabled(E)&&P.setCursor(C?CURSOR.TERMINAL_HANDLE:CURSOR.BEND_HANDLE),g.push(P),C||(this.points.push(new Point(0,0)),P.node.style.visibility="hidden")})(E)}return g}createVirtualBends(){const{cell:d}=this.state;this.abspoints[0];const g=[];if(this.graph.isCellBendable(d))for(let E=1;E<this.abspoints.length;E+=1)(b=>{this.initBend(b),b.setCursor(CURSOR.VIRTUAL_BEND_HANDLE),g.push(b)})(this.createHandleShape());return g}isHandleEnabled(d){return!0}isHandleVisible(d){const g=this.state.getVisibleTerminalState(!0),E=this.state.getVisibleTerminalState(!1),b=this.state.cell.getGeometry();return(b?this.graph.view.getEdgeStyle(this.state,b.points||void 0,g,E):null)!==EdgeStyle.EntityRelation||d===0||d===this.abspoints.length-1}createHandleShape(d){if(this.handleImage){const E=new ImageShape(new Rectangle(0,0,this.handleImage.width,this.handleImage.height),this.handleImage.src);return E.preserveImageAspect=!1,E}let g=HANDLE_SIZE;return this.preferHtml&&(g-=1),new RectangleShape(new Rectangle(0,0,g,g),HANDLE_FILLCOLOR,HANDLE_STROKECOLOR)}createLabelHandleShape(){if(this.labelHandleImage){const g=new ImageShape(new Rectangle(0,0,this.labelHandleImage.width,this.labelHandleImage.height),this.labelHandleImage.src);return g.preserveImageAspect=!1,g}const d=LABEL_HANDLE_SIZE;return new RectangleShape(new Rectangle(0,0,d,d),LABEL_HANDLE_FILLCOLOR,HANDLE_STROKECOLOR)}initBend(d,g){this.preferHtml?(d.dialect=DIALECT.STRICTHTML,d.init(this.graph.container)):(d.dialect=this.graph.dialect!==DIALECT.SVG?DIALECT.MIXEDHTML:DIALECT.SVG,d.init(this.graph.getView().getOverlayPane())),InternalEvent.redirectMouseEvents(d.node,this.graph,this.state,null,null,null,g),Client.IS_TOUCH&&d.node.setAttribute("pointer-events","none")}getHandleForEvent(d){let g=null;const E=isMouseEvent(d.getEvent())?1:this.tolerance,b=this.allowHandleBoundsCheck&&E>0?new Rectangle(d.getGraphX()-E,d.getGraphY()-E,2*E,2*E):null;let w=Number.POSITIVE_INFINITY;function C(S){if(S&&S.bounds&&S.node&&S.node.style.display!=="none"&&S.node.style.visibility!=="hidden"&&(d.isSource(S)||b&&intersects(S.bounds,b))){const P=d.getGraphX()-S.bounds.getCenterX(),I=d.getGraphY()-S.bounds.getCenterY(),M=P*P+I*I;if(M<=w)return w=M,!0}return!1}if(this.isCustomHandleEvent(d)&&this.customHandles){for(let S=this.customHandles.length-1;S>=0;S--)if(C(this.customHandles[S].shape))return InternalEvent.CUSTOM_HANDLE-S}(d.isSource(this.state.text)||C(this.labelShape))&&(g=InternalEvent.LABEL_HANDLE);for(let S=0;S<this.bends.length;S+=1)C(this.bends[S])&&(g=S);if(this.virtualBends&&this.isAddVirtualBendEvent(d))for(let S=0;S<this.virtualBends.length;S+=1)C(this.virtualBends[S])&&(g=InternalEvent.VIRTUAL_HANDLE-S);return g}isAddVirtualBendEvent(d){return!0}isCustomHandleEvent(d){return!0}mouseDown(d,g){const E=this.getHandleForEvent(g);if(E!==null&&this.bends[E]){const b=this.bends[E].bounds;b&&(this.snapPoint=new Point(b.getCenterX(),b.getCenterY()))}if(this.addEnabled&&E===null&&this.isAddPointEvent(g.getEvent()))this.addPoint(this.state,g.getEvent()),g.consume();else if(E!==null&&!g.isConsumed()&&this.graph.isEnabled()){const b=g.getCell();this.removeEnabled&&this.isRemovePointEvent(g.getEvent())?this.removePoint(this.state,E):(E!==InternalEvent.LABEL_HANDLE||b&&this.graph.isLabelMovable(b))&&(this.virtualBends&&E<=InternalEvent.VIRTUAL_HANDLE&&setOpacity(this.virtualBends[InternalEvent.VIRTUAL_HANDLE-E].node,100),this.start(g.getX(),g.getY(),E)),g.consume()}}start(d,g,E){if(this.startX=d,this.startY=g,this.isSource=this.bends.length===0?!1:E===0,this.isTarget=this.bends.length===0?!1:E===this.bends.length-1,this.isLabel=E===InternalEvent.LABEL_HANDLE,this.isSource||this.isTarget){const{cell:b}=this.state,w=b.getTerminal(this.isSource);(w==null&&this.graph.isTerminalPointMovable(b,this.isSource)||w!=null&&this.graph.isCellDisconnectable(b,w,this.isSource))&&(this.index=E)}else this.index=E;if(this.index!==null&&this.index<=InternalEvent.CUSTOM_HANDLE&&this.index>InternalEvent.VIRTUAL_HANDLE&&this.customHandles!=null)for(let b=0;b<this.customHandles.length;b+=1)b!==InternalEvent.CUSTOM_HANDLE-this.index&&this.customHandles[b].setVisible(!1)}clonePreviewState(d,g){return this.state.clone()}getSnapToTerminalTolerance(){return this.graph.getGridSize()*this.graph.getView().scale/2}updateHint(d,g){}removeHint(){}roundLength(d){return Math.round(d)}isSnapToTerminalsEvent(d){return this.snapToTerminals&&!isAltDown(d.getEvent())}getPointForEvent(d){const g=this.graph.getView(),{scale:E}=g,b=new Point(this.roundLength(d.getGraphX()/E)*E,this.roundLength(d.getGraphY()/E)*E),w=this.getSnapToTerminalTolerance();let C=!1,S=!1;if(w>0&&this.isSnapToTerminalsEvent(d)){const P=M=>{if(M){const{x:D}=M;Math.abs(b.x-D)<w&&(b.x=D,C=!0);const{y:k}=M;Math.abs(b.y-k)<w&&(b.y=k,S=!0)}},I=M=>{M&&P(new Point(g.getRoutingCenterX(M),g.getRoutingCenterY(M)))};I(this.state.getVisibleTerminalState(!0)),I(this.state.getVisibleTerminalState(!1));for(let M=0;M<this.state.absolutePoints.length;M+=1)P(this.state.absolutePoints[M])}if(this.graph.isGridEnabledEvent(d.getEvent())){const P=g.translate;C||(b.x=(this.graph.snap(b.x/E-P.x)+P.x)*E),S||(b.y=(this.graph.snap(b.y/E-P.y)+P.y)*E)}return b}getPreviewTerminalState(d){if(this.constraintHandler.update(d,this.isSource,!0,d.isSource(this.marker.highlight.shape)?null:this.currentPoint),this.constraintHandler.currentFocus&&this.constraintHandler.currentConstraint){this.marker.highlight&&this.marker.highlight.shape&&this.marker.highlight.state&&this.marker.highlight.state.cell===this.constraintHandler.currentFocus.cell?this.marker.highlight.shape.stroke!=="transparent"&&(this.marker.highlight.shape.stroke="transparent",this.marker.highlight.repaint()):this.marker.markCell(this.constraintHandler.currentFocus.cell,"transparent");const g=this.graph.view.getTerminalPort(this.state,this.graph.view.getState(this.state.cell.getTerminal(!this.isSource)),!this.isSource),E=g?g.cell:null,b=this.isSource?this.constraintHandler.currentFocus.cell:E,w=this.isSource?E:this.constraintHandler.currentFocus.cell;this.error=this.validateConnection(b,w);let C=null;return this.error===null&&(C=this.constraintHandler.currentFocus),(this.error!==null||C&&!this.isCellEnabled(C.cell))&&this.constraintHandler.reset(),C}if(!this.graph.isIgnoreTerminalEvent(d.getEvent())){this.marker.process(d);const g=this.marker.getValidState();return g&&!this.isCellEnabled(g.cell)&&(this.constraintHandler.reset(),this.marker.reset()),this.marker.getValidState()}return this.marker.reset(),null}getPreviewPoints(d,g){const E=this.state.cell.getGeometry();if(!E)return null;let b=(E.points||[]).slice();const w=new Point(d.x,d.y);let C=null;if(!this.isSource&&!this.isTarget&&this.index!==null){if(this.convertPoint(w,!1),this.index<=InternalEvent.VIRTUAL_HANDLE&&b.splice(InternalEvent.VIRTUAL_HANDLE-this.index,0,w),!this.isSource&&!this.isTarget){for(let S=0;S<this.bends.length;S+=1)if(S!==this.index){const P=this.bends[S];P&&contains(P.bounds,d.x,d.y)&&(this.index<=InternalEvent.VIRTUAL_HANDLE?b.splice(InternalEvent.VIRTUAL_HANDLE-this.index,1):b.splice(this.index-1,1),C=b)}if(!C&&this.straightRemoveEnabled&&(!g||!isAltDown(g.getEvent()))){const S=this.graph.getEventTolerance()*this.graph.getEventTolerance(),P=this.state.absolutePoints.slice();P[this.index]=d;const I=this.state.getVisibleTerminalState(!0);if(I!=null){const k=this.graph.getConnectionConstraint(this.state,I,!0);(k==null||this.graph.getConnectionPoint(I,k)==null)&&(P[0]=new Point(I.view.getRoutingCenterX(I),I.view.getRoutingCenterY(I)))}const M=this.state.getVisibleTerminalState(!1);if(M!=null){const k=this.graph.getConnectionConstraint(this.state,M,!1);(k==null||this.graph.getConnectionPoint(M,k)==null)&&(P[P.length-1]=new Point(M.view.getRoutingCenterX(M),M.view.getRoutingCenterY(M)))}((k,H)=>{k>0&&k<P.length-1&&ptSegDistSq(P[k-1].x,P[k-1].y,P[k+1].x,P[k+1].y,H.x,H.y)<S&&(b.splice(k-1,1),C=b)})(this.index,d)}}C==null&&this.index>InternalEvent.VIRTUAL_HANDLE&&(b[this.index-1]=w)}else this.graph.isResetEdgesOnConnect()&&(b=[]);return C??b}isOutlineConnectEvent(d){if(!this.currentPoint)return!1;const g=getOffset(this.graph.container),E=d.getEvent(),b=getClientX(E),w=getClientY(E),C=document.documentElement,S=(window.pageXOffset||C.scrollLeft)-(C.clientLeft||0),P=(window.pageYOffset||C.scrollTop)-(C.clientTop||0),I=this.currentPoint.x-this.graph.container.scrollLeft+g.x-S,M=this.currentPoint.y-this.graph.container.scrollTop+g.y-P;return this.outlineConnect&&!isShiftDown(d.getEvent())&&(d.isSource(this.marker.highlight.shape)||isAltDown(d.getEvent())&&d.getState()!=null||this.marker.highlight.isHighlightAt(b,w)||(I!==b||M!==w)&&d.getState()==null&&this.marker.highlight.isHighlightAt(I,M))}updatePreviewState(d,g,E,b,w=!1){const C=this.isSource?E:this.state.getVisibleTerminalState(!0),S=this.isTarget?E:this.state.getVisibleTerminalState(!1);let P=this.graph.getConnectionConstraint(d,C,!0),I=this.graph.getConnectionConstraint(d,S,!1),M=this.constraintHandler.currentConstraint;if(M==null&&w&&(E!=null?(b.isSource(this.marker.highlight.shape)&&(g=new Point(b.getGraphX(),b.getGraphY())),M=this.graph.getOutlineConstraint(g,E,b),this.constraintHandler.setFocus(b,E,this.isSource),this.constraintHandler.currentConstraint=M,this.constraintHandler.currentPoint=g):M=new ConnectionConstraint(null)),this.outlineConnect&&this.marker.highlight!=null&&this.marker.highlight.shape!=null){const D=this.graph.view.scale;if(this.constraintHandler.currentConstraint!=null&&this.constraintHandler.currentFocus!=null)this.marker.highlight.shape.stroke=w?OUTLINE_HIGHLIGHT_COLOR:"transparent",this.marker.highlight.shape.strokeWidth=OUTLINE_HIGHLIGHT_STROKEWIDTH/D/D,this.marker.highlight.repaint();else if(this.marker.hasValidState()){const k=b.getCell();this.marker.highlight.shape.stroke=k&&k.isConnectable()&&this.marker.getValidState()!==b.getState()?"transparent":DEFAULT_VALID_COLOR,this.marker.highlight.shape.strokeWidth=HIGHLIGHT_STROKEWIDTH/D/D,this.marker.highlight.repaint()}}this.isSource?P=M:this.isTarget&&(I=M),(this.isSource||this.isTarget)&&(M!=null&&M.point!=null?(d.style[this.isSource?"exitX":"entryX"]=M.point.x,d.style[this.isSource?"exitY":"entryY"]=M.point.y):(delete d.style[this.isSource?"exitX":"entryX"],delete d.style[this.isSource?"exitY":"entryY"])),d.setVisibleTerminalState(C,!0),d.setVisibleTerminalState(S,!1),(!this.isSource||C!=null)&&d.view.updateFixedTerminalPoint(d,C,!0,P),(!this.isTarget||S!=null)&&d.view.updateFixedTerminalPoint(d,S,!1,I),(this.isSource||this.isTarget)&&E==null&&(d.setAbsoluteTerminalPoint(g,this.isSource),this.marker.getMarkedState()==null&&(this.error=this.graph.isAllowDanglingEdges()?null:"")),d.view.updatePoints(d,this.points,C,S),d.view.updateFloatingTerminalPoints(d,C,S)}mouseMove(d,g){var E;if(this.index!=null&&this.marker!=null){if(this.currentPoint=this.getPointForEvent(g),this.error=null,!this.graph.isIgnoreTerminalEvent(g.getEvent())&&isShiftDown(g.getEvent())&&this.snapPoint!=null&&(Math.abs(this.snapPoint.x-this.currentPoint.x)<Math.abs(this.snapPoint.y-this.currentPoint.y)?this.currentPoint.x=this.snapPoint.x:this.currentPoint.y=this.snapPoint.y),this.index<=InternalEvent.CUSTOM_HANDLE&&this.index>InternalEvent.VIRTUAL_HANDLE)this.customHandles!=null&&(this.customHandles[InternalEvent.CUSTOM_HANDLE-this.index].processEvent(g),this.customHandles[InternalEvent.CUSTOM_HANDLE-this.index].positionChanged(),this.shape!=null&&this.shape.node!=null&&(this.shape.node.style.display="none"));else if(this.isLabel&&this.label)this.label.x=this.currentPoint.x,this.label.y=this.currentPoint.y;else{this.points=this.getPreviewPoints(this.currentPoint,g);let b=this.isSource||this.isTarget?this.getPreviewTerminalState(g):null;if(this.constraintHandler.currentConstraint!=null&&this.constraintHandler.currentFocus!=null&&this.constraintHandler.currentPoint!=null?this.currentPoint=this.constraintHandler.currentPoint.clone():this.outlineConnect&&((this.isSource||this.isTarget?this.isOutlineConnectEvent(g):!1)?b=this.marker.highlight.state:b!=null&&b!==g.getState()&&((E=g.getCell())!=null&&E.isConnectable())&&this.marker.highlight.shape!=null&&(this.marker.highlight.shape.stroke="transparent",this.marker.highlight.repaint(),b=null)),b!=null&&!this.isCellEnabled(b.cell)&&(b=null,this.marker.reset()),this.currentPoint){const w=this.clonePreviewState(this.currentPoint,b!=null?b.cell:null);this.updatePreviewState(w,this.currentPoint,b,g,this.outline);const C=this.error==null?this.marker.validColor:this.marker.invalidColor;this.setPreviewColor(C),this.abspoints=w.absolutePoints,this.active=!0,this.updateHint(g,this.currentPoint)}}this.drawPreview(),InternalEvent.consume(g.getEvent()),g.consume()}}mouseUp(d,g){if(this.index!=null&&this.marker!=null){this.shape!=null&&this.shape.node!=null&&(this.shape.node.style.display="");let E=this.state.cell;const{index:b}=this;if(this.index=null,g.getX()!==this.startX||g.getY()!==this.startY){const w=!this.graph.isIgnoreTerminalEvent(g.getEvent())&&this.graph.isCloneEvent(g.getEvent())&&this.cloneEnabled&&this.graph.isCellsCloneable();if(this.error!=null)this.error.length>0&&this.graph.validationAlert(this.error);else if(b<=InternalEvent.CUSTOM_HANDLE&&b>InternalEvent.VIRTUAL_HANDLE){if(this.customHandles!=null){const C=this.graph.getDataModel();C.beginUpdate();try{this.customHandles[InternalEvent.CUSTOM_HANDLE-b].execute(g),this.shape!=null&&this.shape.node!=null&&(this.shape.apply(this.state),this.shape.redraw())}finally{C.endUpdate()}}}else if(this.isLabel&&this.label)this.moveLabel(this.state,this.label.x,this.label.y);else if(this.isSource||this.isTarget){let C=null;if(this.constraintHandler.currentConstraint!=null&&this.constraintHandler.currentFocus!=null&&(C=this.constraintHandler.currentFocus.cell),!C&&this.marker.hasValidState()&&this.marker.highlight!=null&&this.marker.highlight.shape!=null&&this.marker.highlight.shape.stroke!=="transparent"&&this.marker.highlight.shape.stroke!=="white"&&(C=this.marker.validState.cell),C){const S=this.graph.getDataModel(),P=E.getParent();S.beginUpdate();try{if(w){let I=E.getGeometry();const M=this.graph.cloneCell(E);S.add(P,M,P.getChildCount()),I!=null&&(I=I.clone(),S.setGeometry(M,I));const D=E.getTerminal(!this.isSource);this.graph.connectCell(M,D,!this.isSource),E=M}E=this.connect(E,C,this.isSource,w,g)}finally{S.endUpdate()}}else if(this.graph.isAllowDanglingEdges()){const S=this.abspoints[this.isSource?0:this.abspoints.length-1];S.x=this.roundLength(S.x/this.graph.view.scale-this.graph.view.translate.x),S.y=this.roundLength(S.y/this.graph.view.scale-this.graph.view.translate.y);const P=E.getParent(),I=P?this.graph.getView().getState(P):null;I!=null&&(S.x-=I.origin.x,S.y-=I.origin.y),S.x-=this.graph.getPanDx()/this.graph.view.scale,S.y-=this.graph.getPanDy()/this.graph.view.scale,E=this.changeTerminalPoint(E,S,this.isSource,w)}}else this.active?E=this.changePoints(E,this.points,w):(this.graph.getView().invalidate(this.state.cell),this.graph.getView().validate(this.state.cell))}else this.graph.isToggleEvent(g.getEvent())&&this.graph.selectCellForEvent(this.state.cell,g.getEvent());this.marker!=null&&(this.reset(),E!==this.state.cell&&this.graph.setSelectionCell(E)),g.consume()}}reset(){if(this.active&&this.refresh(),this.error=null,this.index=null,this.points=[],this.snapPoint=null,this.isLabel=!1,this.isSource=!1,this.isTarget=!1,this.active=!1,this.marker&&this.marker.reset(),this.constraintHandler.reset(),this.customHandles)for(let d=0;d<this.customHandles.length;d+=1)this.customHandles[d].reset();this.setPreviewColor(EDGE_SELECTION_COLOR),this.removeHint(),this.redraw()}setPreviewColor(d){this.shape.stroke=d}convertPoint(d,g){const E=this.graph.getView().getScale(),b=this.graph.getView().getTranslate();g&&(d.x=this.graph.snap(d.x),d.y=this.graph.snap(d.y)),d.x=Math.round(d.x/E-b.x),d.y=Math.round(d.y/E-b.y);const w=this.state.cell.getParent(),C=w&&this.graph.getView().getState(w);return C&&(d.x-=C.origin.x,d.y-=C.origin.y),d}moveLabel(d,g,E){const b=this.graph.getDataModel();let w=d.cell.getGeometry();if(w!=null){const{scale:C}=this.graph.getView();if(w=w.clone(),w.relative){let S=this.graph.getView().getRelativePoint(d,g,E);w.x=Math.round(S.x*1e4)/1e4,w.y=Math.round(S.y),w.offset=new Point(0,0),S=this.graph.view.getPoint(d,w),w.offset=new Point(Math.round((g-S.x)/C),Math.round((E-S.y)/C))}else{const S=d.absolutePoints,P=S[0],I=S[S.length-1];if(P!=null&&I!=null){const M=P.x+(I.x-P.x)/2,D=P.y+(I.y-P.y)/2;w.offset=new Point(Math.round((g-M)/C),Math.round((E-D)/C)),w.x=0,w.y=0}}b.setGeometry(d.cell,w)}}connect(d,g,E,b,w){return d.getParent(),this.graph.batchUpdate(()=>{let C=this.constraintHandler.currentConstraint;C==null&&(C=new ConnectionConstraint(null)),this.graph.connectCell(d,g,E,C)}),d}changeTerminalPoint(d,g,E,b){const w=this.graph.getDataModel();return w.batchUpdate(()=>{if(b){const S=d.getParent(),P=d.getTerminal(!E);d=this.graph.cloneCell(d),w.add(S,d,S.getChildCount()),w.setTerminal(d,P,!E)}let C=d.getGeometry();C!=null&&(C=C.clone(),C.setTerminalPoint(g,E),w.setGeometry(d,C),this.graph.connectCell(d,null,E,new ConnectionConstraint(null)))}),d}changePoints(d,g,E){const b=this.graph.getDataModel();return b.batchUpdate(()=>{if(E){const C=d.getParent(),S=d.getTerminal(!0),P=d.getTerminal(!1);d=this.graph.cloneCell(d),b.add(C,d,C.getChildCount()),b.setTerminal(d,S,!0),b.setTerminal(d,P,!1)}let w=d.getGeometry();w!=null&&(w=w.clone(),w.points=g,b.setGeometry(d,w))}),d}addPoint(d,g){const E=convertPoint(this.graph.container,getClientX(g),getClientY(g)),b=this.graph.isGridEnabledEvent(g);this.convertPoint(E,b),this.addPointAt(d,E.x,E.y),InternalEvent.consume(g)}addPointAt(d,g,E){let b=d.cell.getGeometry();const w=new Point(g,E);if(b!=null){b=b.clone();const C=this.graph.view.translate,S=this.graph.view.scale;let P=new Point(C.x*S,C.y*S);const I=this.state.cell.getParent();if(I&&I.isVertex()){const D=this.graph.view.getState(I);D&&(P=new Point(D.x,D.y))}const M=findNearestSegment(d,w.x*S+P.x,w.y*S+P.y);b.points==null?b.points=[w]:b.points.splice(M,0,w),this.graph.getDataModel().setGeometry(d.cell,b),this.refresh(),this.redraw()}}removePoint(d,g){if(g>0&&g<this.abspoints.length-1){let E=this.state.cell.getGeometry();E!=null&&E.points!=null&&(E=E.clone(),(E.points||[]).splice(g-1,1),this.graph.getDataModel().setGeometry(d.cell,E),this.refresh(),this.redraw())}}getHandleFillColor(d){const g=d===0,{cell:E}=this.state,b=E.getTerminal(g);let w=HANDLE_FILLCOLOR;return b!=null&&!this.graph.isCellDisconnectable(E,b,g)||b==null&&!this.graph.isTerminalPointMovable(E,g)?w=LOCKED_HANDLE_FILLCOLOR:b!=null&&this.graph.isCellDisconnectable(E,b,g)&&(w=CONNECT_HANDLE_FILLCOLOR),w}redraw(d){this.abspoints=this.state.absolutePoints.slice();const g=this.state.cell.getGeometry();if(g){const E=g.points;if(this.bends!=null&&this.bends.length>0&&E!=null){this.points==null&&(this.points=[]);for(let b=1;b<this.bends.length-1;b+=1)this.bends[b]!=null&&this.abspoints[b]!=null&&(this.points[b-1]=E[b-1])}}this.drawPreview(),d||this.redrawHandles()}redrawHandles(){const{cell:d}=this.state;let g=this.labelShape.bounds;this.label=new Point(this.state.absoluteOffset.x,this.state.absoluteOffset.y),this.labelShape.bounds=new Rectangle(Math.round(this.label.x-g.width/2),Math.round(this.label.y-g.height/2),g.width,g.height);const E=this.graph.getLabel(d);if(this.labelShape.visible=E!=null&&E.length>0&&this.graph.isLabelMovable(d),this.bends!=null&&this.bends.length>0){const b=this.abspoints.length-1,w=this.abspoints[0],C=w.x,S=w.y;g=this.bends[0].bounds,this.bends[0].bounds=new Rectangle(Math.floor(C-g.width/2),Math.floor(S-g.height/2),g.width,g.height),this.bends[0].fill=this.getHandleFillColor(0),this.bends[0].redraw(),this.manageLabelHandle&&this.checkLabelHandle(this.bends[0].bounds);const P=this.abspoints[b],I=P.x,M=P.y,D=this.bends.length-1;g=this.bends[D].bounds,this.bends[D].bounds=new Rectangle(Math.floor(I-g.width/2),Math.floor(M-g.height/2),g.width,g.height),this.bends[D].fill=this.getHandleFillColor(D),this.bends[D].redraw(),this.manageLabelHandle&&this.checkLabelHandle(this.bends[D].bounds),this.redrawInnerBends(w,P)}if(this.virtualBends&&this.virtualBends.length>0){let b=this.abspoints[0];for(let w=0;w<this.virtualBends.length;w+=1)if(this.virtualBends[w]!=null&&this.abspoints[w+1]!=null){const C=this.abspoints[w+1],S=this.virtualBends[w],P=b.x+(C.x-b.x)/2,I=b.y+(C.y-b.y)/2;S.bounds&&(S.bounds=new Rectangle(Math.floor(P-S.bounds.width/2),Math.floor(I-S.bounds.height/2),S.bounds.width,S.bounds.height),S.redraw()),setOpacity(S.node,this.virtualBendOpacity),b=C,this.manageLabelHandle&&this.checkLabelHandle(S.bounds)}}if(this.labelShape.redraw(),this.customHandles)for(let b=0;b<this.customHandles.length;b+=1){const w=this.customHandles[b].shape;if(w){const C=w.node.style.display;this.customHandles[b].redraw(),w.node.style.display=C,w.node.style.visibility=this.isCustomHandleVisible(this.customHandles[b])?"":"hidden"}}}isCustomHandleVisible(d){return!this.graph.isEditing()&&this.state.view.graph.getSelectionCount()===1}setHandlesVisible(d){for(let g=0;g<this.bends.length;g+=1)this.bends[g].node.style.display=d?"":"none";if(this.virtualBends)for(let g=0;g<this.virtualBends.length;g+=1)this.virtualBends[g].node.style.display=d?"":"none";if(this.labelShape.node.style.display=d?"":"none",this.customHandles)for(let g=0;g<this.customHandles.length;g+=1)this.customHandles[g].setVisible(d)}redrawInnerBends(d,g){for(let E=1;E<this.bends.length-1;E+=1)if(this.bends[E]!=null)if(this.abspoints[E]!=null){const{x:b}=this.abspoints[E],{y:w}=this.abspoints[E],C=this.bends[E].bounds;if(this.bends[E].node.style.visibility="visible",this.bends[E].bounds=new Rectangle(Math.round(b-C.width/2),Math.round(w-C.height/2),C.width,C.height),this.manageLabelHandle)this.checkLabelHandle(this.bends[E].bounds);else if(this.handleImage==null&&this.labelShape.visible&&intersects(this.bends[E].bounds,this.labelShape.bounds)){const S=HANDLE_SIZE+3,P=HANDLE_SIZE+3;this.bends[E].bounds=new Rectangle(Math.round(b-S/2),Math.round(w-P/2),S,P)}this.bends[E].redraw()}else this.bends[E].destroy()}checkLabelHandle(d){const g=this.labelShape.bounds;intersects(d,g)&&(d.getCenterY()<g.getCenterY()?g.y=d.y+d.height:g.y=d.y-g.height)}drawPreview(){try{if(this.isLabel){const d=this.labelShape.bounds,g=new Rectangle(Math.round(this.label.x-d.width/2),Math.round(this.label.y-d.height/2),d.width,d.height);d.equals(g)||(this.labelShape.bounds=g,this.labelShape.redraw())}this.shape!=null&&!equalPoints(this.shape.points,this.abspoints)&&(this.shape.apply(this.state),this.shape.points=this.abspoints.slice(),this.shape.scale=this.state.view.scale,this.shape.isDashed=this.isSelectionDashed(),this.shape.stroke=this.getSelectionColor(),this.shape.strokeWidth=this.getSelectionStrokeWidth()/this.shape.scale/this.shape.scale,this.shape.isShadow=!1,this.shape.redraw()),this.updateParentHighlight()}catch{}}refresh(){this.state!=null&&(this.abspoints=this.getSelectionPoints(this.state),this.points=[],this.destroyBends(this.bends),this.bends=this.createBends(),this.virtualBends&&(this.destroyBends(this.virtualBends),this.virtualBends=this.createVirtualBends()),this.customHandles&&(this.destroyBends(this.customHandles),this.customHandles=this.createCustomHandles()),this.labelShape!=null&&this.labelShape.node!=null&&this.labelShape.node.parentNode!=null&&this.labelShape.node.parentNode.appendChild(this.labelShape.node))}isDestroyed(){return this.shape==null}destroyBends(d){if(d!=null)for(let g=0;g<d.length;g+=1)d[g]!=null&&d[g].destroy()}onDestroy(){if(this.state.view.graph.removeListener(this.escapeHandler),this.marker.destroy(),this.marker=null,this.shape.destroy(),this.shape=null,this.parentHighlight){const d=this.state.cell.getParent(),g=d?this.graph.view.getState(d):null;g&&g.parentHighlight===this.parentHighlight&&(g.parentHighlight=null),this.parentHighlight.destroy(),this.parentHighlight=null}this.labelShape.destroy(),this.labelShape=null,this.constraintHandler.onDestroy(),this.constraintHandler=null,this.virtualBends&&(this.destroyBends(this.virtualBends),this.virtualBends=[]),this.customHandles&&(this.destroyBends(this.customHandles),this.customHandles=[]),this.destroyBends(this.bends),this.bends=[],this.removeHint()}}class EdgeHandlerCellMarker extends CellMarker{constructor(d,g,E=DEFAULT_VALID_COLOR,b=DEFAULT_INVALID_COLOR,w=DEFAULT_HOTSPOT){super(d,E,b,w),this.getCell=C=>{let S=super.getCell(C);if((S===this.edgeHandler.state.cell||!S)&&this.edgeHandler.currentPoint&&(S=this.edgeHandler.graph.getCellAt(this.edgeHandler.currentPoint.x,this.edgeHandler.currentPoint.y)),S&&!S.isConnectable()){const P=S.getParent();P&&P.isVertex()&&P.isConnectable()&&(S=P)}return S&&(this.graph.isSwimlane(S)&&this.edgeHandler.currentPoint&&this.graph.hitsSwimlaneContent(S,this.edgeHandler.currentPoint.x,this.edgeHandler.currentPoint.y)||!this.edgeHandler.isConnectableCell(S)||S===this.edgeHandler.state.cell||S&&!this.edgeHandler.graph.connectableEdges&&S.isEdge()||this.edgeHandler.state.cell.isAncestor(S))&&(S=null),S&&!S.isConnectable()&&(S=null),S},this.isValidState=C=>{const S=this.edgeHandler.state.cell.getTerminal(!this.edgeHandler.isSource),P=this.edgeHandler.graph.view.getState(S),I=this.edgeHandler.graph.view.getTerminalPort(C,P,!this.edgeHandler.isSource),M=I?I.cell:null,D=this.edgeHandler.isSource?C.cell:M,k=this.edgeHandler.isSource?M:C.cell;return this.edgeHandler.error=this.edgeHandler.validateConnection(D,k),!this.edgeHandler.error},this.edgeHandler=g}}class EllipseShape extends Shape{constructor(d,g,E,b=1){super(),this.bounds=d,this.fill=g,this.stroke=E,this.strokeWidth=b}paintVertexShape(d,g,E,b,w){d.ellipse(g,E,b,w),d.fillAndStroke()}}const VertexHandlerConfig={rotationEnabled:!1};class VertexHandler{isRotationEnabled(){return VertexHandlerConfig.rotationEnabled}constructor(d){this.sizers=[],this.singleSizer=!1,this.index=null,this.allowHandleBoundsCheck=!0,this.handleImage=null,this.handlesVisible=!0,this.tolerance=0,this.parentHighlightEnabled=!1,this.rotationRaster=!0,this.rotationCursor="crosshair",this.livePreview=!1,this.movePreviewToFront=!1,this.manageSizers=!1,this.constrainGroupByChildren=!1,this.rotationHandleVSpacing=-16,this.horizontalOffset=0,this.verticalOffset=0,this.minBounds=null,this.x0=0,this.y0=0,this.customHandles=[],this.inTolerance=!1,this.startX=0,this.startY=0,this.rotationShape=null,this.currentAlpha=100,this.startAngle=0,this.startDist=0,this.ghostPreview=null,this.livePreviewActive=!1,this.childOffsetX=0,this.childOffsetY=0,this.parentState=null,this.parentHighlight=null,this.unscaledBounds=null,this.preview=null,this.labelShape=null,this.edgeHandlers=[],this.EMPTY_POINT=new Point,this.state=d,this.graph=this.state.view.graph,this.selectionBounds=this.getSelectionBounds(this.state),this.bounds=new Rectangle(this.selectionBounds.x,this.selectionBounds.y,this.selectionBounds.width,this.selectionBounds.height),this.selectionBorder=this.createSelectionShape(this.bounds),this.selectionBorder.dialect=DIALECT.SVG,this.selectionBorder.pointerEvents=!1,this.selectionBorder.rotation=this.state.style.rotation??0,this.selectionBorder.init(this.graph.getView().getOverlayPane()),InternalEvent.redirectMouseEvents(this.selectionBorder.node,this.graph,this.state),this.graph.isCellMovable(this.state.cell)&&this.selectionBorder.setCursor(CURSOR.MOVABLE_VERTEX);const g=this.graph.getPlugin("SelectionHandler");if(g&&(g.maxCells<=0||this.graph.getSelectionCount()<g.maxCells)){const E=this.graph.isCellResizable(this.state.cell);if(this.sizers=[],E||this.graph.isLabelMovable(this.state.cell)&&this.state.width>=2&&this.state.height>=2){let b=0;E&&(this.singleSizer||(this.sizers.push(this.createSizer("nw-resize",b++)),this.sizers.push(this.createSizer("n-resize",b++)),this.sizers.push(this.createSizer("ne-resize",b++)),this.sizers.push(this.createSizer("w-resize",b++)),this.sizers.push(this.createSizer("e-resize",b++)),this.sizers.push(this.createSizer("sw-resize",b++)),this.sizers.push(this.createSizer("s-resize",b++))),this.sizers.push(this.createSizer("se-resize",b++)));const w=this.state.cell.getGeometry();w!=null&&!w.relative&&this.graph.isLabelMovable(this.state.cell)&&(this.labelShape=this.createSizer(CURSOR.LABEL_HANDLE,InternalEvent.LABEL_HANDLE,LABEL_HANDLE_SIZE,LABEL_HANDLE_FILLCOLOR),this.sizers.push(this.labelShape))}else this.graph.isCellMovable(this.state.cell)&&!this.graph.isCellResizable(this.state.cell)&&this.state.width<2&&this.state.height<2&&(this.labelShape=this.createSizer(CURSOR.MOVABLE_VERTEX,InternalEvent.LABEL_HANDLE,void 0,LABEL_HANDLE_FILLCOLOR),this.sizers.push(this.labelShape))}this.isRotationHandleVisible()&&(this.rotationShape=this.createSizer(this.rotationCursor,InternalEvent.ROTATION_HANDLE,HANDLE_SIZE+3,HANDLE_FILLCOLOR),this.sizers.push(this.rotationShape)),this.customHandles=this.createCustomHandles(),this.redraw(),this.constrainGroupByChildren&&this.updateMinBounds(),this.escapeHandler=(E,b)=>{this.livePreview&&this.index!=null&&(this.state.view.graph.cellRenderer.redraw(this.state,!0),this.state.view.invalidate(this.state.cell),this.state.invalid=!1,this.state.view.validate()),this.reset()},this.state.view.graph.addListener(InternalEvent.ESCAPE,this.escapeHandler)}isRotationHandleVisible(){const d=this.graph.getPlugin("SelectionHandler"),g=d?d.maxCells<=0||this.graph.getSelectionCount()<d.maxCells:!0;return this.graph.isEnabled()&&this.isRotationEnabled()&&this.graph.isCellRotatable(this.state.cell)&&g}isConstrainedEvent(d){return isShiftDown(d.getEvent())||this.state.style.aspect==="fixed"}isCenteredEvent(d,g){return!1}createCustomHandles(){return[]}updateMinBounds(){const d=this.graph.getChildCells(this.state.cell);if(d.length>0&&(this.minBounds=this.graph.view.getBounds(d),this.minBounds)){const g=this.state.view.scale,E=this.state.view.translate;this.minBounds.x-=this.state.x,this.minBounds.y-=this.state.y,this.minBounds.x/=g,this.minBounds.y/=g,this.minBounds.width/=g,this.minBounds.height/=g,this.x0=this.state.x/g-E.x,this.y0=this.state.y/g-E.y}}getSelectionBounds(d){return new Rectangle(Math.round(d.x),Math.round(d.y),Math.round(d.width),Math.round(d.height))}createParentHighlightShape(d){return this.createSelectionShape(d)}createSelectionShape(d){const g=new RectangleShape(Rectangle.fromRectangle(d),NONE,this.getSelectionColor());return g.strokeWidth=this.getSelectionStrokeWidth(),g.isDashed=this.isSelectionDashed(),g}getSelectionColor(){return VERTEX_SELECTION_COLOR}getSelectionStrokeWidth(){return VERTEX_SELECTION_STROKEWIDTH}isSelectionDashed(){return VERTEX_SELECTION_DASHED}createSizer(d,g,E=HANDLE_SIZE,b=HANDLE_FILLCOLOR){const w=new Rectangle(0,0,E,E),C=this.createSizerShape(w,g,b);return C.bounds&&C.isHtmlAllowed()&&this.state.text&&this.state.text.node.parentNode===this.graph.container?(C.bounds.height-=1,C.bounds.width-=1,C.dialect=DIALECT.STRICTHTML,C.init(this.graph.container)):(C.dialect=this.graph.dialect!==DIALECT.SVG?DIALECT.MIXEDHTML:DIALECT.SVG,C.init(this.graph.getView().getOverlayPane())),InternalEvent.redirectMouseEvents(C.node,this.graph,this.state),this.graph.isEnabled()&&C.setCursor(d),this.isSizerVisible(g)||(C.visible=!1),C}isSizerVisible(d){return!0}createSizerShape(d,g,E=HANDLE_FILLCOLOR){if(this.handleImage){d=new Rectangle(d.x,d.y,this.handleImage.width,this.handleImage.height);const b=new ImageShape(d,this.handleImage.src);return b.preserveImageAspect=!1,b}return g===InternalEvent.ROTATION_HANDLE?new EllipseShape(d,E,HANDLE_STROKECOLOR):new RectangleShape(d,E,HANDLE_STROKECOLOR)}moveSizerTo(d,g,E){d&&d.bounds&&(d.bounds.x=Math.floor(g-d.bounds.width/2),d.bounds.y=Math.floor(E-d.bounds.height/2),d.node&&d.node.style.display!=="none"&&d.redraw())}getHandleForEvent(d){const g=isMouseEvent(d.getEvent())?1:this.tolerance,E=this.allowHandleBoundsCheck&&g>0?new Rectangle(d.getGraphX()-g,d.getGraphY()-g,2*g,2*g):null,b=w=>{const C=w&&w.constructor!==ImageShape&&this.allowHandleBoundsCheck?w.strokeWidth+w.svgStrokeTolerance:null,S=C?new Rectangle(d.getGraphX()-Math.floor(C/2),d.getGraphY()-Math.floor(C/2),C,C):E;return w&&w.bounds&&(d.isSource(w)||S&&intersects(w.bounds,S)&&w.node.style.display!=="none"&&w.node.style.visibility!=="hidden")};if(b(this.rotationShape))return InternalEvent.ROTATION_HANDLE;if(b(this.labelShape))return InternalEvent.LABEL_HANDLE;for(let w=0;w<this.sizers.length;w+=1)if(b(this.sizers[w]))return w;if(this.customHandles!=null&&this.isCustomHandleEvent(d)){for(let w=this.customHandles.length-1;w>=0;w--)if(b(this.customHandles[w].shape))return InternalEvent.CUSTOM_HANDLE-w}return null}isCustomHandleEvent(d){return!0}mouseDown(d,g){if(!g.isConsumed()&&this.graph.isEnabled()){const E=this.getHandleForEvent(g);E&&(this.start(g.getGraphX(),g.getGraphY(),E),g.consume())}}isLivePreviewBorder(){return this.state.shape&&this.state.shape.fill===NONE&&this.state.shape.stroke===NONE}start(d,g,E){if(this.livePreviewActive=this.livePreview&&this.state.cell.getChildCount()===0,this.inTolerance=!0,this.childOffsetX=0,this.childOffsetY=0,this.index=E,this.startX=d,this.startY=g,this.index<=InternalEvent.CUSTOM_HANDLE&&this.isGhostPreview())this.ghostPreview=this.createGhostPreview();else{const{model:b}=this.state.view.graph,w=this.state.cell.getParent();if(this.state.view.currentRoot!==w&&w&&(w.isVertex()||w.isEdge())&&(this.parentState=this.state.view.graph.view.getState(w)),this.selectionBorder.node.style.display=E===InternalEvent.ROTATION_HANDLE?"inline":"none",(!this.livePreviewActive||this.isLivePreviewBorder())&&(this.preview=this.createSelectionShape(this.bounds),!(Client.IS_SVG&&Number(this.state.style.rotation||"0")!==0)&&this.state.text!=null&&this.state.text.node.parentNode===this.graph.container?(this.preview.dialect=DIALECT.STRICTHTML,this.preview.init(this.graph.container)):(this.preview.dialect=DIALECT.SVG,this.preview.init(this.graph.view.getOverlayPane()))),E===InternalEvent.ROTATION_HANDLE){const C=this.getRotationHandlePosition(),S=C.x-this.state.getCenterX(),P=C.y-this.state.getCenterY();this.startAngle=S!==0?Math.atan(P/S)*180/Math.PI+90:0,this.startDist=Math.sqrt(S*S+P*P)}if(this.livePreviewActive){this.hideSizers(),E===InternalEvent.ROTATION_HANDLE&&this.rotationShape?this.rotationShape.node.style.display="":E===InternalEvent.LABEL_HANDLE&&this.labelShape?this.labelShape.node.style.display="":this.sizers[E]?this.sizers[E].node.style.display="":E<=InternalEvent.CUSTOM_HANDLE&&this.customHandles[InternalEvent.CUSTOM_HANDLE-E].setVisible(!0);const C=this.state.cell.getEdges();this.edgeHandlers=[];const S=this.graph.getPlugin("SelectionCellsHandler");for(let P=0;P<C.length;P+=1){const I=S==null?void 0:S.getHandler(C[P]);I&&this.edgeHandlers.push(I)}}}}createGhostPreview(){const d=this.graph.cellRenderer.createShape(this.state);return d.init(this.graph.view.getOverlayPane()),d.scale=this.state.view.scale,d.bounds=this.bounds,d.outline=!0,d}setHandlesVisible(d){this.handlesVisible=d;for(let g=0;g<this.sizers.length;g+=1)this.sizers[g].node.style.display=d?"":"none";for(let g=0;g<this.customHandles.length;g+=1)this.customHandles[g].setVisible(d)}hideSizers(){this.setHandlesVisible(!1)}checkTolerance(d){this.inTolerance&&this.startX!==null&&this.startY!==null&&(isMouseEvent(d.getEvent())||Math.abs(d.getGraphX()-this.startX)>this.graph.getEventTolerance()||Math.abs(d.getGraphY()-this.startY)>this.graph.getEventTolerance())&&(this.inTolerance=!1)}updateHint(d){}removeHint(){}roundAngle(d){return Math.round(d*10)/10}roundLength(d){return Math.round(d*100)/100}mouseMove(d,g){!g.isConsumed()&&this.index!=null?(this.checkTolerance(g),this.inTolerance||(this.index<=InternalEvent.CUSTOM_HANDLE?this.customHandles!=null&&(this.customHandles[InternalEvent.CUSTOM_HANDLE-this.index].processEvent(g),this.customHandles[InternalEvent.CUSTOM_HANDLE-this.index].active=!0,this.ghostPreview!=null?(this.ghostPreview.apply(this.state),this.ghostPreview.strokeWidth=this.getSelectionStrokeWidth()/this.ghostPreview.scale/this.ghostPreview.scale,this.ghostPreview.isDashed=this.isSelectionDashed(),this.ghostPreview.stroke=this.getSelectionColor(),this.ghostPreview.redraw(),this.selectionBounds!=null&&(this.selectionBorder.node.style.display="none")):(this.movePreviewToFront&&this.moveToFront(),this.customHandles[InternalEvent.CUSTOM_HANDLE-this.index].positionChanged())):this.index===InternalEvent.LABEL_HANDLE?this.moveLabel(g):(this.index===InternalEvent.ROTATION_HANDLE?this.rotateVertex(g):this.resizeVertex(g),this.updateHint(g))),g.consume()):!this.graph.isMouseDown&&this.getHandleForEvent(g)&&g.consume(!1)}isGhostPreview(){return this.state.cell.getChildCount()>0}moveLabel(d){const g=new Point(d.getGraphX(),d.getGraphY()),E=this.graph.view.translate,{scale:b}=this.graph.view;this.graph.isGridEnabledEvent(d.getEvent())&&(g.x=(this.graph.snap(g.x/b-E.x)+E.x)*b,g.y=(this.graph.snap(g.y/b-E.y)+E.y)*b);const w=this.rotationShape?this.sizers.length-2:this.sizers.length-1;this.moveSizerTo(this.sizers[w],g.x,g.y)}rotateVertex(d){const g=new Point(d.getGraphX(),d.getGraphY());let E=this.state.x+this.state.width/2-g.x,b=this.state.y+this.state.height/2-g.y;if(this.currentAlpha=E!==0?Math.atan(b/E)*180/Math.PI+90:b<0?180:0,E>0&&(this.currentAlpha-=180),this.currentAlpha-=this.startAngle,this.rotationRaster&&this.graph.isGridEnabledEvent(d.getEvent())){let w;E=g.x-this.state.getCenterX(),b=g.y-this.state.getCenterY();const C=Math.sqrt(E*E+b*b);C-this.startDist<2?w=15:C-this.startDist<25?w=5:w=1,this.currentAlpha=Math.round(this.currentAlpha/w)*w}else this.currentAlpha=this.roundAngle(this.currentAlpha);this.selectionBorder.rotation=this.currentAlpha,this.selectionBorder.redraw(),this.livePreviewActive&&this.redrawHandles()}resizeVertex(d){const g=new Point(this.state.getCenterX(),this.state.getCenterY()),E=toRadians(this.state.style.rotation??0),b=new Point(d.getGraphX(),d.getGraphY()),w=this.graph.view.translate,{scale:C}=this.graph.view;let S=Math.cos(-E),P=Math.sin(-E),I=b.x-this.startX,M=b.y-this.startY;const D=S*I-P*M,k=P*I+S*M;I=D,M=k;const H=this.state.cell.getGeometry();if(H&&this.index!==null&&(this.unscaledBounds=this.union(H,I/C,M/C,this.index,this.graph.isGridEnabledEvent(d.getEvent()),1,new Point(0,0),this.isConstrainedEvent(d),this.isCenteredEvent(this.state,d))),H&&!H.relative){let F=this.graph.getMaximumGraphBounds();if(F!=null&&this.parentState!=null&&(F=Rectangle.fromRectangle(F),F.x-=(this.parentState.x-w.x*C)/C,F.y-=(this.parentState.y-w.y*C)/C),this.graph.isConstrainChild(this.state.cell)){let j=this.graph.getCellContainmentArea(this.state.cell);if(j!=null){const $=this.graph.getOverlap(this.state.cell);$>0&&(j=Rectangle.fromRectangle(j),j.x-=j.width*$,j.y-=j.height*$,j.width+=2*j.width*$,j.height+=2*j.height*$),F?(F=Rectangle.fromRectangle(F),F.intersect(j)):F=j}}F&&this.unscaledBounds&&(this.unscaledBounds.x<F.x&&(this.unscaledBounds.width-=F.x-this.unscaledBounds.x,this.unscaledBounds.x=F.x),this.unscaledBounds.y<F.y&&(this.unscaledBounds.height-=F.y-this.unscaledBounds.y,this.unscaledBounds.y=F.y),this.unscaledBounds.x+this.unscaledBounds.width>F.x+F.width&&(this.unscaledBounds.width-=this.unscaledBounds.x+this.unscaledBounds.width-F.x-F.width),this.unscaledBounds.y+this.unscaledBounds.height>F.y+F.height&&(this.unscaledBounds.height-=this.unscaledBounds.y+this.unscaledBounds.height-F.y-F.height))}if(this.unscaledBounds){const F=this.bounds;this.bounds=new Rectangle((this.parentState?this.parentState.x:w.x*C)+this.unscaledBounds.x*C,(this.parentState?this.parentState.y:w.y*C)+this.unscaledBounds.y*C,this.unscaledBounds.width*C,this.unscaledBounds.height*C),H&&H.relative&&this.parentState&&(this.bounds.x+=this.state.x-this.parentState.x,this.bounds.y+=this.state.y-this.parentState.y),S=Math.cos(E),P=Math.sin(E);const j=new Point(this.bounds.getCenterX(),this.bounds.getCenterY());I=j.x-g.x,M=j.y-g.y;const $=S*I-P*M,z=P*I+S*M,U=$-I,W=z-M,q=this.bounds.x-this.state.x,Z=this.bounds.y-this.state.y,X=S*q-P*Z,K=P*q+S*Z;this.bounds.x+=U,this.bounds.y+=W,this.unscaledBounds.x=this.roundLength(this.unscaledBounds.x+U/C),this.unscaledBounds.y=this.roundLength(this.unscaledBounds.y+W/C),this.unscaledBounds.width=this.roundLength(this.unscaledBounds.width),this.unscaledBounds.height=this.roundLength(this.unscaledBounds.height),!this.state.cell.isCollapsed()&&(U!==0||W!==0)?(this.childOffsetX=this.state.x-this.bounds.x+X,this.childOffsetY=this.state.y-this.bounds.y+K):(this.childOffsetX=0,this.childOffsetY=0),F.equals(this.bounds)||(this.livePreviewActive&&this.updateLivePreview(d),this.preview!=null?this.drawPreview():this.updateParentHighlight())}}updateLivePreview(d){const{scale:g}=this.graph.view,E=this.graph.view.translate,b=this.state.clone();this.state.x=this.bounds.x,this.state.y=this.bounds.y,this.state.origin=new Point(this.state.x/g-E.x,this.state.y/g-E.y),this.state.width=this.bounds.width,this.state.height=this.bounds.height;let w=this.state.absoluteOffset;w=new Point(w.x,w.y),this.state.absoluteOffset.x=0,this.state.absoluteOffset.y=0;const C=this.state.cell.getGeometry();if(C!=null){const S=C.offset||this.EMPTY_POINT;S!=null&&!C.relative&&(this.state.absoluteOffset.x=this.state.view.scale*S.x,this.state.absoluteOffset.y=this.state.view.scale*S.y),this.state.view.updateVertexLabelOffset(this.state)}this.state.view.graph.cellRenderer.redraw(this.state,!0),this.state.view.invalidate(this.state.cell),this.state.invalid=!1,this.state.view.validate(),this.redrawHandles(),this.movePreviewToFront&&this.moveToFront(),this.state.control!=null&&this.state.control.node!=null&&(this.state.control.node.style.visibility="hidden"),this.state.setState(b)}moveToFront(){(this.state.text&&this.state.text.node&&this.state.text.node.nextSibling||this.state.shape&&this.state.shape.node&&this.state.shape.node.nextSibling&&(!this.state.text||this.state.shape.node.nextSibling!==this.state.text.node))&&(this.state.shape&&this.state.shape.node&&this.state.shape.node.parentNode&&this.state.shape.node.parentNode.appendChild(this.state.shape.node),this.state.text&&this.state.text.node&&this.state.text.node.parentNode&&this.state.text.node.parentNode.appendChild(this.state.text.node))}mouseUp(d,g){if(this.index!=null&&this.state!=null){const E=new Point(g.getGraphX(),g.getGraphY()),{index:b}=this;this.index=null,this.ghostPreview==null&&(this.state.view.invalidate(this.state.cell,!1,!1),this.state.view.validate()),this.graph.batchUpdate(()=>{if(b<=InternalEvent.CUSTOM_HANDLE){if(this.customHandles!=null){const w=this.state.view.graph.getCellStyle(this.state.cell);this.customHandles[InternalEvent.CUSTOM_HANDLE-b].active=!1,this.customHandles[InternalEvent.CUSTOM_HANDLE-b].execute(g),this.customHandles!=null&&this.customHandles[InternalEvent.CUSTOM_HANDLE-b]!=null&&(this.state.style=w,this.customHandles[InternalEvent.CUSTOM_HANDLE-b].positionChanged())}}else if(b===InternalEvent.ROTATION_HANDLE)if(this.currentAlpha!=null){const w=this.currentAlpha-(this.state.style.rotation??0);w!==0&&this.rotateCell(this.state.cell,w)}else this.rotateClick();else{const w=this.graph.isGridEnabledEvent(g.getEvent()),C=toRadians(this.state.style.rotation??0),S=Math.cos(-C),P=Math.sin(-C);let I=E.x-this.startX,M=E.y-this.startY;const D=S*I-P*M,k=P*I+S*M;I=D,M=k;const H=this.graph.view.scale,F=this.isRecursiveResize(this.state,g);this.resizeCell(this.state.cell,this.roundLength(I/H),this.roundLength(M/H),b,w,this.isConstrainedEvent(g),F)}}),g.consume(),this.reset(),this.redrawHandles()}}isRecursiveResize(d,g){return this.graph.isRecursiveResize(this.state)}rotateClick(){}rotateCell(d,g,E){if(g!==0){const b=this.graph.getDataModel();if(d.isVertex()||d.isEdge()){if(!d.isEdge()){const S=(this.graph.getCurrentCellStyle(d).rotation||0)+g;this.graph.setCellStyles("rotation",S,[d])}let w=d.getGeometry();if(w&&E){const C=E.getGeometry();if(C!=null&&!E.isEdge()&&(w=w.clone(),w.rotate(g,new Point(C.width/2,C.height/2)),b.setGeometry(d,w)),d.isVertex()&&!w.relative||d.isEdge()){const S=d.getChildCount();for(let P=0;P<S;P+=1)this.rotateCell(d.getChildAt(P),g,d)}}}}}reset(){if(this.index!==null&&this.sizers[this.index].node.style.display==="none"&&(this.sizers[this.index].node.style.display=""),this.index=null,this.preview&&(this.preview.destroy(),this.preview=null),this.ghostPreview&&(this.ghostPreview.destroy(),this.ghostPreview=null),this.livePreviewActive){for(let d=0;d<this.sizers.length;d+=1)this.sizers[d].node.style.display="";this.state.control&&this.state.control.node&&(this.state.control.node.style.visibility="")}for(let d=0;d<this.customHandles.length;d+=1)this.customHandles[d].active?(this.customHandles[d].active=!1,this.customHandles[d].reset()):this.customHandles[d].setVisible(!0);this.selectionBorder.node.style.display="inline",this.selectionBounds=this.getSelectionBounds(this.state),this.bounds=new Rectangle(this.selectionBounds.x,this.selectionBounds.y,this.selectionBounds.width,this.selectionBounds.height),this.drawPreview(),this.removeHint(),this.redrawHandles(),this.edgeHandlers=[],this.handlesVisible=!0,this.unscaledBounds=null}resizeCell(d,g,E,b,w,C,S){let P=d.getGeometry();if(P){if(b===InternalEvent.LABEL_HANDLE&&this.labelShape&&this.labelShape.bounds){const I=-toRadians(this.state.style.rotation??0),M=Math.cos(I),D=Math.sin(I),{scale:k}=this.graph.view,H=getRotatedPoint(new Point(Math.round((this.labelShape.bounds.getCenterX()-this.startX)/k),Math.round((this.labelShape.bounds.getCenterY()-this.startY)/k)),M,D);P=P.clone(),P.offset==null?P.offset=H:(P.offset.x+=H.x,P.offset.y+=H.y),this.graph.model.setGeometry(d,P)}else if(this.unscaledBounds){const{scale:I}=this.graph.view;(this.childOffsetX!==0||this.childOffsetY!==0)&&this.moveChildren(d,Math.round(this.childOffsetX/I),Math.round(this.childOffsetY/I)),this.graph.resizeCell(d,this.unscaledBounds,S)}}}moveChildren(d,g,E){const b=this.graph.getDataModel(),w=d.getChildCount();for(let C=0;C<w;C+=1){const S=d.getChildAt(C);let P=S.getGeometry();P!=null&&(P=P.clone(),P.translate(g,E),b.setGeometry(S,P))}}union(d,g,E,b,w,C,S,P,I){if(w=w&&this.graph.isGridEnabled(),this.singleSizer){let Z=d.x+d.width+g,X=d.y+d.height+E;w&&(Z=this.graph.snap(Z/C)*C,X=this.graph.snap(X/C)*C);const K=new Rectangle(d.x,d.y,0,0);return K.add(new Rectangle(Z,X,0,0)),K}const M=d.width,D=d.height;let k=d.x-S.x*C,H=k+M,F=d.y-S.y*C,j=F+D;const $=k+M/2,z=F+D/2;b>4?(j+=E,w?j=this.graph.snap(j/C)*C:j=Math.round(j/C)*C):b<3&&(F+=E,w?F=this.graph.snap(F/C)*C:F=Math.round(F/C)*C),b===0||b===3||b===5?(k+=g,w?k=this.graph.snap(k/C)*C:k=Math.round(k/C)*C):(b===2||b===4||b===7)&&(H+=g,w?H=this.graph.snap(H/C)*C:H=Math.round(H/C)*C);let U=H-k,W=j-F;if(P){const Z=this.state.cell.getGeometry();if(Z!=null){const X=Z.width/Z.height;b===1||b===2||b===7||b===6?U=W*X:W=U/X,b===0&&(k=H-U,F=j-W)}}if(I){U+=U-M,W+=W-D;const Z=$-(k+U/2),X=z-(F+W/2);k+=Z,F+=X,H+=Z,j+=X}U<0&&(k+=U,U=Math.abs(U)),W<0&&(F+=W,W=Math.abs(W));const q=new Rectangle(k+S.x*C,F+S.y*C,U,W);return this.minBounds!=null&&(q.width=Math.max(q.width,this.minBounds.x*C+this.minBounds.width*C+Math.max(0,this.x0*C-q.x)),q.height=Math.max(q.height,this.minBounds.y*C+this.minBounds.height*C+Math.max(0,this.y0*C-q.y))),q}redraw(d){this.selectionBounds=this.getSelectionBounds(this.state),this.bounds=new Rectangle(this.selectionBounds.x,this.selectionBounds.y,this.selectionBounds.width,this.selectionBounds.height),this.drawPreview(),d||this.redrawHandles()}getHandlePadding(){const d=new Point(0,0);let g=this.tolerance;return this.sizers.length>0&&this.sizers[0].bounds&&(this.bounds.width<2*this.sizers[0].bounds.width+2*g||this.bounds.height<2*this.sizers[0].bounds.height+2*g)&&(g/=2,d.x=this.sizers[0].bounds.width+g,d.y=this.sizers[0].bounds.height+g),d}getSizerBounds(){return this.bounds}redrawHandles(){let d=this.getSizerBounds();const g=this.tolerance;this.horizontalOffset=0,this.verticalOffset=0;for(let E=0;E<this.customHandles.length;E+=1){const b=this.customHandles[E].shape;if(b){const w=b.node.style.display;this.customHandles[E].redraw(),b.node.style.display=w,b.node.style.visibility=this.handlesVisible&&this.isCustomHandleVisible(this.customHandles[E])?"":"hidden"}}if(this.sizers.length>0&&this.sizers[0]){if(this.index===null&&this.manageSizers&&this.sizers.length>=8){const w=this.getHandlePadding();this.horizontalOffset=w.x,this.verticalOffset=w.y,(this.horizontalOffset!==0||this.verticalOffset!==0)&&(d=new Rectangle(d.x,d.y,d.width,d.height),d.x-=this.horizontalOffset/2,d.width+=this.horizontalOffset,d.y-=this.verticalOffset/2,d.height+=this.verticalOffset),this.sizers.length>=8&&(this.sizers[0].bounds&&(d.width<2*this.sizers[0].bounds.width+2*g||d.height<2*this.sizers[0].bounds.height+2*g)?(this.sizers[0].node.style.display="none",this.sizers[2].node.style.display="none",this.sizers[5].node.style.display="none",this.sizers[7].node.style.display="none"):this.handlesVisible&&(this.sizers[0].node.style.display="",this.sizers[2].node.style.display="",this.sizers[5].node.style.display="",this.sizers[7].node.style.display=""))}const E=d.x+d.width,b=d.y+d.height;if(this.singleSizer)this.moveSizerTo(this.sizers[0],E,b);else{const w=d.x+d.width/2,C=d.y+d.height/2;if(this.sizers.length>=8){const S=["nw-resize","n-resize","ne-resize","e-resize","se-resize","s-resize","sw-resize","w-resize"],P=toRadians(this.state.style.rotation??0),I=Math.cos(P),M=Math.sin(P),D=Math.round(P*4/Math.PI),k=new Point(d.getCenterX(),d.getCenterY());let H=getRotatedPoint(new Point(d.x,d.y),I,M,k);this.moveSizerTo(this.sizers[0],H.x,H.y),this.sizers[0].setCursor(S[mod(0+D,S.length)]),H.x=w,H.y=d.y,H=getRotatedPoint(H,I,M,k),this.moveSizerTo(this.sizers[1],H.x,H.y),this.sizers[1].setCursor(S[mod(1+D,S.length)]),H.x=E,H.y=d.y,H=getRotatedPoint(H,I,M,k),this.moveSizerTo(this.sizers[2],H.x,H.y),this.sizers[2].setCursor(S[mod(2+D,S.length)]),H.x=d.x,H.y=C,H=getRotatedPoint(H,I,M,k),this.moveSizerTo(this.sizers[3],H.x,H.y),this.sizers[3].setCursor(S[mod(7+D,S.length)]),H.x=E,H.y=C,H=getRotatedPoint(H,I,M,k),this.moveSizerTo(this.sizers[4],H.x,H.y),this.sizers[4].setCursor(S[mod(3+D,S.length)]),H.x=d.x,H.y=b,H=getRotatedPoint(H,I,M,k),this.moveSizerTo(this.sizers[5],H.x,H.y),this.sizers[5].setCursor(S[mod(6+D,S.length)]),H.x=w,H.y=b,H=getRotatedPoint(H,I,M,k),this.moveSizerTo(this.sizers[6],H.x,H.y),this.sizers[6].setCursor(S[mod(5+D,S.length)]),H.x=E,H.y=b,H=getRotatedPoint(H,I,M,k),this.moveSizerTo(this.sizers[7],H.x,H.y),this.sizers[7].setCursor(S[mod(4+D,S.length)]),H.x=w+this.state.absoluteOffset.x,H.y=C+this.state.absoluteOffset.y,H=getRotatedPoint(H,I,M,k),this.moveSizerTo(this.sizers[8],H.x,H.y)}else this.state.width>=2&&this.state.height>=2?this.moveSizerTo(this.sizers[0],w+this.state.absoluteOffset.x,C+this.state.absoluteOffset.y):this.moveSizerTo(this.sizers[0],this.state.x,this.state.y)}}if(this.rotationShape){const E=toRadians(this.currentAlpha),b=Math.cos(E),w=Math.sin(E),C=new Point(this.state.getCenterX(),this.state.getCenterY()),S=getRotatedPoint(this.getRotationHandlePosition(),b,w,C);this.rotationShape.node!=null&&(this.moveSizerTo(this.rotationShape,S.x,S.y),this.rotationShape.node.style.visibility=this.state.view.graph.isEditing()||!this.handlesVisible?"hidden":"")}if(this.selectionBorder!=null&&(this.selectionBorder.rotation=this.state.style.rotation??0),this.edgeHandlers!=null)for(let E=0;E<this.edgeHandlers.length;E+=1)this.edgeHandlers[E].redraw()}isCustomHandleVisible(d){return!this.graph.isEditing()&&this.state.view.graph.getSelectionCount()===1}getRotationHandlePosition(){return new Point(this.bounds.x+this.bounds.width/2,this.bounds.y+this.rotationHandleVSpacing)}isParentHighlightVisible(){const d=this.state.cell.getParent();return d?!this.graph.isCellSelected(d):!1}updateParentHighlight(){if(!this.isDestroyed()){const d=this.isParentHighlightVisible(),g=this.state.cell.getParent(),E=g?this.graph.view.getState(g):null;if(this.parentHighlight)if(g&&g.isVertex()&&d){const b=this.parentHighlight.bounds;E&&b&&(b.x!==E.x||b.y!==E.y||b.width!==E.width||b.height!==E.height)&&(this.parentHighlight.bounds=Rectangle.fromRectangle(E),this.parentHighlight.redraw())}else E!=null&&E.parentHighlight===this.parentHighlight&&(E.parentHighlight=null),this.parentHighlight.destroy(),this.parentHighlight=null;else this.parentHighlightEnabled&&d&&g&&g.isVertex()&&E!=null&&E.parentHighlight==null&&(this.parentHighlight=this.createParentHighlightShape(E),this.parentHighlight.dialect=DIALECT.SVG,this.parentHighlight.pointerEvents=!1,this.parentHighlight.rotation=E.style.rotation??0,this.parentHighlight.init(this.graph.getView().getOverlayPane()),this.parentHighlight.redraw(),E.parentHighlight=this.parentHighlight)}}drawPreview(){this.preview!=null&&(this.preview.bounds=this.bounds,this.preview.node.parentNode===this.graph.container&&(this.preview.bounds.width=Math.max(0,this.preview.bounds.width-1),this.preview.bounds.height=Math.max(0,this.preview.bounds.height-1)),this.preview.rotation=this.state.style.rotation??0,this.preview.redraw()),this.selectionBorder.bounds=this.getSelectionBorderBounds(),this.selectionBorder.redraw(),this.updateParentHighlight()}getSelectionBorderBounds(){return this.bounds}isDestroyed(){return this.selectionBorder==null}onDestroy(){if(this.state.view.graph.removeListener(this.escapeHandler),this.escapeHandler=()=>{},this.preview&&(this.preview.destroy(),this.preview=null),this.parentHighlight){const d=this.state.cell.getParent(),g=d?this.graph.view.getState(d):null;g&&g.parentHighlight===this.parentHighlight&&(g.parentHighlight=null),this.parentHighlight.destroy(),this.parentHighlight=null}this.ghostPreview&&(this.ghostPreview.destroy(),this.ghostPreview=null),this.selectionBorder&&this.selectionBorder.destroy(),this.labelShape=null,this.removeHint();for(let d=0;d<this.sizers.length;d+=1)this.sizers[d].destroy();this.sizers=[];for(let d=0;d<this.customHandles.length;d+=1)this.customHandles[d].destroy();this.customHandles=[]}}class Translations{}Translations.resources={};Translations.extension=".txt";Translations.resourcesEncoded=!1;Translations.loadDefaultBundle=!0;Translations.loadSpecialBundle=!0;Translations.isLanguageSupported=x=>Client.languages!=null?Client.languages.indexOf(x)>=0:!0;Translations.getDefaultBundle=(x,d)=>Translations.loadDefaultBundle||!Translations.isLanguageSupported(d)?x+Translations.extension:null;Translations.getSpecialBundle=(x,d)=>{if(Client.languages==null||!Translations.isLanguageSupported(d)){const g=d.indexOf("-");g>0&&(d=d.substring(0,g))}return Translations.loadSpecialBundle&&Translations.isLanguageSupported(d)&&d!=Client.defaultLanguage?`${x}_${d}${Translations.extension}`:null};Translations.add=(x,d=null,g=null)=>{if(d=d??(Client.language!=null?Client.language.toLowerCase():NONE),d!==NONE){const E=Translations.getDefaultBundle(x,d),b=Translations.getSpecialBundle(x,d),w=()=>{if(b!=null)if(g)get$2(b,C=>{Translations.parse(C.getText()),g()},()=>{g()});else try{const C=load(b);C.isReady()&&Translations.parse(C.getText())}catch{}else g!=null&&g()};if(E!=null)if(g)get$2(E,C=>{Translations.parse(C.getText()),w()},()=>{w()});else try{const C=load(E);C.isReady()&&Translations.parse(C.getText()),w()}catch{}else w()}};Translations.parse=x=>{if(x!=null){const d=x.split(`
`);for(let g=0;g<d.length;g+=1)if(d[g].charAt(0)!=="#"){const E=d[g].indexOf("=");if(E>0){const b=d[g].substring(0,E);let w=d[g].length;d[g].charCodeAt(w-1)===13&&w--;let C=d[g].substring(E+1,w);Translations.resourcesEncoded?(C=C.replace(/\\(?=u[a-fA-F\d]{4})/g,"%"),Translations.resources[b]=unescape(C)):Translations.resources[b]=C}}}};Translations.get=(x,d=null,g=null)=>{let E=Translations.resources[x];return E==null&&(E=g),E!=null&&d!=null&&(E=Translations.replacePlaceholders(E,d)),E};Translations.replacePlaceholders=(x,d)=>{const g=[];let E=null;for(let b=0;b<x.length;b+=1){const w=x.charAt(b);w==="{"?E="":E!=null&&w==="}"?(E=parseInt(E)-1,E>=0&&E<d.length&&g.push(d[E]),E=null):E!=null?E+=w:g.push(w)}return g.join("")};Translations.loadResources=x=>{Translations.add(`${Client.basePath}/resources/editor`,null,()=>{Translations.add(`${Client.basePath}/resources/graph`,null,x)})};class ElbowEdgeHandler extends EdgeHandler{constructor(d){super(d),this.flipEnabled=!0,this.doubleClickOrientationResource=Client.language!=="none"?"doubleClickOrientation":""}createBends(){const d=[];let g=this.createHandleShape(0);return this.initBend(g),g.setCursor(CURSOR.TERMINAL_HANDLE),d.push(g),d.push(this.createVirtualBend(E=>{!isConsumed(E)&&this.flipEnabled&&(this.graph.flipEdge(this.state.cell),InternalEvent.consume(E))})),this.points.push(new Point(0,0)),g=this.createHandleShape(2),this.initBend(g),g.setCursor(CURSOR.TERMINAL_HANDLE),d.push(g),d}createVirtualBend(d){const g=this.createHandleShape();return this.initBend(g,d),g.setCursor(this.getCursorForBend()),this.graph.isCellBendable(this.state.cell)||(g.node.style.display="none"),g}getCursorForBend(){return this.state.style.edgeStyle===EDGESTYLE.TOPTOBOTTOM||this.state.style.edgeStyle===EDGESTYLE.ELBOW&&this.state.style.elbow===ELBOW.VERTICAL?"row-resize":"col-resize"}getTooltipForNode(d){let g=null;return this.bends!=null&&this.bends[1]!=null&&(d===this.bends[1].node||d.parentNode===this.bends[1].node)&&(g=this.doubleClickOrientationResource,g=Translations.get(g)||g),g}convertPoint(d,g){const E=this.graph.getView().getScale(),b=this.graph.getView().getTranslate(),{origin:w}=this.state;return g&&(d.x=this.graph.snap(d.x),d.y=this.graph.snap(d.y)),d.x=Math.round(d.x/E-b.x-w.x),d.y=Math.round(d.y/E-b.y-w.y),d}redrawInnerBends(d,g){const E=this.state.cell.getGeometry(),b=this.state.absolutePoints;let w=null;b.length>1?(d=b[1],g=b[b.length-2]):E.points!=null&&E.points.length>0&&(w=b[0]),w==null?w=new Point(d.x+(g.x-d.x)/2,d.y+(g.y-d.y)/2):w=new Point(this.graph.getView().scale*(w.x+this.graph.getView().translate.x+this.state.origin.x),this.graph.getView().scale*(w.y+this.graph.getView().translate.y+this.state.origin.y));const C=this.bends[1].bounds;let S=C.width,P=C.height,I=new Rectangle(Math.round(w.x-S/2),Math.round(w.y-P/2),S,P);this.manageLabelHandle?this.checkLabelHandle(I):this.handleImage==null&&this.labelShape.visible&&this.labelShape.bounds&&intersects(I,this.labelShape.bounds)&&(S=HANDLE_SIZE+3,P=HANDLE_SIZE+3,I=new Rectangle(Math.floor(w.x-S/2),Math.floor(w.y-P/2),S,P)),this.bends[1].bounds=I,this.bends[1].redraw(),this.manageLabelHandle&&this.checkLabelHandle(this.bends[1].bounds)}}class EdgeSegmentHandler extends ElbowEdgeHandler{constructor(d){super(d),this.points=[]}getCurrentPoints(){let d=this.state.absolutePoints;const g=Math.max(1,this.graph.view.scale);if(d.length===2&&d[0]&&d[1]||d.length===3&&d[0]&&d[1]&&d[2]&&(Math.abs(d[0].x-d[1].x)<g&&Math.abs(d[1].x-d[2].x)<g||Math.abs(d[0].y-d[1].y)<g&&Math.abs(d[1].y-d[2].y)<g)){const E=d[0].x+(d[d.length-1].x-d[0].x)/2,b=d[0].y+(d[d.length-1].y-d[0].y)/2;d=[d[0],new Point(E,b),new Point(E,b),d[d.length-1]]}return d}getPreviewPoints(d){if(this.isSource||this.isTarget)return super.getPreviewPoints(d);const g=this.getCurrentPoints();let E=this.convertPoint(g[0].clone(),!1);d=this.convertPoint(d.clone(),!1);let b=[];for(let w=1;w<g.length;w+=1){const C=this.convertPoint(g[w].clone(),!1);w===this.index&&(Math.round(E.x-C.x)===0&&(E.x=d.x,C.x=d.x),Math.round(E.y-C.y)===0&&(E.y=d.y,C.y=d.y)),w<g.length-1&&b.push(C),E=C}if(b.length===1){const w=this.state.getVisibleTerminalState(!0),C=this.state.getVisibleTerminalState(!1),S=this.state.view.getScale(),P=this.state.view.getTranslate(),I=b[0].x*S+P.x,M=b[0].y*S+P.y;(w!=null&&contains(w,I,M)||C!=null&&contains(C,I,M))&&(b=[d,d])}return b}updatePreviewState(d,g,E,b){if(super.updatePreviewState(d,g,E,b),!this.isSource&&!this.isTarget){g=this.convertPoint(g.clone(),!1);const w=d.absolutePoints;let C=w[0],S=w[1],P=[];for(let H=2;H<w.length;H+=1){const F=w[H];(Math.round(C.x-S.x)!==0||Math.round(S.x-F.x)!==0)&&(Math.round(C.y-S.y)!==0||Math.round(S.y-F.y)!==0)&&P.push(this.convertPoint(S.clone(),!1)),C=S,S=F}const I=this.state.getVisibleTerminalState(!0),M=this.state.getVisibleTerminalState(!1),D=this.state.absolutePoints,k=w[w.length-1];if(P.length===0&&w[0]&&k&&(Math.round(w[0].x-k.x)===0||Math.round(w[0].y-k.y)===0))P=[g,g];else if(w.length===5&&P.length===2&&I!=null&&M!=null&&D!=null&&Math.round(D[0].x-D[D.length-1].x)===0){const H=this.graph.getView(),F=H.getScale(),j=H.getTranslate();let $=H.getRoutingCenterY(I)/F-j.y;const z=this.graph.getConnectionConstraint(d,I,!0);if(z!=null){const q=this.graph.getConnectionPoint(I,z);q!=null&&(this.convertPoint(q,!1),$=q.y)}let U=H.getRoutingCenterY(M)/F-j.y;const W=this.graph.getConnectionConstraint(d,M,!1);if(W){const q=this.graph.getConnectionPoint(M,W);q!=null&&(this.convertPoint(q,!1),U=q.y)}P=[new Point(g.x,$),new Point(g.x,U)]}this.points=P,d.view.updateFixedTerminalPoints(d,I,M),d.view.updatePoints(d,this.points,I,M),d.view.updateFloatingTerminalPoints(d,I,M)}}connect(d,g,E,b,w){const C=this.graph.getDataModel();let S=d.getGeometry(),P=null;if(S!=null&&S.points!=null&&S.points.length>0){const I=this.abspoints;let M=I[0],D=I[1];P=[];for(let k=2;k<I.length;k+=1){const H=I[k];M&&D&&H&&(Math.round(M.x-D.x)!==0||Math.round(D.x-H.x)!==0)&&(Math.round(M.y-D.y)!==0||Math.round(D.y-H.y)!==0)&&P.push(this.convertPoint(D.clone(),!1)),M=D,D=H}}return this.graph.batchUpdate(()=>{P!=null&&(S=d.getGeometry(),S!=null&&(S=S.clone(),S.points=P,C.setGeometry(d,S))),d=super.connect(d,g,E,b,w)}),d}getTooltipForNode(d){return null}start(d,g,E){super.start(d,g,E),this.bends!=null&&this.bends[E]!=null&&!this.isSource&&!this.isTarget&&setOpacity(this.bends[E].node,100)}createBends(){const d=[];let g=this.createHandleShape(0);this.initBend(g),g.setCursor(CURSOR.TERMINAL_HANDLE),d.push(g);const E=this.getCurrentPoints();if(this.graph.isCellBendable(this.state.cell)){this.points==null&&(this.points=[]);for(let b=0;b<E.length-1;b+=1){g=this.createVirtualBend(),d.push(g);let w=Math.round(E[b].x-E[b+1].x)===0;Math.round(E[b].y-E[b+1].y)===0&&b<E.length-2&&(w=Math.round(E[b].x-E[b+2].x)===0),g.setCursor(w?"col-resize":"row-resize"),this.points.push(new Point(0,0))}}return g=this.createHandleShape(E.length),this.initBend(g),g.setCursor(CURSOR.TERMINAL_HANDLE),d.push(g),d}redraw(){this.refresh(),super.redraw()}redrawInnerBends(d,g){if(this.graph.isCellBendable(this.state.cell)){const E=this.getCurrentPoints();if(E!=null&&E.length>1){let b=!1;if(E.length===4&&E[0]&&E[1]&&E[2]&&E[3]&&Math.round(E[1].x-E[2].x)===0&&Math.round(E[1].y-E[2].y)===0)if(b=!0,Math.round(E[0].y-E[E.length-1].y)===0){const w=E[0].x+(E[E.length-1].x-E[0].x)/2;E[1]=new Point(w,E[1].y),E[2]=new Point(w,E[2].y)}else{const w=E[0].y+(E[E.length-1].y-E[0].y)/2;E[1]=new Point(E[1].x,w),E[2]=new Point(E[2].x,w)}for(let w=0;w<E.length-1;w+=1)if(this.bends[w+1]!=null){d=E[w],g=E[w+1];const C=new Point(d.x+(g.x-d.x)/2,d.y+(g.y-d.y)/2),S=this.bends[w+1].bounds;this.bends[w+1].bounds=new Rectangle(Math.floor(C.x-S.width/2),Math.floor(C.y-S.height/2),S.width,S.height),this.bends[w+1].redraw(),this.manageLabelHandle&&this.checkLabelHandle(this.bends[w+1].bounds)}b&&(setOpacity(this.bends[1].node,this.virtualBendOpacity),setOpacity(this.bends[3].node,this.virtualBendOpacity))}}}}class SelectionChange{constructor(d,g=[],E=[]){this.graph=d,this.added=g.slice(),this.removed=E.slice()}execute(){const d=this.graph.getSelectionModel();for(const g of this.removed)d.cellRemoved(g);for(const g of this.added)d.cellAdded(g);[this.added,this.removed]=[this.removed,this.added],d.fireEvent(new EventObject(InternalEvent.CHANGE,{added:this.added,removed:this.removed}))}}class GraphSelectionModel extends EventSource{constructor(d){super(),this.doneResource=Client.language!=="none"?"done":"",this.updatingSelectionResource=Client.language!=="none"?"updatingSelection":"",this.singleSelection=!1,this.graph=d,this.cells=[]}isSingleSelection(){return this.singleSelection}setSingleSelection(d){this.singleSelection=d}isSelected(d){return this.cells.indexOf(d)>=0}isEmpty(){return this.cells.length===0}clear(){this.changeSelection(null,this.cells)}setCell(d){this.setCells(d?[d]:[])}setCells(d){this.singleSelection&&(d=[this.getFirstSelectableCell(d)]);const g=[];for(let E=0;E<d.length;E+=1)this.graph.isCellSelectable(d[E])&&g.push(d[E]);this.changeSelection(g,this.cells)}getFirstSelectableCell(d){for(let g=0;g<d.length;g+=1)if(this.graph.isCellSelectable(d[g]))return d[g];return null}addCell(d){this.addCells([d])}addCells(d){let g=null;if(this.singleSelection){g=this.cells;const b=this.getFirstSelectableCell(d);d=b?[b]:[]}const E=[];for(let b=0;b<d.length;b+=1)!this.isSelected(d[b])&&this.graph.isCellSelectable(d[b])&&E.push(d[b]);this.changeSelection(E,g)}removeCell(d){this.removeCells([d])}removeCells(d){const g=[];for(let E=0;E<d.length;E+=1)this.isSelected(d[E])&&g.push(d[E]);this.changeSelection(null,g)}changeSelection(d=null,g=null){if(d&&d.length>0&&d[0]||g&&g.length>0&&g[0]){const E=new SelectionChange(this.graph,d||[],g||[]);E.execute();const b=new UndoableEdit(this.graph,!1);b.add(E),this.fireEvent(new EventObject(InternalEvent.UNDO,{edit:b}))}}cellAdded(d){this.isSelected(d)||this.cells.push(d)}cellRemoved(d){const g=this.cells.indexOf(d);g>=0&&this.cells.splice(g,1)}}class RhombusShape extends Shape{constructor(d,g,E,b=1){super(),this.bounds=d,this.fill=g,this.stroke=E,this.strokeWidth=b}isRoundable(){return!0}paintVertexShape(d,g,E,b,w){var I;const C=b/2,S=w/2,P=(((I=this.style)==null?void 0:I.arcSize)??LINE_ARCSIZE)/2;d.begin(),this.addPoints(d,[new Point(g+C,E),new Point(g+b,E+S),new Point(g+C,E+w),new Point(g,E+S)],this.isRounded,P,!0),d.fillAndStroke()}}class CylinderShape extends Shape{constructor(d,g,E,b=1){super(),this.maxHeight=40,this.svgStrokeTolerance=0,this.bounds=d,this.fill=g,this.stroke=E,this.strokeWidth=b}paintVertexShape(d,g,E,b,w){d.translate(g,E),d.begin(),this.redrawPath(d,g,E,b,w,!1),d.fillAndStroke(),(!this.outline||!this.style||!(this.style.backgroundOutline??!1))&&(d.setShadow(!1),d.begin(),this.redrawPath(d,g,E,b,w,!0),d.stroke())}getCylinderSize(d,g,E,b){return Math.min(this.maxHeight,Math.round(b/5))}redrawPath(d,g,E,b,w,C=!1){const S=this.getCylinderSize(g,E,b,w);(C&&this.fill!==NONE||!C&&this.fill===NONE)&&(d.moveTo(0,S),d.curveTo(0,2*S,b,2*S,b,S),C||(d.stroke(),d.begin())),C||(d.moveTo(0,S),d.curveTo(0,-S/3,b,-S/3,b,S),d.lineTo(b,w-S),d.curveTo(b,w+S/3,0,w+S/3,0,w-S),d.close())}}class ActorShape extends Shape{constructor(d=null,g=NONE,E=NONE,b=1){super(),this.bounds=d,this.fill=g,this.stroke=E,this.strokeWidth=b}paintVertexShape(d,g,E,b,w){d.translate(g,E),d.begin(),this.redrawPath(d,g,E,b,w),d.fillAndStroke()}redrawPath(d,g,E,b,w){const C=b/3;d.moveTo(0,w),d.curveTo(0,3*w/5,0,2*w/5,b/2,2*w/5),d.curveTo(b/2-C,2*w/5,b/2-C,0,b/2,0),d.curveTo(b/2+C,0,b/2+C,2*w/5,b/2,2*w/5),d.curveTo(b,2*w/5,b,3*w/5,b,w),d.close()}}class TriangleShape extends ActorShape{constructor(){super()}isRoundable(){return!0}redrawPath(d,g,E,b,w){var S;const C=(((S=this.style)==null?void 0:S.arcSize)??LINE_ARCSIZE)/2;this.addPoints(d,[new Point(0,0),new Point(b,.5*w),new Point(0,w)],this.isRounded,C,!0)}}class HexagonShape extends ActorShape{constructor(){super()}redrawPath(d,g,E,b,w){var S;const C=(((S=this.style)==null?void 0:S.arcSize)??LINE_ARCSIZE)/2;this.addPoints(d,[new Point(.25*b,0),new Point(.75*b,0),new Point(b,.5*w),new Point(.75*b,w),new Point(.25*b,w),new Point(0,.5*w)],this.isRounded,C,!0)}}class CloudShape extends ActorShape{constructor(d,g,E,b=1){super(),this.bounds=d,this.fill=g,this.stroke=E,this.strokeWidth=b}redrawPath(d,g,E,b,w){d.moveTo(.25*b,.25*w),d.curveTo(.05*b,.25*w,0,.5*w,.16*b,.55*w),d.curveTo(0,.66*w,.18*b,.9*w,.31*b,.8*w),d.curveTo(.4*b,w,.7*b,w,.8*b,.8*w),d.curveTo(b,.8*w,b,.6*w,.875*b,.5*w),d.curveTo(b,.3*w,.8*b,.1*w,.625*b,.2*w),d.curveTo(.5*b,.05*w,.3*b,.05*w,.25*b,.25*w),d.close()}}class LineShape extends Shape{constructor(d,g,E=1,b=!1){super(),this.bounds=d,this.stroke=g,this.strokeWidth=E,this.vertical=b}paintVertexShape(d,g,E,b,w){if(d.begin(),this.vertical){const C=g+b/2;d.moveTo(C,E),d.lineTo(C,E+w)}else{const C=E+w/2;d.moveTo(g,C),d.lineTo(g+b,C)}d.stroke()}}class ArrowShape extends Shape{constructor(d,g,E,b=1,w=ARROW_WIDTH,C=ARROW_SPACING,S=ARROW_SIZE){super(),this.points=d,this.fill=g,this.stroke=E,this.strokeWidth=b,this.arrowWidth=w,this.spacing=C,this.endSize=S}augmentBoundingBox(d){super.augmentBoundingBox(d);const g=Math.max(this.arrowWidth,this.endSize);d.grow((g/2+this.strokeWidth)*this.scale)}paintEdgeShape(d,g){const E=ARROW_SPACING,b=ARROW_WIDTH,w=ARROW_SIZE,C=g[0],S=g[g.length-1],P=S.x-C.x,I=S.y-C.y,M=Math.sqrt(P*P+I*I),D=M-2*E-w,k=P/M,H=I/M,F=D*k,j=D*H,$=b*H/3,z=-b*k/3,U=C.x-$/2+E*k,W=C.y-z/2+E*H,q=U+$,Z=W+z,X=q+F,K=Z+j,ee=X+$,te=K+z,ce=ee-3*$,Q=te-3*z;d.begin(),d.moveTo(U,W),d.lineTo(q,Z),d.lineTo(X,K),d.lineTo(ee,te),d.lineTo(S.x-E*k,S.y-E*H),d.lineTo(ce,Q),d.lineTo(ce+$,Q+z),d.close(),d.fillAndStroke()}}class ArrowConnectorShape extends Shape{constructor(d,g,E,b=1,w=ARROW_WIDTH,C=ARROW_SPACING,S=ARROW_SIZE/5){super(),this.useSvgBoundingBox=!0,this.points=d,this.fill=g,this.stroke=E,this.strokeWidth=b,this.arrowWidth=w,this.arrowSpacing=C,this.startSize=ARROW_SIZE/5,this.endSize=S}isRoundable(){return!0}resetStyles(){super.resetStyles(),this.arrowSpacing=ARROW_SPACING}apply(d){super.apply(d),this.style&&this.style.startSize!=null&&this.style.endSize!=null&&(this.startSize=this.style.startSize*3,this.endSize=this.style.endSize*3)}augmentBoundingBox(d){super.augmentBoundingBox(d);let g=this.getEdgeWidth();this.isMarkerStart()&&(g=Math.max(g,this.getStartArrowWidth())),this.isMarkerEnd()&&(g=Math.max(g,this.getEndArrowWidth())),d.grow((g/2+this.strokeWidth)*this.scale)}paintEdgeShape(d,g){var de;let E=this.strokeWidth;this.outline&&(E=Math.max(1,((de=this.style)==null?void 0:de.strokeWidth)??0));const b=this.getStartArrowWidth()+E,w=this.getEndArrowWidth()+E,C=this.outline?this.getEdgeWidth()+E:this.getEdgeWidth(),S=this.isOpenEnded(),P=this.isMarkerStart(),I=this.isMarkerEnd(),M=S?0:this.arrowSpacing+E/2,D=this.startSize+E,k=this.endSize+E,H=this.isArrowRounded(),F=g[g.length-1];let j=1;for(;j<g.length-1&&g[j].x===g[0].x&&g[j].y===g[0].y;)j++;const $=g[j].x-g[0].x,z=g[j].y-g[0].y,U=Math.sqrt($*$+z*z);if(U===0)return;let W=$/U,q,Z=W,X=z/U,K,ee=X,te=C*X,ce=-C*W;const Q=[];H?d.setLineJoin("round"):g.length>2&&d.setMiterLimit(1.42),d.begin();const se=W,ge=X;if(P&&!S)this.paintMarker(d,g[0].x,g[0].y,W,X,D,b,C,M,!0);else{const re=g[0].x+te/2+M*W,ae=g[0].y+ce/2+M*X,pe=g[0].x-te/2+M*W,J=g[0].y-ce/2+M*X;S?(d.moveTo(re,ae),Q.push(()=>{d.lineTo(pe,J)})):(d.moveTo(pe,J),d.lineTo(re,ae))}let Ce=0,oe=0,he=0;for(let re=0;re<g.length-2;re+=1){const ae=relativeCcw(g[re].x,g[re].y,g[re+1].x,g[re+1].y,g[re+2].x,g[re+2].y);if(Ce=g[re+2].x-g[re+1].x,oe=g[re+2].y-g[re+1].y,he=Math.sqrt(Ce*Ce+oe*oe),he!==0){Z=Ce/he,ee=oe/he;const pe=W*Z+X*ee,J=Math.max(Math.sqrt((pe+1)/2),.04);q=W+Z,K=X+ee;const ue=Math.sqrt(q*q+K*K);if(ue!==0){q/=ue,K/=ue;const Te=Math.max(J,Math.min(this.strokeWidth/200+.04,.35)),xe=ae!==0&&H?Math.max(.1,Te):Math.max(J,.06),we=g[re+1].x+K*C/2/xe,Re=g[re+1].y-q*C/2/xe,De=g[re+1].x-K*C/2/xe,Ae=g[re+1].y+q*C/2/xe;if(ae===0||!H)d.lineTo(we,Re),((Be,We)=>{Q.push(()=>{d.lineTo(Be,We)})})(De,Ae);else if(ae===-1){const Be=De+X*C,We=Ae-W*C,Fe=De+ee*C,ze=Ae-Z*C;d.lineTo(Be,We),d.quadTo(we,Re,Fe,ze),((ct,rt)=>{Q.push(()=>{d.lineTo(ct,rt)})})(De,Ae)}else d.lineTo(we,Re),((Be,We)=>{const Fe=we-X*C,ze=Re+W*C,ct=we-ee*C,rt=Re+Z*C;Q.push(()=>{d.quadTo(Be,We,Fe,ze)}),Q.push(()=>{d.lineTo(ct,rt)})})(De,Ae);W=Z,X=ee}}}if(te=C*ee,ce=-C*Z,I&&!S)this.paintMarker(d,F.x,F.y,-W,-X,k,w,C,M,!1);else{d.lineTo(F.x-M*Z+te/2,F.y-M*ee+ce/2);const re=F.x-M*Z-te/2,ae=F.y-M*ee-ce/2;S?(d.moveTo(re,ae),Q.splice(0,0,()=>{d.moveTo(re,ae)})):d.lineTo(re,ae)}for(let re=Q.length-1;re>=0;re--)Q[re]();S?(d.end(),d.stroke()):(d.close(),d.fillAndStroke()),d.setShadow(!1),d.setMiterLimit(4),H&&d.setLineJoin("flat"),g.length>2&&(d.setMiterLimit(4),P&&!S&&(d.begin(),this.paintMarker(d,g[0].x,g[0].y,se,ge,D,b,C,M,!0),d.stroke(),d.end()),I&&!S&&(d.begin(),this.paintMarker(d,F.x,F.y,-W,-X,k,w,C,M,!0),d.stroke(),d.end()))}paintMarker(d,g,E,b,w,C,S,P,I,M){const D=P/S,k=P*w/2,H=-P*b/2,F=(I+C)*b,j=(I+C)*w;M?d.moveTo(g-k+F,E-H+j):d.lineTo(g-k+F,E-H+j),d.lineTo(g-k/D+F,E-H/D+j),d.lineTo(g+I*b,E+I*w),d.lineTo(g+k/D+F,E+H/D+j),d.lineTo(g+k+F,E+H+j)}isArrowRounded(){return this.isRounded}getStartArrowWidth(){return ARROW_WIDTH}getEndArrowWidth(){return ARROW_WIDTH}getEdgeWidth(){return ARROW_WIDTH/3}isOpenEnded(){return!1}isMarkerStart(){var d;return(((d=this.style)==null?void 0:d.startArrow)??NONE)!==NONE}isMarkerEnd(){var d;return(((d=this.style)==null?void 0:d.endArrow)??NONE)!==NONE}}class DoubleEllipseShape extends Shape{constructor(d,g,E,b=1){super(),this.bounds=d,this.fill=g,this.stroke=E,this.strokeWidth=b}paintBackground(d,g,E,b,w){d.ellipse(g,E,b,w),d.fillAndStroke()}paintForeground(d,g,E,b,w){var C;if(!this.outline){const S=((C=this.style)==null?void 0:C.margin)??Math.min(3+this.strokeWidth,Math.min(b/5,w/5));g+=S,E+=S,b-=2*S,w-=2*S,b>0&&w>0&&d.ellipse(g,E,b,w),d.stroke()}}getLabelBounds(d){var E;const g=((E=this.style)==null?void 0:E.margin)??Math.min(3+this.strokeWidth,Math.min(d.width/5/this.scale,d.height/5/this.scale))*this.scale;return new Rectangle(d.x+g,d.y+g,d.width-2*g,d.height-2*g)}}class SwimlaneShape extends Shape{constructor(d,g,E,b=1){super(),this.imageSize=16,this.imageSrc=null,this.bounds=d,this.fill=g,this.stroke=E,this.strokeWidth=b}isRoundable(d,g,E,b,w){return!0}getTitleSize(){var d;return Math.max(0,((d=this.style)==null?void 0:d.startSize)??DEFAULT_STARTSIZE)}getLabelBounds(d){var D,k;const g=this.getTitleSize(),E=new Rectangle(d.x,d.y,d.width,d.height),b=this.isHorizontal(),w=((D=this.style)==null?void 0:D.flipH)??!1,C=((k=this.style)==null?void 0:k.flipV)??!1,S=this.direction===DIRECTION.NORTH||this.direction===DIRECTION.SOUTH,P=b==!S,I=!P&&w!==(this.direction===DIRECTION.SOUTH||this.direction===DIRECTION.WEST),M=P&&C!==(this.direction===DIRECTION.SOUTH||this.direction===DIRECTION.WEST);if(S){const H=Math.min(E.width,g*this.scale);(I||M)&&(E.x+=E.width-H),E.width=H}else{const H=Math.min(E.height,g*this.scale);(I||M)&&(E.y+=E.height-H),E.height=H}return E}getGradientBounds(d,g,E,b,w){let C=this.getTitleSize();return this.isHorizontal()?(C=Math.min(C,w),new Rectangle(g,E,b,C)):(C=Math.min(C,b),new Rectangle(g,E,C,w))}getSwimlaneArcSize(d,g,E){var w,C,S;if(((w=this.style)==null?void 0:w.absoluteArcSize)??!1)return Math.min(d/2,Math.min(g/2,((C=this.style)==null?void 0:C.arcSize)??LINE_ARCSIZE/2));const b=(((S=this.style)==null?void 0:S.arcSize)??RECTANGLE_ROUNDING_FACTOR*100)/100;return E*b*3}isHorizontal(){var d;return((d=this.style)==null?void 0:d.horizontal)??!0}paintVertexShape(d,g,E,b,w){var D,k,H;let C=this.getTitleSize();const S=((D=this.style)==null?void 0:D.swimlaneFillColor)??NONE,P=((k=this.style)==null?void 0:k.swimlaneLine)??!0;let I=0;this.isHorizontal()?C=Math.min(C,w):C=Math.min(C,b),d.translate(g,E),this.isRounded?(I=this.getSwimlaneArcSize(b,w,C),I=Math.min((this.isHorizontal()?w:b)-C,Math.min(C,I)),this.paintRoundedSwimlane(d,g,E,b,w,C,I,S,P)):this.paintSwimlane(d,g,E,b,w,C,S,P);const M=((H=this.style)==null?void 0:H.separatorColor)??NONE;if(this.paintSeparator(d,g,E,b,w,C,M),this.imageSrc){const F=this.getImageBounds(g,E,b,w);d.image(F.x-g,F.y-E,F.width,F.height,this.imageSrc,!1,!1,!1)}this.glass&&(d.setShadow(!1),this.paintGlassEffect(d,0,0,b,C,I))}paintSwimlane(d,g,E,b,w,C,S,P){d.begin();let I=!0;this.style&&this.style.pointerEvents!=null&&(I=this.style.pointerEvents),!I&&this.fill===NONE&&(d.pointerEvents=!1),this.isHorizontal()?(d.moveTo(0,C),d.lineTo(0,0),d.lineTo(b,0),d.lineTo(b,C),d.fillAndStroke(),C<w&&((S===NONE||!I)&&(d.pointerEvents=!1),S!==NONE&&d.setFillColor(S),d.begin(),d.moveTo(0,C),d.lineTo(0,w),d.lineTo(b,w),d.lineTo(b,C),S===NONE?d.stroke():d.fillAndStroke())):(d.moveTo(C,0),d.lineTo(0,0),d.lineTo(0,w),d.lineTo(C,w),d.fillAndStroke(),C<b&&((S===NONE||!I)&&(d.pointerEvents=!1),S!==NONE&&d.setFillColor(S),d.begin(),d.moveTo(C,0),d.lineTo(b,0),d.lineTo(b,w),d.lineTo(C,w),S===NONE?d.stroke():d.fillAndStroke())),P&&this.paintDivider(d,g,E,b,w,C,S===NONE)}paintRoundedSwimlane(d,g,E,b,w,C,S,P,I){d.begin();let M=!0;this.style&&this.style.pointerEvents!=null&&(M=this.style.pointerEvents),!M&&this.fill===NONE&&(d.pointerEvents=!1),this.isHorizontal()?(d.moveTo(b,C),d.lineTo(b,S),d.quadTo(b,0,b-Math.min(b/2,S),0),d.lineTo(Math.min(b/2,S),0),d.quadTo(0,0,0,S),d.lineTo(0,C),d.fillAndStroke(),C<w&&((P===NONE||!M)&&(d.pointerEvents=!1),P!==NONE&&d.setFillColor(P),d.begin(),d.moveTo(0,C),d.lineTo(0,w-S),d.quadTo(0,w,Math.min(b/2,S),w),d.lineTo(b-Math.min(b/2,S),w),d.quadTo(b,w,b,w-S),d.lineTo(b,C),P===NONE?d.stroke():d.fillAndStroke())):(d.moveTo(C,0),d.lineTo(S,0),d.quadTo(0,0,0,Math.min(w/2,S)),d.lineTo(0,w-Math.min(w/2,S)),d.quadTo(0,w,S,w),d.lineTo(C,w),d.fillAndStroke(),C<b&&((P===NONE||!M)&&(d.pointerEvents=!1),P!==NONE&&d.setFillColor(P),d.begin(),d.moveTo(C,w),d.lineTo(b-S,w),d.quadTo(b,w,b,w-Math.min(w/2,S)),d.lineTo(b,Math.min(w/2,S)),d.quadTo(b,0,b-S,0),d.lineTo(C,0),P===NONE?d.stroke():d.fillAndStroke())),I&&this.paintDivider(d,g,E,b,w,C,P===NONE)}paintDivider(d,g,E,b,w,C,S){S||d.setShadow(!1),d.begin(),this.isHorizontal()?(d.moveTo(0,C),d.lineTo(b,C)):(d.moveTo(C,0),d.lineTo(C,w)),d.stroke()}paintSeparator(d,g,E,b,w,C,S){S!==NONE&&(d.setStrokeColor(S),d.setDashed(!0),d.begin(),this.isHorizontal()?(d.moveTo(b,C),d.lineTo(b,w)):(d.moveTo(C,0),d.lineTo(b,0)),d.stroke(),d.setDashed(!1))}getImageBounds(d,g,E,b){return this.isHorizontal()?new Rectangle(d+E-this.imageSize,g,this.imageSize,this.imageSize):new Rectangle(d,g,this.imageSize,this.imageSize)}}class LabelShape extends RectangleShape{constructor(d,g,E,b){super(d,g,E,b),this.imageSize=DEFAULT_IMAGESIZE,this.imageSrc=null,this.spacing=2,this.indicatorSize=10,this.indicatorSpacing=2,this.indicatorImageSrc=null}init(d){super.init(d),this.indicatorShape&&(this.indicator=new this.indicatorShape,this.indicator.dialect=this.dialect,this.indicator.init(this.node))}redraw(){this.indicator&&(this.indicator.fill=this.indicatorColor,this.indicator.stroke=this.indicatorStrokeColor,this.indicator.gradient=this.indicatorGradientColor,this.indicator.direction=this.indicatorDirection,this.indicator.redraw()),super.redraw()}isHtmlAllowed(){return super.isHtmlAllowed()&&this.indicatorColor===NONE&&!!this.indicatorShape}paintForeground(d,g,E,b,w){this.paintImage(d,g,E,b,w),this.paintIndicator(d,g,E,b,w),super.paintForeground(d,g,E,b,w)}paintImage(d,g,E,b,w){if(this.imageSrc){const C=this.getImageBounds(g,E,b,w);d.image(C.x,C.y,C.width,C.height,this.imageSrc,!1,!1,!1)}}getImageBounds(d,g,E,b){var M,D,k,H,F;const w=((M=this.style)==null?void 0:M.imageAlign)??ALIGN.LEFT,C=((D=this.style)==null?void 0:D.verticalAlign)??ALIGN.MIDDLE,S=((k=this.style)==null?void 0:k.imageWidth)??DEFAULT_IMAGESIZE,P=((H=this.style)==null?void 0:H.imageHeight)??DEFAULT_IMAGESIZE,I=((F=this.style)==null?void 0:F.spacing)??this.spacing+5;return w===ALIGN.CENTER?d+=(E-S)/2:w===ALIGN.RIGHT?d+=E-S-I:d+=I,C===ALIGN.TOP?g+=I:C===ALIGN.BOTTOM?g+=b-P-I:g+=(b-P)/2,new Rectangle(d,g,S,P)}paintIndicator(d,g,E,b,w){if(this.indicator)this.indicator.bounds=this.getIndicatorBounds(g,E,b,w),this.indicator.paint(d);else if(this.indicatorImageSrc){const C=this.getIndicatorBounds(g,E,b,w);d.image(C.x,C.y,C.width,C.height,this.indicatorImageSrc,!1,!1,!1)}}getIndicatorBounds(d,g,E,b){var M,D,k,H;const w=((M=this.style)==null?void 0:M.imageAlign)??ALIGN.LEFT,C=((D=this.style)==null?void 0:D.verticalAlign)??ALIGN.MIDDLE,S=((k=this.style)==null?void 0:k.indicatorWidth)??this.indicatorSize,P=((H=this.style)==null?void 0:H.indicatorHeight)??this.indicatorSize,I=this.spacing+5;return w===ALIGN.RIGHT?d+=E-S-I:w===ALIGN.CENTER?d+=(E-S)/2:d+=I,C===ALIGN.BOTTOM?g+=b-P-I:C===ALIGN.TOP?g+=I:g+=(b-P)/2,new Rectangle(d,g,S,P)}redrawHtmlShape(){for(super.redrawHtmlShape();this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);if(this.imageSrc&&this.bounds){const d=document.createElement("img");d.style.position="relative",d.setAttribute("border","0");const g=this.getImageBounds(this.bounds.x,this.bounds.y,this.bounds.width,this.bounds.height);g.x-=this.bounds.x,g.y-=this.bounds.y,d.style.left=`${Math.round(g.x)}px`,d.style.top=`${Math.round(g.y)}px`,d.style.width=`${Math.round(g.width)}px`,d.style.height=`${Math.round(g.height)}px`,d.src=this.imageSrc,this.node.appendChild(d)}}}let isDefaultElementsRegistered=!1;function registerDefaultShapes(){if(!isDefaultElementsRegistered){const x=[[SHAPE.ACTOR,ActorShape],[SHAPE.ARROW,ArrowShape],[SHAPE.ARROW_CONNECTOR,ArrowConnectorShape],[SHAPE.CONNECTOR,ConnectorShape],[SHAPE.CLOUD,CloudShape],[SHAPE.CYLINDER,CylinderShape],[SHAPE.DOUBLE_ELLIPSE,DoubleEllipseShape],[SHAPE.ELLIPSE,EllipseShape],[SHAPE.HEXAGON,HexagonShape],[SHAPE.IMAGE,ImageShape],[SHAPE.LABEL,LabelShape],[SHAPE.LINE,LineShape],[SHAPE.RECTANGLE,RectangleShape],[SHAPE.RHOMBUS,RhombusShape],[SHAPE.SWIMLANE,SwimlaneShape],[SHAPE.TRIANGLE,TriangleShape]];for(const[d,g]of x)CellRenderer.registerShape(d,g);isDefaultElementsRegistered=!0}}const EllipsePerimeter=(x,d,g,E=!1)=>{const{x:b}=x,{y:w}=x,C=x.width/2,S=x.height/2,P=b+C,I=w+S,M=g.x,D=g.y,k=parseInt(String(M-P)),H=parseInt(String(D-I));if(k===0&&H!==0)return new Point(P,I+S*H/Math.abs(H));if(k===0&&H===0)return new Point(M,D);if(E){if(D>=w&&D<=w+x.height){const se=D-I;let ge=Math.sqrt(C*C*(1-se*se/(S*S)))||0;return M<=b&&(ge=-ge),new Point(P+ge,D)}if(M>=b&&M<=b+x.width){const se=M-P;let ge=Math.sqrt(S*S*(1-se*se/(C*C)))||0;return D<=w&&(ge=-ge),new Point(M,I+ge)}}const F=H/k,j=I-F*P,$=C*C*F*F+S*S,z=-2*P*$,U=C*C*F*F*P*P+S*S*P*P-C*C*S*S,W=Math.sqrt(z*z-4*$*U),q=(-z+W)/(2*$),Z=(-z-W)/(2*$),X=F*q+j,K=F*Z+j,ee=Math.sqrt(Math.pow(q-M,2)+Math.pow(X-D,2)),te=Math.sqrt(Math.pow(Z-M,2)+Math.pow(K-D,2));let ce=0,Q=0;return ee<te?(ce=q,Q=X):(ce=Z,Q=K),new Point(ce,Q)},HexagonPerimeter=(x,d,g,E=!1)=>{var X;const{x:b}=x,{y:w}=x,C=x.width,S=x.height,P=x.getCenterX(),I=x.getCenterY(),M=g.x,D=g.y,k=M-P,H=D-I,F=-Math.atan2(H,k),j=Math.PI,$=Math.PI/2;let z=new Point(P,I);const U=((X=d==null?void 0:d.style)==null?void 0:X.direction)??DIRECTION.EAST,W=U===DIRECTION.NORTH||U===DIRECTION.SOUTH;let q=new Point,Z=new Point;if((M<b&&D<w||M<b&&D>w+S||M>b+C&&D<w||M>b+C&&D>w+S)&&(E=!1),E){if(W){if(M===P){if(D<=w)return new Point(P,w);if(D>=w+S)return new Point(P,w+S)}else if(M<b){if(D===w+S/4)return new Point(b,w+S/4);if(D===w+3*S/4)return new Point(b,w+3*S/4)}else if(M>b+C){if(D===w+S/4)return new Point(b+C,w+S/4);if(D===w+3*S/4)return new Point(b+C,w+3*S/4)}else if(M===b){if(D<I)return new Point(b,w+S/4);if(D>I)return new Point(b,w+3*S/4)}else if(M===b+C){if(D<I)return new Point(b+C,w+S/4);if(D>I)return new Point(b+C,w+3*S/4)}if(D===w)return new Point(P,w);if(D===w+S)return new Point(P,w+S);M<P?D>w+S/4&&D<w+3*S/4?(q=new Point(b,w),Z=new Point(b,w+S)):D<w+S/4?(q=new Point(b-Math.floor(.5*C),w+Math.floor(.5*S)),Z=new Point(b+C,w-Math.floor(.25*S))):D>w+3*S/4&&(q=new Point(b-Math.floor(.5*C),w+Math.floor(.5*S)),Z=new Point(b+C,w+Math.floor(1.25*S))):M>P&&(D>w+S/4&&D<w+3*S/4?(q=new Point(b+C,w),Z=new Point(b+C,w+S)):D<w+S/4?(q=new Point(b,w-Math.floor(.25*S)),Z=new Point(b+Math.floor(1.5*C),w+Math.floor(.5*S))):D>w+3*S/4&&(q=new Point(b+Math.floor(1.5*C),w+Math.floor(.5*S)),Z=new Point(b,w+Math.floor(1.25*S))))}else{if(D===I){if(M<=b)return new Point(b,w+S/2);if(M>=b+C)return new Point(b+C,w+S/2)}else if(D<w){if(M===b+C/4)return new Point(b+C/4,w);if(M===b+3*C/4)return new Point(b+3*C/4,w)}else if(D>w+S){if(M===b+C/4)return new Point(b+C/4,w+S);if(M===b+3*C/4)return new Point(b+3*C/4,w+S)}else if(D===w){if(M<P)return new Point(b+C/4,w);if(M>P)return new Point(b+3*C/4,w)}else if(D===w+S){if(M<P)return new Point(b+C/4,w+S);if(D>I)return new Point(b+3*C/4,w+S)}if(M===b)return new Point(b,I);if(M===b+C)return new Point(b+C,I);D<I?M>b+C/4&&M<b+3*C/4?(q=new Point(b,w),Z=new Point(b+C,w)):M<b+C/4?(q=new Point(b-Math.floor(.25*C),w+S),Z=new Point(b+Math.floor(.5*C),w-Math.floor(.5*S))):M>b+3*C/4&&(q=new Point(b+Math.floor(.5*C),w-Math.floor(.5*S)),Z=new Point(b+Math.floor(1.25*C),w+S)):D>I&&(M>b+C/4&&M<b+3*C/4?(q=new Point(b,w+S),Z=new Point(b+C,w+S)):M<b+C/4?(q=new Point(b-Math.floor(.25*C),w),Z=new Point(b+Math.floor(.5*C),w+Math.floor(1.5*S))):M>b+3*C/4&&(q=new Point(b+Math.floor(.5*C),w+Math.floor(1.5*S)),Z=new Point(b+Math.floor(1.25*C),w)))}let K=P,ee=I;M>=b&&M<=b+C?(K=M,D<I?ee=w+S:ee=w):D>=w&&D<=w+S&&(ee=D,M<P?K=b+C:K=b),z=intersection(K,ee,g.x,g.y,q.x,q.y,Z.x,Z.y)}else{if(W){const K=Math.atan2(S/4,C/2);if(F===K)return new Point(b+C,w+Math.floor(.25*S));if(F===$)return new Point(b+Math.floor(.5*C),w);if(F===j-K)return new Point(b,w+Math.floor(.25*S));if(F===-K)return new Point(b+C,w+Math.floor(.75*S));if(F===-$)return new Point(b+Math.floor(.5*C),w+S);if(F===-j+K)return new Point(b,w+Math.floor(.75*S));F<K&&F>-K?(q=new Point(b+C,w),Z=new Point(b+C,w+S)):F>K&&F<$?(q=new Point(b,w-Math.floor(.25*S)),Z=new Point(b+Math.floor(1.5*C),w+Math.floor(.5*S))):F>$&&F<j-K?(q=new Point(b-Math.floor(.5*C),w+Math.floor(.5*S)),Z=new Point(b+C,w-Math.floor(.25*S))):F>j-K&&F<=j||F<-j+K&&F>=-j?(q=new Point(b,w),Z=new Point(b,w+S)):F<-K&&F>-$?(q=new Point(b+Math.floor(1.5*C),w+Math.floor(.5*S)),Z=new Point(b,w+Math.floor(1.25*S))):F<-$&&F>-j+K&&(q=new Point(b-Math.floor(.5*C),w+Math.floor(.5*S)),Z=new Point(b+C,w+Math.floor(1.25*S)))}else{const K=Math.atan2(S/2,C/4);if(F===K)return new Point(b+Math.floor(.75*C),w);if(F===j-K)return new Point(b+Math.floor(.25*C),w);if(F===j||F===-j)return new Point(b,w+Math.floor(.5*S));if(F===0)return new Point(b+C,w+Math.floor(.5*S));if(F===-K)return new Point(b+Math.floor(.75*C),w+S);if(F===-j+K)return new Point(b+Math.floor(.25*C),w+S);F>0&&F<K?(q=new Point(b+Math.floor(.5*C),w-Math.floor(.5*S)),Z=new Point(b+Math.floor(1.25*C),w+S)):F>K&&F<j-K?(q=new Point(b,w),Z=new Point(b+C,w)):F>j-K&&F<j?(q=new Point(b-Math.floor(.25*C),w+S),Z=new Point(b+Math.floor(.5*C),w-Math.floor(.5*S))):F<0&&F>-K?(q=new Point(b+Math.floor(.5*C),w+Math.floor(1.5*S)),Z=new Point(b+Math.floor(1.25*C),w)):F<-K&&F>-j+K?(q=new Point(b,w+S),Z=new Point(b+C,w+S)):F<-j+K&&F>-j&&(q=new Point(b-Math.floor(.25*C),w),Z=new Point(b+Math.floor(.5*C),w+Math.floor(1.5*S)))}z=intersection(P,I,g.x,g.y,q.x,q.y,Z.x,Z.y)}return z??new Point(P,I)},RectanglePerimeter=(x,d,g,E=!1)=>{const b=x.getCenterX(),w=x.getCenterY(),C=g.x-b,S=g.y-w,P=Math.atan2(S,C),I=new Point(0,0),M=Math.PI,k=Math.PI/2-P,H=Math.atan2(x.height,x.width);return P<-M+H||P>M-H?(I.x=x.x,I.y=w-x.width*Math.tan(P)/2):P<-H?(I.y=x.y,I.x=b-x.height*Math.tan(k)/2):P<H?(I.x=x.x+x.width,I.y=w+x.width*Math.tan(P)/2):(I.y=x.y+x.height,I.x=b+x.height*Math.tan(k)/2),E&&(g.x>=x.x&&g.x<=x.x+x.width?I.x=g.x:g.y>=x.y&&g.y<=x.y+x.height&&(I.y=g.y),g.x<x.x?I.x=x.x:g.x>x.x+x.width&&(I.x=x.x+x.width),g.y<x.y?I.y=x.y:g.y>x.y+x.height&&(I.y=x.y+x.height)),I},RhombusPerimeter=(x,d,g,E=!1)=>{const{x:b}=x,{y:w}=x,C=x.width,S=x.height,P=b+C/2,I=w+S/2,M=g.x,D=g.y;if(P===M)return I>D?new Point(P,w):new Point(P,w+S);if(I===D)return P>M?new Point(b,I):new Point(b+C,I);let k=P,H=I;return E&&(M>=b&&M<=b+C?k=M:D>=w&&D<=w+S&&(H=D)),M<P?D<I?intersection(M,D,k,H,P,w,b,I):intersection(M,D,k,H,P,w+S,b,I):D<I?intersection(M,D,k,H,P,w,b+C,I):intersection(M,D,k,H,P,w+S,b+C,I)},TrianglePerimeter=(x,d,g,E=!1)=>{const b=d!=null?d.style.direction:null,w=b===DIRECTION.NORTH||b===DIRECTION.SOUTH,{x:C}=x,{y:S}=x,P=x.width,I=x.height;let M=C+P/2,D=S+I/2,k=new Point(C,S),H=new Point(C+P,D),F=new Point(C,S+I);b===DIRECTION.NORTH?(k=F,H=new Point(M,S),F=new Point(C+P,S+I)):b===DIRECTION.SOUTH?(H=new Point(M,S+I),F=new Point(C+P,S)):b===DIRECTION.WEST&&(k=new Point(C+P,S),H=new Point(C,D),F=new Point(C+P,S+I));let j=g.x-M,$=g.y-D;const z=w?Math.atan2(j,$):Math.atan2($,j),U=w?Math.atan2(P,I):Math.atan2(I,P);let W=!1;b===DIRECTION.NORTH||b===DIRECTION.WEST?W=z>-U&&z<U:W=z<-Math.PI+U||z>Math.PI-U;let q=null;if(W)E&&(w&&g.x>=k.x&&g.x<=F.x||!w&&g.y>=k.y&&g.y<=F.y)?w?q=new Point(g.x,k.y):q=new Point(k.x,g.y):b===DIRECTION.NORTH?q=new Point(C+P/2+I*Math.tan(z)/2,S+I):b===DIRECTION.SOUTH?q=new Point(C+P/2-I*Math.tan(z)/2,S):b===DIRECTION.WEST?q=new Point(C+P,S+I/2+P*Math.tan(z)/2):q=new Point(C,S+I/2-P*Math.tan(z)/2);else{if(E){const Z=new Point(M,D);g.y>=S&&g.y<=S+I?(Z.x=w?M:b===DIRECTION.WEST?C+P:C,Z.y=g.y):g.x>=C&&g.x<=C+P&&(Z.x=g.x,Z.y=w?b===DIRECTION.NORTH?S+I:S:D),j=g.x-Z.x,$=g.y-Z.y,M=Z.x,D=Z.y}w&&g.x<=C+P/2||!w&&g.y<=S+I/2?q=intersection(g.x,g.y,M,D,k.x,k.y,H.x,H.y):q=intersection(g.x,g.y,M,D,H.x,H.y,F.x,F.y)}return q==null&&(q=new Point(M,D)),q},Perimeter={RectanglePerimeter,EllipsePerimeter,RhombusPerimeter,TrianglePerimeter,HexagonPerimeter};let isDefaultsRegistered=!1;const registerDefaultStyleElements=()=>{isDefaultsRegistered||(StyleRegistry.putValue(EDGESTYLE.ELBOW,EdgeStyle.ElbowConnector),StyleRegistry.putValue(EDGESTYLE.ENTITY_RELATION,EdgeStyle.EntityRelation),StyleRegistry.putValue(EDGESTYLE.LOOP,EdgeStyle.Loop),StyleRegistry.putValue(EDGESTYLE.MANHATTAN,EdgeStyle.ManhattanConnector),StyleRegistry.putValue(EDGESTYLE.ORTHOGONAL,EdgeStyle.OrthConnector),StyleRegistry.putValue(EDGESTYLE.SEGMENT,EdgeStyle.SegmentConnector),StyleRegistry.putValue(EDGESTYLE.SIDETOSIDE,EdgeStyle.SideToSide),StyleRegistry.putValue(EDGESTYLE.TOPTOBOTTOM,EdgeStyle.TopToBottom),StyleRegistry.putValue(PERIMETER.ELLIPSE,Perimeter.EllipsePerimeter),StyleRegistry.putValue(PERIMETER.HEXAGON,Perimeter.HexagonPerimeter),StyleRegistry.putValue(PERIMETER.RECTANGLE,Perimeter.RectanglePerimeter),StyleRegistry.putValue(PERIMETER.RHOMBUS,Perimeter.RhombusPerimeter),StyleRegistry.putValue(PERIMETER.TRIANGLE,Perimeter.TrianglePerimeter),isDefaultsRegistered=!0)},CellsMixin={cellsResizable:!0,cellsBendable:!0,cellsSelectable:!0,cellsDisconnectable:!0,autoSizeCells:!1,autoSizeCellsOnAdd:!1,cellsLocked:!1,cellsCloneable:!0,cellsDeletable:!0,cellsMovable:!0,extendParents:!0,extendParentsOnAdd:!0,extendParentsOnMove:!1,getBoundingBox(x){let d=null;if(x.length>0){for(const g of x)if(g.isVertex()||g.isEdge()){const E=this.getView().getBoundingBox(this.getView().getState(g),!0);E&&(d?d.add(E):d=Rectangle.fromRectangle(E))}}return d},removeStateForCell(x){for(const d of x.getChildren())this.removeStateForCell(d);this.getView().invalidate(x,!1,!0),this.getView().removeState(x)},getCurrentCellStyle(x,d=!1){const g=d?null:this.getView().getState(x);return g?g.style:this.getCellStyle(x)},getCellStyle(x){const d=x.getStyle(),g=this.getStylesheet(),E=x.isEdge()?g.getDefaultEdgeStyle():g.getDefaultVertexStyle();return this.postProcessCellStyle(g.getCellStyle(d,E??{}))},postProcessCellStyle(x){if(!x.image)return x;const d=x.image;let g=this.getImageFromBundles(d);if(g?x.image=g:g=d,g&&g.substring(0,11)==="data:image/"){if(g.substring(0,20)==="data:image/svg+xml,<")g=g.substring(0,19)+encodeURIComponent(g.substring(19));else if(g.substring(0,22)!=="data:image/svg+xml,%3C"){const E=g.indexOf(",");E>0&&g.substring(E-7,E+1)!==";base64,"&&(g=`${g.substring(0,E)};base64,${g.substring(E+1)}`)}x.image=g}return x},setCellStyle(x,d){d=d??this.getSelectionCells(),this.batchUpdate(()=>{for(const g of d)this.getDataModel().setStyle(g,x)})},toggleCellStyle(x,d=!1,g){return g=g??this.getSelectionCell(),this.toggleCellStyles(x,d,[g])},toggleCellStyles(x,d=!1,g){let E=!1;return g=g??this.getSelectionCells(),g.length>0&&(E=!(this.getCurrentCellStyle(g[0])[x]??d),this.setCellStyles(x,E,g)),E},setCellStyles(x,d,g){g=g??this.getSelectionCells(),setCellStyles(this.getDataModel(),g,x,d)},toggleCellStyleFlags(x,d,g){g=g??this.getSelectionCells(),this.setCellStyleFlags(x,d,null,g)},setCellStyleFlags(x,d,g=null,E){E=E??this.getSelectionCells(),E.length>0&&(g===null&&(g=((this.getCurrentCellStyle(E[0])[x]||0)&d)!==d),setCellStyleFlags(this.getDataModel(),E,x,d,g))},alignCells(x,d,g=null){if(d=d??this.getSelectionCells(),d.length>1){if(g===null)for(const E of d){const b=this.getView().getState(E);if(b&&!E.isEdge())if(g===null)if(x===ALIGN.CENTER){g=b.x+b.width/2;break}else if(x===ALIGN.RIGHT)g=b.x+b.width;else if(x===ALIGN.TOP)g=b.y;else if(x===ALIGN.MIDDLE){g=b.y+b.height/2;break}else x===ALIGN.BOTTOM?g=b.y+b.height:g=b.x;else x===ALIGN.RIGHT?g=Math.max(g,b.x+b.width):x===ALIGN.TOP?g=Math.min(g,b.y):x===ALIGN.BOTTOM?g=Math.max(g,b.y+b.height):g=Math.min(g,b.x)}if(g!==null){const E=this.getView().scale;this.batchUpdate(()=>{const b=g;for(const w of d){const C=this.getView().getState(w);if(C!=null){let S=w.getGeometry();S!=null&&!w.isEdge()&&(S=S.clone(),x===ALIGN.CENTER?S.x+=(b-C.x-C.width/2)/E:x===ALIGN.RIGHT?S.x+=(b-C.x-C.width)/E:x===ALIGN.TOP?S.y+=(b-C.y)/E:x===ALIGN.MIDDLE?S.y+=(b-C.y-C.height/2)/E:x===ALIGN.BOTTOM?S.y+=(b-C.y-C.height)/E:S.x+=(b-C.x)/E,this.resizeCell(w,S))}}this.fireEvent(new EventObject(InternalEvent.ALIGN_CELLS,{align:x,cells:d}))})}}return d},cloneCell(x,d=!1,g={},E=!1){return this.cloneCells([x],d,g,E)[0]},cloneCells(x,d=!0,g={},E=!1){let b;const w=new Dictionary,C=[];for(const S of x)w.put(S,!0),C.push(S);if(C.length>0){const{scale:S}=this.getView(),P=this.getView().translate,I=[];b=cloneCells(x,!0,g);for(let M=0;M<x.length;M+=1){const D=x[M],k=b[M];if(!(!d&&k.isEdge()&&this.getEdgeValidationError(k,k.getTerminal(!0),k.getTerminal(!1))!==null)){I.push(k);const H=k.getGeometry();if(H){const F=this.getView().getState(D),j=D.getParent(),$=j?this.getView().getState(j):null;if(F&&$){const z=E?0:$.origin.x,U=E?0:$.origin.y;if(k.isEdge()){const W=F.absolutePoints;let q=D.getTerminal(!0);for(;q&&!w.get(q);)q=q.getParent();!q&&W[0]&&H.setTerminalPoint(new Point(W[0].x/S-P.x,W[0].y/S-P.y),!0);let Z=D.getTerminal(!1);for(;Z&&!w.get(Z);)Z=Z.getParent();const X=W.length-1,K=W[X];!Z&&K&&H.setTerminalPoint(new Point(K.x/S-P.x,K.y/S-P.y),!1);const{points:ee}=H;if(ee)for(const te of ee)te.x+=z,te.y+=U}else H.translate(z,U)}}}}b=I}else b=[];return b},addCell(x,d=null,g=null,E=null,b=null){return this.addCells([x],d,g,E,b)[0]},addCells(x,d=null,g=null,E=null,b=null,w=!1){const C=d??this.getDefaultParent(),S=g??C.getChildCount();return this.batchUpdate(()=>{this.cellsAdded(x,C,S,E,b,w,!0),this.fireEvent(new EventObject(InternalEvent.ADD_CELLS,{cells:x,p:C,i:S,source:E,target:b}))}),x},cellsAdded(x,d,g,E=null,b=null,w=!1,C=!1,S=!0){this.batchUpdate(()=>{const P=w?this.getView().getState(d):null,I=P?P.origin:null,M=new Point(0,0);x.forEach((D,k)=>{const H=D.getParent();if(I&&D!==d&&d!==H){const F=H?this.getView().getState(H):null,j=F?F.origin:M;let $=D.getGeometry();if($){const z=j.x-I.x,U=j.y-I.y;$=$.clone(),$.translate(z,U),!$.relative&&D.isVertex()&&!this.isAllowNegativeCoordinates()&&($.x=Math.max(0,$.x),$.y=Math.max(0,$.y)),this.getDataModel().setGeometry(D,$)}}d===H&&g+k>d.getChildCount()&&g--,this.getDataModel().add(d,D,g+k),this.autoSizeCellsOnAdd&&this.autoSizeCell(D,!0),(!S||S)&&this.isExtendParentsOnAdd(D)&&this.isExtendParent(D)&&this.extendParent(D),(!C||C)&&this.constrainChild(D),E&&this.cellConnected(D,E,!0),b&&this.cellConnected(D,b,!1)}),this.fireEvent(new EventObject(InternalEvent.CELLS_ADDED,{cells:x,parent:d,index:g,source:E,target:b,absolute:w}))})},autoSizeCell(x,d=!0){if(d)for(const g of x.getChildren())this.autoSizeCell(g);x.isVertex()&&this.isAutoSizeCell(x)&&this.updateCellSize(x)},removeCells(x=null,d=!0){if(x||(x=this.getDeletableCells(this.getSelectionCells())),d)x=this.getDeletableCells(this.addAllEdges(x));else{x=x.slice();const g=this.getDeletableCells(this.getAllEdges(x)),E=new Dictionary;for(const b of x)E.put(b,!0);for(const b of g)!this.getView().getState(b)&&!E.get(b)&&(E.put(b,!0),x.push(b))}return this.batchUpdate(()=>{this.cellsRemoved(x),this.fireEvent(new EventObject(InternalEvent.REMOVE_CELLS,{cells:x,includeEdges:d}))}),x??[]},cellsRemoved(x){if(x.length>0){const{scale:d}=this.getView(),g=this.getView().translate;this.batchUpdate(()=>{const E=new Dictionary;for(const b of x)E.put(b,!0);for(const b of x){const w=this.getAllEdges([b]),C=(S,P)=>{let I=S.getGeometry();if(I){const M=S.getTerminal(P);let D=!1,k=M;for(;k;){if(b===k){D=!0;break}k=k.getParent()}if(D){I=I.clone();const H=this.getView().getState(S);if(H){const F=H.absolutePoints,j=P?0:F.length-1,$=F[j];I.setTerminalPoint(new Point($.x/d-g.x-H.origin.x,$.y/d-g.y-H.origin.y),P)}else if(M){const F=this.getView().getState(M);F&&I.setTerminalPoint(new Point(F.getCenterX()/d-g.x,F.getCenterY()/d-g.y),P)}this.getDataModel().setGeometry(S,I),this.getDataModel().setTerminal(S,null,P)}}};for(const S of w)E.get(S)||(E.put(S,!0),C(S,!0),C(S,!1));this.getDataModel().remove(b)}this.fireEvent(new EventObject(InternalEvent.CELLS_REMOVED,{cells:x}))})}},toggleCells(x=!1,d,g=!0){return d=d??this.getSelectionCells(),g&&(d=this.addAllEdges(d)),this.batchUpdate(()=>{this.cellsToggled(d,x),this.fireEvent(new EventObject(InternalEvent.TOGGLE_CELLS,{show:x,cells:d,includeEdges:g}))}),d},cellsToggled(x,d=!1){x.length>0&&this.batchUpdate(()=>{for(const g of x)this.getDataModel().setVisible(g,d)})},updateCellSize(x,d=!1){return this.batchUpdate(()=>{this.cellSizeUpdated(x,d),this.fireEvent(new EventObject(InternalEvent.UPDATE_CELL_SIZE,{cell:x,ignoreChildren:d}))}),x},cellSizeUpdated(x,d=!1){this.batchUpdate(()=>{const g=this.getPreferredSizeForCell(x);let E=x.getGeometry();if(g&&E){const b=x.isCollapsed();if(E=E.clone(),this.isSwimlane(x)){const w=this.getCellStyle(x),C=x.getStyle();w.horizontal??!0?(C.startSize=g.height+8,b&&(E.height=g.height+8),E.width=g.width):(C.startSize=g.width+8,b&&(E.width=g.width+8),E.height=g.height),this.getDataModel().setStyle(x,C)}else{const w=this.getView().createState(x),C=w.style.align??ALIGN.CENTER;C===ALIGN.RIGHT?E.x+=E.width-g.width:C===ALIGN.CENTER&&(E.x+=Math.round((E.width-g.width)/2));const S=w.getVerticalAlign();S===ALIGN.BOTTOM?E.y+=E.height-g.height:S===ALIGN.MIDDLE&&(E.y+=Math.round((E.height-g.height)/2)),E.width=g.width,E.height=g.height}if(!d&&!b){const w=this.getView().getBounds(x.getChildren());if(w!=null){const C=this.getView().translate,{scale:S}=this.getView(),P=(w.x+w.width)/S-E.x-C.x,I=(w.y+w.height)/S-E.y-C.y;E.width=Math.max(E.width,P),E.height=Math.max(E.height,I)}}this.cellsResized([x],[E],!1)}})},getPreferredSizeForCell(x,d=null){let g=null;const E=this.getView().createState(x),{style:b}=E;if(!x.isEdge()){const w=b.fontSize||DEFAULT_FONTSIZE;let C=0,S=0;(E.getImageSrc()||b.image)&&b.shape===SHAPE.LABEL&&(b.verticalAlign===ALIGN.MIDDLE&&(C+=b.imageWidth||DEFAULT_IMAGESIZE),b.align!==ALIGN.CENTER&&(S+=b.imageHeight||DEFAULT_IMAGESIZE)),C+=2*(b.spacing||0),C+=b.spacingLeft||0,C+=b.spacingRight||0,S+=2*(b.spacing||0),S+=b.spacingTop||0,S+=b.spacingBottom||0;const P=this.getFoldingImage(E);P&&(C+=P.width+8);let I=this.getCellRenderer().getLabelValue(E);if(I&&I.length>0){this.isHtmlLabel(E.cell)||(I=htmlEntities(I,!1)),I=I.replace(/\n/g,"<br>");const M=getSizeForString(I,w,b.fontFamily,d,b.fontStyle);let D=M.width+C,k=M.height+S;if(!(b.horizontal??!0)){const H=k;k=D,D=H}this.isGridEnabled()&&(D=this.snap(D+this.getGridSize()/2),k=this.snap(k+this.getGridSize()/2)),g=new Rectangle(0,0,D,k)}else{const M=4*this.getGridSize();g=new Rectangle(0,0,M,M)}}return g},resizeCell(x,d,g=!1){return this.resizeCells([x],[d],g)[0]},resizeCells(x,d,g){return g=g??this.isRecursiveResize(),this.batchUpdate(()=>{const E=this.cellsResized(x,d,g);this.fireEvent(new EventObject(InternalEvent.RESIZE_CELLS,{cells:x,bounds:d,prev:E}))}),x},cellsResized(x,d,g=!1){const E=[];return x.length===d.length&&this.batchUpdate(()=>{x.forEach((b,w)=>{E.push(this.cellResized(b,d[w],!1,g)),this.isExtendParent(b)&&this.extendParent(b),this.constrainChild(b)}),this.isResetEdgesOnResize()&&this.resetEdges(x),this.fireEvent(new EventObject(InternalEvent.CELLS_RESIZED,{cells:x,bounds:d,prev:E}))}),E},cellResized(x,d,g=!1,E=!1){const b=x.getGeometry();if(b&&(b.x!==d.x||b.y!==d.y||b.width!==d.width||b.height!==d.height)){const w=b.clone();if(!g&&w.relative){const{offset:C}=w;C&&(C.x+=d.x-w.x,C.y+=d.y-w.y)}else w.x=d.x,w.y=d.y;w.width=d.width,w.height=d.height,!w.relative&&x.isVertex()&&!this.isAllowNegativeCoordinates()&&(w.x=Math.max(0,w.x),w.y=Math.max(0,w.y)),this.batchUpdate(()=>{E&&this.resizeChildCells(x,w),this.getDataModel().setGeometry(x,w),this.constrainChildCells(x)})}return b},resizeChildCells(x,d){const g=x.getGeometry();if(g){const E=g.width!==0?d.width/g.width:1,b=g.height!==0?d.height/g.height:1;for(const w of x.getChildren())this.scaleCell(w,E,b,!0)}},constrainChildCells(x){for(const d of x.getChildren())this.constrainChild(d)},scaleCell(x,d,g,E=!1){let b=x.getGeometry();if(b){const w=this.getCurrentCellStyle(x);b=b.clone();const{x:C}=b,{y:S}=b,P=b.width,I=b.height;b.scale(d,g,w.aspect==="fixed"),w.resizeWidth?b.width=P*d:w.resizeWidth||(b.width=P),w.resizeHeight?b.height=I*g:w.resizeHeight||(b.height=I),this.isCellMovable(x)||(b.x=C,b.y=S),this.isCellResizable(x)||(b.width=P,b.height=I),x.isVertex()?this.cellResized(x,b,!0,E):this.getDataModel().setGeometry(x,b)}},extendParent(x){const d=x.getParent();let g=d?d.getGeometry():null;if(d&&g&&!d.isCollapsed()){const E=x.getGeometry();E&&!E.relative&&(g.width<E.x+E.width||g.height<E.y+E.height)&&(g=g.clone(),g.width=Math.max(g.width,E.x+E.width),g.height=Math.max(g.height,E.y+E.height),this.cellsResized([d],[g],!1))}},importCells(x,d,g,E=null,b=null,w={}){return this.moveCells(x,d,g,!0,E,b,w)},moveCells(x,d=0,g=0,E=!1,b=null,w=null,C={}){if(d!==0||g!==0||E||b){x=getTopmostCells(x);const S=x;this.batchUpdate(()=>{const P=new Dictionary;for(const k of x)P.put(k,!0);const I=k=>{for(;k;){if(P.get(k))return!0;k=k.getParent()}return!1},M=[];for(const k of x){const H=k.getGeometry(),F=k.getParent();(!H||!H.relative||F&&!F.isEdge()||F&&!I(F.getTerminal(!0))&&!I(F.getTerminal(!1)))&&M.push(k)}x=M,E&&(x=this.cloneCells(x,this.isCloneInvalidEdges(),C),b||(b=this.getDefaultParent()));const D=this.isAllowNegativeCoordinates();if(b&&this.setAllowNegativeCoordinates(!0),this.cellsMoved(x,d,g,!E&&this.isDisconnectOnMove()&&this.isAllowDanglingEdges(),!b,this.isExtendParentsOnMove()&&!b),this.setAllowNegativeCoordinates(D),b){const k=b.getChildCount();this.cellsAdded(x,b,k,null,null,!0),E&&x.forEach((H,F)=>{const j=H.getGeometry(),$=S[F].getParent();j&&j.relative&&$&&$.isEdge()&&this.getDataModel().contains($)&&this.getDataModel().add($,H)})}this.fireEvent(new EventObject(InternalEvent.MOVE_CELLS,{cells:x,dx:d,dy:g,clone:E,target:b,event:w}))})}return x},cellsMoved(x,d,g,E=!1,b=!1,w=!1){(d!==0||g!==0)&&this.batchUpdate(()=>{E&&this.disconnectGraph(x);for(const C of x)this.translateCell(C,d,g),w&&this.isExtendParent(C)?this.extendParent(C):b&&this.constrainChild(C);this.isResetEdgesOnMove()&&this.resetEdges(x),this.fireEvent(new EventObject(InternalEvent.CELLS_MOVED,{cells:x,dx:d,dy:g,disconnect:E}))})},translateCell(x,d,g){let E=x.getGeometry();if(E){if(E=E.clone(),E.translate(d,g),!E.relative&&x.isVertex()&&!this.isAllowNegativeCoordinates()&&(E.x=Math.max(0,E.x),E.y=Math.max(0,E.y)),E.relative&&!x.isEdge()){const b=x.getParent();let w=0;if(b.isVertex()&&(w=this.getCurrentCellStyle(b).rotation??0),w!==0){const C=toRadians(-w),S=Math.cos(C),P=Math.sin(C),I=getRotatedPoint(new Point(d,g),S,P,new Point(0,0));d=I.x,g=I.y}E.offset?(E.offset.x=E.offset.x+d,E.offset.y=E.offset.y+g):E.offset=new Point(d,g)}this.getDataModel().setGeometry(x,E)}},getCellContainmentArea(x){if(!x.isEdge()){const d=x.getParent();if(d&&d!==this.getDefaultParent()){const g=d.getGeometry();if(g){let E=0,b=0,w=g.width,C=g.height;if(this.isSwimlane(d)){const S=this.getStartSize(d),P=this.getCurrentCellStyle(d),I=P.direction??DIRECTION.EAST,M=P.flipH??!1,D=P.flipV??!1;if(I===DIRECTION.SOUTH||I===DIRECTION.NORTH){const k=S.width;S.width=S.height,S.height=k}(I===DIRECTION.EAST&&!D||I===DIRECTION.NORTH&&!M||I===DIRECTION.WEST&&D||I===DIRECTION.SOUTH&&M)&&(E=S.width,b=S.height),w-=S.width,C-=S.height}return new Rectangle(E,b,w,C)}}}return null},constrainChild(x,d=!0){let g=x.getGeometry();if(g&&(this.isConstrainRelativeChildren()||!g.relative)){const E=x.getParent();let b=this.getMaximumGraphBounds();if(b&&E){const w=this.getBoundingBoxFromGeometry([E],!1);w&&(b=Rectangle.fromRectangle(b),b.x-=w.x,b.y-=w.y)}if(this.isConstrainChild(x)){let w=this.getCellContainmentArea(x);if(w){const C=this.getOverlap(x);C>0&&(w=Rectangle.fromRectangle(w),w.x-=w.width*C,w.y-=w.height*C,w.width+=2*w.width*C,w.height+=2*w.height*C),b?(b=Rectangle.fromRectangle(b),b.intersect(w)):b=w}}if(b){const w=[x];if(!x.isCollapsed()){const S=x.getDescendants();for(const P of S)P.isVisible()&&w.push(P)}const C=this.getBoundingBoxFromGeometry(w,!1);if(C){g=g.clone();let S=0;g.width>b.width&&(S=g.width-b.width,g.width-=S),C.x+C.width>b.x+b.width&&(S-=C.x+C.width-b.x-b.width-S);let P=0;g.height>b.height&&(P=g.height-b.height,g.height-=P),C.y+C.height>b.y+b.height&&(P-=C.y+C.height-b.y-b.height-P),C.x<b.x&&(S-=C.x-b.x),C.y<b.y&&(P-=C.y-b.y),(S!==0||P!==0)&&(g.relative?(g.offset||(g.offset=new Point),g.offset.x+=S,g.offset.y+=P):(g.x+=S,g.y+=P)),this.getDataModel().setGeometry(x,g)}}}},getChildCells(x,d=!1,g=!1){x=x??this.getDefaultParent();const E=x.getChildCells(d,g),b=[];for(const w of E)w.isVisible()&&b.push(w);return b},getCellAt(x,d,g=null,E=!0,b=!0,w=null){if(g||(g=this.getCurrentRoot(),g||(g=this.getDataModel().getRoot())),g){const C=g.getChildCount();for(let S=C-1;S>=0;S--){const P=g.getChildAt(S),I=this.getCellAt(x,d,P,E,b,w);if(I)return I;if(P.isVisible()&&(b&&P.isEdge()||E&&P.isVertex())){const M=this.getView().getState(P);if(M&&(!w||!w(M,x,d))&&this.intersects(M,x,d))return P}}}return null},getCells(x,d,g,E,b=null,w=[],C=null,S=null,P=!1){if(g>0||E>0||C){const I=this.getDataModel(),M=x+g,D=d+E;if(b||(b=this.getCurrentRoot(),b||(b=I.getRoot())),b)for(const k of b.getChildren()){const H=this.getView().getState(k);if(H&&k.isVisible()&&(!S||!S(H))){const F=H.style.rotation??0;let j=H;F!==0&&(j=getBoundingBox(j,F));const $=C&&k.isVertex()&&intersects(C,j)||!C&&(k.isEdge()||k.isVertex())&&j.x>=x&&j.y+j.height<=D&&j.y>=d&&j.x+j.width<=M;$&&w.push(k),(!$||P)&&this.getCells(x,d,g,E,k,w,C,S,P)}}}return w},getCellsBeyond(x,d,g=null,E=!1,b=!1){const w=[];if((E||b)&&(g||(g=this.getDefaultParent()),g))for(const C of g.getChildren()){const S=this.getView().getState(C);C.isVisible()&&S&&(!E||S.x>=x)&&(!b||S.y>=d)&&w.push(C)}return w},intersects(x,d,g){const E=x.absolutePoints;if(E.length>0){const b=this.getEventTolerance()*this.getEventTolerance();let w=E[0];for(let C=1;C<E.length;C+=1){const S=E[C];if(w&&S&&ptSegDistSq(w.x,w.y,S.x,S.y,d,g)<=b)return!0;w=S}}else{const b=toRadians(x.style.rotation??0);if(b!==0){const w=Math.cos(-b),C=Math.sin(-b),S=new Point(x.getCenterX(),x.getCenterY()),P=getRotatedPoint(new Point(d,g),w,C,S);d=P.x,g=P.y}if(contains(x,d,g))return!0}return!1},isValidAncestor(x,d,g=!1){return g?d.isAncestor(x):x.getParent()===d},isCellLocked(x){const d=x.getGeometry();return this.isCellsLocked()||!!d&&x.isVertex()&&d.relative},isCellsLocked(){return this.cellsLocked},setCellsLocked(x){this.cellsLocked=x},getCloneableCells(x){return this.getDataModel().filterCells(x,d=>this.isCellCloneable(d))},isCellCloneable(x){const d=this.getCurrentCellStyle(x),g=d.cloneable==null?!0:d.cloneable;return this.isCellsCloneable()&&g},isCellsCloneable(){return this.cellsCloneable},setCellsCloneable(x){this.cellsCloneable=x},getExportableCells(x){return this.getDataModel().filterCells(x,d=>this.canExportCell(d))},canExportCell(x=null){return this.isExportEnabled()},getImportableCells(x){return this.getDataModel().filterCells(x,d=>this.canImportCell(d))},canImportCell(x=null){return this.isImportEnabled()},isCellSelectable(x){return this.isCellsSelectable()},isCellsSelectable(){return this.cellsSelectable},setCellsSelectable(x){this.cellsSelectable=x},getDeletableCells(x){return this.getDataModel().filterCells(x,d=>this.isCellDeletable(d))},isCellDeletable(x){const d=this.getCurrentCellStyle(x),g=d.deletable==null?!0:d.deletable;return this.isCellsDeletable()&&g},isCellsDeletable(){return this.cellsDeletable},setCellsDeletable(x){this.cellsDeletable=x},isCellRotatable(x){const d=this.getCurrentCellStyle(x);return d.rotatable==null?!0:d.rotatable},getMovableCells(x){return this.getDataModel().filterCells(x,d=>this.isCellMovable(d))},isCellMovable(x){const d=this.getCurrentCellStyle(x);return this.isCellsMovable()&&!this.isCellLocked(x)&&(d.movable??!0)},isCellsMovable(){return this.cellsMovable},setCellsMovable(x){this.cellsMovable=x},isCellResizable(x){const d=this.getCurrentCellStyle(x);return this.isCellsResizable()&&!this.isCellLocked(x)&&(d.resizable??!0)},isCellsResizable(){return this.cellsResizable},setCellsResizable(x){this.cellsResizable=x},isCellBendable(x){const d=this.getCurrentCellStyle(x);return this.isCellsBendable()&&!this.isCellLocked(x)&&d.bendable!=!1},isCellsBendable(){return this.cellsBendable},setCellsBendable(x){this.cellsBendable=x},isAutoSizeCell(x){const d=this.getCurrentCellStyle(x);return this.isAutoSizeCells()||(d.autoSize??!1)},isAutoSizeCells(){return this.autoSizeCells},setAutoSizeCells(x){this.autoSizeCells=x},isExtendParent(x){return!x.isEdge()&&this.isExtendParents()},isExtendParents(){return this.extendParents},setExtendParents(x){this.extendParents=x},isExtendParentsOnAdd(x){return this.extendParentsOnAdd},setExtendParentsOnAdd(x){this.extendParentsOnAdd=x},isExtendParentsOnMove(){return this.extendParentsOnMove},setExtendParentsOnMove(x){this.extendParentsOnMove=x},getCursorForCell(x){return null},getCellBounds(x,d=!1,g=!1){let E=[x];d&&(E=E.concat(x.getEdges()));let b=this.getView().getBounds(E);if(g)for(const w of x.getChildren()){const C=this.getCellBounds(w,d,!0);b&&C?b.add(C):b=C}return b},getBoundingBoxFromGeometry(x,d=!1){let g=null,E=null;for(const b of x)if(d||b.isVertex()){const w=b.getGeometry();if(w){let C=null;if(b.isEdge()){const S=I=>{I&&(E?E.add(new Rectangle(I.x,I.y,0,0)):E=new Rectangle(I.x,I.y,0,0))};b.getTerminal(!0)||S(w.getTerminalPoint(!0)),b.getTerminal(!1)||S(w.getTerminalPoint(!1));const P=w.points;if(P&&P.length>0){E=new Rectangle(P[0].x,P[0].y,0,0);for(let I=1;I<P.length;I++)S(P[I])}C=E}else{const S=b.getParent();w.relative&&S?S.isVertex()&&S!==this.getView().currentRoot&&(E=this.getBoundingBoxFromGeometry([S],!1),E&&(C=new Rectangle(w.x*E.width,w.y*E.height,w.width,w.height),x.indexOf(S)>=0&&(C.x+=E.x,C.y+=E.y))):(C=Rectangle.fromRectangle(w),S&&S.isVertex()&&x.indexOf(S)>=0&&(E=this.getBoundingBoxFromGeometry([S],!1),E&&(C.x+=E.x,C.y+=E.y))),C&&w.offset&&(C.x+=w.offset.x,C.y+=w.offset.y);const P=this.getCurrentCellStyle(b);if(C){const I=P.rotation??0;I!==0&&(C=getBoundingBox(C,I))}}C&&(g?g.add(C):g=Rectangle.fromRectangle(C))}}return g}},ConnectionsMixin={constrainChildren:!0,constrainRelativeChildren:!1,disconnectOnMove:!0,cellsDisconnectable:!0,getOutlineConstraint(x,d,g){if(d.shape){const E=this.getView().getPerimeterBounds(d),b=d.style.direction;if(b===DIRECTION.NORTH||b===DIRECTION.SOUTH){E.x+=E.width/2-E.height/2,E.y+=E.height/2-E.width/2;const k=E.width;E.width=E.height,E.height=k}const w=toRadians(d.shape.getShapeRotation());if(w!==0){const k=Math.cos(-w),H=Math.sin(-w),F=new Point(E.getCenterX(),E.getCenterY());x=getRotatedPoint(x,k,H,F)}let C=1,S=1,P=0,I=0;if(d.cell.isVertex()){let k=d.style.flipH,H=d.style.flipV;if(b===DIRECTION.NORTH||b===DIRECTION.SOUTH){const F=k;k=H,H=F}k&&(C=-1,P=-E.width),H&&(S=-1,I=-E.height)}x=new Point((x.x-E.x)*C-P+E.x,(x.y-E.y)*S-I+E.y);const M=E.width===0?0:Math.round((x.x-E.x)*1e3/E.width)/1e3,D=E.height===0?0:Math.round((x.y-E.y)*1e3/E.height)/1e3;return new ConnectionConstraint(new Point(M,D),!1)}return null},getAllConnectionConstraints(x,d){var g,E;return((E=(g=x==null?void 0:x.shape)==null?void 0:g.stencil)==null?void 0:E.constraints)??null},getConnectionConstraint(x,d,g=!1){let E=null;const b=x.style[g?"exitX":"entryX"];if(b!==void 0){const P=x.style[g?"exitY":"entryY"];P!==void 0&&(E=new Point(b,P))}let w=!1,C=0,S=0;return E&&(w=x.style[g?"exitPerimeter":"entryPerimeter"]||!1,C=x.style[g?"exitDx":"entryDx"],S=x.style[g?"exitDy":"entryDy"],C=Number.isFinite(C)?C:0,S=Number.isFinite(S)?S:0),new ConnectionConstraint(E,w,null,C,S)},setConnectionConstraint(x,d,g=!1,E=null){E&&this.batchUpdate(()=>{!E||!E.point?(this.setCellStyles(g?"exitX":"entryX",null,[x]),this.setCellStyles(g?"exitY":"entryY",null,[x]),this.setCellStyles(g?"exitDx":"entryDx",null,[x]),this.setCellStyles(g?"exitDy":"entryDy",null,[x]),this.setCellStyles(g?"exitPerimeter":"entryPerimeter",null,[x])):E.point&&(this.setCellStyles(g?"exitX":"entryX",E.point.x,[x]),this.setCellStyles(g?"exitY":"entryY",E.point.y,[x]),this.setCellStyles(g?"exitDx":"entryDx",E.dx,[x]),this.setCellStyles(g?"exitDy":"entryDy",E.dy,[x]),E.perimeter?this.setCellStyles(g?"exitPerimeter":"entryPerimeter",null,[x]):this.setCellStyles(g?"exitPerimeter":"entryPerimeter","0",[x]))})},getConnectionPoint(x,d,g=!0){let E=null;if(d.point){const b=this.getView().getPerimeterBounds(x),w=new Point(b.getCenterX(),b.getCenterY()),C=x.style.direction;let S=0;x.style.anchorPointDirection&&(C===DIRECTION.NORTH?S+=270:C===DIRECTION.WEST?S+=180:C===DIRECTION.SOUTH&&(S+=90),(C===DIRECTION.NORTH||C===DIRECTION.SOUTH)&&b.rotate90());const{scale:P}=this.getView();E=new Point(b.x+d.point.x*b.width+d.dx*P,b.y+d.point.y*b.height+d.dy*P);let I=x.style.rotation||0;if(d.perimeter){if(S!==0){let M=0,D=0;S===90?D=1:S===180?M=-1:S===270&&(D=-1),E=getRotatedPoint(E,M,D,w)}E=this.getView().getPerimeterPoint(x,E,!1)}else if(I+=S,x.cell.isVertex()){let M=x.style.flipH,D=x.style.flipV;if(C===DIRECTION.NORTH||C===DIRECTION.SOUTH){const k=M;M=D,D=k}M&&(E.x=2*b.getCenterX()-E.x),D&&(E.y=2*b.getCenterY()-E.y)}if(I!==0&&E){const M=toRadians(I),D=Math.cos(M),k=Math.sin(M);E=getRotatedPoint(E,D,k,w)}}return g&&E&&(E.x=Math.round(E.x),E.y=Math.round(E.y)),E},connectCell(x,d=null,g=!1,E=null){return this.batchUpdate(()=>{const b=x.getTerminal(g);this.cellConnected(x,d,g,E),this.fireEvent(new EventObject(InternalEvent.CONNECT_CELL,"edge",x,"terminal",d,"source",g,"previous",b))}),x},cellConnected(x,d,g=!1,E=null){this.batchUpdate(()=>{const b=x.getTerminal(g);if(this.setConnectionConstraint(x,d,g,E),this.isPortsEnabled()){let w=null;d&&this.isPort(d)&&(w=d.getId(),d=this.getTerminalForPort(d,g));const C=g?"sourcePort":"targetPort";this.setCellStyles(C,w,[x])}this.getDataModel().setTerminal(x,d,g),this.isResetEdgesOnConnect()&&this.resetEdge(x),this.fireEvent(new EventObject(InternalEvent.CELL_CONNECTED,"edge",x,"terminal",d,"source",g,"previous",b))})},disconnectGraph(x){this.batchUpdate(()=>{const{scale:d,translate:g}=this.getView(),E=new Dictionary;for(let b=0;b<x.length;b+=1)E.put(x[b],!0);for(const b of x)if(b.isEdge()){let w=b.getGeometry();if(w){const C=this.getView().getState(b),S=b.getParent(),P=S?this.getView().getState(S):null;if(C&&P){w=w.clone();const I=-P.origin.x,M=-P.origin.y,D=C.absolutePoints;let k=b.getTerminal(!0);if(k&&this.isCellDisconnectable(b,k,!0)){for(;k&&!E.get(k);)k=k.getParent();!k&&D[0]&&(w.setTerminalPoint(new Point(D[0].x/d-g.x+I,D[0].y/d-g.y+M),!0),this.getDataModel().setTerminal(b,null,!0))}let H=b.getTerminal(!1);if(H&&this.isCellDisconnectable(b,H,!1)){for(;H&&!E.get(H);)H=H.getParent();if(!H){const F=D.length-1,j=D[F];j&&(w.setTerminalPoint(new Point(j.x/d-g.x+I,j.y/d-g.y+M),!1),this.getDataModel().setTerminal(b,null,!1))}}this.getDataModel().setGeometry(b,w)}}}})},getConnections(x,d=null){return this.getEdges(x,d,!0,!0,!1)},isConstrainChild(x){return this.isConstrainChildren()&&!!x.getParent()&&!x.getParent().isEdge()},isConstrainChildren(){return this.constrainChildren},setConstrainChildren(x){this.constrainChildren=x},isConstrainRelativeChildren(){return this.constrainRelativeChildren},setConstrainRelativeChildren(x){this.constrainRelativeChildren=x},isDisconnectOnMove(){return this.disconnectOnMove},setDisconnectOnMove(x){this.disconnectOnMove=x},isCellDisconnectable(x,d=null,g=!1){return this.isCellsDisconnectable()&&!this.isCellLocked(x)},isCellsDisconnectable(){return this.cellsDisconnectable},setCellsDisconnectable(x){this.cellsDisconnectable=x},isValidSource(x){return x==null&&this.isAllowDanglingEdges()||x!=null&&(!x.isEdge()||this.isConnectableEdges())&&x.isConnectable()},isValidTarget(x){return this.isValidSource(x)},isValidConnection(x,d){return this.isValidSource(x)&&this.isValidTarget(d)},setConnectable(x){const d=this.getPlugin("ConnectionHandler");d==null||d.setEnabled(x)},isConnectable(){const x=this.getPlugin("ConnectionHandler");return(x==null?void 0:x.isEnabled())??!1}},DragDropMixin={dropEnabled:!1,splitEnabled:!0,autoScroll:!0,isAutoScroll(){return this.autoScroll},autoExtend:!0,isAutoExtend(){return this.autoExtend},isDropEnabled(){return this.dropEnabled},setDropEnabled(x){this.dropEnabled=x},isSplitEnabled(){return this.splitEnabled},setSplitEnabled(x){this.splitEnabled=x},isSplitTarget(x,d=[],g){if(x.isEdge()&&d.length===1&&d[0].isConnectable()&&!this.getEdgeValidationError(x,x.getTerminal(!0),d[0])){const E=x.getTerminal(!0),b=x.getTerminal(!1);return!d[0].isAncestor(E)&&!d[0].isAncestor(b)}return!1}},EdgeMixin={resetEdgesOnResize:!1,isResetEdgesOnResize(){return this.resetEdgesOnResize},resetEdgesOnMove:!1,isResetEdgesOnMove(){return this.resetEdgesOnMove},resetEdgesOnConnect:!0,isResetEdgesOnConnect(){return this.resetEdgesOnConnect},connectableEdges:!1,allowDanglingEdges:!0,cloneInvalidEdges:!1,alternateEdgeStyle:{},edgeLabelsMovable:!0,isEdgeLabelsMovable(){return this.edgeLabelsMovable},setEdgeLabelsMovable(x){this.edgeLabelsMovable=x},setAllowDanglingEdges(x){this.allowDanglingEdges=x},isAllowDanglingEdges(){return this.allowDanglingEdges},setConnectableEdges(x){this.connectableEdges=x},isConnectableEdges(){return this.connectableEdges},setCloneInvalidEdges(x){this.cloneInvalidEdges=x},isCloneInvalidEdges(){return this.cloneInvalidEdges},flipEdge(x){return this.alternateEdgeStyle&&this.batchUpdate(()=>{const d=x.getStyle();Object.keys(d).length?this.getDataModel().setStyle(x,this.alternateEdgeStyle):this.getDataModel().setStyle(x,{}),this.resetEdge(x),this.fireEvent(new EventObject(InternalEvent.FLIP_EDGE,{edge:x}))}),x},splitEdge(x,d,g,E=0,b=0,w,C,S=null){S=S??x.getParent();const P=x.getTerminal(!0);return this.batchUpdate(()=>{if(!g){g=this.cloneCell(x);const I=this.getView().getState(x);let M=g.getGeometry();if(M&&I){const D=this.getView().translate,k=this.getView().scale,H=findNearestSegment(I,(E+D.x)*k,(b+D.y)*k);M.points=M.points.slice(0,H),M=x.getGeometry(),M&&(M=M.clone(),M.points=M.points.slice(H),this.getDataModel().setGeometry(x,M))}}this.cellsMoved(d,E,b,!1,!1),this.cellsAdded(d,S,S?S.getChildCount():0,null,null,!0),this.cellsAdded([g],S,S?S.getChildCount():0,P,d[0],!1),this.cellConnected(x,d[0],!0),this.fireEvent(new EventObject(InternalEvent.SPLIT_EDGE,{edge:x,cells:d,newEdge:g,dx:E,dy:b}))}),g},insertEdge(...x){let d,g,E,b,w,C;if(x.length===1&&typeof x[0]=="object"){const P=x[0];d=P.parent,g=P.id,E=P.value,b=P.source,w=P.target,C=P.style}else[d,g,E,b,w,C]=x;const S=this.createEdge(d,g,E,b,w,C);return this.addEdge(S,d,b,w)},createEdge(x=null,d,g,E=null,b=null,w={}){const C=new Cell(g,new Geometry,w);return C.setId(d),C.setEdge(!0),C.geometry.relative=!0,C},addEdge(x,d=null,g=null,E=null,b=null){return this.addCell(x,d,b,g,E)},addAllEdges(x){const d=x.slice();return removeDuplicates(d.concat(this.getAllEdges(x)))},getAllEdges(x){let d=[];if(x)for(let g=0;g<x.length;g+=1){const E=x[g].getEdgeCount();for(let w=0;w<E;w++)d.push(x[g].getEdgeAt(w));const b=x[g].getChildren();d=d.concat(this.getAllEdges(b))}return d},getIncomingEdges(x,d=null){return this.getEdges(x,d,!0,!1,!1)},getOutgoingEdges(x,d=null){return this.getEdges(x,d,!1,!0,!1)},getEdges(x,d=null,g=!0,E=!0,b=!0,w=!1){let C=[];const S=x.isCollapsed(),P=x.getChildCount();for(let M=0;M<P;M+=1){const D=x.getChildAt(M);(S||!D.isVisible())&&(C=C.concat(D.getEdges(g,E)))}C=C.concat(x.getEdges(g,E));const I=[];for(let M=0;M<C.length;M+=1){const D=this.getView().getState(C[M]),k=D?D.getVisibleTerminal(!0):this.getView().getVisibleTerminal(C[M],!0),H=D?D.getVisibleTerminal(!1):this.getView().getVisibleTerminal(C[M],!1);(b&&k===H||k!==H&&(g&&H===x&&(!d||this.isValidAncestor(k,d,w))||E&&k===x&&(!d||this.isValidAncestor(H,d,w))))&&I.push(C[M])}return I},getChildEdges(x){return this.getChildCells(x,!1,!0)},getEdgesBetween(x,d,g=!1){const E=this.getEdges(x),b=[];for(let w=0;w<E.length;w+=1){const C=this.getView().getState(E[w]),S=C?C.getVisibleTerminal(!0):this.getView().getVisibleTerminal(E[w],!0),P=C?C.getVisibleTerminal(!1):this.getView().getVisibleTerminal(E[w],!1);(S===x&&P===d||!g&&S===d&&P===x)&&b.push(E[w])}return b},resetEdges(x){const d=new Dictionary;for(let g=0;g<x.length;g+=1)d.put(x[g],!0);this.batchUpdate(()=>{for(let g=0;g<x.length;g+=1){const E=x[g].getEdges();for(let b=0;b<E.length;b++){const w=this.getView().getState(E[b]),C=w?w.getVisibleTerminal(!0):this.getView().getVisibleTerminal(E[b],!0),S=w?w.getVisibleTerminal(!1):this.getView().getVisibleTerminal(E[b],!1);(!d.get(C)||!d.get(S))&&this.resetEdge(E[b])}this.resetEdges(x[g].getChildren())}})},resetEdge(x){let d=x.getGeometry();return d&&d.points&&d.points.length>0&&(d=d.clone(),d.points=[],this.getDataModel().setGeometry(x,d)),x}},EditingMixin={cellsEditable:!0,startEditing(x){this.startEditingAtCell(null,x)},startEditingAtCell(x=null,d){if(!d||!isMultiTouchEvent(d))if(!x)x=this.getSelectionCell(),x&&!this.isCellEditable(x)&&(x=null);else{this.fireEvent(new EventObject(InternalEvent.START_EDITING,{cell:x,event:d}));const g=this.getPlugin("CellEditorHandler");g==null||g.startEditing(x,d),this.fireEvent(new EventObject(InternalEvent.EDITING_STARTED,{cell:x,event:d}))}},getEditingValue(x,d){return this.convertValueToString(x)},stopEditing(x=!1){const d=this.getPlugin("CellEditorHandler");d==null||d.stopEditing(x),this.fireEvent(new EventObject(InternalEvent.EDITING_STOPPED,{cancel:x}))},labelChanged(x,d,g){return this.batchUpdate(()=>{const E=x.value;this.cellLabelChanged(x,d,this.isAutoSizeCell(x)),this.fireEvent(new EventObject(InternalEvent.LABEL_CHANGED,{cell:x,value:d,old:E,event:g}))}),x},cellLabelChanged(x,d,g=!1){this.batchUpdate(()=>{this.getDataModel().setValue(x,d),g&&this.cellSizeUpdated(x,!1)})},isEditing(x=null){const d=this.getPlugin("CellEditorHandler"),g=d==null?void 0:d.getEditingCell();return x?x===g:!!g},isCellEditable(x){const d=this.getCurrentCellStyle(x);return this.isCellsEditable()&&!this.isCellLocked(x)&&(d.editable||!1)},isCellsEditable(){return this.cellsEditable},setCellsEditable(x){this.cellsEditable=x}},EventsMixin={lastTouchEvent:null,doubleClickCounter:0,lastTouchCell:null,fireDoubleClick:null,tapAndHoldThread:null,lastMouseX:null,lastMouseY:null,isMouseTrigger:null,ignoreMouseEvents:null,mouseMoveRedirect:null,mouseUpRedirect:null,lastEvent:null,escapeEnabled:!0,invokesStopCellEditing:!0,enterStopsCellEditing:!1,isMouseDown:!1,nativeDblClickEnabled:!0,doubleTapEnabled:!0,doubleTapTimeout:500,doubleTapTolerance:25,lastTouchX:0,lastTouchY:0,lastTouchTime:0,tapAndHoldEnabled:!0,tapAndHoldDelay:500,tapAndHoldInProgress:!1,tapAndHoldValid:!1,initialTouchX:0,initialTouchY:0,tolerance:4,isNativeDblClickEnabled(){return this.nativeDblClickEnabled},getEventTolerance(){return this.tolerance},setEventTolerance(x){this.tolerance=x},escape(x){this.fireEvent(new EventObject(InternalEvent.ESCAPE,{event:x}))},click(x){const d=x.getEvent();let g=x.getCell();const E=new EventObject(InternalEvent.CLICK,{event:d,cell:g});if(x.isConsumed()&&E.consume(),this.fireEvent(E),this.isEnabled()&&!isConsumed(d)&&!E.isConsumed()){if(g){if(this.isTransparentClickEvent(d)){let b=!1;const w=this.getCellAt(x.graphX,x.graphY,null,!1,!1,C=>{const S=this.isCellSelected(C.cell);return b=b||S,!b||S||C.cell!==g&&C.cell.isAncestor(g)});w&&(g=w)}}else if(this.isSwimlaneSelectionEnabled()&&(g=this.getSwimlaneAt(x.getGraphX(),x.getGraphY()),g!=null&&(!this.isToggleEvent(d)||!isAltDown(d)))){let b=g,w=[];for(;b!=null;){b=b.getParent();const C=this.getView().getState(b);this.isSwimlane(b)&&C!=null&&w.push(b)}if(w.length>0){w=w.reverse(),w.splice(0,0,g),w.push(g);for(let C=0;C<w.length-1;C+=1)this.isCellSelected(w[C])&&(g=w[this.isToggleEvent(d)?C:C+1])}}g?this.selectCellForEvent(g,d):this.isToggleEvent(d)||this.clearSelection()}return!1},dblClick(x,d=null){const g=new EventObject(InternalEvent.DOUBLE_CLICK,{event:x,cell:d});this.fireEvent(g),this.isEnabled()&&!isConsumed(x)&&!g.isConsumed()&&d&&this.isCellEditable(d)&&!this.isEditing(d)&&(this.startEditingAtCell(d,x),InternalEvent.consume(x))},tapAndHold(x){const d=x.getEvent(),g=new EventObject(InternalEvent.TAP_AND_HOLD,{event:d,cell:x.getCell()}),E=this.getPlugin("PanningHandler"),b=this.getPlugin("ConnectionHandler");if(this.fireEvent(g),g.isConsumed()&&E&&(E.panningTrigger=!1),this.isEnabled()&&!isConsumed(d)&&!g.isConsumed()&&b&&b.isEnabled()){const w=b.marker.getCell(x);if(w){const C=this.getView().getState(w);C&&(b.marker.currentColor=b.marker.validColor,b.marker.markedState=C,b.marker.mark(),b.first=new Point(x.getGraphX(),x.getGraphY()),b.edgeState=b.createEdgeState(x),b.previous=C,b.fireEvent(new EventObject(InternalEvent.START,{state:b.previous})))}}},addMouseListener(x){this.mouseListeners.push(x)},removeMouseListener(x){for(let d=0;d<this.mouseListeners.length;d+=1)if(this.mouseListeners[d]===x){this.mouseListeners.splice(d,1);break}},updateMouseEvent(x,d){const g=convertPoint(this.getContainer(),x.getX(),x.getY());if(x.graphX=g.x-this.getPanDx(),x.graphY=g.y-this.getPanDy(),!x.getCell()&&this.isMouseDown&&d===InternalEvent.MOUSE_MOVE){const E=this.getCellAt(g.x,g.y,null,!0,!0,b=>!b.shape||b.shape.paintBackground!==this.paintBackground||b.style.pointerEvents||b.shape.fill!==NONE);x.state=E?this.getView().getState(E):null}return x},getStateForTouchEvent(x){const d=getClientX(x),g=getClientY(x),E=convertPoint(this.getContainer(),d,g),b=this.getCellAt(E.x,E.y);return b?this.getView().getState(b):null},isEventIgnored(x,d,g){const E=isMouseEvent(d.getEvent());let b=!1;d.getEvent()===this.lastEvent?b=!0:this.lastEvent=d.getEvent();const w=this.getEventSource();return w&&x!==InternalEvent.MOUSE_MOVE?(InternalEvent.removeGestureListeners(w,null,this.mouseMoveRedirect,this.mouseUpRedirect),this.mouseMoveRedirect=null,this.mouseUpRedirect=null,this.setEventSource(null)):!Client.IS_GC&&w&&d.getSource()!==w?b=!0:w&&Client.IS_TOUCH&&x===InternalEvent.MOUSE_DOWN&&!E&&!isPenEvent(d.getEvent())&&(this.setEventSource(d.getSource()),this.mouseMoveRedirect=C=>{this.fireMouseEvent(InternalEvent.MOUSE_MOVE,new InternalMouseEvent(C,this.getStateForTouchEvent(C)))},this.mouseUpRedirect=C=>{this.fireMouseEvent(InternalEvent.MOUSE_UP,new InternalMouseEvent(C,this.getStateForTouchEvent(C)))},InternalEvent.addGestureListeners(w,null,this.mouseMoveRedirect,this.mouseUpRedirect)),this.isSyntheticEventIgnored(x,d,g)&&(b=!0),!isPopupTrigger(this.lastEvent)&&x!==InternalEvent.MOUSE_MOVE&&this.lastEvent.detail===2?!0:(x===InternalEvent.MOUSE_UP&&this.isMouseDown?this.isMouseDown=!1:x===InternalEvent.MOUSE_DOWN&&!this.isMouseDown?(this.isMouseDown=!0,this.isMouseTrigger=E):!b&&((!Client.IS_FF||x!==InternalEvent.MOUSE_MOVE)&&this.isMouseDown&&this.isMouseTrigger!==E||x===InternalEvent.MOUSE_DOWN&&this.isMouseDown||x===InternalEvent.MOUSE_UP&&!this.isMouseDown)&&(b=!0),!b&&x===InternalEvent.MOUSE_DOWN&&(this.lastMouseX=d.getX(),this.lastMouseY=d.getY()),b)},isSyntheticEventIgnored(x,d,g){let E=!1;const b=isMouseEvent(d.getEvent());return this.ignoreMouseEvents&&b&&x!==InternalEvent.MOUSE_MOVE?(this.ignoreMouseEvents=x!==InternalEvent.MOUSE_UP,E=!0):Client.IS_FF&&!b&&x===InternalEvent.MOUSE_UP&&(this.ignoreMouseEvents=!0),E},isEventSourceIgnored(x,d){const g=d.getSource();if(!g)return!0;const E=g.nodeName?g.nodeName.toLowerCase():"",b=!isMouseEvent(d.getEvent())||isLeftMouseButton(d.getEvent());return x===InternalEvent.MOUSE_DOWN&&b&&(E==="select"||E==="option"||E==="input"&&g.type!=="checkbox"&&g.type!=="radio"&&g.type!=="button"&&g.type!=="submit"&&g.type!=="file")},getEventState(x){return x},fireMouseEvent(x,d,g){if(g=g??this,this.isEventSourceIgnored(x,d)){const E=this.getPlugin("TooltipHandler");E&&E.hide();return}if(d=this.updateMouseEvent(d,x),!this.nativeDblClickEnabled&&!isPopupTrigger(d.getEvent())||this.doubleTapEnabled&&Client.IS_TOUCH&&(isTouchEvent(d.getEvent())||isPenEvent(d.getEvent()))){const E=new Date().getTime();if(x===InternalEvent.MOUSE_DOWN)if(this.lastTouchEvent&&this.lastTouchEvent!==d.getEvent()&&E-this.lastTouchTime<this.doubleTapTimeout&&Math.abs(this.lastTouchX-d.getX())<this.doubleTapTolerance&&Math.abs(this.lastTouchY-d.getY())<this.doubleTapTolerance&&this.doubleClickCounter<2){this.doubleClickCounter+=1;let b=!1;if(x===InternalEvent.MOUSE_UP){if(d.getCell()===this.lastTouchCell&&this.lastTouchCell){this.lastTouchTime=0;const w=this.lastTouchCell;this.lastTouchCell=null,this.dblClick(d.getEvent(),w),b=!0}}else this.fireDoubleClick=!0,this.lastTouchTime=0;if(b){InternalEvent.consume(d.getEvent());return}}else(!this.lastTouchEvent||this.lastTouchEvent!==d.getEvent())&&(this.lastTouchCell=d.getCell(),this.lastTouchX=d.getX(),this.lastTouchY=d.getY(),this.lastTouchTime=E,this.lastTouchEvent=d.getEvent(),this.doubleClickCounter=0);else if((this.isMouseDown||x===InternalEvent.MOUSE_UP)&&this.fireDoubleClick){this.fireDoubleClick=!1;const b=this.lastTouchCell;this.lastTouchCell=null,this.isMouseDown=!1,(b||(isTouchEvent(d.getEvent())||isPenEvent(d.getEvent()))&&(Client.IS_GC||Client.IS_SF))&&Math.abs(this.lastTouchX-d.getX())<this.doubleTapTolerance&&Math.abs(this.lastTouchY-d.getY())<this.doubleTapTolerance?this.dblClick(d.getEvent(),b):InternalEvent.consume(d.getEvent());return}}if(!this.isEventIgnored(x,d,g)){const E=d.getState();if(d.state=E?this.getEventState(E):null,this.fireEvent(new EventObject(InternalEvent.FIRE_MOUSE_EVENT,{eventName:x,event:d})),Client.IS_SF||Client.IS_GC||d.getEvent().target!==this.getContainer()){const w=this.getContainer();if(x===InternalEvent.MOUSE_MOVE&&this.isMouseDown&&this.isAutoScroll()&&!isMultiTouchEvent(d.getEvent()))this.scrollPointToVisible(d.getGraphX(),d.getGraphY(),this.isAutoExtend());else if(x===InternalEvent.MOUSE_UP&&this.isIgnoreScrollbars()&&this.isTranslateToScrollPosition()&&(w.scrollLeft!==0||w.scrollTop!==0)){const S=this.getView().scale,P=this.getView().translate;this.getView().setTranslate(P.x-w.scrollLeft/S,P.y-w.scrollTop/S),w.scrollLeft=0,w.scrollTop=0}const C=this.mouseListeners;d.getEvent().preventDefault||(d.getEvent().returnValue=!0);for(const S of C)x===InternalEvent.MOUSE_DOWN?S.mouseDown(g,d):x===InternalEvent.MOUSE_MOVE?S.mouseMove(g,d):x===InternalEvent.MOUSE_UP&&S.mouseUp(g,d);x===InternalEvent.MOUSE_UP&&this.click(d)}if((isTouchEvent(d.getEvent())||isPenEvent(d.getEvent()))&&x===InternalEvent.MOUSE_DOWN&&this.tapAndHoldEnabled&&!this.tapAndHoldInProgress){this.tapAndHoldInProgress=!0,this.initialTouchX=d.getGraphX(),this.initialTouchY=d.getGraphY();const w=()=>{this.tapAndHoldValid&&this.tapAndHold(d),this.tapAndHoldInProgress=!1,this.tapAndHoldValid=!1};this.tapAndHoldThread&&window.clearTimeout(this.tapAndHoldThread),this.tapAndHoldThread=window.setTimeout(w,this.tapAndHoldDelay),this.tapAndHoldValid=!0}else x===InternalEvent.MOUSE_UP?(this.tapAndHoldInProgress=!1,this.tapAndHoldValid=!1):this.tapAndHoldValid&&(this.tapAndHoldValid=Math.abs(this.initialTouchX-d.getGraphX())<this.tolerance&&Math.abs(this.initialTouchY-d.getGraphY())<this.tolerance);const b=this.getPlugin("CellEditorHandler");x===InternalEvent.MOUSE_DOWN&&this.isEditing()&&!(b!=null&&b.isEventSource(d.getEvent()))&&this.stopEditing(!this.isInvokesStopCellEditing()),this.consumeMouseEvent(x,d,g)}},consumeMouseEvent(x,d,g){x===InternalEvent.MOUSE_DOWN&&isTouchEvent(d.getEvent())&&d.consume(!1)},fireGestureEvent(x,d=null){this.lastTouchTime=0,this.fireEvent(new EventObject(InternalEvent.GESTURE,{event:x,cell:d}))},sizeDidChange(){const x=this.getGraphBounds(),d=this.getBorder();let g=Math.max(0,x.x)+x.width+2*d,E=Math.max(0,x.y)+x.height+2*d;const b=this.getMinimumContainerSize();if(b&&(g=Math.max(g,b.width),E=Math.max(E,b.height)),this.isResizeContainer()&&this.doResizeContainer(g,E),this.isPreferPageSize()||this.isPageVisible()){const S=this.getPreferredPageSize(x,Math.max(1,g),Math.max(1,E));g=S.width*this.getView().scale,E=S.height*this.getView().scale}const w=this.getMinimumGraphSize();w&&(g=Math.max(g,w.width*this.getView().scale),E=Math.max(E,w.height*this.getView().scale)),g=Math.ceil(g),E=Math.ceil(E);const C=this.getView().getDrawPane().ownerSVGElement;C&&(C.style.minWidth=`${Math.max(1,g)}px`,C.style.minHeight=`${Math.max(1,E)}px`,C.style.width="100%",C.style.height="100%"),this.updatePageBreaks(this.isPageBreaksVisible(),g,E),this.fireEvent(new EventObject(InternalEvent.SIZE,{bounds:x}))},isCloneEvent(x){return isControlDown(x)},isTransparentClickEvent(x){return!1},isToggleEvent(x){return Client.IS_MAC?isMetaDown(x):isControlDown(x)},isGridEnabledEvent(x){return!isAltDown(x)},isConstrainedEvent(x){return isShiftDown(x)},isIgnoreTerminalEvent(x){return!1},getPointForEvent(x,d=!0){const g=convertPoint(this.getContainer(),getClientX(x),getClientY(x)),E=this.getView().scale,b=this.getView().translate,w=d?this.getGridSize()/2:0;return g.x=this.snap(g.x/E-b.x-w),g.y=this.snap(g.y/E-b.y-w),g},isEscapeEnabled(){return this.escapeEnabled},setEscapeEnabled(x){this.escapeEnabled=x},isInvokesStopCellEditing(){return this.invokesStopCellEditing},setInvokesStopCellEditing(x){this.invokesStopCellEditing=x},isEnterStopsCellEditing(){return this.enterStopsCellEditing},setEnterStopsCellEditing(x){this.enterStopsCellEditing=x},getCursorForMouseEvent(x){const d=x.getCell();return d?this.getCursorForCell(d):null}},FoldingMixin={options:{foldingEnabled:!0,collapsedImage:new ImageBox(`${Client.imageBasePath}/collapsed.gif`,9,9),expandedImage:new ImageBox(`${Client.imageBasePath}/expanded.gif`,9,9),collapseToPreferredSize:!0},collapseExpandResource:Client.language!="none"?"collapse-expand":"",getCollapseExpandResource(){return this.collapseExpandResource},isFoldingEnabled(){return this.options.foldingEnabled},getFoldableCells(x,d=!1){return this.getDataModel().filterCells(x,g=>this.isCellFoldable(g,d))},isCellFoldable(x,d){const g=this.getCurrentCellStyle(x);return x.getChildCount()>0&&(g.foldable??!0)},getFoldingImage(x){if(x!=null&&this.isFoldingEnabled()&&!x.cell.isEdge()){const d=x.cell.isCollapsed();if(this.isCellFoldable(x.cell,!d))return d?this.options.collapsedImage:this.options.expandedImage}return null},foldCells(x=!1,d=!1,g=null,E=!1,b=null){return g==null&&(g=this.getFoldableCells(this.getSelectionCells(),x)),this.stopEditing(!1),this.batchUpdate(()=>{this.cellsFolded(g,x,d,E),this.fireEvent(new EventObject(InternalEvent.FOLD_CELLS,"collapse",x,"recurse",d,"cells",g))}),g},cellsFolded(x=null,d=!1,g=!1,E=!1){x!=null&&x.length>0&&this.batchUpdate(()=>{for(let b=0;b<x.length;b+=1)if((!E||this.isCellFoldable(x[b],d))&&d!==x[b].isCollapsed()){if(this.getDataModel().setCollapsed(x[b],d),this.swapBounds(x[b],d),this.isExtendParent(x[b])&&this.extendParent(x[b]),g){const w=x[b].getChildren();this.cellsFolded(w,d,g)}this.constrainChild(x[b])}this.fireEvent(new EventObject(InternalEvent.CELLS_FOLDED,{cells:x,collapse:d,recurse:g}))})},swapBounds(x,d=!1){let g=x.getGeometry();g!=null&&(g=g.clone(),this.updateAlternateBounds(x,g,d),g.swap(),this.getDataModel().setGeometry(x,g))},updateAlternateBounds(x=null,d=null,g=!1){if(x!=null&&d!=null){const E=this.getCurrentCellStyle(x);if(d.alternateBounds==null){let b=d;if(this.options.collapseToPreferredSize){const w=this.getPreferredSizeForCell(x);if(w!=null){b=w;const C=getValue$1(E,"startSize");C>0&&(b.height=Math.max(b.height,C))}}d.alternateBounds=new Rectangle(0,0,b.width,b.height)}if(d.alternateBounds!=null){d.alternateBounds.x=d.x,d.alternateBounds.y=d.y;const b=toRadians(E.rotation||0);if(b!==0){const w=d.alternateBounds.getCenterX()-d.getCenterX(),C=d.alternateBounds.getCenterY()-d.getCenterY(),S=Math.cos(b),P=Math.sin(b),I=S*w-P*C,M=P*w+S*C;d.alternateBounds.x+=I-w,d.alternateBounds.y+=M-C}}}}},GroupingMixin={groupCells(x,d=0,g){g||(g=sortCells(this.getSelectionCells(),!0)),g||(g=this.getCellsForGroup(g)),x==null&&(x=this.createGroupCell(g));const E=this.getBoundsForGroup(x,g,d);if(g.length>1&&E!=null){let b=x.getParent();b==null&&(b=g[0].getParent()),this.batchUpdate(()=>{x.getGeometry()==null&&this.getDataModel().setGeometry(x,new Geometry);let w=b.getChildCount();this.cellsAdded([x],b,w,null,null,!1,!1,!1),w=x.getChildCount(),this.cellsAdded(g,x,w,null,null,!1,!1,!1),this.cellsMoved(g,-E.x,-E.y,!1,!1,!1),this.cellsResized([x],[E],!1),this.fireEvent(new EventObject(InternalEvent.GROUP_CELLS,{group:x,border:d,cells:g}))})}return x},getCellsForGroup(x){const d=[];if(x!=null&&x.length>0){const g=x[0].getParent();d.push(x[0]);for(let E=1;E<x.length;E+=1)x[E].getParent()===g&&d.push(x[E])}return d},getBoundsForGroup(x,d,g){const E=this.getBoundingBoxFromGeometry(d,!0);if(E!=null){if(this.isSwimlane(x)){const b=this.getStartSize(x);E.x-=b.width,E.y-=b.height,E.width+=b.width,E.height+=b.height}g!=null&&(E.x-=g,E.y-=g,E.width+=2*g,E.height+=2*g)}return E},createGroupCell(x){const d=new Cell("");return d.setVertex(!0),d.setConnectable(!1),d},ungroupCells(x){let d=[];return x==null&&(x=this.getCellsForUngroup()),x!=null&&x.length>0&&this.batchUpdate(()=>{const g=x;for(let E=0;E<g.length;E+=1){let b=g[E].getChildren();if(b!=null&&b.length>0){b=b.slice();const w=g[E].getParent(),C=w.getChildCount();this.cellsAdded(b,w,C,null,null,!0),d=d.concat(b);for(const S of b){const P=this.getView().getState(S);let I=S.getGeometry();P!=null&&I!=null&&I.relative&&(I=I.clone(),I.x=P.origin.x,I.y=P.origin.y,I.relative=!1,this.getDataModel().setGeometry(S,I))}}}this.removeCellsAfterUngroup(g),this.fireEvent(new EventObject(InternalEvent.UNGROUP_CELLS,{cells:x}))}),d},getCellsForUngroup(){const x=this.getSelectionCells(),d=[];for(let g=0;g<x.length;g+=1)x[g].isVertex()&&x[g].getChildCount()>0&&d.push(x[g]);return d},removeCellsAfterUngroup(x){this.cellsRemoved(this.addAllEdges(x))},removeCellsFromParent(x){return x==null&&(x=this.getSelectionCells()),this.batchUpdate(()=>{const d=this.getDefaultParent(),g=d.getChildCount();this.cellsAdded(x,d,g,null,null,!0),this.fireEvent(new EventObject(InternalEvent.REMOVE_CELLS_FROM_PARENT,{cells:x}))}),x},updateGroupBounds(x,d=0,g=!1,E=0,b=0,w=0,C=0){return x==null&&(x=this.getSelectionCells()),d=d??0,g=g??!1,E=E??0,b=b??0,w=w??0,C=C??0,this.batchUpdate(()=>{for(let S=x.length-1;S>=0;S--){let P=x[S].getGeometry();if(P==null)continue;const I=this.getChildCells(x[S]);if(I!=null&&I.length>0){const M=this.getBoundingBoxFromGeometry(I,!0);if(M!=null&&M.width>0&&M.height>0){const D=this.isSwimlane(x[S])?this.getActualStartSize(x[S],!0):new Rectangle;P=P.clone(),g&&(P.x=Math.round(P.x+M.x-d-D.x-C),P.y=Math.round(P.y+M.y-d-D.y-E)),P.width=Math.round(M.width+2*d+D.x+C+b+D.width),P.height=Math.round(M.height+2*d+D.y+E+w+D.height),this.getDataModel().setGeometry(x[S],P),this.moveCells(I,d+D.x-M.x+C,d+D.y-M.y+E)}}}}),x},enterGroup(x){x=x||this.getSelectionCell(),x!=null&&this.isValidRoot(x)&&(this.getView().setCurrentRoot(x),this.clearSelection())},exitGroup(){const x=this.getDataModel().getRoot(),d=this.getCurrentRoot();if(d!=null){let g=d.getParent();for(;g!==x&&!this.isValidRoot(g)&&g.getParent()!==x;)g=g.getParent();g===x||g.getParent()===x?this.getView().setCurrentRoot(null):this.getView().setCurrentRoot(g),this.getView().getState(d)!=null&&this.setSelectionCell(d)}}},ImageMixin={addImageBundle(x){this.imageBundles.push(x)},removeImageBundle(x){const d=[];for(let g=0;g<this.imageBundles.length;g+=1)this.imageBundles[g]!==x&&d.push(this.imageBundles[g]);this.imageBundles=d},getImageFromBundles(x){if(x)for(let d=0;d<this.imageBundles.length;d+=1){const g=this.imageBundles[d].getImage(x);if(g)return g}return null}},LabelMixin={getLabel(x){let d="";return this.isLabelsVisible()&&x!=null&&((this.getCurrentCellStyle(x).noLabel??!1)||(d=this.convertValueToString(x))),d},isHtmlLabel(x){return this.isHtmlLabels()},labelsVisible:!0,isLabelsVisible(){return this.labelsVisible},htmlLabels:!1,isHtmlLabels(){return this.htmlLabels},setHtmlLabels(x){this.htmlLabels=x},isWrapping(x){return this.getCurrentCellStyle(x).whiteSpace==="wrap"},isLabelClipped(x){return this.getCurrentCellStyle(x).overflow==="hidden"},isLabelMovable(x){return!this.isCellLocked(x)&&(x.isEdge()&&this.isEdgeLabelsMovable()||x.isVertex()&&this.isVertexLabelsMovable())}},OrderMixin={orderCells(x=!1,d){return d||(d=this.getSelectionCells()),d||(d=sortCells(this.getSelectionCells(),!0)),this.batchUpdate(()=>{this.cellsOrdered(d,x);const g=new EventObject(InternalEvent.ORDER_CELLS,"back",x,"cells",d);this.fireEvent(g)}),d},cellsOrdered(x,d=!1){this.batchUpdate(()=>{for(let g=0;g<x.length;g+=1){const E=x[g].getParent();d?this.getDataModel().add(E,x[g],g):this.getDataModel().add(E,x[g],E?E.getChildCount()-1:0)}this.fireEvent(new EventObject(InternalEvent.CELLS_ORDERED,{back:d,cells:x}))})}};class CellOverlay extends EventSource{constructor(d,g=null,E="right",b="bottom",w=new Point,C="help"){super(),this.align="right",this.verticalAlign="bottom",this.offset=new Point,this.cursor="help",this.defaultOverlap=.5,this.image=d,this.tooltip=g,this.align=E,this.verticalAlign=b,this.offset=w,this.cursor=C}getBounds(d){const g=d.cell.isEdge(),E=d.view.scale;let b=null;const w=this.image,C=w.width,S=w.height;if(g){const P=d.absolutePoints;if(P.length%2===1)b=P[Math.floor(P.length/2)];else{const I=P.length/2,M=P[I-1],D=P[I];b=new Point(M.x+(D.x-M.x)/2,M.y+(D.y-M.y)/2)}}else{if(b=new Point,this.align==="left")b.x=d.x;else if(this.align==="center")b.x=d.x+d.width/2;else if(this.align==="right")b.x=d.x+d.width;else throw new Error;if(this.verticalAlign==="top")b.y=d.y;else if(this.verticalAlign==="middle")b.y=d.y+d.height/2;else if(this.verticalAlign==="bottom")b.y=d.y+d.height;else throw new Error}return new Rectangle(Math.round(b.x-(C*this.defaultOverlap-this.offset.x)*E),Math.round(b.y-(S*this.defaultOverlap-this.offset.y)*E),C*E,S*E)}toString(){return this.tooltip}}const OverlaysMixin={addCellOverlay(x,d){x.overlays.push(d);const g=this.getView().getState(x);return g&&this.getCellRenderer().redraw(g),this.fireEvent(new EventObject(InternalEvent.ADD_OVERLAY,{cell:x,overlay:d})),d},getCellOverlays(x){return x.overlays},removeCellOverlay(x,d=null){if(!d)this.removeCellOverlays(x);else{const g=x.overlays.indexOf(d);if(g>=0){x.overlays.splice(g,1);const E=this.getView().getState(x);E&&this.getCellRenderer().redraw(E),this.fireEvent(new EventObject(InternalEvent.REMOVE_OVERLAY,{cell:x,overlay:d}))}else d=null}return d},removeCellOverlays(x){const{overlays:d}=x;x.overlays=[];const g=this.getView().getState(x);g&&this.getCellRenderer().redraw(g);for(let E=0;E<d.length;E+=1)this.fireEvent(new EventObject(InternalEvent.REMOVE_OVERLAY,"cell",x,"overlay",d[E]));return d},clearCellOverlays(x=null){if(x=x??this.getDataModel().getRoot(),!x)return;this.removeCellOverlays(x);const d=x.getChildCount();for(let g=0;g<d;g+=1){const E=x.getChildAt(g);this.clearCellOverlays(E)}},setCellWarning(x,d=null,g,E=!1){if(g=g??this.getWarningImage(),d&&d.length>0){const b=new CellOverlay(g,`<font color=red>${d}</font>`);return E&&b.addListener(InternalEvent.CLICK,(w,C)=>{this.isEnabled()&&this.setSelectionCell(x)}),this.addCellOverlay(x,b)}return this.removeCellOverlays(x),null}},PageBreaksMixin={horizontalPageBreaks:null,verticalPageBreaks:null,updatePageBreaks(x,d,g){const{scale:E,translate:b}=this.getView(),w=this.getPageFormat(),C=E*this.getPageScale(),S=new Rectangle(0,0,w.width*C,w.height*C),P=Rectangle.fromRectangle(this.getGraphBounds());P.width=Math.max(1,P.width),P.height=Math.max(1,P.height),S.x=Math.floor((P.x-b.x*E)/S.width)*S.width+b.x*E,S.y=Math.floor((P.y-b.y*E)/S.height)*S.height+b.y*E,P.width=Math.ceil((P.width+(P.x-S.x))/S.width)*S.width,P.height=Math.ceil((P.height+(P.y-S.y))/S.height)*S.height,x=x&&Math.min(S.width,S.height)>this.getMinPageBreakDist();const I=x?Math.ceil(P.height/S.height)+1:0,M=x?Math.ceil(P.width/S.width)+1:0,D=(M-1)*S.width,k=(I-1)*S.height;this.horizontalPageBreaks==null&&I>0&&(this.horizontalPageBreaks=[]),this.verticalPageBreaks==null&&M>0&&(this.verticalPageBreaks=[]);const H=F=>{if(F!=null){const j=F===this.horizontalPageBreaks?I:M;for(let $=0;$<=j;$+=1){const z=F===this.horizontalPageBreaks?[new Point(Math.round(S.x),Math.round(S.y+$*S.height)),new Point(Math.round(S.x+D),Math.round(S.y+$*S.height))]:[new Point(Math.round(S.x+$*S.width),Math.round(S.y)),new Point(Math.round(S.x+$*S.width),Math.round(S.y+k))];if(F[$]!=null)F[$].points=z,F[$].redraw();else{const U=new PolylineShape(z,this.getPageBreakColor());U.dialect=this.getDialect(),U.pointerEvents=!1,U.isDashed=this.isPageBreakDashed(),U.init(this.getView().backgroundPane),U.redraw(),F[$]=U}}for(let $=j;$<F.length;$+=1)F[$].destroy();F.splice(j,F.length-j)}};H(this.horizontalPageBreaks),H(this.verticalPageBreaks)}},PanningMixin={shiftPreview1:null,shiftPreview2:null,useScrollbarsForPanning:!0,isUseScrollbarsForPanning(){return this.useScrollbarsForPanning},timerAutoScroll:!1,isTimerAutoScroll(){return this.timerAutoScroll},allowAutoPanning:!1,isAllowAutoPanning(){return this.allowAutoPanning},panDx:0,getPanDx(){return this.panDx},setPanDx(x){this.panDx=x},panDy:0,getPanDy(){return this.panDy},setPanDy(x){this.panDy=x},panGraph(x,d){const g=this.getContainer();if(this.useScrollbarsForPanning&&hasScrollbars(g))g.scrollLeft=-x,g.scrollTop=-d;else{const E=this.getView().getCanvas();if(x===0&&d===0){if(E.removeAttribute("transform"),this.shiftPreview1){let b=this.shiftPreview1.firstChild;for(;b;){const C=b.nextSibling;g.appendChild(b),b=C}this.shiftPreview1.parentNode&&this.shiftPreview1.parentNode.removeChild(this.shiftPreview1),this.shiftPreview1=null,g.appendChild(E.parentNode);const w=this.shiftPreview2;for(b=w.firstChild;b;){const C=b.nextSibling;g.appendChild(b),b=C}w.parentNode&&w.parentNode.removeChild(w),this.shiftPreview2=null}}else{if(E.setAttribute("transform",`translate(${x},${d})`),!this.shiftPreview1){this.shiftPreview1=document.createElement("div"),this.shiftPreview1.style.position="absolute",this.shiftPreview1.style.overflow="visible",this.shiftPreview2=document.createElement("div"),this.shiftPreview2.style.position="absolute",this.shiftPreview2.style.overflow="visible";let b=this.shiftPreview1,w=g.firstChild;for(;w;){const C=w.nextSibling;w!==E.parentNode?b.appendChild(w):b=this.shiftPreview2,w=C}this.shiftPreview1.firstChild&&g.insertBefore(this.shiftPreview1,E.parentNode),this.shiftPreview2.firstChild&&g.appendChild(this.shiftPreview2)}this.shiftPreview1.style.left=`${x}px`,this.shiftPreview1.style.top=`${d}px`,this.shiftPreview2&&(this.shiftPreview2.style.left=`${x}px`,this.shiftPreview2.style.top=`${d}px`)}this.panDx=x,this.panDy=d,this.fireEvent(new EventObject(InternalEvent.PAN))}},scrollCellToVisible(x,d=!1){const g=-this.getView().translate.x,E=-this.getView().translate.y,b=this.getView().getState(x);if(b){const w=new Rectangle(g+b.x,E+b.y,b.width,b.height);if(d&&this.getContainer()){const S=this.getContainer().clientWidth,P=this.getContainer().clientHeight;w.x=w.getCenterX()-S/2,w.width=S,w.y=w.getCenterY()-P/2,w.height=P}const C=new Point(this.getView().translate.x,this.getView().translate.y);if(this.scrollRectToVisible(w)){const S=new Point(this.getView().translate.x,this.getView().translate.y);this.getView().translate.x=C.x,this.getView().translate.y=C.y,this.getView().setTranslate(S.x,S.y)}}},scrollRectToVisible(x){let d=!1;const g=this.getContainer(),E=g.offsetWidth,b=g.offsetHeight,w=Math.min(E,x.width),C=Math.min(b,x.height);if(hasScrollbars(g)){x.x+=this.getView().translate.x,x.y+=this.getView().translate.y;let S=g.scrollLeft-x.x;const P=Math.max(S-g.scrollLeft,0);S>0?g.scrollLeft-=S+2:(S=x.x+w-g.scrollLeft-g.clientWidth,S>0&&(g.scrollLeft+=S+2));let I=g.scrollTop-x.y;const M=Math.max(0,I-g.scrollTop);I>0?g.scrollTop-=I+2:(I=x.y+C-g.scrollTop-g.clientHeight,I>0&&(g.scrollTop+=I+2)),!this.useScrollbarsForPanning&&(P!=0||M!=0)&&this.getView().setTranslate(P,M)}else{const S=-this.getView().translate.x,P=-this.getView().translate.y,I=this.getView().scale;if(x.x+w>S+E&&(this.getView().translate.x-=(x.x+w-E-S)/I,d=!0),x.y+C>P+b&&(this.getView().translate.y-=(x.y+C-b-P)/I,d=!0),x.x<S&&(this.getView().translate.x+=(S-x.x)/I,d=!0),x.y<P&&(this.getView().translate.y+=(P-x.y)/I,d=!0),d){this.getView().refresh();const M=this.getPlugin("SelectionCellsHandler");M&&M.refresh()}}return d},setPanning(x){const d=this.getPlugin("PanningHandler");d&&(d.panningEnabled=x)}},PortsMixin={portsEnabled:!0,isPort(x){return!1},getTerminalForPort(x,d=!1){return x.getParent()},isPortsEnabled(){return this.portsEnabled},setPortsEnabled(x){this.portsEnabled=x}},SelectionMixin={selectionModel:null,getSelectionModel(){return this.selectionModel},setSelectionModel(x){this.selectionModel=x},isCellSelected(x){return this.selectionModel.isSelected(x)},isSelectionEmpty(){return this.selectionModel.isEmpty()},clearSelection(){this.selectionModel.clear()},getSelectionCount(){return this.selectionModel.cells.length},getSelectionCell(){return this.selectionModel.cells[0]},getSelectionCells(){return this.selectionModel.cells.slice()},setSelectionCell(x){this.selectionModel.setCell(x)},setSelectionCells(x){this.selectionModel.setCells(x)},addSelectionCell(x){this.selectionModel.addCell(x)},addSelectionCells(x){this.selectionModel.addCells(x)},removeSelectionCell(x){this.selectionModel.removeCell(x)},removeSelectionCells(x){this.selectionModel.removeCells(x)},selectRegion(x,d){const g=this.getCells(x.x,x.y,x.width,x.height);return this.selectCellsForEvent(g,d),g},selectNextCell(){this.selectCell(!0)},selectPreviousCell(){this.selectCell()},selectParentCell(){this.selectCell(!1,!0)},selectChildCell(){this.selectCell(!1,!1,!0)},selectCell(x=!1,d=!1,g=!1){const E=this.selectionModel.cells.length>0?this.selectionModel.cells[0]:null;this.selectionModel.cells.length>1&&this.selectionModel.clear();const b=E?E.getParent():this.getDefaultParent(),w=b.getChildCount();if(!E&&w>0){const C=b.getChildAt(0);this.setSelectionCell(C)}else if(b&&(!E||d)&&this.getView().getState(b)&&b.getGeometry())this.getCurrentRoot()!==b&&this.setSelectionCell(b);else if(E&&g){if(E.getChildCount()>0){const S=E.getChildAt(0);this.setSelectionCell(S)}}else if(w>0){let C=b.getIndex(E);if(x){C++;const S=b.getChildAt(C%w);this.setSelectionCell(S)}else{C--;const S=C<0?w-1:C,P=b.getChildAt(S);this.setSelectionCell(P)}}},selectAll(x,d=!1){x=x??this.getDefaultParent();const g=d?x.filterDescendants(E=>E!==x&&!!this.getView().getState(E)):x.getChildren();this.setSelectionCells(g)},selectVertices(x,d=!1){this.selectCells(!0,!1,x,d)},selectEdges(x){this.selectCells(!1,!0,x)},selectCells(x=!1,d=!1,g,E=!1){g=g??this.getDefaultParent();const b=C=>{const S=C.getParent();return!!this.getView().getState(C)&&((E||C.getChildCount()===0)&&C.isVertex()&&x&&S&&!S.isEdge()||C.isEdge()&&d)},w=g.filterDescendants(b);this.setSelectionCells(w)},selectCellForEvent(x,d){const g=this.isCellSelected(x);this.isToggleEvent(d)?g?this.removeSelectionCell(x):this.addSelectionCell(x):(!g||this.getSelectionCount()!==1)&&this.setSelectionCell(x)},selectCellsForEvent(x,d){this.isToggleEvent(d)?this.addSelectionCells(x):this.setSelectionCells(x)},isSiblingSelected(x){const d=x.getParent(),g=d.getChildCount();for(let E=0;E<g;E+=1){const b=d.getChildAt(E);if(x!==b&&this.isCellSelected(b))return!0}return!1},getSelectionCellsForChanges(x,d=null){const g=new Dictionary,E=[],b=w=>{if(!g.get(w)&&this.getDataModel().contains(w))if(w.isEdge()||w.isVertex())g.put(w,!0),E.push(w);else{const C=w.getChildCount();for(let S=0;S<C;S+=1)b(w.getChildAt(S))}};for(let w=0;w<x.length;w+=1){const C=x[w];if(C.constructor!==RootChange&&(!d||!d(C))){let S=null;C instanceof ChildChange?S=C.child:C.cell&&C.cell instanceof Cell&&(S=C.cell),S&&b(S)}}return E},updateSelection(){const x=this.getSelectionCells(),d=[];for(const g of x)if(!this.getDataModel().contains(g)||!g.isVisible())d.push(g);else{let E=g.getParent();for(;E&&E!==this.getView().currentRoot;){if(E.isCollapsed()||!E.isVisible()){d.push(g);break}E=E.getParent()}}this.removeSelectionCells(d)}},SnapMixin={snapTolerance:0,getSnapTolerance(){return this.snapTolerance},gridSize:10,gridEnabled:!0,snap(x){return this.gridEnabled&&(x=Math.round(x/this.gridSize)*this.gridSize),x},snapDelta(x,d,g=!1,E=!1,b=!1){const w=this.getView().translate,C=this.getView().scale;if(!g&&this.gridEnabled){const S=this.gridSize*C*.5;if(!E){const P=d.x-(this.snap(d.x/C-w.x)+w.x)*C;Math.abs(x.x-P)<S?x.x=0:x.x=this.snap(x.x/C)*C-P}if(!b){const P=d.y-(this.snap(d.y/C-w.y)+w.y)*C;Math.abs(x.y-P)<S?x.y=0:x.y=this.snap(x.y/C)*C-P}}else{const S=.5*C;if(!E){const P=d.x-(Math.round(d.x/C-w.x)+w.x)*C;Math.abs(x.x-P)<S?x.x=0:x.x=Math.round(x.x/C)*C-P}if(!b){const P=d.y-(Math.round(d.y/C-w.y)+w.y)*C;Math.abs(x.y-P)<S?x.y=0:x.y=Math.round(x.y/C)*C-P}}return x},isGridEnabled(){return this.gridEnabled},setGridEnabled(x){this.gridEnabled=x},getGridSize(){return this.gridSize},setGridSize(x){this.gridSize=x}},SwimlaneMixin={swimlaneSelectionEnabled:!0,swimlaneNesting:!0,swimlaneIndicatorColorAttribute:"fillColor",getSwimlane(x=null){for(;x&&!this.isSwimlane(x);)x=x.getParent();return x},getSwimlaneAt(x,d,g){if(g||(g=this.getCurrentRoot(),g||(g=this.getDataModel().getRoot())),g){const E=g.getChildCount();for(let b=0;b<E;b+=1){const w=g.getChildAt(b);if(w){const C=this.getSwimlaneAt(x,d,w);if(C!=null)return C;if(w.isVisible()&&this.isSwimlane(w)){const S=this.getView().getState(w);if(S&&this.intersects(S,x,d))return w}}}}return null},hitsSwimlaneContent(x,d,g){const E=this.getView().getState(x),b=this.getStartSize(x);if(E){const w=this.getView().getScale();if(d-=E.x,g-=E.y,b.width>0&&d>0&&d>b.width*w||b.height>0&&g>0&&g>b.height*w)return!0}return!1},getStartSize(x,d=!1){const g=new Rectangle,E=this.getCurrentCellStyle(x,d),b=E.startSize??DEFAULT_STARTSIZE;return E.horizontal??!0?g.height=b:g.width=b,g},getSwimlaneDirection(x){const d=x.direction??DIRECTION.EAST,g=x.flipH,E=x.flipV;let w=x.horizontal??!0?0:3;d===DIRECTION.NORTH?w--:d===DIRECTION.WEST?w+=2:d===DIRECTION.SOUTH&&(w+=1);const C=mod(w,2);return g&&C===1&&(w+=2),E&&C===0&&(w+=2),[DIRECTION.NORTH,DIRECTION.EAST,DIRECTION.SOUTH,DIRECTION.WEST][mod(w,4)]},getActualStartSize(x,d=!1){const g=new Rectangle;if(this.isSwimlane(x,d)){const E=this.getCurrentCellStyle(x,d),b=E.startSize??DEFAULT_STARTSIZE,w=this.getSwimlaneDirection(E);w===DIRECTION.NORTH?g.y=b:w===DIRECTION.WEST?g.x=b:w===DIRECTION.SOUTH?g.height=b:g.width=b}return g},isSwimlane(x,d=!1){return x&&x.getParent()!==this.getDataModel().getRoot()&&!x.isEdge()?this.getCurrentCellStyle(x,d).shape===SHAPE.SWIMLANE:!1},isValidDropTarget(x,d,g){return x&&(this.isSplitEnabled()&&this.isSplitTarget(x,d,g)||!x.isEdge()&&(this.isSwimlane(x)||x.getChildCount()>0&&!x.isCollapsed()))},getDropTarget(x,d,g=null,E=!1){if(!this.isSwimlaneNesting()){for(let S=0;S<x.length;S+=1)if(this.isSwimlane(x[S]))return null}const b=convertPoint(this.getContainer(),getClientX(d),getClientY(d));b.x-=this.getPanDx(),b.y-=this.getPanDy();const w=this.getSwimlaneAt(b.x,b.y);if(!g)g=w;else if(w){let S=w.getParent();for(;S&&this.isSwimlane(S)&&S!==g;)S=S.getParent();S===g&&(g=w)}for(;g&&!this.isValidDropTarget(g,x,d)&&!this.getDataModel().isLayer(g);)g=g.getParent();let C=g;if(!E)for(;C&&x.indexOf(C)<0;)C=C.getParent();return!this.getDataModel().isLayer(g)&&!C?g:null},isSwimlaneNesting(){return this.swimlaneNesting},setSwimlaneNesting(x){this.swimlaneNesting=x},isSwimlaneSelectionEnabled(){return this.swimlaneSelectionEnabled},setSwimlaneSelectionEnabled(x){this.swimlaneSelectionEnabled=x}},TerminalMixin={isTerminalPointMovable(x,d){return!0},getOpposites(x,d=null,g=!0,E=!0){const b=[],w=new Dictionary;for(let C=0;C<x.length;C+=1){const S=this.getView().getState(x[C]),P=S?S.getVisibleTerminal(!0):this.getView().getVisibleTerminal(x[C],!0),I=S?S.getVisibleTerminal(!1):this.getView().getVisibleTerminal(x[C],!1);P===d&&I&&I!==d&&E?w.get(I)||(w.put(I,!0),b.push(I)):I===d&&P&&P!==d&&g&&(w.get(P)||(w.put(P,!0),b.push(P)))}return b}},TooltipMixin={getTooltip(x,d,g,E){let b=null;if(x.control&&(d===x.control.node||d.parentNode===x.control.node)&&(b=this.getCollapseExpandResource(),b=htmlEntities(Translations.get(b)||b,!0).replace(/\\n/g,"<br>")),!b&&x.overlays&&x.overlays.visit((w,C)=>{!b&&(d===C.node||d.parentNode===C.node)&&(b=C.overlay?C.overlay.toString()??null:null)}),!b){const w=this.getPlugin("SelectionCellsHandler"),C=w==null?void 0:w.getHandler(x.cell);C&&"getTooltipForNode"in C&&typeof C.getTooltipForNode=="function"&&(b=C.getTooltipForNode(d))}return b||(b=this.getTooltipForCell(x.cell)),b},getTooltipForCell(x){let d=null;return x&&"getTooltip"in x?d=x.getTooltip():d=this.convertValueToString(x),d},setTooltips(x){const d=this.getPlugin("TooltipHandler");d==null||d.setEnabled(x)}},ValidationMixin={validationAlert(x){alert(x)},isEdgeValid(x,d,g){return!this.getEdgeValidationError(x,d,g)},getEdgeValidationError(x=null,d=null,g=null){if(x&&!this.isAllowDanglingEdges()&&(!d||!g))return"";if(x&&!x.getTerminal(!0)&&!x.getTerminal(!1))return null;if(!this.isAllowLoops()&&d===g&&d||!this.isValidConnection(d,g))return"";if(d&&g){let E="";if(!this.isMultigraph()){const S=this.getDataModel().getEdgesBetween(d,g,!0);(S.length>1||S.length===1&&S[0]!==x)&&(E+=`${Translations.get(this.getAlreadyConnectedResource())||this.getAlreadyConnectedResource()}
`)}const b=d.getDirectedEdgeCount(!0,x),w=g.getDirectedEdgeCount(!1,x);for(const S of this.multiplicities){const P=S.check(this,x,d,g,b,w);P!=null&&(E+=P)}const C=this.validateEdge(x,d,g);return C!=null&&(E+=C),E.length>0?E:null}return this.isAllowDanglingEdges()?null:""},validateEdge(x=null,d=null,g=null){return null},validateGraph(x=null,d){if(x=x??this.getDataModel().getRoot(),!x)return"The root does not exist!";d=d??{};let g=!0;const E=x.getChildCount();for(let C=0;C<E;C+=1){const S=x.getChildAt(C);let P=d;this.isValidRoot(S)&&(P={});const I=this.validateGraph(S,P);I?this.setCellWarning(S,I.replace(/\n/g,"<br>")):this.setCellWarning(S,null),g=g&&I==null}let b="";x&&x.isCollapsed()&&!g&&(b+=`${Translations.get(this.getContainsValidationErrorsResource())||this.getContainsValidationErrorsResource()}
`),x&&x.isEdge()?b+=this.getEdgeValidationError(x,x.getTerminal(!0),x.getTerminal(!1))||"":b+=this.getCellValidationError(x)||"";const w=this.validateCell(x,d);return w!=null&&(b+=w),x.getParent()==null&&this.getView().validate(),b.length>0||!g?b:null},getCellValidationError(x){const d=x.getDirectedEdgeCount(!0),g=x.getDirectedEdgeCount(!1),E=x.getValue();let b="";for(let w=0;w<this.multiplicities.length;w+=1){const C=this.multiplicities[w];C.source&&isNode(E,C.type,C.attr,C.value)&&(d>C.max||d<C.min)?b+=`${C.countError}
`:!C.source&&isNode(E,C.type,C.attr,C.value)&&(g>C.max||g<C.min)&&(b+=`${C.countError}
`)}return b.length>0?b:null},validateCell(x,d){return null}},VertexMixin={vertexLabelsMovable:!1,allowNegativeCoordinates:!0,isAllowNegativeCoordinates(){return this.allowNegativeCoordinates},setAllowNegativeCoordinates(x){this.allowNegativeCoordinates=x},insertVertex(...x){var k,H,F,j;let d,g,E,b,w,C,S,P,I,M;if(x.length===1&&typeof x[0]=="object"){const $=x[0];d=$.parent,g=$.id,E=$.value,b="x"in $?$.x:(k=$.position)==null?void 0:k[0],w="y"in $?$.y:(H=$.position)==null?void 0:H[1],C="width"in $?$.width:(F=$.size)==null?void 0:F[0],S="height"in $?$.height:(j=$.size)==null?void 0:j[1],P=$.style,I=$.relative,M=$.geometryClass}else[d,g,E,b,w,C,S,P,I,M]=x;const D=this.createVertex(d,g,E,b,w,C,S,P,I,M);return this.addCell(D,d)},createVertex(x,d,g,E,b,w,C,S,P=!1,I=Geometry){const M=new I(E,b,w,C);M.relative=P;const D=new Cell(g,M,S);return D.setId(d),D.setVertex(!0),D.setConnectable(!0),D},getChildVertices(x){return this.getChildCells(x,!0,!1)},isVertexLabelsMovable(){return this.vertexLabelsMovable},setVertexLabelsMovable(x){this.vertexLabelsMovable=x}},ZoomMixin={zoomFactor:1.2,keepSelectionVisibleOnZoom:!1,centerZoom:!0,zoomIn(){this.zoom(this.zoomFactor)},zoomOut(){this.zoom(1/this.zoomFactor)},zoomActual(){this.getView().scale===1?this.getView().setTranslate(0,0):(this.getView().translate.x=0,this.getView().translate.y=0,this.getView().setScale(1))},zoomTo(x,d=!1){this.zoom(x/this.getView().scale,d)},zoom(x,d){d=d??this.centerZoom;const g=Math.round(this.getView().scale*x*100)/100,E=this.getView().getState(this.getSelectionCell()),b=this.getContainer();if(x=g/this.getView().scale,this.keepSelectionVisibleOnZoom&&E!=null){const w=new Rectangle(E.x*x,E.y*x,E.width*x,E.height*x);this.getView().scale=g,this.scrollRectToVisible(w)||(this.getView().revalidate(),this.getView().setScale(g))}else{const w=hasScrollbars(this.getContainer());if(d&&!w){let C=b.offsetWidth,S=b.offsetHeight;if(x>1){const P=(x-1)/(g*2);C*=-P,S*=-P}else{const P=(1/x-1)/(this.getView().scale*2);C*=P,S*=P}this.getView().scaleAndTranslate(g,this.getView().translate.x+C,this.getView().translate.y+S)}else{const C=this.getView().translate.x,S=this.getView().translate.y,P=b.scrollLeft,I=b.scrollTop;if(this.getView().setScale(g),w){let M=0,D=0;d&&(M=b.offsetWidth*(x-1)/2,D=b.offsetHeight*(x-1)/2),b.scrollLeft=(this.getView().translate.x-C)*this.getView().scale+Math.round(P*x+M),b.scrollTop=(this.getView().translate.y-S)*this.getView().scale+Math.round(I*x+D)}}}},zoomToRect(x){const d=this.getContainer(),g=d.clientWidth/x.width,E=d.clientHeight/x.height,b=g/E;x.x=Math.max(0,x.x),x.y=Math.max(0,x.y);let w=Math.min(d.scrollWidth,x.x+x.width),C=Math.min(d.scrollHeight,x.y+x.height);if(x.width=w-x.x,x.height=C-x.y,b<1){const I=x.height/b,M=(I-x.height)/2;x.height=I;const D=Math.min(x.y,M);x.y-=D,C=Math.min(d.scrollHeight,x.y+x.height),x.height=C-x.y}else{const I=x.width*b,M=(I-x.width)/2;x.width=I;const D=Math.min(x.x,M);x.x-=D,w=Math.min(d.scrollWidth,x.x+x.width),x.width=w-x.x}const S=d.clientWidth/x.width,P=this.getView().scale*S;hasScrollbars(this.getContainer())?(this.getView().setScale(P),d.scrollLeft=Math.round(x.x*S),d.scrollTop=Math.round(x.y*S)):this.getView().scaleAndTranslate(P,this.getView().translate.x-x.x/this.getView().scale,this.getView().translate.y-x.y/this.getView().scale)}},applyGraphMixins=()=>{const x=mixInto(Graph);for(const d of[CellsMixin,ConnectionsMixin,DragDropMixin,EdgeMixin,EditingMixin,EventsMixin,FoldingMixin,GroupingMixin,ImageMixin,LabelMixin,OrderMixin,PageBreaksMixin,OverlaysMixin,PanningMixin,PortsMixin,SelectionMixin,SnapMixin,SwimlaneMixin,TerminalMixin,TooltipMixin,ValidationMixin,VertexMixin,ZoomMixin])x(d)};class CellEditorHandler{constructor(d){this.clearOnChange=!1,this.bounds=null,this.resizeThread=null,this.textDirection=null,this.textarea=null,this.editingCell=null,this.trigger=null,this.modified=!1,this.autoSize=!0,this.selectText=!0,this.emptyLabelText=Client.IS_FF?"<br>":"",this.escapeCancelsEditing=!0,this.textNode=null,this.zIndex=5,this.minResize=new Rectangle(0,20),this.wordWrapPadding=0,this.blurEnabled=!1,this.initialValue=null,this.align=null,this.graph=d,this.zoomHandler=()=>{this.graph.isEditing()&&this.resize()},this.changeHandler=g=>{this.editingCell&&!this.graph.getView().getState(this.editingCell,!1)&&this.stopEditing(!0)},this.graph.getView().addListener(InternalEvent.SCALE,this.zoomHandler),this.graph.getView().addListener(InternalEvent.SCALE_AND_TRANSLATE,this.zoomHandler),this.graph.getDataModel().addListener(InternalEvent.CHANGE,this.changeHandler)}init(){this.textarea=document.createElement("div"),this.textarea.className="mxCellEditor mxPlainTextEditor",this.textarea.contentEditable=String(!0),Client.IS_GC&&(this.textarea.style.minHeight="1em"),this.textarea.style.position="relative",this.installListeners(this.textarea)}applyValue(d,g){this.graph.labelChanged(d.cell,g,this.trigger)}setAlign(d){this.textarea&&(this.textarea.style.textAlign=d),this.align=d,this.resize()}getInitialValue(d,g){let E=htmlEntities(this.graph.getEditingValue(d.cell,g),!1);return E=replaceTrailingNewlines(E,"<div><br></div>"),E.replace(/\n/g,"<br>")}getCurrentValue(d){return this.textarea?extractTextWithWhitespace(Array.from(this.textarea.childNodes)):null}isCancelEditingKeyEvent(d){return this.escapeCancelsEditing||isShiftDown(d)||isControlDown(d)||isMetaDown(d)}installListeners(d){InternalEvent.addListener(d,"dragstart",C=>{this.graph.stopEditing(!1),InternalEvent.consume(C)}),InternalEvent.addListener(d,"blur",C=>{this.blurEnabled&&this.focusLost()}),InternalEvent.addListener(d,"keydown",C=>{isConsumed(C)||(this.isStopEditingEvent(C)?(this.graph.stopEditing(!1),InternalEvent.consume(C)):C.keyCode===27&&(this.graph.stopEditing(this.isCancelEditingKeyEvent(C)),InternalEvent.consume(C)))});const g=C=>{this.editingCell!=null&&this.clearOnChange&&d.innerHTML===this.getEmptyLabelText()&&(!Client.IS_FF||C.keyCode!==8&&C.keyCode!==46)&&(this.clearOnChange=!1,d.innerHTML="")};InternalEvent.addListener(d,"keypress",g),InternalEvent.addListener(d,"paste",g);const E=C=>{if(this.editingCell!=null){const S=this.textarea;S.innerHTML.length===0||S.innerHTML==="<br>"?(S.innerHTML=this.getEmptyLabelText(),this.clearOnChange=S.innerHTML.length>0):this.clearOnChange=!1}};InternalEvent.addListener(d,"input",E),InternalEvent.addListener(d,"cut",E),InternalEvent.addListener(d,"paste",E);const b="input",w=C=>{this.editingCell!=null&&this.autoSize&&!isConsumed(C)&&(this.resizeThread!=null&&window.clearTimeout(this.resizeThread),this.resizeThread=window.setTimeout(()=>{this.resizeThread=null,this.resize()},0))};InternalEvent.addListener(d,b,w),InternalEvent.addListener(window,"resize",w),InternalEvent.addListener(d,"cut",w),InternalEvent.addListener(d,"paste",w)}isStopEditingEvent(d){return d.keyCode===113||this.graph.isEnterStopsCellEditing()&&d.keyCode===13&&!isControlDown(d)&&!isShiftDown(d)}isEventSource(d){return getSource(d)===this.textarea}resize(){const d=this.editingCell?this.graph.getView().getState(this.editingCell):null;if(!d)this.stopEditing(!0);else if(this.textarea!=null){const g=d.cell.isEdge(),{scale:E}=this.graph.getView();let b=null;if(!this.autoSize||d.style.overflow==="fill")this.bounds=this.getEditorBounds(d),this.textarea.style.width=`${Math.round(this.bounds.width/E)}px`,this.textarea.style.height=`${Math.round(this.bounds.height/E)}px`,this.textarea.style.left=`${Math.max(0,Math.round(this.bounds.x+1))}px`,this.textarea.style.top=`${Math.max(0,Math.round(this.bounds.y+1))}px`,this.graph.isWrapping(d.cell)&&(this.bounds.width>=2||this.bounds.height>=2)&&this.textarea.innerHTML!==this.getEmptyLabelText()?(this.textarea.style.wordWrap=WORD_WRAP,this.textarea.style.whiteSpace="normal",d.style.overflow!=="fill"&&(this.textarea.style.width=`${Math.round(this.bounds.width/E)+this.wordWrapPadding}px`)):(this.textarea.style.whiteSpace="nowrap",d.style.overflow!=="fill"&&(this.textarea.style.width=""));else{const w=getValue$1(d.style,"labelWidth",null);if(b=d.text!=null&&this.align==null?d.text.margin:null,b==null&&(b=getAlignmentAsPoint(this.align||getValue$1(d.style,"align",ALIGN.CENTER),getValue$1(d.style,"verticalAlign",ALIGN.MIDDLE))),g){if(this.bounds=new Rectangle(d.absoluteOffset.x,d.absoluteOffset.y,0,0),w!=null){const C=(parseFloat(w)+2)*E;this.bounds.width=C,this.bounds.x+=b.x*C}}else{let C=Rectangle.fromRectangle(d),S=getValue$1(d.style,"labelPosition",ALIGN.CENTER),P=getValue$1(d.style,"verticalLabelPosition",ALIGN.MIDDLE);if(C=d.shape!=null&&S==="center"&&P==="middle"?d.shape.getLabelBounds(C):C,w!=null&&(C.width=parseFloat(w)*E),!d.view.graph.cellRenderer.legacySpacing||d.style.overflow!=="width"){const I=new TextShape,M=(d.style.spacing??2)*E,D=((d.style.spacingTop??0)+I.baseSpacingTop)*E+M,k=((d.style.spacingRight??0)+I.baseSpacingRight)*E+M,H=((d.style.spacingBottom??0)+I.baseSpacingBottom)*E+M,F=((d.style.spacingLeft??0)+I.baseSpacingLeft)*E+M;S=d.style.labelPosition!=null?d.style.labelPosition:"center",P=d.style.verticalLabelPosition!=null?d.style.verticalLabelPosition:"middle",C=new Rectangle(C.x+F,C.y+D,C.width-(S===ALIGN.CENTER&&w==null?F+k:0),C.height-(P===ALIGN.MIDDLE?D+H:0))}this.bounds=new Rectangle(C.x+d.absoluteOffset.x,C.y+d.absoluteOffset.y,C.width,C.height)}if(this.graph.isWrapping(d.cell)&&(this.bounds.width>=2||this.bounds.height>=2)&&this.textarea.innerHTML!==this.getEmptyLabelText()){this.textarea.style.wordWrap=WORD_WRAP,this.textarea.style.whiteSpace="normal";const C=Math.round(this.bounds.width/E)+this.wordWrapPadding;this.textarea.style.position!=="relative"?(this.textarea.style.width=`${C}px`,this.textarea.scrollWidth>C&&(this.textarea.style.width=`${this.textarea.scrollWidth}px`)):this.textarea.style.maxWidth=`${C}px`}else this.textarea.style.whiteSpace="nowrap",this.textarea.style.width="";this.textarea.scrollWidth,this.textarea.scrollHeight,this.textarea.style.left=`${Math.max(0,Math.round(this.bounds.x-b.x*(this.bounds.width-2))+1)}px`,this.textarea.style.top=`${Math.max(0,Math.round(this.bounds.y-b.y*(this.bounds.height-4)+(b.y===-1?3:0))+1)}px`}setPrefixedStyle(this.textarea.style,"transformOrigin","0px 0px"),setPrefixedStyle(this.textarea.style,"transform",`scale(${E},${E})${b==null?"":` translate(${b.x*100}%,${b.y*100}%)`}`)}}focusLost(){this.stopEditing(!this.graph.isInvokesStopCellEditing())}getBackgroundColor(d){return NONE}startEditing(d,g=null){this.stopEditing(!0),this.align=null,this.textarea==null&&this.init();const E=this.graph.getPlugin("TooltipHandler");E==null||E.hideTooltip();const b=this.graph.getView().getState(d);if(b){const{scale:w}=this.graph.getView(),C=b.style.fontSize??DEFAULT_FONTSIZE,S=b.style.fontFamily??DEFAULT_FONTFAMILY,P=b.style.fontColor??"black",I=b.style.align??ALIGN.LEFT,M=(b.style.fontStyle||0)&FONT.BOLD,D=(b.style.fontStyle||0)&FONT.ITALIC,k=[];(b.style.fontStyle||0)&FONT.UNDERLINE&&k.push("underline"),(b.style.fontStyle||0)&FONT.STRIKETHROUGH&&k.push("line-through");const H=this.textarea;H.style.lineHeight=String(LINE_HEIGHT),H.style.backgroundColor=this.getBackgroundColor(b)||"transparent",H.style.textDecoration=k.join(" "),H.style.fontWeight=M?"bold":"normal",H.style.fontStyle=D?"italic":"",H.style.fontSize=`${Math.round(C)}px`,H.style.zIndex=String(this.zIndex),H.style.fontFamily=S,H.style.textAlign=I,H.style.outline="none",H.style.color=P;let F=this.textDirection=b.style.textDirection??DEFAULT_TEXT_DIRECTION;F==="auto"&&b.text!==null&&b.text.dialect!==DIALECT.STRICTHTML&&!isNode(b.text.value)&&(F=b.text.getAutoDirection()),F==="ltr"||F==="rtl"?H.setAttribute("dir",F):H.removeAttribute("dir"),H.innerHTML=this.getInitialValue(b,g)||"",this.initialValue=H.innerHTML,H.innerHTML.length===0||H.innerHTML==="<br>"?(H.innerHTML=this.getEmptyLabelText(),this.clearOnChange=!0):this.clearOnChange=H.innerHTML===this.getEmptyLabelText(),this.graph.container.appendChild(H),this.editingCell=d,this.trigger=g,this.textNode=null,b.text!==null&&this.isHideLabel(b)&&(this.textNode=b.text.node,this.textNode.style.visibility="hidden"),this.autoSize&&(b.cell.isEdge()||b.style.overflow!=="fill")&&window.setTimeout(()=>{this.resize()},0),this.resize();try{H.focus(),this.isSelectText()&&H.innerHTML.length>0&&(H.innerHTML!==this.getEmptyLabelText()||!this.clearOnChange)&&document.execCommand("selectAll",!1)}catch{}}}isSelectText(){return this.selectText}stopEditing(d=!1){if(this.editingCell){this.textNode&&(this.textNode.style.visibility="visible",this.textNode=null);const g=d?null:this.graph.view.getState(this.editingCell),E=this.textarea,b=this.initialValue;if(this.initialValue=null,this.editingCell=null,this.trigger=null,this.bounds=null,E.blur(),clearSelection(),E.parentNode&&E.parentNode.removeChild(E),this.clearOnChange&&E.innerHTML===this.getEmptyLabelText()&&(E.innerHTML="",this.clearOnChange=!1),g&&(E.innerHTML!==b||this.align!==null)){this.prepareTextarea();const w=this.getCurrentValue(g);this.graph.batchUpdate(()=>{w!==null&&this.applyValue(g,w),this.align!==null&&this.graph.setCellStyles("align",this.align,[g.cell])})}this.textarea&&InternalEvent.release(this.textarea),this.textarea=null,this.align=null}}prepareTextarea(){const d=this.textarea;d.lastChild&&d.lastChild.nodeName==="BR"&&d.removeChild(d.lastChild)}isHideLabel(d=null){return!0}getMinimumSize(d){const{scale:g}=this.graph.getView(),E=this.textarea;return new Rectangle(0,0,d.text===null?30:d.text.size*g+20,E.style.textAlign==="left"?120:40)}getEditorBounds(d){const g=d.cell.isEdge(),{scale:E}=this.graph.getView(),b=this.getMinimumSize(d),w=b.width,C=b.height;let S=null;if(!g&&d.view.graph.cellRenderer.legacySpacing&&d.style.overflow==="fill")S=d.shape.getLabelBounds(Rectangle.fromRectangle(d));else{const P=new TextShape,I=(d.style.spacing??0)*E,M=((d.style.spacingTop??0)+P.baseSpacingTop)*E+I,D=((d.style.spacingRight??0)+P.baseSpacingRight)*E+I,k=((d.style.spacingBottom??0)+P.baseSpacingBottom)*E+I,H=((d.style.spacingLeft??0)+P.baseSpacingLeft)*E+I;S=new Rectangle(d.x,d.y,Math.max(w,d.width-H-D),Math.max(C,d.height-M-k));const F=d.style.labelPosition!=null?d.style.labelPosition:"center",j=d.style.verticalLabelPosition!=null?d.style.verticalLabelPosition:"middle";if(S=d.shape!=null&&F==="center"&&j==="middle"?d.shape.getLabelBounds(S):S,g?(S.x=d.absoluteOffset.x,S.y=d.absoluteOffset.y,d.text!=null&&d.text.boundingBox!=null&&(d.text.boundingBox.x>0&&(S.x=d.text.boundingBox.x),d.text.boundingBox.y>0&&(S.y=d.text.boundingBox.y))):d.text!=null&&d.text.boundingBox!=null&&(S.x=Math.min(S.x,d.text.boundingBox.x),S.y=Math.min(S.y,d.text.boundingBox.y)),S.x+=H,S.y+=M,d.text!=null&&d.text.boundingBox!=null&&(g?(S.width=Math.max(w,d.text.boundingBox.width),S.height=Math.max(C,d.text.boundingBox.height)):(S.width=Math.max(S.width,d.text.boundingBox.width),S.height=Math.max(S.height,d.text.boundingBox.height))),d.cell.isVertex()){const $=getStringValue(d.style,"labelPosition",ALIGN.CENTER);$==="left"?S.x-=d.width:$==="right"&&(S.x+=d.width);const z=d.style.verticalLabelPosition!=null?d.style.verticalLabelPosition:"middle";z==="top"?S.y-=d.height:z==="bottom"&&(S.y+=d.height)}}return new Rectangle(Math.round(S.x),Math.round(S.y),Math.round(S.width),Math.round(S.height))}getEmptyLabelText(d=null){return this.emptyLabelText??""}getEditingCell(){return this.editingCell}onDestroy(){this.textarea&&(InternalEvent.release(this.textarea),this.textarea.parentNode&&this.textarea.parentNode.removeChild(this.textarea),this.textarea=null),this.graph.getDataModel().removeListener(this.changeHandler),this.graph.getView().removeListener(this.zoomHandler)}}CellEditorHandler.pluginId="CellEditorHandler";class TooltipHandler{constructor(d){this.zIndex=10005,this.delay=500,this.ignoreTouchEvents=!0,this.hideOnHover=!1,this.destroyed=!1,this.lastX=0,this.lastY=0,this.state=null,this.stateSource=!1,this.thread=null,this.enabled=!1,this.graph=d,this.graph.addMouseListener(this),this.div=document.createElement("div"),this.div.className="mxTooltip",this.div.style.visibility="hidden",document.body.appendChild(this.div),InternalEvent.addGestureListeners(this.div,g=>{const E=getSource(g);E&&E.nodeName!=="A"&&this.hideTooltip()}),InternalEvent.addListener(this.graph.getContainer(),"mouseleave",g=>{this.div!==g.relatedTarget&&this.hide()})}isEnabled(){return this.enabled}setEnabled(d){this.enabled=d}isHideOnHover(){return this.hideOnHover}setHideOnHover(d){this.hideOnHover=d}getStateForEvent(d){return d.getState()}mouseDown(d,g){this.reset(g,!1),this.hideTooltip()}mouseMove(d,g){if(g.getX()!==this.lastX||g.getY()!==this.lastY){this.reset(g,!0);const E=this.getStateForEvent(g);(this.isHideOnHover()||E!==this.state||g.getSource()!==this.node&&(!this.stateSource||E!=null&&this.stateSource===(g.isSource(E.shape)||!g.isSource(E.text))))&&this.hideTooltip()}this.lastX=g.getX(),this.lastY=g.getY()}mouseUp(d,g){this.reset(g,!0),this.hideTooltip()}resetTimer(){this.thread&&(window.clearTimeout(this.thread),this.thread=null)}reset(d,g,E=null){if((!this.ignoreTouchEvents||isMouseEvent(d.getEvent()))&&(this.resetTimer(),E=E??this.getStateForEvent(d),g&&this.isEnabled()&&E&&this.div.style.visibility==="hidden")){const b=d.getSource(),w=d.getX(),C=d.getY(),S=d.isSource(E.shape)||d.isSource(E.text),P=this.graph.getPlugin("PopupMenuHandler");this.thread=window.setTimeout(()=>{if(E&&b&&!this.graph.isEditing()&&P&&!P.isMenuShowing()&&!this.graph.isMouseDown){const I=this.graph.getTooltip(E,b,w,C);this.show(I,w,C),this.state=E,this.node=b,this.stateSource=S}},this.delay)}}hide(){this.resetTimer(),this.hideTooltip()}hideTooltip(){this.div.style.visibility="hidden",this.div.innerHTML=""}show(d,g,E){if(!this.destroyed&&d&&d!==""){const b=getScrollOrigin();this.div.style.zIndex=String(this.zIndex),this.div.style.left=`${g+b.x}px`,this.div.style.top=`${E+TOOLTIP_VERTICAL_OFFSET+b.y}px`,isNode(d)?(this.div.innerHTML="",this.div.appendChild(d)):this.div.innerHTML=d.replace(/\n/g,"<br>"),this.div.style.visibility="",fit(this.div)}}onDestroy(){this.destroyed||(this.graph.removeMouseListener(this),InternalEvent.release(this.div),this.div.parentNode&&this.div.parentNode.removeChild(this.div),this.destroyed=!0)}}TooltipHandler.pluginId="TooltipHandler";class SelectionCellsHandler extends EventSource{constructor(d){super(),this.enabled=!0,this.maxHandlers=100,this.graph=d,this.handlers=new Dictionary,this.graph.addMouseListener(this),this.refreshHandler=(g,E)=>{this.isEnabled()&&this.refresh()},this.graph.getSelectionModel().addListener(InternalEvent.CHANGE,this.refreshHandler),this.graph.getDataModel().addListener(InternalEvent.CHANGE,this.refreshHandler),this.graph.getView().addListener(InternalEvent.SCALE,this.refreshHandler),this.graph.getView().addListener(InternalEvent.TRANSLATE,this.refreshHandler),this.graph.getView().addListener(InternalEvent.SCALE_AND_TRANSLATE,this.refreshHandler),this.graph.getView().addListener(InternalEvent.DOWN,this.refreshHandler),this.graph.getView().addListener(InternalEvent.UP,this.refreshHandler)}isEnabled(){return this.enabled}setEnabled(d){this.enabled=d}getHandler(d){return this.handlers.get(d)}isHandled(d){return!!this.getHandler(d)}reset(){this.handlers.visit((d,g)=>{g.reset.apply(g)})}getHandledSelectionCells(){return this.graph.getSelectionCells()}refresh(){const d=this.handlers;this.handlers=new Dictionary;const g=sortCells(this.getHandledSelectionCells(),!1);for(let E=0;E<g.length;E+=1){const b=this.graph.view.getState(g[E]);if(b){let w=d.remove(g[E]);w&&(w.state!==b?(w.onDestroy(),w=null):this.isHandlerActive(w)||(w.refresh&&w.refresh(),w.redraw())),w&&this.handlers.put(g[E],w)}}d.visit((E,b)=>{this.fireEvent(new EventObject(InternalEvent.REMOVE,{state:b.state})),b.onDestroy()});for(let E=0;E<g.length;E+=1){const b=this.graph.view.getState(g[E]);if(b){let w=this.handlers.get(g[E]);w?w.updateParentHighlight():(w=this.graph.createHandler(b),this.fireEvent(new EventObject(InternalEvent.ADD,{state:b})),this.handlers.put(g[E],w))}}}isHandlerActive(d){return d.index!==null}updateHandler(d){let g=this.handlers.remove(d.cell);if(g){const{index:E}=g,b=g.startX,w=g.startY;g.onDestroy(),g=this.graph.createHandler(d),g&&(this.handlers.put(d.cell,g),E!==null&&g.start(b,w,E))}}mouseDown(d,g){this.graph.isEnabled()&&this.isEnabled()&&this.handlers.visit((E,b)=>{b.mouseDown(d,g)})}mouseMove(d,g){this.graph.isEnabled()&&this.isEnabled()&&this.handlers.visit((E,b)=>{b.mouseMove(d,g)})}mouseUp(d,g){this.graph.isEnabled()&&this.isEnabled()&&this.handlers.visit((E,b)=>{b.mouseUp(d,g)})}onDestroy(){this.graph.removeMouseListener(this),this.graph.removeListener(this.refreshHandler),this.graph.getDataModel().removeListener(this.refreshHandler),this.graph.getView().removeListener(this.refreshHandler)}}SelectionCellsHandler.pluginId="SelectionCellsHandler";class MaxPopupMenu extends EventSource{constructor(d){super(),this.activeRow=null,this.eventReceiver=null,this.submenuImage=`${Client.imageBasePath}/submenu.gif`,this.zIndex=10006,this.useLeftButtonForPopup=!1,this.enabled=!0,this.itemCount=0,this.autoExpand=!1,this.smartSeparators=!1,this.labels=!0,this.willAddSeparator=!1,this.containsItems=!1,d&&(this.factoryMethod=d),this.table=document.createElement("table"),this.table.className="mxPopupMenu",this.tbody=document.createElement("tbody"),this.table.appendChild(this.tbody),this.div=document.createElement("div"),this.div.className="mxPopupMenu",this.div.style.display="inline",this.div.style.zIndex=String(this.zIndex),this.div.appendChild(this.table),InternalEvent.disableContextMenu(this.div)}isEnabled(){return this.enabled}setEnabled(d){this.enabled=d}isPopupTrigger(d){return d.isPopupTrigger()||this.useLeftButtonForPopup&&isLeftMouseButton(d.getEvent())}addItem(d,g,E,b=null,w=null,C=!0,S=!0,P=!1){var D;b=b??this,this.itemCount++,b.willAddSeparator&&(b.containsItems&&this.addSeparator(b,!0),b.willAddSeparator=!1),b.containsItems=!0;const I=document.createElement("tr");I.className="mxPopupMenuItem";const M=document.createElement("td");if(M.className="mxPopupMenuIcon",g){const k=document.createElement("img");k.src=g,M.appendChild(k)}else if(w){const k=document.createElement("div");k.className=w,M.appendChild(k)}if(I.appendChild(M),this.labels){const k=document.createElement("td");k.className=`mxPopupMenuItem${C?"":" mxDisabled"}`,write(k,d),k.align="left",I.appendChild(k);const H=document.createElement("td");H.className=`mxPopupMenuItem${C?"":" mxDisabled"}`,H.style.paddingRight="6px",H.style.textAlign="right",I.appendChild(H),b.div==null&&this.createSubmenu(b)}return(D=b.tbody)==null||D.appendChild(I),S&&C&&(InternalEvent.addGestureListeners(I,k=>{this.eventReceiver=I,b&&b.activeRow!=I&&b.activeRow!=b&&(b.activeRow&&b.activeRow.div.parentNode&&this.hideSubmenu(b),I.div&&(this.showSubmenu(b,I),b.activeRow=I)),InternalEvent.consume(k)},k=>{b&&b.activeRow!=I&&b.activeRow!=b&&(b.activeRow&&b.activeRow.div.parentNode&&this.hideSubmenu(b),this.autoExpand&&I.div&&(this.showSubmenu(b,I),b.activeRow=I)),P||(I.className="mxPopupMenuItemHover")},k=>{this.eventReceiver==I&&(b&&b.activeRow!=I&&this.hideMenu(),E==null||E(k)),this.eventReceiver=null,InternalEvent.consume(k)}),P||InternalEvent.addListener(I,"mouseout",k=>{I.className="mxPopupMenuItem"})),I}addCheckmark(d,g){if(d.firstChild){const E=d.firstChild.nextSibling;E.style.backgroundImage=`url('${g}')`,E.style.backgroundRepeat="no-repeat",E.style.backgroundPosition="2px 50%"}}createSubmenu(d){var E,b;d.table=document.createElement("table"),d.table.className="mxPopupMenu",d.tbody=document.createElement("tbody"),d.table.appendChild(d.tbody),d.div=document.createElement("div"),d.div.className="mxPopupMenu",d.div.style.position="absolute",d.div.style.display="inline",d.div.style.zIndex=String(this.zIndex),d.div.appendChild(d.table);const g=document.createElement("img");g.setAttribute("src",this.submenuImage),(b=(E=d.firstChild)==null?void 0:E.nextSibling)!=null&&b.nextSibling&&d.firstChild.nextSibling.nextSibling.appendChild(g)}showSubmenu(d,g){if(g.div){g.div.style.left=`${d.div.offsetLeft+g.offsetLeft+g.offsetWidth-1}px`,g.div.style.top=`${d.div.offsetTop+g.offsetTop}px`,document.body.appendChild(g.div);const E=g.div.offsetLeft,b=g.div.offsetWidth,w=getDocumentScrollOrigin(document),C=document.body,S=document.documentElement,P=w.x+(C.clientWidth||S.clientWidth);E+b>P&&(g.div.style.left=`${Math.max(0,d.div.offsetLeft-b-6)}px`),fit(g.div)}}addSeparator(d=null,g=!1){if(d=d||this,this.smartSeparators&&!g)d.willAddSeparator=!0;else if(d.tbody){d.willAddSeparator=!1;const E=document.createElement("tr"),b=document.createElement("td");b.className="mxPopupMenuIcon",b.style.padding="0 0 0 0px",E.appendChild(b);const w=document.createElement("td");w.style.padding="0 0 0 0px",w.setAttribute("colSpan","2");const C=document.createElement("hr");C.setAttribute("size","1"),w.appendChild(C),E.appendChild(w),d.tbody.appendChild(E)}}popup(d,g,E,b){if(this.div&&this.tbody&&this.factoryMethod){for(this.div.style.left=`${d}px`,this.div.style.top=`${g}px`;this.tbody.firstChild;)InternalEvent.release(this.tbody.firstChild),this.tbody.removeChild(this.tbody.firstChild);this.itemCount=0,this.factoryMethod(this,E,b),this.itemCount>0&&(this.showMenu(),this.fireEvent(new EventObject(InternalEvent.SHOW)))}}isMenuShowing(){return this.div&&this.div.parentNode==document.body}showMenu(){document.body.appendChild(this.div),fit(this.div)}hideMenu(){var d;this.div&&((d=this.div.parentNode)==null||d.removeChild(this.div),this.hideSubmenu(this),this.containsItems=!1,this.fireEvent(new EventObject(InternalEvent.HIDE)))}hideSubmenu(d){var g;d.activeRow&&(this.hideSubmenu(d.activeRow),(g=d.activeRow.div.parentNode)==null||g.removeChild(d.activeRow.div),d.activeRow=null)}destroy(){var d;this.div&&(InternalEvent.release(this.div),(d=this.div.parentNode)==null||d.removeChild(this.div))}}class PopupMenuHandler extends MaxPopupMenu{constructor(d){super(),this.inTolerance=!1,this.popupTrigger=!1,this.selectOnPopup=!0,this.clearSelectionOnBackground=!0,this.triggerX=null,this.triggerY=null,this.screenX=null,this.screenY=null,this.graph=d,this.graph.addMouseListener(this),this.gestureHandler=(g,E)=>{this.inTolerance=!1},this.graph.addListener(InternalEvent.GESTURE,this.gestureHandler),this.init()}init(){InternalEvent.addGestureListeners(this.div,d=>{const g=this.graph.getPlugin("TooltipHandler");g==null||g.hide()})}isSelectOnPopup(d){return this.selectOnPopup}mouseDown(d,g){this.isEnabled()&&!isMultiTouchEvent(g.getEvent())&&(this.hideMenu(),this.triggerX=g.getGraphX(),this.triggerY=g.getGraphY(),this.screenX=getMainEvent(g.getEvent()).screenX,this.screenY=getMainEvent(g.getEvent()).screenY,this.popupTrigger=this.isPopupTrigger(g),this.inTolerance=!0)}mouseMove(d,g){this.inTolerance&&this.screenX!=null&&this.screenY!=null&&(Math.abs(getMainEvent(g.getEvent()).screenX-this.screenX)>this.graph.getEventTolerance()||Math.abs(getMainEvent(g.getEvent()).screenY-this.screenY)>this.graph.getEventTolerance())&&(this.inTolerance=!1)}mouseUp(d,g){if(this.popupTrigger&&this.inTolerance&&this.triggerX!=null&&this.triggerY!=null){const E=this.getCellForPopupEvent(g);this.graph.isEnabled()&&this.isSelectOnPopup(g)&&E!=null&&!this.graph.isCellSelected(E)?this.graph.setSelectionCell(E):this.clearSelectionOnBackground&&E==null&&this.graph.clearSelection();const b=this.graph.getPlugin("TooltipHandler");b==null||b.hide();const w=getScrollOrigin();this.popup(g.getX()+w.x+1,g.getY()+w.y+1,E,g.getEvent()),g.consume()}this.popupTrigger=!1,this.inTolerance=!1}getCellForPopupEvent(d){return d.getCell()}onDestroy(){this.graph.removeMouseListener(this),this.graph.removeListener(this.gestureHandler),super.destroy()}}PopupMenuHandler.pluginId="PopupMenuHandler";class ConnectionHandler extends EventSource{constructor(d,g=null){super(),this.previous=null,this.iconState=null,this.icons=[],this.cell=null,this.currentPoint=null,this.sourceConstraint=null,this.shape=null,this.icon=null,this.originalPoint=null,this.currentState=null,this.selectedIcon=null,this.waypoints=[],this.factoryMethod=null,this.moveIconFront=!1,this.moveIconBack=!1,this.connectImage=null,this.targetConnectImage=!1,this.enabled=!1,this.select=!0,this.createTarget=!1,this.error=null,this.waypointsEnabled=!1,this.ignoreMouseDown=!1,this.first=null,this.connectIconOffset=new Point(0,TOOLTIP_VERTICAL_OFFSET),this.edgeState=null,this.mouseDownCounter=0,this.movePreviewAway=!1,this.outlineConnect=!1,this.livePreview=!1,this.cursor=null,this.insertBeforeSource=!1,this.graph=d,this.factoryMethod=g,this.graph.addMouseListener(this),this.marker=this.createMarker(),this.constraintHandler=new ConstraintHandler(this.graph),this.changeHandler=E=>{this.iconState&&(this.iconState=this.graph.getView().getState(this.iconState.cell)),this.iconState?(this.redrawIcons(this.icons,this.iconState),this.constraintHandler.reset()):this.previous&&!this.graph.view.getState(this.previous.cell)&&this.reset()},this.graph.getDataModel().addListener(InternalEvent.CHANGE,this.changeHandler),this.graph.getView().addListener(InternalEvent.SCALE,this.changeHandler),this.graph.getView().addListener(InternalEvent.TRANSLATE,this.changeHandler),this.graph.getView().addListener(InternalEvent.SCALE_AND_TRANSLATE,this.changeHandler),this.drillHandler=E=>{this.reset()},this.graph.addListener(InternalEvent.START_EDITING,this.drillHandler),this.graph.getView().addListener(InternalEvent.DOWN,this.drillHandler),this.graph.getView().addListener(InternalEvent.UP,this.drillHandler),this.escapeHandler=()=>{this.reset()},this.graph.addListener(InternalEvent.ESCAPE,this.escapeHandler)}isEnabled(){return this.enabled}setEnabled(d){this.enabled=d}isInsertBefore(d,g,E,b,w){return this.insertBeforeSource&&g!==E}isCreateTarget(d){return this.createTarget}setCreateTarget(d){this.createTarget=d}createShape(){const d=this.livePreview&&this.edgeState?this.graph.cellRenderer.createShape(this.edgeState):new PolylineShape([],INVALID_COLOR);return d&&d.node&&(d.dialect=DIALECT.SVG,d.scale=this.graph.view.scale,d.pointerEvents=!1,d.isDashed=!0,d.init(this.graph.getView().getOverlayPane()),InternalEvent.redirectMouseEvents(d.node,this.graph,null)),d}isConnectableCell(d){return!0}createMarker(){return new ConnectionHandlerCellMarker(this.graph,this)}start(d,g,E,b){this.previous=d,this.first=new Point(g,E),this.edgeState=b??this.createEdgeState(),this.marker.currentColor=this.marker.validColor,this.marker.markedState=d,this.marker.mark(),this.fireEvent(new EventObject(InternalEvent.START,{state:this.previous}))}isConnecting(){return!!this.first&&!!this.shape}isValidSource(d,g){return this.graph.isValidSource(d)}isValidTarget(d){return!0}validateConnection(d,g){return this.isValidTarget(g)?this.graph.getEdgeValidationError(null,d,g):""}getConnectImage(d){return this.connectImage}isMoveIconToFrontForState(d){return d.text&&d.text.node.parentNode===this.graph.container?!0:this.moveIconFront}createIcons(d){const g=this.getConnectImage(d);if(g){this.iconState=d;const E=[],b=new Rectangle(0,0,g.width,g.height),w=new ImageShape(b,g.src,void 0,void 0,0);w.preserveImageAspect=!1,this.isMoveIconToFrontForState(d)?(w.dialect=DIALECT.STRICTHTML,w.init(this.graph.container)):(w.dialect=DIALECT.SVG,w.init(this.graph.getView().getOverlayPane()),this.moveIconBack&&w.node.parentNode&&w.node.previousSibling&&w.node.parentNode.insertBefore(w.node,w.node.parentNode.firstChild)),w.node.style.cursor=CURSOR.CONNECT;const C=()=>this.currentState??d,S=P=>{isConsumed(P)||(this.icon=w,this.graph.fireMouseEvent(InternalEvent.MOUSE_DOWN,new InternalMouseEvent(P,C())))};return InternalEvent.redirectMouseEvents(w.node,this.graph,C,S),E.push(w),this.redrawIcons(E,this.iconState),E}return[]}redrawIcons(d,g){if(d[0]&&d[0].bounds){const E=this.getIconPosition(d[0],g);d[0].bounds.x=E.x,d[0].bounds.y=E.y,d[0].redraw()}}getIconPosition(d,g){const{scale:E}=this.graph.getView();let b=g.getCenterX(),w=g.getCenterY();if(this.graph.isSwimlane(g.cell)){const C=this.graph.getStartSize(g.cell);b=C.width!==0?g.x+C.width*E/2:b,w=C.height!==0?g.y+C.height*E/2:w;const S=toRadians(g.style.rotation??0);if(S!==0){const P=Math.cos(S),I=Math.sin(S),M=new Point(g.getCenterX(),g.getCenterY()),D=getRotatedPoint(new Point(b,w),P,I,M);b=D.x,w=D.y}}return new Point(b-d.bounds.width/2,w-d.bounds.height/2)}destroyIcons(){for(let d=0;d<this.icons.length;d+=1)this.icons[d].destroy();this.icons=[],this.icon=null,this.selectedIcon=null,this.iconState=null}isStartEvent(d){return this.constraintHandler.currentFocus!==null&&this.constraintHandler.currentConstraint!==null||this.previous!==null&&this.error===null&&(this.icons.length===0||this.icon!==null)}mouseDown(d,g){if(this.mouseDownCounter+=1,this.isEnabled()&&this.graph.isEnabled()&&!g.isConsumed()&&!this.isConnecting()&&this.isStartEvent(g)){if(this.constraintHandler.currentConstraint&&this.constraintHandler.currentFocus&&this.constraintHandler.currentPoint?(this.sourceConstraint=this.constraintHandler.currentConstraint,this.previous=this.constraintHandler.currentFocus,this.first=this.constraintHandler.currentPoint.clone()):this.first=new Point(g.getGraphX(),g.getGraphY()),this.edgeState=this.createEdgeState(g),this.mouseDownCounter=1,this.waypointsEnabled&&!this.shape&&(this.waypoints=[],this.shape=this.createShape(),this.edgeState&&this.shape.apply(this.edgeState)),!this.previous&&this.edgeState&&this.edgeState.cell.geometry){const E=this.graph.getPointForEvent(g.getEvent());this.edgeState.cell.geometry.setTerminalPoint(E,!0)}this.fireEvent(new EventObject(InternalEvent.START,{state:this.previous})),g.consume()}this.selectedIcon=this.icon,this.icon=null}isImmediateConnectSource(d){return!this.graph.isCellMovable(d.cell)}createEdgeState(d){return null}isOutlineConnectEvent(d){if(!this.currentPoint)return!1;const g=getOffset(this.graph.container),E=d.getEvent(),b=getClientX(E),w=getClientY(E),C=document.documentElement,S=(window.pageXOffset||C.scrollLeft)-(C.clientLeft||0),P=(window.pageYOffset||C.scrollTop)-(C.clientTop||0),I=this.currentPoint.x-this.graph.container.scrollLeft+g.x-S,M=this.currentPoint.y-this.graph.container.scrollTop+g.y-P;return this.outlineConnect&&!isShiftDown(d.getEvent())&&(d.isSource(this.marker.highlight.shape)||isAltDown(d.getEvent())&&d.getState()!=null||this.marker.highlight.isHighlightAt(b,w)||(I!==b||M!==w)&&d.getState()==null&&this.marker.highlight.isHighlightAt(I,M))}updateCurrentState(d,g){if(this.constraintHandler.update(d,!this.first,!1,!this.first||d.isSource(this.marker.highlight.shape)?null:g),this.constraintHandler.currentFocus!=null&&this.constraintHandler.currentConstraint!=null)this.marker.highlight&&this.marker.highlight.state&&this.marker.highlight.state.cell===this.constraintHandler.currentFocus.cell&&this.marker.highlight.shape?this.marker.highlight.shape.stroke!=="transparent"&&(this.marker.highlight.shape.stroke="transparent",this.marker.highlight.repaint()):this.marker.markCell(this.constraintHandler.currentFocus.cell,"transparent"),this.previous&&(this.error=this.validateConnection(this.previous.cell,this.constraintHandler.currentFocus.cell),this.error||(this.currentState=this.constraintHandler.currentFocus),(this.error||this.currentState&&!this.isCellEnabled(this.currentState.cell))&&this.constraintHandler.reset());else{this.graph.isIgnoreTerminalEvent(d.getEvent())?(this.marker.reset(),this.currentState=null):(this.marker.process(d),this.currentState=this.marker.getValidState()),this.currentState!=null&&!this.isCellEnabled(this.currentState.cell)&&(this.constraintHandler.reset(),this.marker.reset(),this.currentState=null);const E=this.isOutlineConnectEvent(d);if(this.currentState!=null&&E){d.isSource(this.marker.highlight.shape)&&(g=new Point(d.getGraphX(),d.getGraphY()));const b=this.graph.getOutlineConstraint(g,this.currentState,d);this.constraintHandler.setFocus(d,this.currentState,!1),this.constraintHandler.currentConstraint=b,this.constraintHandler.currentPoint=g}if(this.outlineConnect&&this.marker.highlight!=null&&this.marker.highlight.shape!=null){const b=this.graph.view.scale;if(this.constraintHandler.currentConstraint!=null&&this.constraintHandler.currentFocus!=null)this.marker.highlight.shape.stroke=OUTLINE_HIGHLIGHT_COLOR,this.marker.highlight.shape.strokeWidth=OUTLINE_HIGHLIGHT_STROKEWIDTH/b/b,this.marker.highlight.repaint();else if(this.marker.hasValidState()){const w=d.getCell();w&&w.isConnectable()&&this.marker.getValidState()!==d.getState()?(this.marker.highlight.shape.stroke="transparent",this.currentState=null):this.marker.highlight.shape.stroke=DEFAULT_VALID_COLOR,this.marker.highlight.shape.strokeWidth=HIGHLIGHT_STROKEWIDTH/b/b,this.marker.highlight.repaint()}}}}isCellEnabled(d){return!0}convertWaypoint(d){const g=this.graph.getView().getScale(),E=this.graph.getView().getTranslate();d.x=d.x/g-E.x,d.y=d.y/g-E.y}snapToPreview(d,g){if(!isAltDown(d.getEvent())&&this.previous){const E=this.graph.getGridSize()*this.graph.view.scale/2,b=this.sourceConstraint&&this.first?this.first:new Point(this.previous.getCenterX(),this.previous.getCenterY());Math.abs(b.x-d.getGraphX())<E&&(g.x=b.x),Math.abs(b.y-d.getGraphY())<E&&(g.y=b.y)}}mouseMove(d,g){if(!g.isConsumed()&&(this.ignoreMouseDown||this.first||!this.graph.isMouseDown)){!this.isEnabled()&&this.currentState&&(this.destroyIcons(),this.currentState=null);const E=this.graph.getView(),{scale:b}=E,w=E.translate;let C=new Point(g.getGraphX(),g.getGraphY());if(this.error=null,this.graph.isGridEnabledEvent(g.getEvent())&&(C=new Point((this.graph.snap(C.x/b-w.x)+w.x)*b,(this.graph.snap(C.y/b-w.y)+w.y)*b)),this.snapToPreview(g,C),this.currentPoint=C,(this.first||this.isEnabled()&&this.graph.isEnabled())&&(this.shape||!this.first||Math.abs(g.getGraphX()-this.first.x)>this.graph.getEventTolerance()||Math.abs(g.getGraphY()-this.first.y)>this.graph.getEventTolerance())&&this.updateCurrentState(g,C),this.first){let S=null,P=C;this.constraintHandler.currentConstraint&&this.constraintHandler.currentFocus&&this.constraintHandler.currentPoint?(S=this.constraintHandler.currentConstraint,P=this.constraintHandler.currentPoint.clone()):this.previous&&!this.graph.isIgnoreTerminalEvent(g.getEvent())&&isShiftDown(g.getEvent())&&(Math.abs(this.previous.getCenterX()-C.x)<Math.abs(this.previous.getCenterY()-C.y)?C.x=this.previous.getCenterX():C.y=this.previous.getCenterY());let I=this.first;if(this.selectedIcon&&this.selectedIcon.bounds){const M=this.selectedIcon.bounds.width,D=this.selectedIcon.bounds.height;if(this.currentState&&this.targetConnectImage){const k=this.getIconPosition(this.selectedIcon,this.currentState);this.selectedIcon.bounds.x=k.x,this.selectedIcon.bounds.y=k.y}else{const k=new Rectangle(g.getGraphX()+this.connectIconOffset.x,g.getGraphY()+this.connectIconOffset.y,M,D);this.selectedIcon.bounds=k}this.selectedIcon.redraw()}if(this.edgeState)this.updateEdgeState(P,S),P=this.edgeState.absolutePoints[this.edgeState.absolutePoints.length-1],I=this.edgeState.absolutePoints[0];else{if(this.currentState&&!this.constraintHandler.currentConstraint){const M=this.getTargetPerimeterPoint(this.currentState,g);M!=null&&(P=M)}if(!this.sourceConstraint&&this.previous){const M=this.waypoints.length>0?this.waypoints[0]:P,D=this.getSourcePerimeterPoint(this.previous,M,g);D&&(I=D)}}if(!this.currentState&&this.movePreviewAway&&P){let M=I;if(this.edgeState&&this.edgeState.absolutePoints.length>=2){const D=this.edgeState.absolutePoints[this.edgeState.absolutePoints.length-2];D&&(M=D)}if(M){const D=P.x-M.x,k=P.y-M.y,H=Math.sqrt(D*D+k*k);if(H===0)return;this.originalPoint=P.clone(),P.x-=D*4/H,P.y-=k*4/H}}else this.originalPoint=null;if(!this.shape){const M=Math.abs(g.getGraphX()-this.first.x),D=Math.abs(g.getGraphY()-this.first.y);(M>this.graph.getEventTolerance()||D>this.graph.getEventTolerance())&&(this.shape=this.createShape(),this.edgeState&&this.shape.apply(this.edgeState),this.updateCurrentState(g,C))}if(this.shape){if(this.edgeState)this.shape.points=this.edgeState.absolutePoints;else{let M=[I];this.waypoints.length>0&&(M=M.concat(this.waypoints)),M.push(P),this.shape.points=M}this.drawPreview()}this.cursor&&(this.graph.container.style.cursor=this.cursor),InternalEvent.consume(g.getEvent()),g.consume()}else!this.isEnabled()||!this.graph.isEnabled()?this.constraintHandler.reset():this.previous!==this.currentState&&!this.edgeState?(this.destroyIcons(),this.currentState&&!this.error&&!this.constraintHandler.currentConstraint&&(this.icons=this.createIcons(this.currentState),this.icons.length===0&&(this.currentState.setCursor(CURSOR.CONNECT),g.consume())),this.previous=this.currentState):this.previous===this.currentState&&this.currentState!=null&&this.icons.length===0&&!this.graph.isMouseDown&&g.consume();if(!this.graph.isMouseDown&&this.currentState!=null&&this.icons!=null){let S=!1;const P=g.getSource();for(let I=0;I<this.icons.length&&!S;I+=1)S=P===this.icons[I].node||!!P&&P.parentNode===this.icons[I].node;S||this.updateIcons(this.currentState,this.icons,g)}}else this.constraintHandler.reset()}updateEdgeState(d,g){if(!this.edgeState)return;this.sourceConstraint&&this.sourceConstraint.point&&(this.edgeState.style.exitX=this.sourceConstraint.point.x,this.edgeState.style.exitY=this.sourceConstraint.point.y),g&&g.point?(this.edgeState.style.entryX=g.point.x,this.edgeState.style.entryY=g.point.y):(this.edgeState.style.entryX=0,this.edgeState.style.entryY=0),this.edgeState.absolutePoints=[null,this.currentState!=null?null:d],this.sourceConstraint&&this.graph.view.updateFixedTerminalPoint(this.edgeState,this.previous,!0,this.sourceConstraint),this.currentState!=null&&(g==null&&(g=this.graph.getConnectionConstraint(this.edgeState,this.previous,!1)),this.edgeState.setAbsoluteTerminalPoint(null,!1),this.graph.view.updateFixedTerminalPoint(this.edgeState,this.currentState,!1,g));const E=[];for(let b=0;b<this.waypoints.length;b+=1){const w=this.waypoints[b].clone();this.convertWaypoint(w),E[b]=w}this.graph.view.updatePoints(this.edgeState,E,this.previous,this.currentState),this.graph.view.updateFloatingTerminalPoints(this.edgeState,this.previous,this.currentState)}getTargetPerimeterPoint(d,g){let E=null;const{view:b}=d,w=b.getPerimeterFunction(d);if(w&&this.previous&&this.edgeState){const C=this.waypoints.length>0?this.waypoints[this.waypoints.length-1]:new Point(this.previous.getCenterX(),this.previous.getCenterY()),S=w(b.getPerimeterBounds(d),this.edgeState,C,!1);S&&(E=S)}else E=new Point(d.getCenterX(),d.getCenterY());return E}getSourcePerimeterPoint(d,g,E){let b=null;const{view:w}=d,C=w.getPerimeterFunction(d),S=new Point(d.getCenterX(),d.getCenterY());if(C){const P=d.style.rotation??0,I=-P*(Math.PI/180);P!==0&&(g=getRotatedPoint(new Point(g.x,g.y),Math.cos(I),Math.sin(I),S));let M=C(w.getPerimeterBounds(d),d,g,!1);M&&(P!==0&&(M=getRotatedPoint(new Point(M.x,M.y),Math.cos(-I),Math.sin(-I),S)),b=M)}else b=S;return b}updateIcons(d,g,E){}isStopEvent(d){return!!d.getState()}addWaypointForEvent(d){if(!this.first)return;let g=convertPoint(this.graph.container,d.getX(),d.getY());const E=Math.abs(g.x-this.first.x),b=Math.abs(g.y-this.first.y);if(this.waypoints.length>0||this.mouseDownCounter>1&&(E>this.graph.getEventTolerance()||b>this.graph.getEventTolerance())){const{scale:C}=this.graph.view;g=new Point(this.graph.snap(d.getGraphX()/C)*C,this.graph.snap(d.getGraphY()/C)*C),this.waypoints.push(g)}}checkConstraints(d,g){return!d||!g||!d.point||!g.point||!d.point.equals(g.point)||d.dx!==g.dx||d.dy!==g.dy||d.perimeter!==g.perimeter}mouseUp(d,g){if(!g.isConsumed()&&this.isConnecting()){if(this.waypointsEnabled&&!this.isStopEvent(g)){this.addWaypointForEvent(g),g.consume();return}const E=this.sourceConstraint,b=this.constraintHandler.currentConstraint,w=this.previous?this.previous.cell:null;let C=null;this.constraintHandler.currentConstraint&&this.constraintHandler.currentFocus&&(C=this.constraintHandler.currentFocus.cell),!C&&this.currentState&&(C=this.currentState.cell),!this.error&&(!w||!C||w!==C||this.checkConstraints(E,b))?this.connect(w,C,g.getEvent(),g.getCell()):(this.previous!=null&&this.marker.validState!=null&&this.previous.cell===this.marker.validState.cell&&this.graph.selectCellForEvent(this.marker.validState.cell,g.getEvent()),this.error!=null&&this.error.length>0&&this.graph.validationAlert(this.error)),this.destroyIcons(),g.consume()}this.first!=null&&this.reset()}reset(){this.shape!=null&&(this.shape.destroy(),this.shape=null),this.cursor!=null&&this.graph.container!=null&&(this.graph.container.style.cursor=""),this.destroyIcons(),this.marker.reset(),this.constraintHandler.reset(),this.originalPoint=null,this.currentPoint=null,this.edgeState=null,this.previous=null,this.error=null,this.sourceConstraint=null,this.mouseDownCounter=0,this.first=null,this.fireEvent(new EventObject(InternalEvent.RESET))}drawPreview(){this.updatePreview(this.error===null),this.shape&&this.shape.redraw()}updatePreview(d){this.shape&&(this.shape.strokeWidth=this.getEdgeWidth(d),this.shape.stroke=this.getEdgeColor(d))}getEdgeColor(d){return d?VALID_COLOR:INVALID_COLOR}getEdgeWidth(d){return d?3:1}connect(d,g,E,b=null){var w,C,S,P;if(g||this.isCreateTarget(E)||this.graph.isAllowDanglingEdges()){const I=this.graph.getDataModel();let M=!1,D=null;I.beginUpdate();try{if(d&&!g&&!this.graph.isIgnoreTerminalEvent(E)&&this.isCreateTarget(E)&&(g=this.createTargetVertex(E,d),g)){if(b=this.graph.getDropTarget([g],E,b),M=!0,b==null||!b.isEdge()){const j=b?this.graph.getView().getState(b):null;if(j){const $=g.getGeometry();$&&($.x-=j.origin.x,$.y-=j.origin.y)}}else b=this.graph.getDefaultParent();this.graph.addCell(g,b)}let k=this.graph.getDefaultParent();d&&g&&d.getParent()===g.getParent()&&((w=d.getParent())==null?void 0:w.getParent())!==I.getRoot()&&(k=d.getParent(),d.geometry&&d.geometry.relative&&g.geometry&&g.geometry.relative&&(k=k.getParent()));let H=null,F={};if((C=this.edgeState)!=null&&C.cell&&(H=this.edgeState.cell.value,F=this.edgeState.cell.style??{}),D=this.insertEdge(k,"",H,d,g,F),D&&d){if(this.graph.setConnectionConstraint(D,d,!0,this.sourceConstraint),this.graph.setConnectionConstraint(D,g,!1,this.constraintHandler.currentConstraint),(P=(S=this.edgeState)==null?void 0:S.cell)!=null&&P.geometry&&I.setGeometry(D,this.edgeState.cell.geometry),k=d.getParent(),this.isInsertBefore(D,d,g,E,b)){let z=d;for(;z&&z.parent!=null&&z.geometry!=null&&z.geometry.relative&&z.parent!==D.parent;)z=z.getParent();z!=null&&z.parent!=null&&z.parent===D.parent&&I.add(k,D,z.parent.getIndex(z))}let j=D.getGeometry();if(j==null&&(j=new Geometry,j.relative=!0,I.setGeometry(D,j)),this.waypoints.length>0){const $=this.graph.view.scale,z=this.graph.view.translate;j.points=[];for(let U=0;U<this.waypoints.length;U+=1){const W=this.waypoints[U];j.points.push(new Point(W.x/$-z.x,W.y/$-z.y))}}if(!g&&this.currentPoint){const $=this.graph.view.translate,z=this.graph.view.scale,U=this.originalPoint!=null?new Point(this.originalPoint.x/z-$.x,this.originalPoint.y/z-$.y):new Point(this.currentPoint.x/z-$.x,this.currentPoint.y/z-$.y);U.x-=this.graph.getPanDx()/this.graph.view.scale,U.y-=this.graph.getPanDy()/this.graph.view.scale,j.setTerminalPoint(U,!1)}this.fireEvent(new EventObject(InternalEvent.CONNECT,"cell",D,"terminal",g,"event",E,"target",b,"terminalInserted",M))}}catch(k){GlobalConfig.logger.show();const H=`Error in ConnectionHandler: ${k instanceof Error?k.message+`
`+k.stack:"unknown cause"}`;GlobalConfig.logger.debug(H)}finally{I.endUpdate()}this.select&&this.selectCells(D,M?g:null)}}selectCells(d,g){this.graph.setSelectionCell(d)}insertEdge(d,g,E,b,w,C){if(!this.factoryMethod)return this.graph.insertEdge(d,g,E,b,w,C);let S=this.createEdge(E,b,w,C);return S=this.graph.addEdge(S,d,b,w),S}createTargetVertex(d,g){let E=g.getGeometry();for(;E&&E.relative;)g=g.getParent(),E=g.getGeometry();const b=this.graph.cloneCell(g);if(E=b.getGeometry(),E&&this.currentPoint){const w=this.graph.view.translate,C=this.graph.view.scale,S=new Point(this.currentPoint.x/C-w.x,this.currentPoint.y/C-w.y);E.x=Math.round(S.x-E.width/2-this.graph.getPanDx()/C),E.y=Math.round(S.y-E.height/2-this.graph.getPanDy()/C);const P=this.getAlignmentTolerance();if(P>0){const I=this.graph.view.getState(g);if(I!=null){const M=I.x/C-w.x,D=I.y/C-w.y;Math.abs(M-E.x)<=P&&(E.x=Math.round(M)),Math.abs(D-E.y)<=P&&(E.y=Math.round(D))}}}return b}getAlignmentTolerance(d){return this.graph.isGridEnabled()?this.graph.getGridSize()/2:this.graph.getSnapTolerance()}createEdge(d,g,E,b={}){let w=null;if(this.factoryMethod!=null&&(w=this.factoryMethod(g,E,b)),w==null){w=new Cell(d||""),w.setEdge(!0),w.setStyle(b);const C=new Geometry;C.relative=!0,w.setGeometry(C)}return w}onDestroy(){this.graph.removeMouseListener(this),this.shape&&(this.shape.destroy(),this.shape=null),this.marker&&(this.marker.destroy(),this.marker=null),this.constraintHandler&&this.constraintHandler.onDestroy(),this.changeHandler&&(this.graph.getDataModel().removeListener(this.changeHandler),this.graph.getView().removeListener(this.changeHandler)),this.drillHandler&&(this.graph.removeListener(this.drillHandler),this.graph.getView().removeListener(this.drillHandler)),this.escapeHandler&&this.graph.removeListener(this.escapeHandler)}}ConnectionHandler.pluginId="ConnectionHandler";class ConnectionHandlerCellMarker extends CellMarker{constructor(d,g,E=DEFAULT_VALID_COLOR,b=DEFAULT_INVALID_COLOR,w=DEFAULT_HOTSPOT){super(d,E,b,w),this.hotspotEnabled=!0,this.connectionHandler=g}getCell(d){let g=super.getCell(d);if(this.connectionHandler.error=null,!g&&this.connectionHandler.currentPoint&&(g=this.connectionHandler.graph.getCellAt(this.connectionHandler.currentPoint.x,this.connectionHandler.currentPoint.y)),g&&!g.isConnectable()&&this.connectionHandler.cell){const E=this.connectionHandler.cell.getParent();E&&E.isVertex()&&E.isConnectable()&&(g=E)}return g&&(this.connectionHandler.graph.isSwimlane(g)&&this.connectionHandler.currentPoint!=null&&this.connectionHandler.graph.hitsSwimlaneContent(g,this.connectionHandler.currentPoint.x,this.connectionHandler.currentPoint.y)||!this.connectionHandler.isConnectableCell(g))&&(g=null),g?this.connectionHandler.isConnecting()?this.connectionHandler.previous&&(this.connectionHandler.error=this.connectionHandler.validateConnection(this.connectionHandler.previous.cell,g),this.connectionHandler.error!==null&&this.connectionHandler.error.length===0&&(g=null,this.connectionHandler.isCreateTarget(d.getEvent())&&(this.connectionHandler.error=null))):this.connectionHandler.isValidSource(g,d)||(g=null):this.connectionHandler.isConnecting()&&!this.connectionHandler.isCreateTarget(d.getEvent())&&!this.connectionHandler.graph.isAllowDanglingEdges()&&(this.connectionHandler.error=""),g}isValidState(d){return this.connectionHandler.isConnecting()?!this.connectionHandler.error:super.isValidState(d)}getMarkerColor(d,g,E){return!this.connectionHandler.connectImage||this.connectionHandler.isConnecting()?super.getMarkerColor(d,g,E):NONE}intersects(d,g){return this.connectionHandler.connectImage||this.connectionHandler.isConnecting()?!0:super.intersects(d,g)}}class Guide{constructor(d,g){this.states=[],this.horizontal=!0,this.vertical=!0,this.guideX=null,this.guideY=null,this.rounded=!1,this.tolerance=2,this.graph=d,this.setStates(g)}setStates(d){this.states=d}isEnabledForEvent(d){return!0}getGuideTolerance(d=!1){return d&&this.graph.isGridEnabled()?this.graph.getGridSize()/2:this.tolerance}createGuideShape(d=!1){const g=new PolylineShape([],GUIDE_COLOR,GUIDE_STROKEWIDTH);return g.isDashed=!0,g}isStateIgnored(d){return!1}move(d=null,g,E=!1,b=!1){if((this.horizontal||this.vertical)&&d){const{scale:w}=this.graph.getView(),C=this.getGuideTolerance(E)*w,S=d.clone();S.x+=g.x,S.y+=g.y;let P=!1,I=null,M=null,D=!1,k=null,H=null,F=C,j=C;const $=S.x,z=S.x+S.width,U=S.getCenterX(),W=S.y,q=S.y+S.height,Z=S.getCenterY(),X=(te,ce,Q)=>{let se=!1;Q&&Math.abs(te-U)<F?(g.x=te-d.getCenterX(),F=Math.abs(te-U),se=!0):Q||(Math.abs(te-$)<F?(g.x=te-d.x,F=Math.abs(te-$),se=!0):Math.abs(te-z)<F&&(g.x=te-d.x-d.width,F=Math.abs(te-z),se=!0)),se&&(I=ce,M=te,this.guideX||(this.guideX=this.createGuideShape(!0),this.guideX.dialect=DIALECT.SVG,this.guideX.pointerEvents=!1,this.guideX.init(this.graph.getView().getOverlayPane()))),P=P||se},K=(te,ce,Q)=>{let se=!1;Q&&Math.abs(te-Z)<j?(g.y=te-d.getCenterY(),j=Math.abs(te-Z),se=!0):Q||(Math.abs(te-W)<j?(g.y=te-d.y,j=Math.abs(te-W),se=!0):Math.abs(te-q)<j&&(g.y=te-d.y-d.height,j=Math.abs(te-q),se=!0)),se&&(k=ce,H=te,this.guideY||(this.guideY=this.createGuideShape(!1),this.guideY.dialect=DIALECT.SVG,this.guideY.pointerEvents=!1,this.guideY.init(this.graph.getView().getOverlayPane()))),D=D||se};for(let te=0;te<this.states.length;te+=1){const ce=this.states[te];ce&&!this.isStateIgnored(ce)&&(this.horizontal&&(X(ce.getCenterX(),ce,!0),X(ce.x,ce,!1),X(ce.x+ce.width,ce,!1),ce.cell||X(ce.getCenterX(),ce,!1)),this.vertical&&(K(ce.getCenterY(),ce,!0),K(ce.y,ce,!1),K(ce.y+ce.height,ce,!1),ce.cell||K(ce.getCenterY(),ce,!1)))}this.graph.snapDelta(g,d,!E,P,D),g=this.getDelta(d,I,g.x,k,g.y);const ee=this.graph.container;if(!P&&this.guideX)this.guideX.node.style.visibility="hidden";else if(this.guideX){let te=null,ce=null;I&&(te=Math.min(d.y+g.y-this.graph.getPanDy(),I.y),ce=Math.max(d.y+d.height+g.y-this.graph.getPanDy(),I.y+I.height)),te!==null&&ce!==null?this.guideX.points=[new Point(M,te),new Point(M,ce)]:this.guideX.points=[new Point(M,-this.graph.getPanDy()),new Point(M,ee.scrollHeight-3-this.graph.getPanDy())],this.guideX.stroke=this.getGuideColor(I,!0),this.guideX.node.style.visibility="visible",this.guideX.redraw()}if(!D&&this.guideY!=null)this.guideY.node.style.visibility="hidden";else if(this.guideY!=null){let te=null,ce=null;k!=null&&d!=null&&(te=Math.min(d.x+g.x-this.graph.getPanDx(),k.x),ce=Math.max(d.x+d.width+g.x-this.graph.getPanDx(),k.x+k.width)),te!=null&&ce!=null&&H!==null?this.guideY.points=[new Point(te,H),new Point(ce,H)]:H!==null&&(this.guideY.points=[new Point(-this.graph.getPanDx(),H),new Point(ee.scrollWidth-3-this.graph.getPanDx(),H)]),this.guideY.stroke=this.getGuideColor(k,!1),this.guideY.node.style.visibility="visible",this.guideY.redraw()}}return g}getDelta(d,g=null,E,b=null,w){const C=this.graph.view.scale;return(this.rounded||g!=null&&g.cell==null)&&(E=Math.round((d.x+E)/C)*C-d.x),(this.rounded||b!=null&&b.cell==null)&&(w=Math.round((d.y+w)/C)*C-d.y),new Point(E,w)}getGuideColor(d,g){return GUIDE_COLOR}hide(){this.setVisible(!1)}setVisible(d){this.guideX&&(this.guideX.node.style.visibility=d?"visible":"hidden"),this.guideY&&(this.guideY.node.style.visibility=d?"visible":"hidden")}destroy(){this.guideX&&(this.guideX.destroy(),this.guideX=null),this.guideY&&(this.guideY.destroy(),this.guideY=null)}}class SelectionHandler{constructor(d){this.refreshThread=null,this.maxCells=50,this.enabled=!0,this.highlightEnabled=!0,this.cloneEnabled=!0,this.moveEnabled=!0,this.guidesEnabled=!1,this.handlesVisible=!0,this.guide=null,this.currentDx=0,this.currentDy=0,this.updateCursor=!0,this.selectEnabled=!0,this.removeCellsFromParent=!0,this.removeEmptyParents=!1,this.connectOnDrop=!1,this.scrollOnMove=!0,this.minimumSize=6,this.previewColor="black",this.htmlPreview=!1,this.shape=null,this.scaleGrid=!1,this.rotationEnabled=!0,this.maxLivePreview=0,this.allowLivePreview=Client.IS_SVG,this.cell=null,this.delayedSelection=!1,this.first=null,this.cells=null,this.bounds=null,this.pBounds=null,this.allCells=new Dictionary,this.cellWasClicked=!1,this.cloning=!1,this.cellCount=0,this.target=null,this.suspended=!1,this.livePreviewActive=!1,this.livePreviewUsed=!1,this.highlight=null,this.graph=d,this.graph.addMouseListener(this),this.panHandler=()=>{this.suspended||(this.updatePreview(),this.updateHint())},this.graph.addListener(InternalEvent.PAN,this.panHandler),this.escapeHandler=(g,E)=>{this.reset()},this.graph.addListener(InternalEvent.ESCAPE,this.escapeHandler),this.refreshHandler=(g,E)=>{this.refreshThread&&window.clearTimeout(this.refreshThread),this.refreshThread=window.setTimeout(()=>{if(this.refreshThread=null,this.first&&!this.suspended&&this.cells){const b=this.currentDx,w=this.currentDy;if(this.currentDx=0,this.currentDy=0,this.updatePreview(),this.bounds=this.graph.getView().getBounds(this.cells),this.pBounds=this.getPreviewBounds(this.cells),this.pBounds==null&&!this.livePreviewUsed)this.reset();else if(this.currentDx=b,this.currentDy=w,this.updatePreview(),this.updateHint(),this.livePreviewUsed){const C=this.graph.getPlugin("SelectionCellsHandler");this.setHandlesVisibleForCells((C==null?void 0:C.getHandledSelectionCells())??[],!1,!0),this.updatePreview()}}},0)},this.graph.getDataModel().addListener(InternalEvent.CHANGE,this.refreshHandler),this.graph.addListener(InternalEvent.REFRESH,this.refreshHandler),this.keyHandler=g=>{if(this.graph.container!=null&&this.graph.container.style.visibility!=="hidden"&&this.first!=null&&!this.suspended){const E=this.graph.isCloneEvent(g)&&this.graph.isCellsCloneable()&&this.isCloneEnabled();E!==this.cloning&&(this.cloning=E,this.checkPreview(),this.updatePreview())}},typeof document<"u"&&(InternalEvent.addListener(document,"keydown",this.keyHandler),InternalEvent.addListener(document,"keyup",this.keyHandler))}isEnabled(){return this.enabled}setEnabled(d){this.enabled=d}isCloneEnabled(){return this.cloneEnabled}setCloneEnabled(d){this.cloneEnabled=d}isMoveEnabled(){return this.moveEnabled}setMoveEnabled(d){this.moveEnabled=d}isSelectEnabled(){return this.selectEnabled}setSelectEnabled(d){this.selectEnabled=d}isRemoveCellsFromParent(){return this.removeCellsFromParent}setRemoveCellsFromParent(d){this.removeCellsFromParent=d}isPropagateSelectionCell(d,g,E){const b=d.getParent();if(g){const w=d.isEdge()?null:d.getGeometry();return!this.graph.isSiblingSelected(d)&&w&&w.relative||!this.graph.isSwimlane(b)}return(!this.graph.isToggleEvent(E.getEvent())||!this.graph.isSiblingSelected(d)&&!this.graph.isCellSelected(d)&&!this.graph.isSwimlane(b)||this.graph.isCellSelected(b))&&(this.graph.isToggleEvent(E.getEvent())||!this.graph.isCellSelected(b))}getInitialCellForEvent(d){let g=d.getState();if((!this.graph.isToggleEvent(d.getEvent())||!isAltDown(d.getEvent()))&&g&&!this.graph.isCellSelected(g.cell)){let E=g.cell.getParent(),b=E?this.graph.view.getState(E):null;for(;b&&!this.graph.isCellSelected(b.cell)&&(b.cell.isVertex()||b.cell.isEdge())&&this.isPropagateSelectionCell(g.cell,!0,d);)g=b,E=g.cell.getParent(),b=E?this.graph.view.getState(E):null}return g?g.cell:null}isDelayedSelection(d,g){let E=d;const b=this.graph.getPlugin("SelectionCellsHandler");if(!this.graph.isToggleEvent(g.getEvent())||!isAltDown(g.getEvent()))for(;E;){if(b!=null&&b.isHandled(E)){const w=this.graph.getPlugin("CellEditorHandler");return(w==null?void 0:w.getEditingCell())!==E}E=E.getParent()}return this.graph.isToggleEvent(g.getEvent())&&!isAltDown(g.getEvent())}selectDelayed(d){const g=this.graph.getPlugin("PopupMenuHandler");if(!g||!g.isPopupTrigger(d)){let E=d.getCell();E===null&&(E=this.cell),E&&this.selectCellForEvent(E,d)}}selectCellForEvent(d,g){const E=this.graph.view.getState(d);if(E)if(g.isSource(E.control))this.graph.selectCellForEvent(d,g.getEvent());else{if(!this.graph.isToggleEvent(g.getEvent())||!isAltDown(g.getEvent())){let b=d.getParent();for(;b&&this.graph.view.getState(b)&&(b.isVertex()||b.isEdge())&&this.isPropagateSelectionCell(d,!1,g);)d=b,b=d.getParent()}this.graph.selectCellForEvent(d,g.getEvent())}return d}consumeMouseEvent(d,g){g.consume()}mouseDown(d,g){if(!g.isConsumed()&&this.isEnabled()&&this.graph.isEnabled()&&g.getState()&&!isMultiTouchEvent(g.getEvent())){const E=this.getInitialCellForEvent(g);if(E&&(this.delayedSelection=this.isDelayedSelection(E,g),this.cell=null,this.isSelectEnabled()&&!this.delayedSelection&&this.graph.selectCellForEvent(E,g.getEvent()),this.isMoveEnabled())){const b=E.getGeometry();b&&this.graph.isCellMovable(E)&&(!E.isEdge()||this.graph.getSelectionCount()>1||b.points&&b.points.length>0||!E.getTerminal(!0)||!E.getTerminal(!1)||this.graph.isAllowDanglingEdges()||this.graph.isCloneEvent(g.getEvent())&&this.graph.isCellsCloneable())?this.start(E,g.getX(),g.getY()):this.delayedSelection&&(this.cell=E),this.cellWasClicked=!0,this.consumeMouseEvent(InternalEvent.MOUSE_DOWN,g)}}}getGuideStates(){const d=this.graph.getDefaultParent(),g=E=>{const b=E.getGeometry();return!!this.graph.view.getState(E)&&E.isVertex()&&!!b&&!b.relative};return this.graph.view.getCellStates(d.filterDescendants(g))}getCells(d){return!this.delayedSelection&&this.graph.isCellMovable(d)?[d]:this.graph.getMovableCells(this.graph.getSelectionCells())}getPreviewBounds(d){const g=this.getBoundingBox(d);if(g){if(g.width=Math.max(0,g.width-1),g.height=Math.max(0,g.height-1),g.width<this.minimumSize){const E=this.minimumSize-g.width;g.x-=E/2,g.width=this.minimumSize}else g.x=Math.round(g.x),g.width=Math.ceil(g.width);if(g.height<this.minimumSize){const E=this.minimumSize-g.height;g.y-=E/2,g.height=this.minimumSize}else g.y=Math.round(g.y),g.height=Math.ceil(g.height)}return g}getBoundingBox(d){let g=null;if(d.length>0){for(let E=0;E<d.length;E+=1)if(d[E].isVertex()||d[E].isEdge()){const b=this.graph.view.getState(d[E]);if(b){let w=null;d[E].isVertex()&&b.shape&&b.shape.boundingBox&&(w=b.shape.boundingBox),w&&(g?g.add(w):g=Rectangle.fromRectangle(w))}}}return g}createPreviewShape(d){const g=new RectangleShape(d,NONE,this.previewColor);return g.isDashed=!0,this.htmlPreview?(g.dialect=DIALECT.STRICTHTML,g.init(this.graph.container)):(g.dialect=DIALECT.SVG,g.init(this.graph.getView().getOverlayPane()),g.pointerEvents=!1,Client.IS_IOS&&(g.getSvgScreenOffset=()=>0)),g}createGuide(){return new Guide(this.graph,this.getGuideStates())}start(d,g,E,b){this.cell=d,this.first=convertPoint(this.graph.container,g,E),this.cells=b||this.getCells(this.cell),this.bounds=this.graph.getView().getBounds(this.cells),this.pBounds=this.getPreviewBounds(this.cells),this.cloning=!1,this.cellCount=0;for(let w=0;w<this.cells.length;w+=1)this.cellCount+=this.addStates(this.cells[w],this.allCells);if(this.guidesEnabled){this.guide=this.createGuide();const w=d.getParent(),C=w.getChildCount()<2,S=new Dictionary,P=this.graph.getOpposites(this.graph.getEdges(this.cell),this.cell);for(let I=0;I<P.length;I+=1){const M=this.graph.view.getState(P[I]);M&&!S.get(M)&&S.put(M,!0)}this.guide.isStateIgnored=I=>{const M=I.cell.getParent();return!!I.cell&&(!this.cloning&&!!this.isCellMoving(I.cell)||I.cell!==(this.target||w)&&!C&&!S.get(I)&&(!this.target||this.target.getChildCount()>=2)&&M!==(this.target||w))}}}addStates(d,g){const E=this.graph.view.getState(d);let b=0;if(E&&!g.get(d)){g.put(d,E),b++;const w=d.getChildCount();for(let C=0;C<w;C+=1)b+=this.addStates(d.getChildAt(C),g)}return b}isCellMoving(d){return this.allCells.get(d)}useGuidesForEvent(d){return this.guide?this.guide.isEnabledForEvent(d.getEvent())&&!this.graph.isConstrainedEvent(d.getEvent()):!0}snap(d){const g=this.scaleGrid?this.graph.view.scale:1;return d.x=this.graph.snap(d.x/g)*g,d.y=this.graph.snap(d.y/g)*g,d}getDelta(d){const g=convertPoint(this.graph.container,d.getX(),d.getY());return this.first?new Point(g.x-this.first.x-this.graph.getPanDx(),g.y-this.first.y-this.graph.getPanDy()):new Point}updateHint(d){}removeHint(){}roundLength(d){return Math.round(d*100)/100}isValidDropTarget(d,g){return this.cell?this.cell.getParent()!==d:!1}checkPreview(){this.livePreviewActive&&this.cloning?(this.resetLivePreview(),this.livePreviewActive=!1):this.maxLivePreview>=this.cellCount&&!this.livePreviewActive&&this.allowLivePreview?(!this.cloning||!this.livePreviewActive)&&(this.livePreviewActive=!0,this.livePreviewUsed=!0):!this.livePreviewUsed&&!this.shape&&this.bounds&&(this.shape=this.createPreviewShape(this.bounds))}mouseMove(d,g){const{graph:E}=this;if(!g.isConsumed()&&E.isMouseDown&&this.cell&&this.first&&this.bounds&&!this.suspended){if(isMultiTouchEvent(g.getEvent())){this.reset();return}let b=this.getDelta(g);const w=E.getEventTolerance();if(this.shape||this.livePreviewActive||Math.abs(b.x)>w||Math.abs(b.y)>w){this.highlight||(this.highlight=new CellHighlight(this.graph,DROP_TARGET_COLOR,3));const C=E.isCloneEvent(g.getEvent())&&E.isCellsCloneable()&&this.isCloneEnabled(),S=E.isGridEnabledEvent(g.getEvent()),P=g.getCell();let I=!0,M=null;this.cloning=C,E.isDropEnabled()&&this.highlightEnabled&&this.cells&&(M=E.getDropTarget(this.cells,g.getEvent(),P,C));let D=M?E.getView().getState(M):null,k=!1;if(D&&(C||M&&this.isValidDropTarget(M,g)))this.target!==M&&(this.target=M,this.setHighlightColor(DROP_TARGET_COLOR)),k=!0;else if(this.target=null,this.connectOnDrop&&P&&this.cells&&this.cells.length===1&&P.isVertex()&&P.isConnectable()&&(D=E.getView().getState(P),D)){const F=E.getEdgeValidationError(null,this.cell,P)===null?VALID_COLOR:INVALID_CONNECT_TARGET_COLOR;this.setHighlightColor(F),k=!0}D&&k?this.highlight.highlight(D):this.highlight.hide(),this.guide&&this.useGuidesForEvent(g)?(b=this.guide.move(this.bounds,b,S,C),I=!1):b=this.graph.snapDelta(b,this.bounds,!S,!1,!1),this.guide&&I&&this.guide.hide(),E.isConstrainedEvent(g.getEvent())&&(Math.abs(b.x)>Math.abs(b.y)?b.y=0:b.x=0),this.checkPreview(),(this.currentDx!==b.x||this.currentDy!==b.y)&&(this.currentDx=b.x,this.currentDy=b.y,this.updatePreview())}this.updateHint(g),this.consumeMouseEvent(InternalEvent.MOUSE_MOVE,g),InternalEvent.consume(g.getEvent())}else if((this.isMoveEnabled()||this.isCloneEnabled())&&this.updateCursor&&!g.isConsumed()&&(g.getState()||g.sourceState)&&!E.isMouseDown){let b=E.getCursorForMouseEvent(g);const w=g.getCell();!b&&w&&E.isEnabled()&&E.isCellMovable(w)&&(w.isEdge()?b=CURSOR.MOVABLE_EDGE:b=CURSOR.MOVABLE_VERTEX),b&&g.sourceState&&g.sourceState.setCursor(b)}}updatePreview(d=!1){if(this.livePreviewUsed&&!d){if(this.cells){const g=this.graph.getPlugin("SelectionCellsHandler");this.setHandlesVisibleForCells((g==null?void 0:g.getHandledSelectionCells())??[],!1),this.updateLivePreview(this.currentDx,this.currentDy)}}else this.updatePreviewShape()}updatePreviewShape(){this.shape&&this.pBounds&&(this.shape.bounds=new Rectangle(Math.round(this.pBounds.x+this.currentDx),Math.round(this.pBounds.y+this.currentDy),this.pBounds.width,this.pBounds.height),this.shape.redraw())}updateLivePreview(d,g){if(!this.suspended){const E=[];if(this.allCells&&this.allCells.visit((b,w)=>{const C=w?this.graph.view.getState(w.cell):null;if(C!==w&&w&&(w.destroy(),C?this.allCells.put(w.cell,C):this.allCells.remove(w.cell),w=C),w){const S=w.clone();E.push([w,S]),w.shape&&(w.shape.originalPointerEvents===null&&(w.shape.originalPointerEvents=w.shape.pointerEvents),w.shape.pointerEvents=!1,w.text&&(w.text.originalPointerEvents===null&&(w.text.originalPointerEvents=w.text.pointerEvents),w.text.pointerEvents=!1)),w.cell.isVertex()&&(w.x+=d,w.y+=g,this.cloning?w.text&&(w.text.updateBoundingBox(),w.text.boundingBox&&(w.text.boundingBox.x+=d,w.text.boundingBox.y+=g),w.text.unrotatedBoundingBox&&(w.text.unrotatedBoundingBox.x+=d,w.text.unrotatedBoundingBox.y+=g)):(w.view.graph.cellRenderer.redraw(w,!0),w.view.invalidate(w.cell),w.invalid=!1,w.control&&w.control.node&&(w.control.node.style.visibility="hidden")))}}),E.length===0)this.reset();else{const b=this.graph.view.scale;for(let w=0;w<E.length;w+=1){const C=E[w][0];if(C.cell.isEdge()){const S=C.cell.getGeometry(),P=[];if(S&&S.points)for(let k=0;k<S.points.length;k++)S.points[k]&&P.push(new Point(S.points[k].x+d/b,S.points[k].y+g/b));let I=C.visibleSourceState,M=C.visibleTargetState;const D=E[w][1].absolutePoints;if(I==null||!this.isCellMoving(I.cell)){const k=D[0];k&&(C.setAbsoluteTerminalPoint(new Point(k.x+d,k.y+g),!0),I=null)}else C.view.updateFixedTerminalPoint(C,I,!0,this.graph.getConnectionConstraint(C,I,!0));if(M==null||!this.isCellMoving(M.cell)){const k=D[D.length-1];k&&(C.setAbsoluteTerminalPoint(new Point(k.x+d,k.y+g),!1),M=null)}else C.view.updateFixedTerminalPoint(C,M,!1,this.graph.getConnectionConstraint(C,M,!1));C.view.updatePoints(C,P,I,M),C.view.updateFloatingTerminalPoints(C,I,M),C.view.updateEdgeLabelOffset(C),C.invalid=!1,this.cloning||C.view.graph.cellRenderer.redraw(C,!0)}}this.graph.view.validate(),this.redrawHandles(E),this.resetPreviewStates(E)}}}redrawHandles(d){const g=this.graph.getPlugin("SelectionCellsHandler");for(let E=0;E<d.length;E+=1){const b=g==null?void 0:g.getHandler(d[E][0].cell);b==null||b.redraw(!0)}}resetPreviewStates(d){for(let g=0;g<d.length;g+=1)d[g][0].setState(d[g][1])}suspend(){this.suspended||(this.livePreviewUsed&&this.updateLivePreview(0,0),this.shape&&(this.shape.node.style.visibility="hidden"),this.guide&&this.guide.setVisible(!1),this.suspended=!0)}resume(){this.suspended&&(this.suspended=!1,this.livePreviewUsed&&(this.livePreviewActive=!0),this.shape&&(this.shape.node.style.visibility="visible"),this.guide&&this.guide.setVisible(!0))}resetLivePreview(){this.allCells.visit((d,g)=>{g.shape&&g.shape.originalPointerEvents!==null&&(g.shape.pointerEvents=g.shape.originalPointerEvents,g.shape.originalPointerEvents=null,g.shape.bounds=null,g.text&&g.text.originalPointerEvents!==null&&(g.text.pointerEvents=g.text.originalPointerEvents,g.text.originalPointerEvents=null)),g.control&&g.control.node&&g.control.node.style.visibility==="hidden"&&(g.control.node.style.visibility=""),this.cloning||g.text&&g.text.updateBoundingBox(),g.view.invalidate(g.cell)}),this.graph.view.validate()}setHandlesVisibleForCells(d,g,E=!1){if(E||this.handlesVisible!==g){this.handlesVisible=g;const b=this.graph.getPlugin("SelectionCellsHandler");for(let w=0;w<d.length;w+=1){const C=b==null?void 0:b.getHandler(d[w]);C&&(C.setHandlesVisible(g),g&&C.redraw())}}}setHighlightColor(d){this.highlight&&this.highlight.setHighlightColor(d)}mouseUp(d,g){if(!g.isConsumed())if(this.livePreviewUsed&&this.resetLivePreview(),this.cell&&this.first&&(this.shape||this.livePreviewUsed)&&isNumeric(this.currentDx)&&isNumeric(this.currentDy)){const{graph:E}=this,b=g.getCell();if(this.connectOnDrop&&!this.target&&b&&b.isVertex()&&b.isConnectable()&&E.isEdgeValid(null,this.cell,b)){const w=E.getPlugin("ConnectionHandler");w==null||w.connect(this.cell,b,g.getEvent())}else{const w=E.isCloneEvent(g.getEvent())&&E.isCellsCloneable()&&this.isCloneEnabled(),{scale:C}=E.getView(),S=this.roundLength(this.currentDx/C),P=this.roundLength(this.currentDy/C),I=this.target;I&&E.isSplitEnabled()&&this.cells&&E.isSplitTarget(I,this.cells,g.getEvent())?E.splitEdge(I,this.cells,null,S,P,g.getGraphX(),g.getGraphY()):this.cells&&this.moveCells(this.cells,S,P,w,this.target,g.getEvent())}}else this.isSelectEnabled()&&this.delayedSelection&&this.cell!=null&&this.selectDelayed(g);this.cellWasClicked&&this.consumeMouseEvent(InternalEvent.MOUSE_UP,g),this.reset()}reset(){if(this.livePreviewUsed){this.resetLivePreview();const d=this.graph.getPlugin("SelectionCellsHandler");this.setHandlesVisibleForCells((d==null?void 0:d.getHandledSelectionCells())??[],!0)}this.destroyShapes(),this.removeHint(),this.delayedSelection=!1,this.livePreviewActive=!1,this.livePreviewUsed=!1,this.cellWasClicked=!1,this.suspended=!1,this.currentDx=0,this.currentDy=0,this.cellCount=0,this.cloning=!1,this.allCells.clear(),this.pBounds=null,this.target=null,this.first=null,this.cells=null,this.cell=null}shouldRemoveCellsFromParent(d,g,E){if(d.isVertex()){const b=this.graph.getView().getState(d);if(b){let w=convertPoint(this.graph.container,getClientX(E),getClientY(E));const C=toRadians(b.style.rotation??0);if(C!==0){const S=Math.cos(-C),P=Math.sin(-C),I=new Point(b.getCenterX(),b.getCenterY());w=getRotatedPoint(w,S,P,I)}return!contains(b,w.x,w.y)}}return!1}moveCells(d,g,E,b,w,C){if(!this.cell)return;b&&(d=this.graph.getCloneableCells(d));const S=this.cell.getParent();!w&&S&&this.isRemoveCellsFromParent()&&this.shouldRemoveCellsFromParent(S,d,C)&&(w=this.graph.getDefaultParent()),b=!!b&&!this.graph.isCellLocked(w||this.graph.getDefaultParent()),this.graph.batchUpdate(()=>{const P=[];if(!b&&w&&this.removeEmptyParents){const M=new Dictionary;for(let D=0;D<d.length;D+=1)M.put(d[D],!0);for(let D=0;D<d.length;D+=1){const k=d[D].getParent();k&&!M.get(k)&&(M.put(k,!0),P.push(k))}}d=this.graph.moveCells(d,g,E,b,w,C);const I=[];for(let M=0;M<P.length;M+=1)this.shouldRemoveParent(P[M])&&I.push(P[M]);this.graph.removeCells(I,!1)}),b&&this.graph.setSelectionCells(d),this.isSelectEnabled()&&this.scrollOnMove&&this.graph.scrollCellToVisible(d[0])}shouldRemoveParent(d){const g=this.graph.view.getState(d);return g!=null&&(g.cell.isEdge()||g.cell.isVertex())&&this.graph.isCellDeletable(g.cell)&&g.cell.getChildCount()===0&&g.isTransparentState()}destroyShapes(){this.shape&&(this.shape.destroy(),this.shape=null),this.guide&&(this.guide.destroy(),this.guide=null),this.highlight&&(this.highlight.destroy(),this.highlight=null)}onDestroy(){this.graph.removeMouseListener(this),this.graph.removeListener(this.panHandler),this.graph.removeListener(this.escapeHandler),this.graph.getDataModel().removeListener(this.refreshHandler),this.graph.removeListener(this.refreshHandler),InternalEvent.removeListener(document,"keydown",this.keyHandler),InternalEvent.removeListener(document,"keyup",this.keyHandler),this.destroyShapes(),this.removeHint()}}SelectionHandler.pluginId="SelectionHandler";class PanningManager{constructor(d){this.damper=1/6,this.delay=10,this.handleMouseOut=!0,this.border=0,this.thread=null,this.active=!1,this.tdx=0,this.tdy=0,this.t0x=0,this.t0y=0,this.dx=0,this.dy=0,this.scrollbars=!1,this.scrollLeft=0,this.scrollTop=0,this.thread=null,this.active=!1,this.tdx=0,this.tdy=0,this.t0x=0,this.t0y=0,this.dx=0,this.dy=0,this.scrollbars=!1,this.scrollLeft=0,this.scrollTop=0,this.mouseListener={mouseDown:(E,b)=>{},mouseMove:(E,b)=>{},mouseUp:(E,b)=>{this.active&&this.stop()}},d.addMouseListener(this.mouseListener),this.mouseUpListener=()=>{this.active&&this.stop()},InternalEvent.addListener(document,"mouseup",this.mouseUpListener);const g=()=>(this.scrollbars=hasScrollbars(d.container),this.scrollLeft=d.container.scrollLeft,this.scrollTop=d.container.scrollTop,window.setInterval(()=>{if(this.tdx-=this.dx,this.tdy-=this.dy,this.scrollbars){const E=-d.container.scrollLeft-Math.ceil(this.dx),b=-d.container.scrollTop-Math.ceil(this.dy);d.panGraph(E,b),d.setPanDx(this.scrollLeft-d.container.scrollLeft),d.setPanDy(this.scrollTop-d.container.scrollTop),d.fireEvent(new EventObject(InternalEvent.PAN))}else d.panGraph(this.getDx(),this.getDy())},this.delay));this.isActive=()=>this.active,this.getDx=()=>Math.round(this.tdx),this.getDy=()=>Math.round(this.tdy),this.start=()=>{this.t0x=d.view.translate.x,this.t0y=d.view.translate.y,this.active=!0},this.panTo=(E,b,w=0,C=0)=>{this.active||this.start(),this.scrollLeft=d.container.scrollLeft,this.scrollTop=d.container.scrollTop;const S=d.container;this.dx=E+w-S.scrollLeft-S.clientWidth,this.dx<0&&Math.abs(this.dx)<this.border?this.dx=this.border+this.dx:this.handleMouseOut?this.dx=Math.max(this.dx,0):this.dx=0,this.dx==0&&(this.dx=E-S.scrollLeft,this.dx>0&&this.dx<this.border?this.dx-=this.border:this.handleMouseOut?this.dx=Math.min(0,this.dx):this.dx=0),this.dy=b+C-S.scrollTop-S.clientHeight,this.dy<0&&Math.abs(this.dy)<this.border?this.dy=this.border+this.dy:this.handleMouseOut?this.dy=Math.max(this.dy,0):this.dy=0,this.dy==0&&(this.dy=b-S.scrollTop,this.dy>0&&this.dy<this.border?this.dy-=this.border:this.handleMouseOut?this.dy=Math.min(0,this.dy):this.dy=0),this.dx!=0||this.dy!=0?(this.dx*=this.damper,this.dy*=this.damper,this.thread==null&&(this.thread=g())):this.thread!=null&&(window.clearInterval(this.thread),this.thread=null)},this.stop=()=>{if(this.active)if(this.active=!1,this.thread!=null&&(window.clearInterval(this.thread),this.thread=null),this.tdx=0,this.tdy=0,this.scrollbars)d.setPanDx(0),d.setPanDy(0),d.fireEvent(new EventObject(InternalEvent.PAN));else{const E=d.getPanDx(),b=d.getPanDy();(E!=0||b!=0)&&(d.panGraph(0,0),d.view.setTranslate(this.t0x+E/d.view.scale,this.t0y+b/d.view.scale))}},this.destroy=()=>{d.removeMouseListener(this.mouseListener),InternalEvent.removeListener(document,"mouseup",this.mouseUpListener)}}}class PanningHandler extends EventSource{constructor(d){super(),this.getPanningManager=()=>this.panningManager,this.useLeftButtonForPanning=!1,this.usePopupTrigger=!0,this.ignoreCell=!1,this.previewEnabled=!0,this.useGrid=!1,this.panningEnabled=!1,this.pinchEnabled=!0,this.initialScale=0,this.maxScale=8,this.minScale=.01,this.dx=0,this.dy=0,this.startX=0,this.startY=0,this.dx0=0,this.dy0=0,this.panningTrigger=!1,this.active=!1,this.mouseDownEvent=null,this.graph=d,this.graph.addMouseListener(this),this.forcePanningHandler=(g,E)=>{const b=E.getProperty("eventName"),w=E.getProperty("event");b===InternalEvent.MOUSE_DOWN&&this.isForcePanningEvent(w)&&(this.start(w),this.active=!0,this.fireEvent(new EventObject(InternalEvent.PAN_START,{event:w})),w.consume())},this.graph.addListener(InternalEvent.FIRE_MOUSE_EVENT,this.forcePanningHandler),this.gestureHandler=(g,E)=>{if(this.isPinchEnabled()){const b=E.getProperty("event");!isConsumed(b)&&b.type==="gesturestart"?(this.initialScale=this.graph.view.scale,!this.active&&this.mouseDownEvent&&(this.start(this.mouseDownEvent),this.mouseDownEvent=null)):b.type==="gestureend"&&this.initialScale!==0&&(this.initialScale=0),this.initialScale!==0&&this.zoomGraph(b)}},this.graph.addListener(InternalEvent.GESTURE,this.gestureHandler),this.mouseUpListener=()=>{this.active&&this.reset()},InternalEvent.addListener(document,"mouseup",this.mouseUpListener),this.panningManager=new PanningManager(d)}isActive(){return this.active||this.initialScale!==null}isPanningEnabled(){return this.panningEnabled}setPanningEnabled(d){this.panningEnabled=d}isPinchEnabled(){return this.pinchEnabled}setPinchEnabled(d){this.pinchEnabled=d}isPanningTrigger(d){const g=d.getEvent();return this.useLeftButtonForPanning&&!d.getState()&&isLeftMouseButton(g)||isControlDown(g)&&isShiftDown(g)||this.usePopupTrigger&&isPopupTrigger(g)}isForcePanningEvent(d){return this.ignoreCell||isMultiTouchEvent(d.getEvent())}mouseDown(d,g){this.mouseDownEvent=g,!g.isConsumed()&&this.isPanningEnabled()&&!this.active&&this.isPanningTrigger(g)&&(this.start(g),this.consumePanningTrigger(g))}start(d){this.dx0=-this.graph.container.scrollLeft,this.dy0=-this.graph.container.scrollTop,this.startX=d.getX(),this.startY=d.getY(),this.dx=0,this.dy=0,this.panningTrigger=!0}consumePanningTrigger(d){d.consume()}mouseMove(d,g){if(this.dx=g.getX()-this.startX,this.dy=g.getY()-this.startY,this.active)this.previewEnabled&&(this.useGrid&&(this.dx=this.graph.snap(this.dx),this.dy=this.graph.snap(this.dy)),this.graph.panGraph(this.dx+this.dx0,this.dy+this.dy0)),this.fireEvent(new EventObject(InternalEvent.PAN,{event:g}));else if(this.panningTrigger){const E=this.active;this.active=Math.abs(this.dx)>this.graph.getSnapTolerance()||Math.abs(this.dy)>this.graph.getSnapTolerance(),!E&&this.active&&this.fireEvent(new EventObject(InternalEvent.PAN_START,{event:g}))}(this.active||this.panningTrigger)&&g.consume()}mouseUp(d,g){if(this.active){if(this.dx!==0&&this.dy!==0){if(!this.graph.isUseScrollbarsForPanning()||!hasScrollbars(this.graph.container)){const{scale:E}=this.graph.getView(),b=this.graph.getView().translate;this.graph.panGraph(0,0),this.panGraph(b.x+this.dx/E,b.y+this.dy/E)}g.consume()}this.fireEvent(new EventObject(InternalEvent.PAN_END,{event:g}))}this.reset()}zoomGraph(d){let g=Math.round(this.initialScale*d.scale*100)/100;g=Math.max(this.minScale,g),g=Math.min(this.maxScale,g),this.graph.view.scale!==g&&(this.graph.zoomTo(g),InternalEvent.consume(d))}reset(){this.panningTrigger=!1,this.mouseDownEvent=null,this.active=!1,this.dx=0,this.dy=0}panGraph(d,g){this.graph.getView().setTranslate(d,g)}onDestroy(){this.graph.removeMouseListener(this),this.graph.removeListener(this.forcePanningHandler),this.graph.removeListener(this.gestureHandler),InternalEvent.removeListener(document,"mouseup",this.mouseUpListener)}}PanningHandler.pluginId="PanningHandler";const getDefaultPlugins=()=>[CellEditorHandler,TooltipHandler,SelectionCellsHandler,PopupMenuHandler,ConnectionHandler,SelectionHandler,PanningHandler];class Graph extends EventSource{createCellRenderer(){return new CellRenderer}createEdgeHandlerInstance(d){return new EdgeHandler(d)}createEdgeSegmentHandler(d){return new EdgeSegmentHandler(d)}createElbowEdgeHandler(d){return new ElbowEdgeHandler(d)}createGraphDataModel(){return new GraphDataModel}createGraphView(){return new GraphView(this)}createSelectionModel(){return new GraphSelectionModel(this)}createStylesheet(){return new Stylesheet}createVertexHandler(d){return new VertexHandler(d)}registerDefaults(){registerDefaultShapes(),registerDefaultStyleElements(),registerDefaultEdgeMarkers()}constructor(d,g,E=getDefaultPlugins(),b=null){super(),this.destroyed=!1,this.graphModelChangeListener=null,this.paintBackground=null,this.isConstrainedMoving=!1,this.cells=[],this.imageBundles=[],this.mouseListeners=[],this.multiplicities=[],this.plugins={},this.renderHint=null,this.dialect="svg",this.defaultOverlap=.5,this.defaultParent=null,this.backgroundImage=null,this.pageVisible=!1,this.pageBreaksVisible=!1,this.pageBreakColor="gray",this.pageBreakDashed=!0,this.minPageBreakDist=20,this.preferPageSize=!1,this.pageFormat=new Rectangle(...PAGE_FORMAT_A4_PORTRAIT),this.pageScale=1.5,this.enabled=!0,this.exportEnabled=!0,this.importEnabled=!0,this.ignoreScrollbars=!1,this.translateToScrollPosition=!1,this.maximumGraphBounds=null,this.minimumGraphSize=null,this.minimumContainerSize=null,this.maximumContainerSize=null,this.resizeContainer=!1,this.border=0,this.keepEdgesInForeground=!1,this.keepEdgesInBackground=!1,this.recursiveResize=!1,this.resetViewOnRootChange=!0,this.allowLoops=!1,this.defaultLoopStyle=EdgeStyle.Loop,this.multigraph=!0,this.minFitScale=.1,this.maxFitScale=8,this.warningImage=new ImageBox(`${Client.imageBasePath}/warning${Client.IS_MAC?".png":".gif"}`,16,16),this.alreadyConnectedResource=Client.language!="none"?"alreadyConnected":"",this.containsValidationErrorsResource=Client.language!="none"?"containsValidationErrors":"",this.getContainer=()=>this.container,this.getPlugin=w=>this.plugins[w],this.getCellRenderer=()=>this.cellRenderer,this.getDialect=()=>this.dialect,this.isPageVisible=()=>this.pageVisible,this.isPageBreaksVisible=()=>this.pageBreaksVisible,this.getPageBreakColor=()=>this.pageBreakColor,this.isPageBreakDashed=()=>this.pageBreakDashed,this.getMinPageBreakDist=()=>this.minPageBreakDist,this.isPreferPageSize=()=>this.preferPageSize,this.getPageFormat=()=>this.pageFormat,this.getPageScale=()=>this.pageScale,this.isExportEnabled=()=>this.exportEnabled,this.isImportEnabled=()=>this.importEnabled,this.isIgnoreScrollbars=()=>this.ignoreScrollbars,this.isTranslateToScrollPosition=()=>this.translateToScrollPosition,this.getMinimumGraphSize=()=>this.minimumGraphSize,this.setMinimumGraphSize=w=>this.minimumGraphSize=w,this.getMinimumContainerSize=()=>this.minimumContainerSize,this.setMinimumContainerSize=w=>this.minimumContainerSize=w,this.getAlreadyConnectedResource=()=>this.alreadyConnectedResource,this.getContainsValidationErrorsResource=()=>this.containsValidationErrorsResource,this.registerDefaults(),this.container=d??document.createElement("div"),this.model=g??this.createGraphDataModel(),this.cellRenderer=this.createCellRenderer(),this.setStylesheet(b??this.createStylesheet()),this.view=this.createGraphView(),this.graphModelChangeListener=(w,C)=>{this.graphModelChanged(C.getProperty("edit").changes)},this.getDataModel().addListener(InternalEvent.CHANGE,this.graphModelChangeListener),this.view.init(),this.sizeDidChange(),this.setSelectionModel(this.createSelectionModel()),E.forEach(w=>this.plugins[w.pluginId]=new w(this)),this.view.revalidate()}getWarningImage(){return this.warningImage}batchUpdate(d){this.getDataModel().batchUpdate(d)}getDataModel(){return this.model}getView(){return this.view}getStylesheet(){return this.stylesheet}setStylesheet(d){this.stylesheet=d}graphModelChanged(d){for(const g of d)this.processChange(g);this.updateSelection(),this.view.validate(),this.sizeDidChange()}processChange(d){if(d instanceof RootChange)this.clearSelection(),this.setDefaultParent(null),d.previous&&this.removeStateForCell(d.previous),this.resetViewOnRootChange&&(this.view.scale=1,this.view.translate.x=0,this.view.translate.y=0),this.fireEvent(new EventObject(InternalEvent.ROOT));else if(d instanceof ChildChange){const g=d.child.getParent();this.view.invalidate(d.child,!0,!0),(!g||!this.getDataModel().contains(g)||g.isCollapsed())&&(this.view.invalidate(d.child,!0,!0),this.removeStateForCell(d.child),this.view.currentRoot==d.child&&this.home()),g!=d.previous&&(g!=null&&this.view.invalidate(g,!1,!1),d.previous!=null&&this.view.invalidate(d.previous,!1,!1))}else if(d instanceof TerminalChange||d instanceof GeometryChange)(d instanceof TerminalChange||d.previous==null&&d.geometry!=null||d.previous!=null&&!d.previous.equals(d.geometry))&&this.view.invalidate(d.cell);else if(d instanceof ValueChange)this.view.invalidate(d.cell,!1,!1);else if(d instanceof StyleChange){this.view.invalidate(d.cell,!0,!0);const g=this.view.getState(d.cell);g!=null&&(g.invalidStyle=!0)}else d.cell!=null&&d.cell instanceof Cell&&this.removeStateForCell(d.cell)}scrollPointToVisible(d,g,E=!1,b=20){const w=this.getPlugin("PanningHandler");if(!this.isTimerAutoScroll()&&(this.ignoreScrollbars||hasScrollbars(this.container))){const C=this.container;if(d>=C.scrollLeft&&g>=C.scrollTop&&d<=C.scrollLeft+C.clientWidth&&g<=C.scrollTop+C.clientHeight){let S=C.scrollLeft+C.clientWidth-d;if(S<b){const I=C.scrollLeft;if(C.scrollLeft+=b-S,E&&I===C.scrollLeft){const M=this.view.getDrawPane().ownerSVGElement,D=C.scrollWidth+b-S;M.style.width=`${D}px`,C.scrollLeft+=b-S}}else S=d-C.scrollLeft,S<b&&(C.scrollLeft-=b-S);let P=C.scrollTop+C.clientHeight-g;if(P<b){const I=C.scrollTop;if(C.scrollTop+=b-P,I==C.scrollTop&&E){const M=this.view.getDrawPane().ownerSVGElement,D=C.scrollHeight+b-P;M.style.height=`${D}px`,C.scrollTop+=b-P}}else P=g-C.scrollTop,P<b&&(C.scrollTop-=b-P)}}else this.isAllowAutoPanning()&&w&&!w.isActive()&&w.getPanningManager().panTo(d+this.getPanDx(),g+this.getPanDy())}getBorderSizes(){const d=getCurrentStyle(this.container);return new Rectangle(parseCssNumber(d.paddingLeft)+(d.borderLeftStyle!="none"?parseCssNumber(d.borderLeftWidth):0),parseCssNumber(d.paddingTop)+(d.borderTopStyle!="none"?parseCssNumber(d.borderTopWidth):0),parseCssNumber(d.paddingRight)+(d.borderRightStyle!="none"?parseCssNumber(d.borderRightWidth):0),parseCssNumber(d.paddingBottom)+(d.borderBottomStyle!="none"?parseCssNumber(d.borderBottomWidth):0))}getPreferredPageSize(d,g,E){const b=this.view.translate,w=this.pageFormat,C=this.pageScale,S=new Rectangle(0,0,Math.ceil(w.width*C),Math.ceil(w.height*C)),P=this.pageBreaksVisible?Math.ceil(g/S.width):1,I=this.pageBreaksVisible?Math.ceil(E/S.height):1;return new Rectangle(0,0,P*S.width+2+b.x,I*S.height+2+b.y)}fit(d=this.getBorder(),g=!1,E=0,b=!0,w=!1,C=!1,S=null){if(this.container!=null){const P=this.getBorderSizes();let I=this.container.offsetWidth-P.x-P.width-1,M=S??this.container.offsetHeight-P.y-P.height-1,D=this.view.getGraphBounds();if(D.width>0&&D.height>0){g&&D.x!=null&&D.y!=null&&(D=D.clone(),D.width+=D.x,D.height+=D.y,D.x=0,D.y=0);const k=this.view.scale;let H=D.width/k,F=D.height/k;this.backgroundImage!=null&&(H=Math.max(H,this.backgroundImage.width-D.x/k),F=Math.max(F,this.backgroundImage.height-D.y/k));const j=(g?d:2*d)+E+1;I-=j,M-=j;let $=w?M/F:C?I/H:Math.min(I/H,M/F);if(this.minFitScale!=null&&($=Math.max($,this.minFitScale)),this.maxFitScale!=null&&($=Math.min($,this.maxFitScale)),b)if(g)this.view.scale!=$&&this.view.setScale($);else if(hasScrollbars(this.container)){this.view.setScale($);const z=this.getGraphBounds();z.x!=null&&(this.container.scrollLeft=z.x),z.y!=null&&(this.container.scrollTop=z.y)}else{const z=D.x!=null?Math.floor(this.view.translate.x-D.x/k+d/$+E/2):d,U=D.y!=null?Math.floor(this.view.translate.y-D.y/k+d/$+E/2):d;this.view.scaleAndTranslate($,z,U)}else return $}}return this.view.scale}doResizeContainer(d,g){this.maximumContainerSize!=null&&(d=Math.min(this.maximumContainerSize.width,d),g=Math.min(this.maximumContainerSize.height,g));const E=this.container;E.style.width=`${Math.ceil(d)}px`,E.style.height=`${Math.ceil(g)}px`}createHandler(d){let g=null;if(d.cell.isEdge()){const E=d.getVisibleTerminalState(!0),b=d.getVisibleTerminalState(!1),w=d.cell.getGeometry(),C=this.getView().getEdgeStyle(d,w&&w.points||void 0,E,b);g=this.createEdgeHandler(d,C)}else g=this.createVertexHandler(d);return g}createEdgeHandler(d,g){let E=null;return g==EdgeStyle.Loop||g==EdgeStyle.ElbowConnector||g==EdgeStyle.SideToSide||g==EdgeStyle.TopToBottom?E=this.createElbowEdgeHandler(d):g==EdgeStyle.SegmentConnector||g==EdgeStyle.OrthConnector?E=this.createEdgeSegmentHandler(d):E=this.createEdgeHandlerInstance(d),E}getCurrentRoot(){return this.view.currentRoot}getTranslateForRoot(d){return null}getChildOffsetForCell(d){return null}home(){const d=this.getCurrentRoot();d!=null&&(this.view.setCurrentRoot(null),this.view.getState(d)!=null&&this.setSelectionCell(d))}isValidRoot(d){return!!d}getGraphBounds(){return this.view.getGraphBounds()}getMaximumGraphBounds(){return this.maximumGraphBounds}refresh(d=null){d?this.view.clear(d,!1):this.view.clear(void 0,!0),this.view.validate(),this.sizeDidChange(),this.fireEvent(new EventObject(InternalEvent.REFRESH))}center(d=!0,g=!0,E=.5,b=.5){const w=this.container,C=hasScrollbars(this.container),S=2*this.getBorder(),P=w.clientWidth-S,I=w.clientHeight-S,M=this.getGraphBounds(),D=this.view.translate,k=this.view.scale;let H=d?P-M.width:0,F=g?I-M.height:0;if(!C)this.view.setTranslate(d?Math.floor(D.x-M.x/k+H*E/k):D.x,g?Math.floor(D.y-M.y/k+F*b/k):D.y);else{M.x-=D.x,M.y-=D.y;const j=w.scrollWidth,$=w.scrollHeight;j>P&&(H=0),$>I&&(F=0),this.view.setTranslate(Math.floor(H/2-M.x),Math.floor(F/2-M.y)),w.scrollLeft=(j-P)/2,w.scrollTop=($-I)/2}}isOrthogonal(d){const g=d.style.orthogonal;if(g!=null)return g;const E=this.view.getEdgeStyle(d);return E===EdgeStyle.SegmentConnector||E===EdgeStyle.ElbowConnector||E===EdgeStyle.SideToSide||E===EdgeStyle.TopToBottom||E===EdgeStyle.EntityRelation||E===EdgeStyle.OrthConnector}getBackgroundImage(){return this.backgroundImage}setBackgroundImage(d){this.backgroundImage=d}convertValueToString(d){const g=d.getValue();if(g!=null){if(isNode(g))return g.nodeName;if(typeof g.toString=="function")return g.toString()}return""}getLinkForCell(d){return null}getBorder(){return this.border}setBorder(d){this.border=d}isResizeContainer(){return this.resizeContainer}setResizeContainer(d){this.resizeContainer=d}isEnabled(){return this.enabled}setEnabled(d){this.enabled=d}isMultigraph(){return this.multigraph}setMultigraph(d){this.multigraph=d}isAllowLoops(){return this.allowLoops}setAllowLoops(d){this.allowLoops=d}isRecursiveResize(d=null){return this.recursiveResize}setRecursiveResize(d){this.recursiveResize=d}getOverlap(d){return this.isAllowOverlapParent(d)?this.defaultOverlap:0}isAllowOverlapParent(d){return!1}getDefaultParent(){let d=this.getCurrentRoot();return d||(d=this.defaultParent,d||(d=this.getDataModel().getRoot().getChildAt(0))),d}setDefaultParent(d){this.defaultParent=d}destroy(){this.destroyed||(this.destroyed=!0,Object.values(this.plugins).forEach(d=>d.onDestroy()),this.view.destroy(),this.model&&this.graphModelChangeListener&&(this.getDataModel().removeListener(this.graphModelChangeListener),this.graphModelChangeListener=null))}}applyGraphMixins();class KeyHandler{constructor(d,g=null){this.keydownHandler=null,this.graph=null,this.target=null,this.normalKeys={},this.shiftKeys={},this.controlKeys={},this.controlShiftKeys={},this.enabled=!0,d!=null&&(this.graph=d,this.target=g||document.documentElement,this.keydownHandler=E=>{this.keyDown(E)},InternalEvent.addListener(this.target,"keydown",this.keydownHandler))}isEnabled(){return this.enabled}setEnabled(d){this.enabled=d}bindKey(d,g){this.normalKeys[d]=g}bindShiftKey(d,g){this.shiftKeys[d]=g}bindControlKey(d,g){this.controlKeys[d]=g}bindControlShiftKey(d,g){this.controlShiftKeys[d]=g}isControlDown(d){return isControlDown(d)}getFunction(d){return d!=null&&!isAltDown(d)?this.isControlDown(d)?isShiftDown(d)?this.controlShiftKeys[d.keyCode]:this.controlKeys[d.keyCode]:isShiftDown(d)?this.shiftKeys[d.keyCode]:this.normalKeys[d.keyCode]:null}isGraphEvent(d){var b;const g=getSource(d),E=(b=this.graph)==null?void 0:b.getPlugin("CellEditorHandler");return g===this.target||g.parentNode===this.target||E&&E.isEventSource(d)?!0:isAncestorNode(this.graph.container,g)}keyDown(d){if(this.isEnabledForEvent(d)){if(d.keyCode===27)this.escape(d);else if(!this.isEventIgnored(d)){const g=this.getFunction(d);g!=null&&(g(d),InternalEvent.consume(d))}}}isEnabledForEvent(d){return this.graph.isEnabled()&&!isConsumed(d)&&this.isGraphEvent(d)&&this.isEnabled()}isEventIgnored(d){return this.graph.isEditing()}escape(d){this.graph.isEscapeEnabled()&&this.graph.escape(d)}onDestroy(){this.target!=null&&this.keydownHandler!=null&&(InternalEvent.removeListener(this.target,"keydown",this.keydownHandler),this.keydownHandler=null),this.target=null}}class MaxToolbar extends EventSource{constructor(d){super(),this.menu=null,this.currentImg=null,this.selectedMode=null,this.defaultMode=null,this.defaultFunction=null,this.enabled=!0,this.noReset=!1,this.updateDefaultMode=!0,this.container=d}addItem(d=null,g=null,E=null,b=null,w=null,C=null){const S=document.createElement(g!=null?"img":"button"),P=w||(C?"mxToolbarMode":"mxToolbarItem");S.className=P,g&&S.setAttribute("src",g),d!=null&&(g!=null?S.setAttribute("title",d):write(S,d)),this.container.appendChild(S),E!=null&&(InternalEvent.addListener(S,"click",E),Client.IS_TOUCH&&InternalEvent.addListener(S,"touchend",E));const I=M=>{b!=null?S.setAttribute("src",g):S.style.backgroundColor=""};return InternalEvent.addGestureListeners(S,M=>{if(b!=null?S.setAttribute("src",b):S.style.backgroundColor="gray",C){this.menu==null&&(this.menu=new MaxPopupMenu);const D=this.currentImg;if(this.menu.isMenuShowing()&&this.menu.hideMenu(),D!=S){this.currentImg=S,this.menu.factoryMethod=C;const k=new Point(S.offsetLeft,S.offsetTop+S.offsetHeight);if(this.menu.popup(k.x,k.y,null,M),this.menu.isMenuShowing()){S.className=`${P}Selected`;const H=this.menu.hideMenu;this.menu.hideMenu=()=>{H.apply(this),S.className=P,this.currentImg=null}}}}},null,I),InternalEvent.addListener(S,"mouseout",I),S}addCombo(d){const g=document.createElement("div");g.style.display="inline",g.className="mxToolbarComboContainer";const E=document.createElement("select");return E.className=d||"mxToolbarCombo",g.appendChild(E),this.container.appendChild(g),E}addActionCombo(d,g){const E=document.createElement("select");return E.className=g||"mxToolbarCombo",this.addOption(E,d,null),InternalEvent.addListener(E,"change",b=>{const w=E.options[E.selectedIndex];E.selectedIndex=0,w.funct!=null&&w.funct(b)}),this.container.appendChild(E),E}addOption(d,g,E=null){const b=document.createElement("option");return writeln(b,g),typeof E=="function"?b.funct=E:b.setAttribute("value",E),d.appendChild(b),b}addSwitchMode(d,g,E,b=null,w="mxToolbarMode"){const C=document.createElement("img");return C.initialClassName=w,C.className=C.initialClassName,C.setAttribute("src",g),C.altIcon=b,d!=null&&C.setAttribute("title",d),InternalEvent.addListener(C,"click",S=>{const P=this.selectedMode;let I=P.altIcon;I!=null?(P.altIcon=P.getAttribute("src"),P.setAttribute("src",I)):P.className=P.initialClassName,this.updateDefaultMode&&(this.defaultMode=C),this.selectedMode=C,I=C.altIcon,I!=null?(C.altIcon=C.getAttribute("src"),C.setAttribute("src",I)):C.className=`${C.initialClassName}Selected`,this.fireEvent(new EventObject(InternalEvent.SELECT)),E()}),this.container.appendChild(C),this.defaultMode==null&&(this.defaultMode=C,this.selectMode(C),E()),C}addMode(d=null,g=null,E,b,w=null,C=!1){C=C??!0;const S=document.createElement(g!=null?"img":"button");return S.initialClassName=w||"mxToolbarMode",S.className=S.initialClassName,g&&S.setAttribute("src",g),S.altIcon=b,d!=null&&S.setAttribute("title",d),this.enabled&&C&&(InternalEvent.addListener(S,"click",P=>{this.selectMode(S,E),this.noReset=!1}),InternalEvent.addListener(S,"dblclick",P=>{this.selectMode(S,E),this.noReset=!0}),this.defaultMode==null&&(this.defaultMode=S,this.defaultFunction=E,this.selectMode(S,E))),this.container.appendChild(S),S}selectMode(d,g=null){if(this.selectedMode!=d){if(this.selectedMode!=null){const b=this.selectedMode.altIcon;b!=null?(this.selectedMode.altIcon=this.selectedMode.getAttribute("src"),this.selectedMode.setAttribute("src",b)):this.selectedMode.className=this.selectedMode.initialClassName}this.selectedMode=d;const E=this.selectedMode.altIcon;E!=null?(this.selectedMode.altIcon=this.selectedMode.getAttribute("src"),this.selectedMode.setAttribute("src",E)):this.selectedMode.className=`${this.selectedMode.initialClassName}Selected`,this.fireEvent(new EventObject(InternalEvent.SELECT,{function:g}))}}resetMode(d=!1){(d||!this.noReset)&&this.selectedMode!=this.defaultMode&&this.selectMode(this.defaultMode,this.defaultFunction)}addSeparator(d){return this.addItem(null,d,null)}addBreak(){br(this.container)}addLine(){const d=document.createElement("hr");d.style.marginRight="6px",d.setAttribute("size","1"),this.container.appendChild(d)}destroy(){InternalEvent.release(this.container),this.container=null,this.defaultMode=null,this.defaultFunction=null,this.selectedMode=null,this.menu!=null&&this.menu.destroy()}}class DragSource{constructor(d,g){this.dragOffset=null,this.dragElement=null,this.previewElement=null,this.previewOffset=null,this.enabled=!0,this.currentGraph=null,this.currentDropTarget=null,this.currentPoint=null,this.currentGuide=null,this.currentHighlight=null,this.autoscroll=!0,this.guidesEnabled=!0,this.gridEnabled=!0,this.highlightDropTargets=!0,this.dragElementZIndex=100,this.dragElementOpacity=70,this.checkEventSource=!0,this.mouseMoveHandler=null,this.mouseUpHandler=null,this.eventSource=null,this.element=d,this.dropHandler=g,InternalEvent.addGestureListeners(d,E=>{this.mouseDown(E)}),InternalEvent.addListener(d,"dragstart",E=>{InternalEvent.consume(E)}),this.eventConsumer=(E,b)=>{const w=b.getProperty("eventName"),C=b.getProperty("event");w!==InternalEvent.MOUSE_DOWN&&C.consume()}}isEnabled(){return this.enabled}setEnabled(d){this.enabled=d}isGuidesEnabled(){return this.guidesEnabled}setGuidesEnabled(d){this.guidesEnabled=d}isGridEnabled(){return this.gridEnabled}setGridEnabled(d){this.gridEnabled=d}getGraphForEvent(d){return null}getDropTarget(d,g,E,b){return d.getCellAt(g,E)}createDragElement(d){return this.element.cloneNode(!0)}createPreviewElement(d){return null}isActive(){return!!this.mouseMoveHandler}reset(){this.currentGraph&&(this.dragExit(this.currentGraph),this.currentGraph=null),this.removeDragElement(),this.removeListeners(),this.stopDrag()}mouseDown(d){this.enabled&&!isConsumed(d)&&this.mouseMoveHandler==null&&(this.startDrag(d),this.mouseMoveHandler=this.mouseMove.bind(this),this.mouseUpHandler=this.mouseUp.bind(this),InternalEvent.addGestureListeners(document,null,this.mouseMoveHandler,this.mouseUpHandler),Client.IS_TOUCH&&!isMouseEvent(d)&&(this.eventSource=getSource(d),this.eventSource&&InternalEvent.addGestureListeners(this.eventSource,null,this.mouseMoveHandler,this.mouseUpHandler)))}startDrag(d){this.dragElement=this.createDragElement(d),this.dragElement.style.position="absolute",this.dragElement.style.zIndex=String(this.dragElementZIndex),setOpacity(this.dragElement,this.dragElementOpacity),this.checkEventSource&&Client.IS_SVG&&(this.dragElement.style.pointerEvents="none")}stopDrag(){this.removeDragElement()}removeDragElement(){this.dragElement&&(this.dragElement.parentNode&&this.dragElement.parentNode.removeChild(this.dragElement),this.dragElement=null)}getElementForEvent(d){return isTouchEvent(d)||isPenEvent(d)?document.elementFromPoint(getClientX(d),getClientY(d)):getSource(d)}graphContainsEvent(d,g){const E=getClientX(g),b=getClientY(g),w=getOffset(d.container),C=getScrollOrigin();let S=this.getElementForEvent(g);if(this.checkEventSource)for(;S&&S!==d.container;)S=S.parentNode;return!!S&&E>=w.x-C.x&&b>=w.y-C.y&&E<=w.x-C.x+d.container.offsetWidth&&b<=w.y-C.y+d.container.offsetHeight}mouseMove(d){let g=this.getGraphForEvent(d);if(g&&!this.graphContainsEvent(g,d)&&(g=null),g!==this.currentGraph&&(this.currentGraph&&this.dragExit(this.currentGraph,d),this.currentGraph=g,this.currentGraph&&this.dragEnter(this.currentGraph,d)),this.currentGraph&&this.dragOver(this.currentGraph,d),this.dragElement&&(!this.previewElement||this.previewElement.style.visibility!=="visible")){let E=getClientX(d),b=getClientY(d);this.dragElement.parentNode==null&&document.body.appendChild(this.dragElement),this.dragElement.style.visibility="visible",this.dragOffset&&(E+=this.dragOffset.x,b+=this.dragOffset.y);const w=getDocumentScrollOrigin(document);this.dragElement.style.left=`${E+w.x}px`,this.dragElement.style.top=`${b+w.y}px`}else this.dragElement&&(this.dragElement.style.visibility="hidden");InternalEvent.consume(d)}mouseUp(d){if(this.currentGraph){if(this.currentPoint&&(!this.previewElement||this.previewElement.style.visibility!=="hidden")){const{scale:g}=this.currentGraph.view,E=this.currentGraph.view.translate,b=this.currentPoint.x/g-E.x,w=this.currentPoint.y/g-E.y;this.drop(this.currentGraph,d,this.currentDropTarget,b,w)}this.dragExit(this.currentGraph),this.currentGraph=null}this.stopDrag(),this.removeListeners(),InternalEvent.consume(d)}removeListeners(){this.eventSource&&(InternalEvent.removeGestureListeners(this.eventSource,null,this.mouseMoveHandler,this.mouseUpHandler),this.eventSource=null),InternalEvent.removeGestureListeners(document,null,this.mouseMoveHandler,this.mouseUpHandler),this.mouseMoveHandler=null,this.mouseUpHandler=null}dragEnter(d,g){if(d.isMouseDown=!0,d.isMouseTrigger=isMouseEvent(g),this.previewElement=this.createPreviewElement(d),this.previewElement&&this.checkEventSource&&Client.IS_SVG&&(this.previewElement.style.pointerEvents="none"),this.isGuidesEnabled()&&this.previewElement){const E=d.getPlugin("SelectionHandler");this.currentGuide=new Guide(d,E==null?void 0:E.getGuideStates())}this.highlightDropTargets&&(this.currentHighlight=new CellHighlight(d,DROP_TARGET_COLOR)),d.addListener(InternalEvent.FIRE_MOUSE_EVENT,this.eventConsumer)}dragExit(d,g){this.currentDropTarget=null,this.currentPoint=null,d.isMouseDown=!1,d.removeListener(this.eventConsumer),this.previewElement&&(this.previewElement.parentNode&&this.previewElement.parentNode.removeChild(this.previewElement),this.previewElement=null),this.currentGuide&&(this.currentGuide.destroy(),this.currentGuide=null),this.currentHighlight&&(this.currentHighlight.destroy(),this.currentHighlight=null)}dragOver(d,g){const E=getOffset(d.container),b=getScrollOrigin(d.container);let w=getClientX(g)-E.x+b.x-d.getPanDx(),C=getClientY(g)-E.y+b.y-d.getPanDy();if(d.isAutoScroll()&&(!this.autoscroll||this.autoscroll)&&d.scrollPointToVisible(w,C,d.isAutoExtend()),this.currentHighlight&&d.isDropEnabled()&&(this.currentDropTarget=this.getDropTarget(d,w,C,g),this.currentDropTarget)){const S=d.getView().getState(this.currentDropTarget);this.currentHighlight.highlight(S)}if(this.previewElement){this.previewElement.parentNode||(d.container.appendChild(this.previewElement),this.previewElement.style.zIndex="3",this.previewElement.style.position="absolute");const S=this.isGridEnabled()&&d.isGridEnabledEvent(g);let P=!0;if(this.currentGuide&&this.currentGuide.isEnabledForEvent(g)){const I=parseInt(this.previewElement.style.width),M=parseInt(this.previewElement.style.height),D=new Rectangle(0,0,I,M);let k=new Point(w,C);k=this.currentGuide.move(D,k,S,!0),P=!1,w=k.x,C=k.y}else if(S){const{scale:I}=d.view,M=d.view.translate,D=d.getGridSize()/2;w=(d.snap(w/I-M.x-D)+M.x)*I,C=(d.snap(C/I-M.y-D)+M.y)*I}this.currentGuide&&P&&this.currentGuide.hide(),this.previewOffset&&(w+=this.previewOffset.x,C+=this.previewOffset.y),this.previewElement.style.left=`${Math.round(w)}px`,this.previewElement.style.top=`${Math.round(C)}px`,this.previewElement.style.visibility="visible"}this.currentPoint=new Point(w,C)}drop(d,g,E=null,b,w){this.dropHandler(d,g,E,b,w),d.container.style.visibility!=="hidden"&&d.container.focus()}}const makeDraggable=(x,d,g,E=null,b=null,w=null,C=null,S=!1,P=!0,I=null)=>{const M=new DragSource(x,g);return M.dragOffset=new Point(b??0,w??TOOLTIP_VERTICAL_OFFSET),C!=null&&(M.autoscroll=C),M.setGuidesEnabled(!1),P!=null&&(M.highlightDropTargets=P),I!=null&&(M.getDropTarget=I),M.getGraphForEvent=D=>typeof d=="function"?d(D):d,E!=null&&(M.createDragElement=()=>E.cloneNode(!0),S&&(M.createPreviewElement=D=>{const k=E.cloneNode(!0),H=parseInt(k.style.width),F=parseInt(k.style.height);return k.style.width=`${Math.round(H*D.view.scale)}px`,k.style.height=`${Math.round(F*D.view.scale)}px`,k})),M};class UndoManager extends EventSource{constructor(d=100){super(),this.size=100,this.history=[],this.indexOfNextAdd=0,this.size=d,this.clear()}isEmpty(){return this.history.length==0}clear(){this.history=[],this.indexOfNextAdd=0,this.fireEvent(new EventObject(InternalEvent.CLEAR))}canUndo(){return this.indexOfNextAdd>0}undo(){for(;this.indexOfNextAdd>0;){const d=this.history[--this.indexOfNextAdd];if(d.undo(),d.isSignificant()){this.fireEvent(new EventObject(InternalEvent.UNDO,{edit:d}));break}}}canRedo(){return this.indexOfNextAdd<this.history.length}redo(){const d=this.history.length;for(;this.indexOfNextAdd<d;){const g=this.history[this.indexOfNextAdd++];if(g.redo(),g.isSignificant()){this.fireEvent(new EventObject(InternalEvent.REDO,{edit:g}));break}}}undoableEditHappened(d){this.trim(),this.size>0&&this.size==this.history.length&&this.history.shift(),this.history.push(d),this.indexOfNextAdd=this.history.length,this.fireEvent(new EventObject(InternalEvent.ADD,{edit:d}))}trim(){if(this.history.length>this.indexOfNextAdd){const d=this.history.splice(this.indexOfNextAdd,this.history.length-this.indexOfNextAdd);for(let g=0;g<d.length;g+=1)d[g].die()}}}class GraphLayout{constructor(d){this.useBoundingBox=!0,this.parent=null,this.graph=d}moveCell(d,g,E){}resizeCell(d,g,E){}execute(d){}getGraph(){return this.graph}getConstraint(d,g,E,b){return this.graph.getCurrentCellStyle(g)[d]}traverse({vertex:d,directed:g,func:E,edge:b,visited:w}){if(E!=null&&d!=null&&(g=g??!0,w=w||new Dictionary,!w.get(d))){w.put(d,!0);const C=E(d,b);if(C==null||C){const S=d.getEdgeCount();if(S>0)for(let P=0;P<S;P+=1){const I=d.getEdgeAt(P),M=I.getTerminal(!0)===d;if(!g||M){const D=this.graph.view.getVisibleTerminal(I,!M);this.traverse({vertex:D,directed:g,func:E,edge:I,visited:w})}}}}}isAncestor(d,g,E){if(!E)return g.getParent()===d;if(g===d)return!1;for(;g!=null&&g!==d;)g=g.getParent();return g===d}isVertexMovable(d){return this.graph.isCellMovable(d)}isVertexIgnored(d){return!d.isVertex()||!d.isVisible()}isEdgeIgnored(d){return!d.isEdge()||!d.isVisible()||d.getTerminal(!0)==null||d.getTerminal(!1)==null}setEdgeStyleEnabled(d,g){this.graph.setCellStyles("noEdgeStyle",g?"0":"1",[d])}setOrthogonalEdge(d,g){this.graph.setCellStyles("orthogonal",g?"1":"0",[d])}getParentOffset(d){const g=new Point;if(d!=null&&d!==this.parent&&(this.graph.getDataModel(),this.parent&&this.parent.isAncestor(d))){let E=d.getGeometry();for(;d!==this.parent;)g.x+=E.x,g.y+=E.y,d=d.getParent(),E=d.getGeometry()}return g}setEdgePoints(d,g){if(d!=null){const{model:E}=this.graph;let b=d.getGeometry();if(b==null?(b=new Geometry,b.setRelative(!0)):b=b.clone(),this.parent!=null&&g!=null){const w=d.getParent(),C=this.getParentOffset(w);for(let S=0;S<g.length;S+=1)g[S].x=g[S].x-C.x,g[S].y=g[S].y-C.y}b.points=g,E.setGeometry(d,b)}}setVertexLocation(d,g,E){const b=this.graph.getDataModel();let w=d.getGeometry(),C=null;if(w!=null){if(C=new Rectangle(g,E,w.width,w.height),this.useBoundingBox){const S=this.graph.getView().getState(d);if(S!=null&&S.text!=null&&S.text.boundingBox!=null){const{scale:P}=this.graph.getView(),I=S.text.boundingBox;S.text.boundingBox.x<S.x&&(g+=(S.x-I.x)/P,C.width=I.width),S.text.boundingBox.y<S.y&&(E+=(S.y-I.y)/P,C.height=I.height)}}if(this.parent!=null){const S=d.getParent();if(S!=null&&S!==this.parent){const P=this.getParentOffset(S);g-=P.x,E-=P.y}}(w.x!==g||w.y!==E)&&(w=w.clone(),w.x=g,w.y=E,b.setGeometry(d,w))}return C}getVertexBounds(d){let g=d.getGeometry();if(this.useBoundingBox){const E=this.graph.getView().getState(d);if(E!=null&&E.text!=null&&E.text.boundingBox!=null){const{scale:b}=this.graph.getView(),w=E.text.boundingBox,C=Math.max(E.x-w.x,0)/b,S=Math.max(E.y-w.y,0)/b,P=Math.max(w.x+w.width-(E.x+E.width),0)/b,I=Math.max(w.y+w.height-(E.y+E.height),0)/b;g=new Rectangle(g.x-C,g.y-S,g.width+C+P,g.height+S+I)}}if(this.parent!=null){const E=d.getParent();if(g=g.clone(),E!=null&&E!==this.parent){const b=this.getParentOffset(E);g.x+=b.x,g.y+=b.y}}return new Rectangle(g.x,g.y,g.width,g.height)}arrangeGroups(d,g,E,b,w,C){return this.graph.updateGroupBounds(d,g,!0,E,b,w,C)}}let activeWindow=null;class MaxWindow extends EventSource{constructor(d,g,E,b,w=null,C=null,S=!0,P=!0,I=null,M){super(),this.closeImage=`${Client.imageBasePath}/close.gif`,this.minimizeImage=`${Client.imageBasePath}/minimize.gif`,this.normalizeImage=`${Client.imageBasePath}/normalize.gif`,this.maximizeImage=`${Client.imageBasePath}/maximize.gif`,this.resizeImage=`${Client.imageBasePath}/resize.gif`,this.visible=!1,this.minimumSize=new Rectangle(0,0,50,40),this.destroyOnClose=!0,g!=null&&(this.content=g,this.init(E,b,w,C,M),this.installMaximizeHandler(),this.installMinimizeHandler(),this.installCloseHandler(),this.setMinimizable(S),this.setTitle(d),P&&this.installMoveHandler(),I!=null&&I.parentNode!=null?I.parentNode.replaceChild(this.div,I):document.body.appendChild(this.div))}init(d,g,E=null,b=null,w="mxWindow"){this.div=document.createElement("div"),this.div.className=w,this.div.style.left=`${d}px`,this.div.style.top=`${g}px`,this.table=document.createElement("table"),this.table.className=w,Client.IS_POINTER&&(this.div.style.touchAction="none"),E!=null&&(this.div.style.width=`${E}px`,this.table.style.width=`${E}px`),b!=null&&(this.div.style.height=`${b}px`,this.table.style.height=`${b}px`);const C=document.createElement("tbody");let S=document.createElement("tr");this.title=document.createElement("td"),this.title.className=`${w}Title`,this.buttons=document.createElement("div"),this.buttons.style.position="absolute",this.buttons.style.display="inline-block",this.buttons.style.right="4px",this.buttons.style.top="5px",this.title.appendChild(this.buttons),S.appendChild(this.title),C.appendChild(S),S=document.createElement("tr"),this.td=document.createElement("td"),this.td.className=`${w}Pane`,this.contentWrapper=document.createElement("div"),this.contentWrapper.className=`${w}Pane`,this.contentWrapper.style.width="100%",this.contentWrapper.appendChild(this.content),this.content.nodeName.toUpperCase()!=="DIV"&&(this.contentWrapper.style.height="100%"),this.td.appendChild(this.contentWrapper),S.appendChild(this.td),C.appendChild(S),this.table.appendChild(C),this.div.appendChild(this.table);const P=I=>{this.activate()};InternalEvent.addGestureListeners(this.title,P),InternalEvent.addGestureListeners(this.table,P),this.hide()}setTitle(d){let g=this.title.firstChild;for(;g!=null;){const E=g.nextSibling;g.nodeType===NODETYPE.TEXT&&g.parentNode.removeChild(g),g=E}write(this.title,d||""),this.title.appendChild(this.buttons)}setScrollable(d){(navigator.userAgent==null||navigator.userAgent.indexOf("Presto/2.5")<0)&&(d?this.contentWrapper.style.overflow="auto":this.contentWrapper.style.overflow="hidden")}activate(){if(activeWindow!==this){const d=getCurrentStyle(this.getElement()),g=d!=null?parseInt(d.zIndex):3;if(activeWindow){const b=activeWindow.getElement();b!=null&&b.style&&(b.style.zIndex=String(g))}const E=activeWindow;this.getElement().style.zIndex=String(g+1),activeWindow=this,this.fireEvent(new EventObject(InternalEvent.ACTIVATE,{previousWindow:E}))}}getElement(){return this.div}fit(){fit(this.div)}isResizable(){return this.resize!=null?this.resize.style.display!=="none":!1}setResizable(d){if(d)if(this.resize==null){this.resize=document.createElement("img"),this.resize.style.position="absolute",this.resize.style.bottom="2px",this.resize.style.right="2px",this.resize.setAttribute("src",this.resizeImage),this.resize.style.cursor="nw-resize";let g=null,E=null,b=null,w=null;const C=I=>{this.activate(),g=getClientX(I),E=getClientY(I),b=this.div.offsetWidth,w=this.div.offsetHeight,InternalEvent.addGestureListeners(document,null,S,P),this.fireEvent(new EventObject(InternalEvent.RESIZE_START,{event:I})),InternalEvent.consume(I)},S=I=>{if(g!=null&&E!=null){const M=getClientX(I)-g,D=getClientY(I)-E;b!=null&&w!=null&&this.setSize(b+M,w+D),this.fireEvent(new EventObject(InternalEvent.RESIZE,{event:I})),InternalEvent.consume(I)}},P=I=>{g!=null&&E!=null&&(g=null,E=null,InternalEvent.removeGestureListeners(document,null,S,P),this.fireEvent(new EventObject(InternalEvent.RESIZE_END,{event:I})),InternalEvent.consume(I))};InternalEvent.addGestureListeners(this.resize,C,S,P),this.div.appendChild(this.resize)}else this.resize.style.display="inline";else this.resize!=null&&(this.resize.style.display="none")}setSize(d,g){d=Math.max(this.minimumSize.width,d),g=Math.max(this.minimumSize.height,g),this.div.style.width=`${d}px`,this.div.style.height=`${g}px`,this.table.style.width=`${d}px`,this.table.style.height=`${g}px`,this.contentWrapper.style.height=`${this.div.offsetHeight-this.title.offsetHeight}px`}setMinimizable(d){this.minimize.style.display=d?"":"none"}getMinimumSize(){return new Rectangle(0,0,0,this.title.offsetHeight)}installMinimizeHandler(){this.minimize=document.createElement("img"),this.minimize.setAttribute("src",this.minimizeImage),this.minimize.setAttribute("title","Minimize"),this.minimize.style.cursor="pointer",this.minimize.style.marginLeft="2px",this.minimize.style.display="none",this.buttons.appendChild(this.minimize);let d=!1,g=null,E=null;const b=w=>{if(this.activate(),d)d=!1,this.minimize.setAttribute("src",this.minimizeImage),this.minimize.setAttribute("title","Minimize"),this.contentWrapper.style.display="",g!=null&&E!=null&&(this.maximize.style.display=g,this.div.style.height=E,this.table.style.height=E),this.resize!=null&&(this.resize.style.visibility=""),this.fireEvent(new EventObject(InternalEvent.NORMALIZE,{event:w}));else{d=!0,this.minimize.setAttribute("src",this.normalizeImage),this.minimize.setAttribute("title","Normalize"),this.contentWrapper.style.display="none",g=this.maximize.style.display,this.maximize.style.display="none",E=this.table.style.height;const C=this.getMinimumSize();C.height>0&&(this.div.style.height=`${C.height}px`,this.table.style.height=`${C.height}px`),C.width>0&&(this.div.style.width=`${C.width}px`,this.table.style.width=`${C.width}px`),this.resize!=null&&(this.resize.style.visibility="hidden"),this.fireEvent(new EventObject(InternalEvent.MINIMIZE,{event:w}))}InternalEvent.consume(w)};InternalEvent.addGestureListeners(this.minimize,b)}setMaximizable(d){this.maximize.style.display=d?"":"none"}installMaximizeHandler(){this.maximize=document.createElement("img"),this.maximize.setAttribute("src",this.maximizeImage),this.maximize.setAttribute("title","Maximize"),this.maximize.style.cursor="default",this.maximize.style.marginLeft="2px",this.maximize.style.cursor="pointer",this.maximize.style.display="none",this.buttons.appendChild(this.maximize);let d=!1,g=null,E=null,b=null,w=null,C=null;const S=P=>{if(this.activate(),this.maximize.style.display!=="none"){if(d)d=!1,this.maximize.setAttribute("src",this.maximizeImage),this.maximize.setAttribute("title","Maximize"),this.contentWrapper.style.display="",C!=null&&(this.minimize.style.display=C),this.div.style.left=`${g}px`,this.div.style.top=`${E}px`,w!=null&&b!=null&&(this.div.style.height=b,this.div.style.width=w),(getCurrentStyle(this.contentWrapper).overflow==="auto"||this.resize!=null)&&(this.contentWrapper.style.height=`${this.div.offsetHeight-this.title.offsetHeight}px`),w!=null&&b!=null&&(this.table.style.height=b,this.table.style.width=w),this.resize!=null&&(this.resize.style.visibility=""),this.fireEvent(new EventObject(InternalEvent.NORMALIZE,{event:P}));else{d=!0,this.maximize.setAttribute("src",this.normalizeImage),this.maximize.setAttribute("title","Normalize"),this.contentWrapper.style.display="",C=this.minimize.style.display,this.minimize.style.display="none",g=parseInt(this.div.style.left),E=parseInt(this.div.style.top),b=this.table.style.height,w=this.table.style.width,this.div.style.left="0px",this.div.style.top="0px";const I=Math.max(document.body.clientHeight||0,document.documentElement.clientHeight||0);this.div.style.width=`${document.body.clientWidth-2}px`,this.div.style.height=`${I-2}px`,this.table.style.width=`${document.body.clientWidth-2}px`,this.table.style.height=`${I-2}px`,this.resize!=null&&(this.resize.style.visibility="hidden"),(getCurrentStyle(this.contentWrapper).overflow==="auto"||this.resize!=null)&&(this.contentWrapper.style.height=`${this.div.offsetHeight-this.title.offsetHeight}px`),this.fireEvent(new EventObject(InternalEvent.MAXIMIZE,{event:P}))}InternalEvent.consume(P)}};InternalEvent.addGestureListeners(this.maximize,S),InternalEvent.addListener(this.title,"dblclick",S)}installMoveHandler(){this.title.style.cursor="move",InternalEvent.addGestureListeners(this.title,d=>{const g=getClientX(d),E=getClientY(d),b=this.getX(),w=this.getY(),C=P=>{const I=getClientX(P)-g,M=getClientY(P)-E;this.setLocation(b+I,w+M),this.fireEvent(new EventObject(InternalEvent.MOVE,{event:P})),InternalEvent.consume(P)},S=P=>{InternalEvent.removeGestureListeners(document,null,C,S),this.fireEvent(new EventObject(InternalEvent.MOVE_END,{event:P})),InternalEvent.consume(P)};InternalEvent.addGestureListeners(document,null,C,S),this.fireEvent(new EventObject(InternalEvent.MOVE_START,{event:d})),InternalEvent.consume(d)}),Client.IS_POINTER&&(this.title.style.touchAction="none")}setLocation(d,g){this.div.style.left=`${d}px`,this.div.style.top=`${g}px`}getX(){return parseInt(this.div.style.left)}getY(){return parseInt(this.div.style.top)}installCloseHandler(){this.closeImg=document.createElement("img"),this.closeImg.setAttribute("src",this.closeImage),this.closeImg.setAttribute("title","Close"),this.closeImg.style.marginLeft="2px",this.closeImg.style.cursor="pointer",this.closeImg.style.display="none",this.buttons.appendChild(this.closeImg),InternalEvent.addGestureListeners(this.closeImg,d=>{this.fireEvent(new EventObject(InternalEvent.CLOSE,{event:d})),this.destroyOnClose?this.destroy():this.setVisible(!1),InternalEvent.consume(d)})}setImage(d){this.image=document.createElement("img"),this.image.setAttribute("src",d),this.image.setAttribute("align","left"),this.image.style.marginRight="4px",this.image.style.marginLeft="0px",this.image.style.marginTop="-2px",this.title.insertBefore(this.image,this.title.firstChild)}setClosable(d){this.closeImg.style.display=d?"":"none"}isVisible(){return this.div!=null?this.div.style.display!=="none":!1}setVisible(d){this.div!=null&&this.isVisible()!==d&&(d?this.show():this.hide())}show(){this.div.style.display="",this.activate(),(getCurrentStyle(this.contentWrapper).overflow=="auto"||this.resize!=null)&&this.contentWrapper.style.display!="none"&&(this.contentWrapper.style.height=`${this.div.offsetHeight-this.title.offsetHeight}px`),this.fireEvent(new EventObject(InternalEvent.SHOW))}hide(){this.div.style.display="none",this.fireEvent(new EventObject(InternalEvent.HIDE))}destroy(){this.fireEvent(new EventObject(InternalEvent.DESTROY)),this.div!=null&&(InternalEvent.release(this.div),this.div.parentNode.removeChild(this.div),this.div=null),this.title=null,this.content=null,this.contentWrapper=null}}const error=(x,d,g,E=null)=>{const b=document.createElement("div");b.style.padding="20px";const w=document.createElement("img");w.setAttribute("src",E||utils.errorImage),w.setAttribute("valign","bottom"),w.style.verticalAlign="middle",b.appendChild(w),b.appendChild(document.createTextNode("")),b.appendChild(document.createTextNode("")),b.appendChild(document.createTextNode("")),write(b,x);const C=document.body.clientWidth,S=document.body.clientHeight||document.documentElement.clientHeight,P=new MaxWindow(Translations.get(utils.errorResource)||utils.errorResource,b,(C-d)/2,S/4,d,null,!1,!0);return P.setVisible(!0),P};class RubberBandHandler{constructor(d){this.first=null,this.destroyed=!1,this.dragHandler=null,this.dropHandler=null,this.x=0,this.y=0,this.width=0,this.height=0,this.defaultOpacity=20,this.enabled=!0,this.div=null,this.sharedDiv=null,this.currentX=0,this.currentY=0,this.fadeOut=!1,this.graph=d,this.graph.addMouseListener(this),this.forceRubberbandHandler=(g,E)=>{const b=E.getProperty("eventName"),w=E.getProperty("event");if(b===InternalEvent.MOUSE_DOWN&&this.isForceRubberbandEvent(w)){const C=getOffset(this.graph.container),S=getScrollOrigin(this.graph.container);S.x-=C.x,S.y-=C.y,this.start(w.getX()+S.x,w.getY()+S.y),w.consume(!1)}},this.graph.addListener(InternalEvent.FIRE_MOUSE_EVENT,this.forceRubberbandHandler),this.panHandler=()=>{this.repaint()},this.graph.addListener(InternalEvent.PAN,this.panHandler),this.gestureHandler=(g,E)=>{this.first&&this.reset()},this.graph.addListener(InternalEvent.GESTURE,this.gestureHandler)}isEnabled(){return this.enabled}setEnabled(d){this.enabled=d}isForceRubberbandEvent(d){return isAltDown(d.getEvent())}mouseDown(d,g){if(!g.isConsumed()&&this.isEnabled()&&this.graph.isEnabled()&&!g.getState()&&!isMultiTouchEvent(g.getEvent())){const E=getOffset(this.graph.container),b=getScrollOrigin(this.graph.container);b.x-=E.x,b.y-=E.y,this.start(g.getX()+b.x,g.getY()+b.y),g.consume(!1)}}start(d,g){this.first=new Point(d,g);const{container:E}=this.graph;function b(w){const C=new InternalMouseEvent(w),S=convertPoint(E,C.getX(),C.getY());return C.graphX=S.x,C.graphY=S.y,C}this.dragHandler=w=>{this.mouseMove(this.graph,b(w))},this.dropHandler=w=>{this.mouseUp(this.graph,b(w))},Client.IS_FF&&InternalEvent.addGestureListeners(document,null,this.dragHandler,this.dropHandler)}mouseMove(d,g){if(!g.isConsumed()&&this.first){const E=getScrollOrigin(this.graph.container),b=getOffset(this.graph.container);E.x-=b.x,E.y-=b.y;const w=g.getX()+E.x,C=g.getY()+E.y,S=this.first.x-w,P=this.first.y-C,I=this.graph.getEventTolerance();(this.div||Math.abs(S)>I||Math.abs(P)>I)&&(this.div||(this.div=this.createShape()),clearSelection(),this.update(w,C),g.consume())}}createShape(){this.sharedDiv||(this.sharedDiv=document.createElement("div"),this.sharedDiv.className="mxRubberband",setOpacity(this.sharedDiv,this.defaultOpacity)),this.graph.container.appendChild(this.sharedDiv);const d=this.sharedDiv;return Client.IS_SVG&&this.fadeOut&&(this.sharedDiv=null),d}isActive(d,g){return this.div&&this.div.style.display!=="none"}mouseUp(d,g){const E=this.isActive();this.reset(),E&&(this.execute(g.getEvent()),g.consume())}execute(d){const g=new Rectangle(this.x,this.y,this.width,this.height);this.graph.selectRegion(g,d)}reset(){if(this.div)if(Client.IS_SVG&&this.fadeOut){const d=this.div;setPrefixedStyle(d.style,"transition","all 0.2s linear"),d.style.pointerEvents="none",d.style.opacity=String(0),window.setTimeout(()=>{d.parentNode&&d.parentNode.removeChild(d)},200)}else this.div.parentNode&&this.div.parentNode.removeChild(this.div);InternalEvent.removeGestureListeners(document,null,this.dragHandler,this.dropHandler),this.dragHandler=null,this.dropHandler=null,this.currentX=0,this.currentY=0,this.first=null,this.div=null}update(d,g){this.currentX=d,this.currentY=g,this.repaint()}repaint(){if(this.div&&this.first){const d=this.currentX-this.graph.getPanDx(),g=this.currentY-this.graph.getPanDy();this.x=Math.min(this.first.x,d),this.y=Math.min(this.first.y,g),this.width=Math.max(this.first.x,d)-this.x,this.height=Math.max(this.first.y,g)-this.y;const E=0,b=0;this.div.style.left=`${this.x+E}px`,this.div.style.top=`${this.y+b}px`,this.div.style.width=`${Math.max(1,this.width)}px`,this.div.style.height=`${Math.max(1,this.height)}px`}}onDestroy(){this.destroyed||(this.destroyed=!0,this.graph.removeMouseListener(this),this.graph.removeListener(this.forceRubberbandHandler),this.graph.removeListener(this.panHandler),this.reset(),this.sharedDiv&&(this.sharedDiv=null))}}RubberBandHandler.pluginId="RubberBandHandler";class GoalModelLayout extends GraphLayout{constructor(g,E,b){super(g);Qt(this,"levelDistance");Qt(this,"nodeDistance");Qt(this,"parentsChanged",null);Qt(this,"parentX",null);Qt(this,"parentY",null);Qt(this,"visited",{});Qt(this,"prefHozEdgeSep",5);Qt(this,"prefVertEdgeOff",4);Qt(this,"root",null);Qt(this,"node",null);console.log("GoalModelLayout created ----------------------------------"),this.levelDistance=E||30,this.nodeDistance=b||30}isVertexIgnored(g){return super.isVertexIgnored(g)||this.graph.getConnections(g).length==0}execute(g,E){console.log("Executing layout with parent:",g,"and root:",E),this.parent=g;const b=this.graph.getDataModel();if(E==null)if(this.graph.getEdges(g,g.getParent(),!1,!0,!1).length>0)this.root=g;else{const w=findTreeRoots(this.graph,g,!0,!1);if(w.length>0){for(let C=0;C<w.length;C++)if(!this.isVertexIgnored(w[C])&&this.graph.getEdges(w[C],null,!1,!0,!1).length>0){this.root=w[C];break}}}else this.root=E;if(this.root!=null){this.parentsChanged=null,this.parentX=null,this.parentY=null,b.beginUpdate();try{if(this.visited={},this.node=this.dfs(this.root,g),this.node!=null){this.layout(this.node);const w=this.graph.gridSize,C=w,S=this.verticalLayout(this.node,null,w,C);if(S!=null){let P=0,I=0;S.x<0&&(P=Math.abs(w-S.x)),S.y<0&&(I=Math.abs(C-S.y)),(P!=0||I!=0)&&this.moveNode(this.node,P,I)}if(this.parentX!=null&&this.parentY!=null){let P=g.getGeometry();P!=null&&(P=P.clone(),P.x=this.parentX,P.y=this.parentY,b.setGeometry(g,P))}}}finally{b.endUpdate()}}}moveNode(g,E,b){g.x+=E,g.y+=b,this.apply(g);let w=g.child;for(;w!=null;)this.moveNode(w,E,b),w=w.next}dfs(g,E){const b=CellPath.create(g);let w=null;if(g!=null&&this.visited[b]==null&&!this.isVertexIgnored(g)){this.visited[b]=g,w=this.createNode(g);let C=null;const S=this.graph.getEdges(g,E,!1,!0,!1,!0),P=this.graph.getView();for(let I=0;I<S.length;I++){const M=S[I];if(!this.isEdgeIgnored(M)){const D=P.getState(M),k=D!=null?D.getVisibleTerminal(!1):P.getVisibleTerminal(M,!1),H=this.dfs(k,E);H!=null&&k.getGeometry()!=null&&(C==null?w.child=H:C.next=H,C=H)}}}return w}verticalLayout(g,E,b,w,C=null){const S=g.offsetX,P=g.offsetY;g.x=g.x+b+P,g.y=g.y+w+S,C=this.apply(g,C);const I=g.child;if(I!=null){C=this.verticalLayout(I,g,g.x,g.y,C);const M=I.offsetY;let D=g.x+M,k=I.next;for(;k!=null;){const H=I.offsetX;C=this.verticalLayout(k,g,D,g.y+H,C),D+=k.offsetY,k=k.next}}return C}createNode(g){const E={};E.cell=g,E.x=0,E.y=0,E.width=0,E.height=0;const b=this.getVertexBounds(g);return b!=null&&(E.width=b.width,E.height=b.height),E.offsetX=0,E.offsetY=0,E.contour=new Object,E}layout(g){if(g!=null){let E=g.child;for(;E!=null;)this.layout(E),E=E.next;g.child!=null?this.attachParent(g,this.join(g)):this.layoutLeaf(g)}}layoutLeaf(g){const E=2*this.nodeDistance;g.contour.upperTail=this.createLine(g.height+E,0),g.contour.upperHead=g.contour.upperTail,g.contour.lowerTail=this.createLine(0,-g.width-E),g.contour.lowerHead=this.createLine(g.height+E,0,g.contour.lowerTail)}join(g){const E=2*this.nodeDistance;let b=g.child;g.contour=b.contour;let w=b.width+E,C=w;for(b=b.next;b!=null;){const S=this.merge(g.contour,b.contour);b.offsetY=S+w,b.offsetX=0,w=b.width+E,C+=S+w,b=b.next}return C}merge(g,E){let b=0,w=0,C=0,S=g.lowerHead,P=E.upperHead;for(;P!=null&&S!=null;){const I=this.offset(b,w,P.dx,P.dy,S.dx,S.dy);w+=I,C+=I,b+P.dx<=S.dx?(b+=P.dx,w+=P.dy,P=P.next):(b-=S.dx,w-=S.dy,S=S.next)}if(P!=null){const I=this.bridge(g.upperTail,0,0,P,b,w);g.upperTail=I.next!=null?E.upperTail:I,g.lowerTail=E.lowerTail}else{const I=this.bridge(E.lowerTail,b,w,S,0,0);I.next==null&&(g.lowerTail=I)}return g.lowerHead=E.lowerHead,C}offset(g,E,b,w,C,S){let P=0;if(C<=g||g+b<=0)return 0;if(C*w-b*S>0)g<0?P=g*w/b-E:g>0?P=g*S/C-E:P=-E;else if(C<g+b){const M=(C-g)*w;P=S-(E+M/b)}else C>g+b?P=(b+g)*S/C-(E+w):P=S-(E+w);return P>0?P:0}bridge(g,E,b,w,C,S){const P=C+w.dx-E;let I=0,M=0;w.dx==0?I=w.dy:(M=P*w.dy,I=M/w.dx);const D=this.createLine(P,I,w.next);return g.next=this.createLine(0,S+w.dy-I-b,D),D}attachParent(g,E){const b=this.nodeDistance+this.levelDistance,w=(E-g.width)/2-this.nodeDistance,C=w+g.width+2*this.nodeDistance-E;g.child.offsetX=b+g.height,g.child.offsetY=C,g.contour.upperHead=this.createLine(g.height,0,this.createLine(b,C,g.contour.upperHead)),g.contour.lowerHead=this.createLine(g.height,0,this.createLine(b,w,g.contour.lowerHead))}apply(g,E=null){const b=g.cell;let w=b.getGeometry();return b!=null&&w!=null&&(this.isVertexMovable(b)&&(w=this.setVertexLocation(b,g.x,g.y)),E==null?E=new Rectangle(w.x,w.y,w.width,w.height):E=new Rectangle(Math.min(E.x,w.x),Math.min(E.y,w.y),Math.max(E.x+E.width,w.x+w.width),Math.max(E.y+E.height,w.y+w.height))),E}createLine(g,E,b=null){return{dx:g,dy:E,next:b}}}function findTreeRoots(x,d,g=!1,E=!1){const b=[];if(console.log("finding roots",d),d!=null){let w=null,C=0;for(const S of d.getChildren())if(S.isVertex()&&S.isVisible()){const P=x.getConnections(S,g?d:null);let I=0,M=0;for(let k=0;k<P.length;k++)x.view.getVisibleTerminal(P[k],!0)==S?I++:M++;(E&&I==0&&M>0||!E&&M==0&&I>0)&&b.push(S);const D=E?M-I:I-M;D>C&&(C=D,w=S)}b.length==0&&w!=null&&b.push(w)}return b}const DEFAULT_ROOT_GOAL_COORD={x:0,y:0},CHILD_SIZE_SCALE=.9,FUNCTIONAL_GOALS_SPACING={vertical:80,horizonal:170},FUNCTIONAL_NONFUNCTIONAL_OFFSET={x:0,y:5},ROOT_KEY="0723y450nv3-2r8mchwouebfioasedfiadfg",renderGoals=(x,d,g=null,E,b,w,C,S)=>{var F,j;console.log("Logging: renderGoals() called on list: ",x);const P=[],I=[],M=[],D=[],k=E.value;console.log("in renderGoal: ",E.value,k);for(let $=0;$<x.length;$++){const z=x[$],U=z.GoalType,W=z.instanceId,q=z.GoalContent;console.log("Render goals type:",U),U===SYMBOL_CONFIGS.FUNCTIONAL.type?renderFunction(z,d,g,E,b,w,C,S,z.GoalColor):U===SYMBOL_CONFIGS.EMOTIONAL.type?P.push({instanceId:W,content:q}):U===SYMBOL_CONFIGS.NEGATIVE.type?M.push({instanceId:W,content:q}):U===SYMBOL_CONFIGS.QUALITY.type?I.push({instanceId:W,content:q}):U===SYMBOL_CONFIGS.STAKEHOLDER.type?D.push({instanceId:W,content:q}):console.log("Logging: goal of unknown type received: "+U)}let H=((F=g==null?void 0:g.id)==null?void 0:F.toString())||ROOT_KEY;!g&&E.value&&(H=((j=E.value.id)==null?void 0:j.toString())||ROOT_KEY),console.log("Key2: ",H),P.length&&(console.log("emotions key value: ",H),console.log("emotions length: ",P),b[H]?b[H]=b[H].concat(P):b[H]=P,console.log("emotions glob: ",b),console.log("emotions glob key: ",b[H])),I.length&&(C[H]?C[H]=C[H].concat(I):C[H]=I),M.length&&(w[H]?w[H]=w[H].concat(M):w[H]=M),D.length&&(S[H]?S[H]=S[H].concat(D):S[H]=D)},renderFunction=(x,d,g=null,E,b,w,C,S,P)=>{const I=SYMBOL_CONFIGS.FUNCTIONAL,M=x.GoalContent.split(" ");let D=SYMBOL_WIDTH,k=SYMBOL_HEIGHT;if(g){const z=g.getGeometry();z&&(D=z.width*CHILD_SIZE_SCALE,k=z.height*CHILD_SIZE_SCALE)}const H={...d.getStylesheet().getDefaultVertexStyle()};H.fillColor=P,H.shape=I.shape,formatFunGoalRefId(x);const F=d.insertVertex(null,generateCellId("Functional",x.instanceId),M.join(`
`),DEFAULT_ROOT_GOAL_COORD.x,DEFAULT_ROOT_GOAL_COORD.y,D,k,H);g&&d.insertEdge(null,null,"",g,F),E.value===null&&(E.value=F,console.log("rootgoal registered",E.value));const j=F.getGeometry(),$=d.getPreferredSizeForCell(F);j&&$&&(j.height=M.length*VERTEX_FONT.size*VERTEX_FONT.scaleHeight,j.width=Math.max(j.height,$.width*I.scale.width,D),j.height=Math.max(j.height,$.height*I.scale.height,k)),renderGoals(x.SubGoals,d,F,E,b,w,C,S)},doRectanglesIntersect=(x,d)=>!(x.x+x.width<d.x||x.x>d.x+d.width||x.y+x.height<d.y||x.y>d.y+d.height),adjustVerticalPositions=(x,d,g)=>{if(!x||!d.length)return;const E=x.getGeometry();if(!E)return;console.log("adjusting vertical position, ",x,d);let b=!1,w=0;const C=100,S=10,P=new Rectangle(E.x,E.y,E.width,E.height);do{b=!1;for(const I of d){if(x===I)continue;const M=I.getGeometry();if(!M)continue;const D=new Rectangle(M.x,M.y,M.width,M.height);doRectanglesIntersect(P,D)&&(E.y-=S,b=!0,P.y=E.y)}w++}while(b&&w<C);g.getDataModel().setGeometry(x,E)},adjustHorizontalPositions=(x,d,g)=>{if(!x||!d)return;const E=x.getGeometry(),b=d.getGeometry();if(!E||!b)return;console.log("Adjusting horizontal position:",x,d);let w=!1,C=0;const S=100,P=10,I=new Rectangle(E.x,E.y,E.width,E.height),M=new Rectangle(b.x,b.y,b.width,b.height);do w=!1,doRectanglesIntersect(I,M)&&(I.x<M.x?E.x=M.x-I.width-P:E.x=M.x+M.width+P,w=!0,I.x=E.x),C++;while(w&&C<S);g.getDataModel().setGeometry(x,E)},getConfigByTypeAndDescriptions=(x,d)=>{const g=getSymbolKeyByType(x);if(g){const E=SYMBOL_CONFIGS[g];return E===SYMBOL_CONFIGS.STAKEHOLDER&&d.length>1?SYMBOL_CONFIGS.CROWD:E}return null},renderNonFunction=(x,d,g=null,E="None",b)=>{if(console.log("Rendering non-functional goal: ",x),!g)return;const w=g.getGeometry();if(!w)return;let C=0,S=0,P=w.width,I=w.height,M="";const D=getSymbolKeyByType(E),k=getConfigByTypeAndDescriptions(E,x);if(k)switch(M=k.shape,P*=k.scale.width,I*=k.scale.height,D){case"EMOTIONAL":C=w.x+P+FUNCTIONAL_NONFUNCTIONAL_OFFSET.x,S=w.y-I-FUNCTIONAL_NONFUNCTIONAL_OFFSET.y;break;case"NEGATIVE":C=w.x+P+FUNCTIONAL_NONFUNCTIONAL_OFFSET.x,S=w.y+FUNCTIONAL_NONFUNCTIONAL_OFFSET.y;break;case"QUALITY":C=w.x-P-FUNCTIONAL_NONFUNCTIONAL_OFFSET.x,S=w.y-I-FUNCTIONAL_NONFUNCTIONAL_OFFSET.y;break;case"STAKEHOLDER":case"CROWD":C=w.x-P-FUNCTIONAL_NONFUNCTIONAL_OFFSET.x,S=w.y+FUNCTIONAL_NONFUNCTIONAL_OFFSET.y;break}else console.warn(`Unknown type "${E}"  no matching symbol config found.`);const H={...d.getStylesheet().getDefaultVertexStyle()};H.shape=M,H.align="center",H.verticalAlign="middle",H.labelPosition="center",H.spacingTop=0;const F={...d.getStylesheet().getDefaultEdgeStyle(),dashed:1,dashPattern:"3 3",rounded:1};d.getStylesheet().putCellStyle("dottedEdge",F),E===SYMBOL_CONFIGS.STAKEHOLDER.type?(H.verticalAlign="top",H.verticalLabelPosition="bottom"):E===SYMBOL_CONFIGS.NEGATIVE.type&&(H.fillColor="grey"),b&&(H.fillColor=b);const j=makeLabelForGoalType(x.map(q=>q.content),D);console.log("Nonfunctional-goal-dependencies:",x);const $=d.insertVertex(null,generateCellId("Nonfunctional",x.map(q=>q.instanceId)),j,C,S,P,I,H);console.log("Nonfunctional-goal-node:",$),d.insertEdge(null,null,"",g,$,F);const z=$.getGeometry(),U=d.getPreferredSizeForCell($);if(z&&U){const q=j.split(/\n/);z.height=q.length*VERTEX_FONT.size*VERTEX_FONT.scaleHeight;let Z=Math.max(...q.map(K=>K.length))*VERTEX_FONT.size*.6;const X=Z/z.height;X>1.5?z.height=Z/1.5:X<.67&&(Z=z.height*.67),z.width=Math.max(Z,U.width*SYMBOL_CONFIGS.FUNCTIONAL.scale.width,P),z.height=Math.max(z.height,U.height*SYMBOL_CONFIGS.FUNCTIONAL.scale.height,I)}const W=d.getChildVertices(d.getDefaultParent()).filter(q=>q===$?!1:d.getIncomingEdges(q,null).some(X=>X.source===g));console.log("siblings: ",W),adjustHorizontalPositions($,g,d),adjustVerticalPositions($,W,d)},layoutFunctions=(x,d)=>{new GoalModelLayout(x,FUNCTIONAL_GOALS_SPACING.vertical,FUNCTIONAL_GOALS_SPACING.horizonal).execute(x.getDefaultParent(),d)},associateNonFunctions=(x,d,g,E,b,w,C)=>{console.log("Glob: ",E,b,w,C);const S=d.getChildVertices();console.log("Glob;child ",S),S.forEach((P,I)=>{var D;const M=(D=P.id)==null?void 0:D.toString();if(M){if(console.log("Associate: ",I,", ",M),b[M]){const k=getNonFunctionalGoalColor(x,b[M]);renderNonFunction(b[M],d,P,SYMBOL_CONFIGS.NEGATIVE.type,k)}if(C[M]){const k=getNonFunctionalGoalColor(x,C[M]);renderNonFunction(C[M],d,P,SYMBOL_CONFIGS.STAKEHOLDER.type,k)}if(E[M]){const k=getNonFunctionalGoalColor(x,E[M]);renderNonFunction(E[M],d,P,SYMBOL_CONFIGS.EMOTIONAL.type,k)}if(w[M]){const k=getNonFunctionalGoalColor(x,w[M]);renderNonFunction(w[M],d,P,SYMBOL_CONFIGS.QUALITY.type,k)}}})};function isGoalNameEmpty(x){return!x||x.trim()===""}const registerCustomShapes=()=>{CellRenderer.registerShape(SYMBOL_CONFIGS.FUNCTIONAL.shape,ParallelogramShape),CellRenderer.registerShape(SYMBOL_CONFIGS.EMOTIONAL.shape,HeartShape),CellRenderer.registerShape(SYMBOL_CONFIGS.NEGATIVE.shape,NegativeShape),CellRenderer.registerShape(SYMBOL_CONFIGS.STAKEHOLDER.shape,PersonShape),CellRenderer.registerShape(SYMBOL_CONFIGS.CROWD.shape,CrowdShape),CellRenderer.registerShape(SYMBOL_CONFIGS.QUALITY.shape,MMCloudShape),console.log("Custom shapes registered")};class ParallelogramShape extends ActorShape{constructor(d,g,E,b=1){super(),this.bounds=d,this.fill=g,this.stroke=E,this.strokeWidth=b,this.startSize=.12}isRoundable(){return!0}redrawPath(d,g,E,b,w){const C=b*Math.max(0,Math.min(1,parseFloat(getValue$1(this.style,"startSize",this.startSize)))),S=getValue$1(this.style,"arcSize",LINE_ARCSIZE)/2,P=[new Point(0,w),new Point(C,0),new Point(b,0),new Point(b-C,w)];this.addPoints(d,P,this.isRounded,S,!0),d.end()}}class HeartShape extends ActorShape{constructor(d,g,E,b=1){super(),this.bounds=d,this.fill=g,this.stroke=E,this.strokeWidth=b}isRoundable(){return!0}redrawPath(d,g,E,b,w){d.moveTo(b/2,.1*w),d.curveTo(.85*b/2,.02*w,.65*b/2,0,.55*b/2,0),d.curveTo(.35*b/2,0,0,.05*w,0,.35*w),d.curveTo(0,.55*w,.4*b/2,.75*w,.7*b/2,.87*w),d.curveTo(.85*b/2,.93*w,.98*b/2,.98*w,b/2,w),d.curveTo(b-.98*b/2,.98*w,b-.85*b/2,.93*w,b-.7*b/2,.87*w),d.curveTo(b-.4*b/2,.75*w,b,.55*w,b,.35*w),d.curveTo(b,.05*w,b-.35*b/2,0,b-.55*b/2,0),d.curveTo(b-.65*b/2,0,b-.85*b/2,.02*w,b/2,.1*w),d.close()}}class NegativeShape extends ActorShape{constructor(d,g,E,b=1){super(),this.bounds=d,this.fill=g,this.stroke=E,this.strokeWidth=b}isRoundable(){return!0}redrawPath(d,g,E,b,w){const C=b/2;d.moveTo(C,0),d.curveTo(.98*C,.02*w,.9*C,.07*C,.7*C,.13*w),d.curveTo(.4*C,.25*w,0,.45*w,0,.65*w),d.curveTo(0,.95*w,.35*C,w,.45*C,w),d.curveTo(.65*C,w,.85*C,.98*w,C,.9*w),d.curveTo(b-.85*b/2,.98*w,b-.65*C,w,b-.45*C,w),d.curveTo(b-.35*C,w,b,.95*w,b,.65*w),d.curveTo(b,.45*w,b-.4*C,.25*w,b-.7*C,.13*w),d.curveTo(b-.85*C,.07*w,b-.98*C,.02*w,C,0),d.close()}}class PersonShape extends ActorShape{constructor(d,g,E,b=1){super(),this.bounds=d,this.fill=g,this.stroke=E,this.strokeWidth=b}isRoundable(){return!0}paintVertexShape(d,g,E,b,w){d.translate(g+b/5,E),d.begin(),this.redrawPath(d,g,E,b,w),d.fillAndStroke()}redrawPath(d,g,E,b,w){b=b/1.6,d.moveTo(.02*b,.55*w),d.lineTo(.02*b,.25*w),d.curveTo(.02*b,.2*w,.12*b,.18*w,b/6,.17*w),d.lineTo(.3*b,.17*w),d.curveTo(.33*b,.18*w,.4*b,.2*w,b/2,.2*w),d.curveTo(.6*b,.2*w,.67*b,.18*w,.7*b,.17*w),d.lineTo(5/6*b,.17*w),d.curveTo(.87*b,.18*w,b,.2*w,.98*b,.25*w),d.lineTo(.98*b,.55*w),d.curveTo(.98*b,.56*w,.94*b,.58*w,.88*b,.58*w),d.curveTo(.85*b,.58*w,.78*b,.57*w,.78*b,.55*w),d.lineTo(.78*b,.3*w),d.lineTo(.78*b,.9*w),d.curveTo(.78*b,.92*w,.75*b,.95*w,.64*b,.95*w),d.curveTo(.58*b,.95*w,b/2,.92*w,b/2,.9*w),d.lineTo(b/2,.58*w),d.lineTo(b/2,.9*w),d.curveTo(b/2,.92*w,.42*b,.95*w,.36*b,.95*w),d.curveTo(.25*b,.95*w,.22*b,.92*w,.22*b,.9*w),d.lineTo(.22*b,.3*w),d.lineTo(.22*b,.55*w),d.curveTo(.22*b,.57*w,.15*b,.58*w,.12*b,.58*w),d.curveTo(.05*b,.58*w,.02*b,.56*w,.02*b,.55*w),d.moveTo(b/2,w/6),d.curveTo(b/2-.1*w,w/6,b/2-.1*w,.02*w,b/2,.02*w),d.curveTo(b/2+.1*w,.02*w,b/2+.1*w,w/6,b/2,w/6),d.close()}}class CrowdShape extends ActorShape{constructor(g,E,b,w=1){super();Qt(this,"bounds");Qt(this,"fill");Qt(this,"stroke");Qt(this,"strokeWidth");this.bounds=g,this.fill=E,this.stroke=b,this.strokeWidth=w}isRoundable(){return!0}paintVertexShape(g,E,b,w,C){g.translate(E,b),g.save();const S=new PersonShape(this.bounds,this.fill,this.stroke,this.strokeWidth),P=w/1.2;S.paintVertexShape(g,0,0,P,C),g.restore(),g.save();const I=new PersonShape(this.bounds,this.fill,this.stroke,this.strokeWidth),M=.8,D=w*.3,k=C*.2;I.paintVertexShape(g,D,k,P*M,C*M),g.restore()}}class MMCloudShape extends ActorShape{constructor(d,g,E,b=1){super(),this.bounds=d,this.fill=g,this.stroke=E,this.strokeWidth=b}isRoundable(){return!0}redrawPath(d,g,E,b,w){d.moveTo(.2*b,.3*w),d.curveTo(.19*b,.14*w,.32*b,.05*w,.38*b,.14*w),d.curveTo(.45*b,.01*w,.55*b,.01*w,.62*b,.14*w),d.curveTo(.68*b,.05*w,.81*b,.14*w,.8*b,.3*w),d.curveTo(.95*b,.33*w,.95*b,.67*w,.8*b,.7*w),d.curveTo(.81*b,.86*w,.68*b,.95*w,.62*b,.86*w),d.curveTo(.55*b,.99*w,.45*b,.99*w,.38*b,.86*w),d.curveTo(.32*b,.95*w,.19*b,.86*w,.2*b,.7*w),d.curveTo(.05*b,.67*w,.05*b,.33*w,.2*b,.3*w),d.close()}}var lib={},flattenNames={},_freeGlobal,hasRequired_freeGlobal;function require_freeGlobal(){if(hasRequired_freeGlobal)return _freeGlobal;hasRequired_freeGlobal=1;var x=typeof commonjsGlobal=="object"&&commonjsGlobal&&commonjsGlobal.Object===Object&&commonjsGlobal;return _freeGlobal=x,_freeGlobal}var _root,hasRequired_root;function require_root(){if(hasRequired_root)return _root;hasRequired_root=1;var x=require_freeGlobal(),d=typeof self=="object"&&self&&self.Object===Object&&self,g=x||d||Function("return this")();return _root=g,_root}var _Symbol,hasRequired_Symbol;function require_Symbol(){if(hasRequired_Symbol)return _Symbol;hasRequired_Symbol=1;var x=require_root(),d=x.Symbol;return _Symbol=d,_Symbol}var _getRawTag,hasRequired_getRawTag;function require_getRawTag(){if(hasRequired_getRawTag)return _getRawTag;hasRequired_getRawTag=1;var x=require_Symbol(),d=Object.prototype,g=d.hasOwnProperty,E=d.toString,b=x?x.toStringTag:void 0;function w(C){var S=g.call(C,b),P=C[b];try{C[b]=void 0;var I=!0}catch{}var M=E.call(C);return I&&(S?C[b]=P:delete C[b]),M}return _getRawTag=w,_getRawTag}var _objectToString,hasRequired_objectToString;function require_objectToString(){if(hasRequired_objectToString)return _objectToString;hasRequired_objectToString=1;var x=Object.prototype,d=x.toString;function g(E){return d.call(E)}return _objectToString=g,_objectToString}var _baseGetTag,hasRequired_baseGetTag;function require_baseGetTag(){if(hasRequired_baseGetTag)return _baseGetTag;hasRequired_baseGetTag=1;var x=require_Symbol(),d=require_getRawTag(),g=require_objectToString(),E="[object Null]",b="[object Undefined]",w=x?x.toStringTag:void 0;function C(S){return S==null?S===void 0?b:E:w&&w in Object(S)?d(S):g(S)}return _baseGetTag=C,_baseGetTag}var isArray_1,hasRequiredIsArray;function requireIsArray(){if(hasRequiredIsArray)return isArray_1;hasRequiredIsArray=1;var x=Array.isArray;return isArray_1=x,isArray_1}var isObjectLike_1,hasRequiredIsObjectLike;function requireIsObjectLike(){if(hasRequiredIsObjectLike)return isObjectLike_1;hasRequiredIsObjectLike=1;function x(d){return d!=null&&typeof d=="object"}return isObjectLike_1=x,isObjectLike_1}var isString_1,hasRequiredIsString;function requireIsString(){if(hasRequiredIsString)return isString_1;hasRequiredIsString=1;var x=require_baseGetTag(),d=requireIsArray(),g=requireIsObjectLike(),E="[object String]";function b(w){return typeof w=="string"||!d(w)&&g(w)&&x(w)==E}return isString_1=b,isString_1}var _createBaseFor,hasRequired_createBaseFor;function require_createBaseFor(){if(hasRequired_createBaseFor)return _createBaseFor;hasRequired_createBaseFor=1;function x(d){return function(g,E,b){for(var w=-1,C=Object(g),S=b(g),P=S.length;P--;){var I=S[d?P:++w];if(E(C[I],I,C)===!1)break}return g}}return _createBaseFor=x,_createBaseFor}var _baseFor,hasRequired_baseFor;function require_baseFor(){if(hasRequired_baseFor)return _baseFor;hasRequired_baseFor=1;var x=require_createBaseFor(),d=x();return _baseFor=d,_baseFor}var _baseTimes,hasRequired_baseTimes;function require_baseTimes(){if(hasRequired_baseTimes)return _baseTimes;hasRequired_baseTimes=1;function x(d,g){for(var E=-1,b=Array(d);++E<d;)b[E]=g(E);return b}return _baseTimes=x,_baseTimes}var _baseIsArguments,hasRequired_baseIsArguments;function require_baseIsArguments(){if(hasRequired_baseIsArguments)return _baseIsArguments;hasRequired_baseIsArguments=1;var x=require_baseGetTag(),d=requireIsObjectLike(),g="[object Arguments]";function E(b){return d(b)&&x(b)==g}return _baseIsArguments=E,_baseIsArguments}var isArguments_1,hasRequiredIsArguments;function requireIsArguments(){if(hasRequiredIsArguments)return isArguments_1;hasRequiredIsArguments=1;var x=require_baseIsArguments(),d=requireIsObjectLike(),g=Object.prototype,E=g.hasOwnProperty,b=g.propertyIsEnumerable,w=x((function(){return arguments})())?x:function(C){return d(C)&&E.call(C,"callee")&&!b.call(C,"callee")};return isArguments_1=w,isArguments_1}var isBuffer$1={exports:{}},stubFalse_1,hasRequiredStubFalse;function requireStubFalse(){if(hasRequiredStubFalse)return stubFalse_1;hasRequiredStubFalse=1;function x(){return!1}return stubFalse_1=x,stubFalse_1}isBuffer$1.exports;var hasRequiredIsBuffer;function requireIsBuffer(){return hasRequiredIsBuffer||(hasRequiredIsBuffer=1,(function(x,d){var g=require_root(),E=requireStubFalse(),b=d&&!d.nodeType&&d,w=b&&!0&&x&&!x.nodeType&&x,C=w&&w.exports===b,S=C?g.Buffer:void 0,P=S?S.isBuffer:void 0,I=P||E;x.exports=I})(isBuffer$1,isBuffer$1.exports)),isBuffer$1.exports}var _isIndex,hasRequired_isIndex;function require_isIndex(){if(hasRequired_isIndex)return _isIndex;hasRequired_isIndex=1;var x=9007199254740991,d=/^(?:0|[1-9]\d*)$/;function g(E,b){var w=typeof E;return b=b??x,!!b&&(w=="number"||w!="symbol"&&d.test(E))&&E>-1&&E%1==0&&E<b}return _isIndex=g,_isIndex}var isLength_1,hasRequiredIsLength;function requireIsLength(){if(hasRequiredIsLength)return isLength_1;hasRequiredIsLength=1;var x=9007199254740991;function d(g){return typeof g=="number"&&g>-1&&g%1==0&&g<=x}return isLength_1=d,isLength_1}var _baseIsTypedArray,hasRequired_baseIsTypedArray;function require_baseIsTypedArray(){if(hasRequired_baseIsTypedArray)return _baseIsTypedArray;hasRequired_baseIsTypedArray=1;var x=require_baseGetTag(),d=requireIsLength(),g=requireIsObjectLike(),E="[object Arguments]",b="[object Array]",w="[object Boolean]",C="[object Date]",S="[object Error]",P="[object Function]",I="[object Map]",M="[object Number]",D="[object Object]",k="[object RegExp]",H="[object Set]",F="[object String]",j="[object WeakMap]",$="[object ArrayBuffer]",z="[object DataView]",U="[object Float32Array]",W="[object Float64Array]",q="[object Int8Array]",Z="[object Int16Array]",X="[object Int32Array]",K="[object Uint8Array]",ee="[object Uint8ClampedArray]",te="[object Uint16Array]",ce="[object Uint32Array]",Q={};Q[U]=Q[W]=Q[q]=Q[Z]=Q[X]=Q[K]=Q[ee]=Q[te]=Q[ce]=!0,Q[E]=Q[b]=Q[$]=Q[w]=Q[z]=Q[C]=Q[S]=Q[P]=Q[I]=Q[M]=Q[D]=Q[k]=Q[H]=Q[F]=Q[j]=!1;function se(ge){return g(ge)&&d(ge.length)&&!!Q[x(ge)]}return _baseIsTypedArray=se,_baseIsTypedArray}var _baseUnary,hasRequired_baseUnary;function require_baseUnary(){if(hasRequired_baseUnary)return _baseUnary;hasRequired_baseUnary=1;function x(d){return function(g){return d(g)}}return _baseUnary=x,_baseUnary}var _nodeUtil={exports:{}};_nodeUtil.exports;var hasRequired_nodeUtil;function require_nodeUtil(){return hasRequired_nodeUtil||(hasRequired_nodeUtil=1,(function(x,d){var g=require_freeGlobal(),E=d&&!d.nodeType&&d,b=E&&!0&&x&&!x.nodeType&&x,w=b&&b.exports===E,C=w&&g.process,S=(function(){try{var P=b&&b.require&&b.require("util").types;return P||C&&C.binding&&C.binding("util")}catch{}})();x.exports=S})(_nodeUtil,_nodeUtil.exports)),_nodeUtil.exports}var isTypedArray_1,hasRequiredIsTypedArray;function requireIsTypedArray(){if(hasRequiredIsTypedArray)return isTypedArray_1;hasRequiredIsTypedArray=1;var x=require_baseIsTypedArray(),d=require_baseUnary(),g=require_nodeUtil(),E=g&&g.isTypedArray,b=E?d(E):x;return isTypedArray_1=b,isTypedArray_1}var _arrayLikeKeys,hasRequired_arrayLikeKeys;function require_arrayLikeKeys(){if(hasRequired_arrayLikeKeys)return _arrayLikeKeys;hasRequired_arrayLikeKeys=1;var x=require_baseTimes(),d=requireIsArguments(),g=requireIsArray(),E=requireIsBuffer(),b=require_isIndex(),w=requireIsTypedArray(),C=Object.prototype,S=C.hasOwnProperty;function P(I,M){var D=g(I),k=!D&&d(I),H=!D&&!k&&E(I),F=!D&&!k&&!H&&w(I),j=D||k||H||F,$=j?x(I.length,String):[],z=$.length;for(var U in I)(M||S.call(I,U))&&!(j&&(U=="length"||H&&(U=="offset"||U=="parent")||F&&(U=="buffer"||U=="byteLength"||U=="byteOffset")||b(U,z)))&&$.push(U);return $}return _arrayLikeKeys=P,_arrayLikeKeys}var _isPrototype,hasRequired_isPrototype;function require_isPrototype(){if(hasRequired_isPrototype)return _isPrototype;hasRequired_isPrototype=1;var x=Object.prototype;function d(g){var E=g&&g.constructor,b=typeof E=="function"&&E.prototype||x;return g===b}return _isPrototype=d,_isPrototype}var _overArg,hasRequired_overArg;function require_overArg(){if(hasRequired_overArg)return _overArg;hasRequired_overArg=1;function x(d,g){return function(E){return d(g(E))}}return _overArg=x,_overArg}var _nativeKeys,hasRequired_nativeKeys;function require_nativeKeys(){if(hasRequired_nativeKeys)return _nativeKeys;hasRequired_nativeKeys=1;var x=require_overArg(),d=x(Object.keys,Object);return _nativeKeys=d,_nativeKeys}var _baseKeys,hasRequired_baseKeys;function require_baseKeys(){if(hasRequired_baseKeys)return _baseKeys;hasRequired_baseKeys=1;var x=require_isPrototype(),d=require_nativeKeys(),g=Object.prototype,E=g.hasOwnProperty;function b(w){if(!x(w))return d(w);var C=[];for(var S in Object(w))E.call(w,S)&&S!="constructor"&&C.push(S);return C}return _baseKeys=b,_baseKeys}var isObject_1,hasRequiredIsObject;function requireIsObject(){if(hasRequiredIsObject)return isObject_1;hasRequiredIsObject=1;function x(d){var g=typeof d;return d!=null&&(g=="object"||g=="function")}return isObject_1=x,isObject_1}var isFunction_1,hasRequiredIsFunction;function requireIsFunction(){if(hasRequiredIsFunction)return isFunction_1;hasRequiredIsFunction=1;var x=require_baseGetTag(),d=requireIsObject(),g="[object AsyncFunction]",E="[object Function]",b="[object GeneratorFunction]",w="[object Proxy]";function C(S){if(!d(S))return!1;var P=x(S);return P==E||P==b||P==g||P==w}return isFunction_1=C,isFunction_1}var isArrayLike_1,hasRequiredIsArrayLike;function requireIsArrayLike(){if(hasRequiredIsArrayLike)return isArrayLike_1;hasRequiredIsArrayLike=1;var x=requireIsFunction(),d=requireIsLength();function g(E){return E!=null&&d(E.length)&&!x(E)}return isArrayLike_1=g,isArrayLike_1}var keys_1,hasRequiredKeys;function requireKeys(){if(hasRequiredKeys)return keys_1;hasRequiredKeys=1;var x=require_arrayLikeKeys(),d=require_baseKeys(),g=requireIsArrayLike();function E(b){return g(b)?x(b):d(b)}return keys_1=E,keys_1}var _baseForOwn,hasRequired_baseForOwn;function require_baseForOwn(){if(hasRequired_baseForOwn)return _baseForOwn;hasRequired_baseForOwn=1;var x=require_baseFor(),d=requireKeys();function g(E,b){return E&&x(E,b,d)}return _baseForOwn=g,_baseForOwn}var identity_1,hasRequiredIdentity;function requireIdentity(){if(hasRequiredIdentity)return identity_1;hasRequiredIdentity=1;function x(d){return d}return identity_1=x,identity_1}var _castFunction,hasRequired_castFunction;function require_castFunction(){if(hasRequired_castFunction)return _castFunction;hasRequired_castFunction=1;var x=requireIdentity();function d(g){return typeof g=="function"?g:x}return _castFunction=d,_castFunction}var forOwn_1,hasRequiredForOwn;function requireForOwn(){if(hasRequiredForOwn)return forOwn_1;hasRequiredForOwn=1;var x=require_baseForOwn(),d=require_castFunction();function g(E,b){return E&&x(E,d(b))}return forOwn_1=g,forOwn_1}var _getPrototype,hasRequired_getPrototype;function require_getPrototype(){if(hasRequired_getPrototype)return _getPrototype;hasRequired_getPrototype=1;var x=require_overArg(),d=x(Object.getPrototypeOf,Object);return _getPrototype=d,_getPrototype}var isPlainObject_1,hasRequiredIsPlainObject;function requireIsPlainObject(){if(hasRequiredIsPlainObject)return isPlainObject_1;hasRequiredIsPlainObject=1;var x=require_baseGetTag(),d=require_getPrototype(),g=requireIsObjectLike(),E="[object Object]",b=Function.prototype,w=Object.prototype,C=b.toString,S=w.hasOwnProperty,P=C.call(Object);function I(M){if(!g(M)||x(M)!=E)return!1;var D=d(M);if(D===null)return!0;var k=S.call(D,"constructor")&&D.constructor;return typeof k=="function"&&k instanceof k&&C.call(k)==P}return isPlainObject_1=I,isPlainObject_1}var _arrayMap,hasRequired_arrayMap;function require_arrayMap(){if(hasRequired_arrayMap)return _arrayMap;hasRequired_arrayMap=1;function x(d,g){for(var E=-1,b=d==null?0:d.length,w=Array(b);++E<b;)w[E]=g(d[E],E,d);return w}return _arrayMap=x,_arrayMap}var _listCacheClear,hasRequired_listCacheClear;function require_listCacheClear(){if(hasRequired_listCacheClear)return _listCacheClear;hasRequired_listCacheClear=1;function x(){this.__data__=[],this.size=0}return _listCacheClear=x,_listCacheClear}var eq_1,hasRequiredEq;function requireEq(){if(hasRequiredEq)return eq_1;hasRequiredEq=1;function x(d,g){return d===g||d!==d&&g!==g}return eq_1=x,eq_1}var _assocIndexOf,hasRequired_assocIndexOf;function require_assocIndexOf(){if(hasRequired_assocIndexOf)return _assocIndexOf;hasRequired_assocIndexOf=1;var x=requireEq();function d(g,E){for(var b=g.length;b--;)if(x(g[b][0],E))return b;return-1}return _assocIndexOf=d,_assocIndexOf}var _listCacheDelete,hasRequired_listCacheDelete;function require_listCacheDelete(){if(hasRequired_listCacheDelete)return _listCacheDelete;hasRequired_listCacheDelete=1;var x=require_assocIndexOf(),d=Array.prototype,g=d.splice;function E(b){var w=this.__data__,C=x(w,b);if(C<0)return!1;var S=w.length-1;return C==S?w.pop():g.call(w,C,1),--this.size,!0}return _listCacheDelete=E,_listCacheDelete}var _listCacheGet,hasRequired_listCacheGet;function require_listCacheGet(){if(hasRequired_listCacheGet)return _listCacheGet;hasRequired_listCacheGet=1;var x=require_assocIndexOf();function d(g){var E=this.__data__,b=x(E,g);return b<0?void 0:E[b][1]}return _listCacheGet=d,_listCacheGet}var _listCacheHas,hasRequired_listCacheHas;function require_listCacheHas(){if(hasRequired_listCacheHas)return _listCacheHas;hasRequired_listCacheHas=1;var x=require_assocIndexOf();function d(g){return x(this.__data__,g)>-1}return _listCacheHas=d,_listCacheHas}var _listCacheSet,hasRequired_listCacheSet;function require_listCacheSet(){if(hasRequired_listCacheSet)return _listCacheSet;hasRequired_listCacheSet=1;var x=require_assocIndexOf();function d(g,E){var b=this.__data__,w=x(b,g);return w<0?(++this.size,b.push([g,E])):b[w][1]=E,this}return _listCacheSet=d,_listCacheSet}var _ListCache,hasRequired_ListCache;function require_ListCache(){if(hasRequired_ListCache)return _ListCache;hasRequired_ListCache=1;var x=require_listCacheClear(),d=require_listCacheDelete(),g=require_listCacheGet(),E=require_listCacheHas(),b=require_listCacheSet();function w(C){var S=-1,P=C==null?0:C.length;for(this.clear();++S<P;){var I=C[S];this.set(I[0],I[1])}}return w.prototype.clear=x,w.prototype.delete=d,w.prototype.get=g,w.prototype.has=E,w.prototype.set=b,_ListCache=w,_ListCache}var _stackClear,hasRequired_stackClear;function require_stackClear(){if(hasRequired_stackClear)return _stackClear;hasRequired_stackClear=1;var x=require_ListCache();function d(){this.__data__=new x,this.size=0}return _stackClear=d,_stackClear}var _stackDelete,hasRequired_stackDelete;function require_stackDelete(){if(hasRequired_stackDelete)return _stackDelete;hasRequired_stackDelete=1;function x(d){var g=this.__data__,E=g.delete(d);return this.size=g.size,E}return _stackDelete=x,_stackDelete}var _stackGet,hasRequired_stackGet;function require_stackGet(){if(hasRequired_stackGet)return _stackGet;hasRequired_stackGet=1;function x(d){return this.__data__.get(d)}return _stackGet=x,_stackGet}var _stackHas,hasRequired_stackHas;function require_stackHas(){if(hasRequired_stackHas)return _stackHas;hasRequired_stackHas=1;function x(d){return this.__data__.has(d)}return _stackHas=x,_stackHas}var _coreJsData,hasRequired_coreJsData;function require_coreJsData(){if(hasRequired_coreJsData)return _coreJsData;hasRequired_coreJsData=1;var x=require_root(),d=x["__core-js_shared__"];return _coreJsData=d,_coreJsData}var _isMasked,hasRequired_isMasked;function require_isMasked(){if(hasRequired_isMasked)return _isMasked;hasRequired_isMasked=1;var x=require_coreJsData(),d=(function(){var E=/[^.]+$/.exec(x&&x.keys&&x.keys.IE_PROTO||"");return E?"Symbol(src)_1."+E:""})();function g(E){return!!d&&d in E}return _isMasked=g,_isMasked}var _toSource,hasRequired_toSource;function require_toSource(){if(hasRequired_toSource)return _toSource;hasRequired_toSource=1;var x=Function.prototype,d=x.toString;function g(E){if(E!=null){try{return d.call(E)}catch{}try{return E+""}catch{}}return""}return _toSource=g,_toSource}var _baseIsNative,hasRequired_baseIsNative;function require_baseIsNative(){if(hasRequired_baseIsNative)return _baseIsNative;hasRequired_baseIsNative=1;var x=requireIsFunction(),d=require_isMasked(),g=requireIsObject(),E=require_toSource(),b=/[\\^$.*+?()[\]{}|]/g,w=/^\[object .+?Constructor\]$/,C=Function.prototype,S=Object.prototype,P=C.toString,I=S.hasOwnProperty,M=RegExp("^"+P.call(I).replace(b,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function D(k){if(!g(k)||d(k))return!1;var H=x(k)?M:w;return H.test(E(k))}return _baseIsNative=D,_baseIsNative}var _getValue,hasRequired_getValue;function require_getValue(){if(hasRequired_getValue)return _getValue;hasRequired_getValue=1;function x(d,g){return d==null?void 0:d[g]}return _getValue=x,_getValue}var _getNative,hasRequired_getNative;function require_getNative(){if(hasRequired_getNative)return _getNative;hasRequired_getNative=1;var x=require_baseIsNative(),d=require_getValue();function g(E,b){var w=d(E,b);return x(w)?w:void 0}return _getNative=g,_getNative}var _Map,hasRequired_Map;function require_Map(){if(hasRequired_Map)return _Map;hasRequired_Map=1;var x=require_getNative(),d=require_root(),g=x(d,"Map");return _Map=g,_Map}var _nativeCreate,hasRequired_nativeCreate;function require_nativeCreate(){if(hasRequired_nativeCreate)return _nativeCreate;hasRequired_nativeCreate=1;var x=require_getNative(),d=x(Object,"create");return _nativeCreate=d,_nativeCreate}var _hashClear,hasRequired_hashClear;function require_hashClear(){if(hasRequired_hashClear)return _hashClear;hasRequired_hashClear=1;var x=require_nativeCreate();function d(){this.__data__=x?x(null):{},this.size=0}return _hashClear=d,_hashClear}var _hashDelete,hasRequired_hashDelete;function require_hashDelete(){if(hasRequired_hashDelete)return _hashDelete;hasRequired_hashDelete=1;function x(d){var g=this.has(d)&&delete this.__data__[d];return this.size-=g?1:0,g}return _hashDelete=x,_hashDelete}var _hashGet,hasRequired_hashGet;function require_hashGet(){if(hasRequired_hashGet)return _hashGet;hasRequired_hashGet=1;var x=require_nativeCreate(),d="__lodash_hash_undefined__",g=Object.prototype,E=g.hasOwnProperty;function b(w){var C=this.__data__;if(x){var S=C[w];return S===d?void 0:S}return E.call(C,w)?C[w]:void 0}return _hashGet=b,_hashGet}var _hashHas,hasRequired_hashHas;function require_hashHas(){if(hasRequired_hashHas)return _hashHas;hasRequired_hashHas=1;var x=require_nativeCreate(),d=Object.prototype,g=d.hasOwnProperty;function E(b){var w=this.__data__;return x?w[b]!==void 0:g.call(w,b)}return _hashHas=E,_hashHas}var _hashSet,hasRequired_hashSet;function require_hashSet(){if(hasRequired_hashSet)return _hashSet;hasRequired_hashSet=1;var x=require_nativeCreate(),d="__lodash_hash_undefined__";function g(E,b){var w=this.__data__;return this.size+=this.has(E)?0:1,w[E]=x&&b===void 0?d:b,this}return _hashSet=g,_hashSet}var _Hash,hasRequired_Hash;function require_Hash(){if(hasRequired_Hash)return _Hash;hasRequired_Hash=1;var x=require_hashClear(),d=require_hashDelete(),g=require_hashGet(),E=require_hashHas(),b=require_hashSet();function w(C){var S=-1,P=C==null?0:C.length;for(this.clear();++S<P;){var I=C[S];this.set(I[0],I[1])}}return w.prototype.clear=x,w.prototype.delete=d,w.prototype.get=g,w.prototype.has=E,w.prototype.set=b,_Hash=w,_Hash}var _mapCacheClear,hasRequired_mapCacheClear;function require_mapCacheClear(){if(hasRequired_mapCacheClear)return _mapCacheClear;hasRequired_mapCacheClear=1;var x=require_Hash(),d=require_ListCache(),g=require_Map();function E(){this.size=0,this.__data__={hash:new x,map:new(g||d),string:new x}}return _mapCacheClear=E,_mapCacheClear}var _isKeyable,hasRequired_isKeyable;function require_isKeyable(){if(hasRequired_isKeyable)return _isKeyable;hasRequired_isKeyable=1;function x(d){var g=typeof d;return g=="string"||g=="number"||g=="symbol"||g=="boolean"?d!=="__proto__":d===null}return _isKeyable=x,_isKeyable}var _getMapData,hasRequired_getMapData;function require_getMapData(){if(hasRequired_getMapData)return _getMapData;hasRequired_getMapData=1;var x=require_isKeyable();function d(g,E){var b=g.__data__;return x(E)?b[typeof E=="string"?"string":"hash"]:b.map}return _getMapData=d,_getMapData}var _mapCacheDelete,hasRequired_mapCacheDelete;function require_mapCacheDelete(){if(hasRequired_mapCacheDelete)return _mapCacheDelete;hasRequired_mapCacheDelete=1;var x=require_getMapData();function d(g){var E=x(this,g).delete(g);return this.size-=E?1:0,E}return _mapCacheDelete=d,_mapCacheDelete}var _mapCacheGet,hasRequired_mapCacheGet;function require_mapCacheGet(){if(hasRequired_mapCacheGet)return _mapCacheGet;hasRequired_mapCacheGet=1;var x=require_getMapData();function d(g){return x(this,g).get(g)}return _mapCacheGet=d,_mapCacheGet}var _mapCacheHas,hasRequired_mapCacheHas;function require_mapCacheHas(){if(hasRequired_mapCacheHas)return _mapCacheHas;hasRequired_mapCacheHas=1;var x=require_getMapData();function d(g){return x(this,g).has(g)}return _mapCacheHas=d,_mapCacheHas}var _mapCacheSet,hasRequired_mapCacheSet;function require_mapCacheSet(){if(hasRequired_mapCacheSet)return _mapCacheSet;hasRequired_mapCacheSet=1;var x=require_getMapData();function d(g,E){var b=x(this,g),w=b.size;return b.set(g,E),this.size+=b.size==w?0:1,this}return _mapCacheSet=d,_mapCacheSet}var _MapCache,hasRequired_MapCache;function require_MapCache(){if(hasRequired_MapCache)return _MapCache;hasRequired_MapCache=1;var x=require_mapCacheClear(),d=require_mapCacheDelete(),g=require_mapCacheGet(),E=require_mapCacheHas(),b=require_mapCacheSet();function w(C){var S=-1,P=C==null?0:C.length;for(this.clear();++S<P;){var I=C[S];this.set(I[0],I[1])}}return w.prototype.clear=x,w.prototype.delete=d,w.prototype.get=g,w.prototype.has=E,w.prototype.set=b,_MapCache=w,_MapCache}var _stackSet,hasRequired_stackSet;function require_stackSet(){if(hasRequired_stackSet)return _stackSet;hasRequired_stackSet=1;var x=require_ListCache(),d=require_Map(),g=require_MapCache(),E=200;function b(w,C){var S=this.__data__;if(S instanceof x){var P=S.__data__;if(!d||P.length<E-1)return P.push([w,C]),this.size=++S.size,this;S=this.__data__=new g(P)}return S.set(w,C),this.size=S.size,this}return _stackSet=b,_stackSet}var _Stack,hasRequired_Stack;function require_Stack(){if(hasRequired_Stack)return _Stack;hasRequired_Stack=1;var x=require_ListCache(),d=require_stackClear(),g=require_stackDelete(),E=require_stackGet(),b=require_stackHas(),w=require_stackSet();function C(S){var P=this.__data__=new x(S);this.size=P.size}return C.prototype.clear=d,C.prototype.delete=g,C.prototype.get=E,C.prototype.has=b,C.prototype.set=w,_Stack=C,_Stack}var _setCacheAdd,hasRequired_setCacheAdd;function require_setCacheAdd(){if(hasRequired_setCacheAdd)return _setCacheAdd;hasRequired_setCacheAdd=1;var x="__lodash_hash_undefined__";function d(g){return this.__data__.set(g,x),this}return _setCacheAdd=d,_setCacheAdd}var _setCacheHas,hasRequired_setCacheHas;function require_setCacheHas(){if(hasRequired_setCacheHas)return _setCacheHas;hasRequired_setCacheHas=1;function x(d){return this.__data__.has(d)}return _setCacheHas=x,_setCacheHas}var _SetCache,hasRequired_SetCache;function require_SetCache(){if(hasRequired_SetCache)return _SetCache;hasRequired_SetCache=1;var x=require_MapCache(),d=require_setCacheAdd(),g=require_setCacheHas();function E(b){var w=-1,C=b==null?0:b.length;for(this.__data__=new x;++w<C;)this.add(b[w])}return E.prototype.add=E.prototype.push=d,E.prototype.has=g,_SetCache=E,_SetCache}var _arraySome,hasRequired_arraySome;function require_arraySome(){if(hasRequired_arraySome)return _arraySome;hasRequired_arraySome=1;function x(d,g){for(var E=-1,b=d==null?0:d.length;++E<b;)if(g(d[E],E,d))return!0;return!1}return _arraySome=x,_arraySome}var _cacheHas,hasRequired_cacheHas;function require_cacheHas(){if(hasRequired_cacheHas)return _cacheHas;hasRequired_cacheHas=1;function x(d,g){return d.has(g)}return _cacheHas=x,_cacheHas}var _equalArrays,hasRequired_equalArrays;function require_equalArrays(){if(hasRequired_equalArrays)return _equalArrays;hasRequired_equalArrays=1;var x=require_SetCache(),d=require_arraySome(),g=require_cacheHas(),E=1,b=2;function w(C,S,P,I,M,D){var k=P&E,H=C.length,F=S.length;if(H!=F&&!(k&&F>H))return!1;var j=D.get(C),$=D.get(S);if(j&&$)return j==S&&$==C;var z=-1,U=!0,W=P&b?new x:void 0;for(D.set(C,S),D.set(S,C);++z<H;){var q=C[z],Z=S[z];if(I)var X=k?I(Z,q,z,S,C,D):I(q,Z,z,C,S,D);if(X!==void 0){if(X)continue;U=!1;break}if(W){if(!d(S,function(K,ee){if(!g(W,ee)&&(q===K||M(q,K,P,I,D)))return W.push(ee)})){U=!1;break}}else if(!(q===Z||M(q,Z,P,I,D))){U=!1;break}}return D.delete(C),D.delete(S),U}return _equalArrays=w,_equalArrays}var _Uint8Array,hasRequired_Uint8Array;function require_Uint8Array(){if(hasRequired_Uint8Array)return _Uint8Array;hasRequired_Uint8Array=1;var x=require_root(),d=x.Uint8Array;return _Uint8Array=d,_Uint8Array}var _mapToArray,hasRequired_mapToArray;function require_mapToArray(){if(hasRequired_mapToArray)return _mapToArray;hasRequired_mapToArray=1;function x(d){var g=-1,E=Array(d.size);return d.forEach(function(b,w){E[++g]=[w,b]}),E}return _mapToArray=x,_mapToArray}var _setToArray,hasRequired_setToArray;function require_setToArray(){if(hasRequired_setToArray)return _setToArray;hasRequired_setToArray=1;function x(d){var g=-1,E=Array(d.size);return d.forEach(function(b){E[++g]=b}),E}return _setToArray=x,_setToArray}var _equalByTag,hasRequired_equalByTag;function require_equalByTag(){if(hasRequired_equalByTag)return _equalByTag;hasRequired_equalByTag=1;var x=require_Symbol(),d=require_Uint8Array(),g=requireEq(),E=require_equalArrays(),b=require_mapToArray(),w=require_setToArray(),C=1,S=2,P="[object Boolean]",I="[object Date]",M="[object Error]",D="[object Map]",k="[object Number]",H="[object RegExp]",F="[object Set]",j="[object String]",$="[object Symbol]",z="[object ArrayBuffer]",U="[object DataView]",W=x?x.prototype:void 0,q=W?W.valueOf:void 0;function Z(X,K,ee,te,ce,Q,se){switch(ee){case U:if(X.byteLength!=K.byteLength||X.byteOffset!=K.byteOffset)return!1;X=X.buffer,K=K.buffer;case z:return!(X.byteLength!=K.byteLength||!Q(new d(X),new d(K)));case P:case I:case k:return g(+X,+K);case M:return X.name==K.name&&X.message==K.message;case H:case j:return X==K+"";case D:var ge=b;case F:var Ce=te&C;if(ge||(ge=w),X.size!=K.size&&!Ce)return!1;var oe=se.get(X);if(oe)return oe==K;te|=S,se.set(X,K);var he=E(ge(X),ge(K),te,ce,Q,se);return se.delete(X),he;case $:if(q)return q.call(X)==q.call(K)}return!1}return _equalByTag=Z,_equalByTag}var _arrayPush,hasRequired_arrayPush;function require_arrayPush(){if(hasRequired_arrayPush)return _arrayPush;hasRequired_arrayPush=1;function x(d,g){for(var E=-1,b=g.length,w=d.length;++E<b;)d[w+E]=g[E];return d}return _arrayPush=x,_arrayPush}var _baseGetAllKeys,hasRequired_baseGetAllKeys;function require_baseGetAllKeys(){if(hasRequired_baseGetAllKeys)return _baseGetAllKeys;hasRequired_baseGetAllKeys=1;var x=require_arrayPush(),d=requireIsArray();function g(E,b,w){var C=b(E);return d(E)?C:x(C,w(E))}return _baseGetAllKeys=g,_baseGetAllKeys}var _arrayFilter,hasRequired_arrayFilter;function require_arrayFilter(){if(hasRequired_arrayFilter)return _arrayFilter;hasRequired_arrayFilter=1;function x(d,g){for(var E=-1,b=d==null?0:d.length,w=0,C=[];++E<b;){var S=d[E];g(S,E,d)&&(C[w++]=S)}return C}return _arrayFilter=x,_arrayFilter}var stubArray_1,hasRequiredStubArray;function requireStubArray(){if(hasRequiredStubArray)return stubArray_1;hasRequiredStubArray=1;function x(){return[]}return stubArray_1=x,stubArray_1}var _getSymbols,hasRequired_getSymbols;function require_getSymbols(){if(hasRequired_getSymbols)return _getSymbols;hasRequired_getSymbols=1;var x=require_arrayFilter(),d=requireStubArray(),g=Object.prototype,E=g.propertyIsEnumerable,b=Object.getOwnPropertySymbols,w=b?function(C){return C==null?[]:(C=Object(C),x(b(C),function(S){return E.call(C,S)}))}:d;return _getSymbols=w,_getSymbols}var _getAllKeys,hasRequired_getAllKeys;function require_getAllKeys(){if(hasRequired_getAllKeys)return _getAllKeys;hasRequired_getAllKeys=1;var x=require_baseGetAllKeys(),d=require_getSymbols(),g=requireKeys();function E(b){return x(b,g,d)}return _getAllKeys=E,_getAllKeys}var _equalObjects,hasRequired_equalObjects;function require_equalObjects(){if(hasRequired_equalObjects)return _equalObjects;hasRequired_equalObjects=1;var x=require_getAllKeys(),d=1,g=Object.prototype,E=g.hasOwnProperty;function b(w,C,S,P,I,M){var D=S&d,k=x(w),H=k.length,F=x(C),j=F.length;if(H!=j&&!D)return!1;for(var $=H;$--;){var z=k[$];if(!(D?z in C:E.call(C,z)))return!1}var U=M.get(w),W=M.get(C);if(U&&W)return U==C&&W==w;var q=!0;M.set(w,C),M.set(C,w);for(var Z=D;++$<H;){z=k[$];var X=w[z],K=C[z];if(P)var ee=D?P(K,X,z,C,w,M):P(X,K,z,w,C,M);if(!(ee===void 0?X===K||I(X,K,S,P,M):ee)){q=!1;break}Z||(Z=z=="constructor")}if(q&&!Z){var te=w.constructor,ce=C.constructor;te!=ce&&"constructor"in w&&"constructor"in C&&!(typeof te=="function"&&te instanceof te&&typeof ce=="function"&&ce instanceof ce)&&(q=!1)}return M.delete(w),M.delete(C),q}return _equalObjects=b,_equalObjects}var _DataView,hasRequired_DataView;function require_DataView(){if(hasRequired_DataView)return _DataView;hasRequired_DataView=1;var x=require_getNative(),d=require_root(),g=x(d,"DataView");return _DataView=g,_DataView}var _Promise,hasRequired_Promise;function require_Promise(){if(hasRequired_Promise)return _Promise;hasRequired_Promise=1;var x=require_getNative(),d=require_root(),g=x(d,"Promise");return _Promise=g,_Promise}var _Set,hasRequired_Set;function require_Set(){if(hasRequired_Set)return _Set;hasRequired_Set=1;var x=require_getNative(),d=require_root(),g=x(d,"Set");return _Set=g,_Set}var _WeakMap,hasRequired_WeakMap;function require_WeakMap(){if(hasRequired_WeakMap)return _WeakMap;hasRequired_WeakMap=1;var x=require_getNative(),d=require_root(),g=x(d,"WeakMap");return _WeakMap=g,_WeakMap}var _getTag,hasRequired_getTag;function require_getTag(){if(hasRequired_getTag)return _getTag;hasRequired_getTag=1;var x=require_DataView(),d=require_Map(),g=require_Promise(),E=require_Set(),b=require_WeakMap(),w=require_baseGetTag(),C=require_toSource(),S="[object Map]",P="[object Object]",I="[object Promise]",M="[object Set]",D="[object WeakMap]",k="[object DataView]",H=C(x),F=C(d),j=C(g),$=C(E),z=C(b),U=w;return(x&&U(new x(new ArrayBuffer(1)))!=k||d&&U(new d)!=S||g&&U(g.resolve())!=I||E&&U(new E)!=M||b&&U(new b)!=D)&&(U=function(W){var q=w(W),Z=q==P?W.constructor:void 0,X=Z?C(Z):"";if(X)switch(X){case H:return k;case F:return S;case j:return I;case $:return M;case z:return D}return q}),_getTag=U,_getTag}var _baseIsEqualDeep,hasRequired_baseIsEqualDeep;function require_baseIsEqualDeep(){if(hasRequired_baseIsEqualDeep)return _baseIsEqualDeep;hasRequired_baseIsEqualDeep=1;var x=require_Stack(),d=require_equalArrays(),g=require_equalByTag(),E=require_equalObjects(),b=require_getTag(),w=requireIsArray(),C=requireIsBuffer(),S=requireIsTypedArray(),P=1,I="[object Arguments]",M="[object Array]",D="[object Object]",k=Object.prototype,H=k.hasOwnProperty;function F(j,$,z,U,W,q){var Z=w(j),X=w($),K=Z?M:b(j),ee=X?M:b($);K=K==I?D:K,ee=ee==I?D:ee;var te=K==D,ce=ee==D,Q=K==ee;if(Q&&C(j)){if(!C($))return!1;Z=!0,te=!1}if(Q&&!te)return q||(q=new x),Z||S(j)?d(j,$,z,U,W,q):g(j,$,K,z,U,W,q);if(!(z&P)){var se=te&&H.call(j,"__wrapped__"),ge=ce&&H.call($,"__wrapped__");if(se||ge){var Ce=se?j.value():j,oe=ge?$.value():$;return q||(q=new x),W(Ce,oe,z,U,q)}}return Q?(q||(q=new x),E(j,$,z,U,W,q)):!1}return _baseIsEqualDeep=F,_baseIsEqualDeep}var _baseIsEqual,hasRequired_baseIsEqual;function require_baseIsEqual(){if(hasRequired_baseIsEqual)return _baseIsEqual;hasRequired_baseIsEqual=1;var x=require_baseIsEqualDeep(),d=requireIsObjectLike();function g(E,b,w,C,S){return E===b?!0:E==null||b==null||!d(E)&&!d(b)?E!==E&&b!==b:x(E,b,w,C,g,S)}return _baseIsEqual=g,_baseIsEqual}var _baseIsMatch,hasRequired_baseIsMatch;function require_baseIsMatch(){if(hasRequired_baseIsMatch)return _baseIsMatch;hasRequired_baseIsMatch=1;var x=require_Stack(),d=require_baseIsEqual(),g=1,E=2;function b(w,C,S,P){var I=S.length,M=I,D=!P;if(w==null)return!M;for(w=Object(w);I--;){var k=S[I];if(D&&k[2]?k[1]!==w[k[0]]:!(k[0]in w))return!1}for(;++I<M;){k=S[I];var H=k[0],F=w[H],j=k[1];if(D&&k[2]){if(F===void 0&&!(H in w))return!1}else{var $=new x;if(P)var z=P(F,j,H,w,C,$);if(!(z===void 0?d(j,F,g|E,P,$):z))return!1}}return!0}return _baseIsMatch=b,_baseIsMatch}var _isStrictComparable,hasRequired_isStrictComparable;function require_isStrictComparable(){if(hasRequired_isStrictComparable)return _isStrictComparable;hasRequired_isStrictComparable=1;var x=requireIsObject();function d(g){return g===g&&!x(g)}return _isStrictComparable=d,_isStrictComparable}var _getMatchData,hasRequired_getMatchData;function require_getMatchData(){if(hasRequired_getMatchData)return _getMatchData;hasRequired_getMatchData=1;var x=require_isStrictComparable(),d=requireKeys();function g(E){for(var b=d(E),w=b.length;w--;){var C=b[w],S=E[C];b[w]=[C,S,x(S)]}return b}return _getMatchData=g,_getMatchData}var _matchesStrictComparable,hasRequired_matchesStrictComparable;function require_matchesStrictComparable(){if(hasRequired_matchesStrictComparable)return _matchesStrictComparable;hasRequired_matchesStrictComparable=1;function x(d,g){return function(E){return E==null?!1:E[d]===g&&(g!==void 0||d in Object(E))}}return _matchesStrictComparable=x,_matchesStrictComparable}var _baseMatches,hasRequired_baseMatches;function require_baseMatches(){if(hasRequired_baseMatches)return _baseMatches;hasRequired_baseMatches=1;var x=require_baseIsMatch(),d=require_getMatchData(),g=require_matchesStrictComparable();function E(b){var w=d(b);return w.length==1&&w[0][2]?g(w[0][0],w[0][1]):function(C){return C===b||x(C,b,w)}}return _baseMatches=E,_baseMatches}var isSymbol_1,hasRequiredIsSymbol;function requireIsSymbol(){if(hasRequiredIsSymbol)return isSymbol_1;hasRequiredIsSymbol=1;var x=require_baseGetTag(),d=requireIsObjectLike(),g="[object Symbol]";function E(b){return typeof b=="symbol"||d(b)&&x(b)==g}return isSymbol_1=E,isSymbol_1}var _isKey,hasRequired_isKey;function require_isKey(){if(hasRequired_isKey)return _isKey;hasRequired_isKey=1;var x=requireIsArray(),d=requireIsSymbol(),g=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,E=/^\w*$/;function b(w,C){if(x(w))return!1;var S=typeof w;return S=="number"||S=="symbol"||S=="boolean"||w==null||d(w)?!0:E.test(w)||!g.test(w)||C!=null&&w in Object(C)}return _isKey=b,_isKey}var memoize_1,hasRequiredMemoize;function requireMemoize(){if(hasRequiredMemoize)return memoize_1;hasRequiredMemoize=1;var x=require_MapCache(),d="Expected a function";function g(E,b){if(typeof E!="function"||b!=null&&typeof b!="function")throw new TypeError(d);var w=function(){var C=arguments,S=b?b.apply(this,C):C[0],P=w.cache;if(P.has(S))return P.get(S);var I=E.apply(this,C);return w.cache=P.set(S,I)||P,I};return w.cache=new(g.Cache||x),w}return g.Cache=x,memoize_1=g,memoize_1}var _memoizeCapped,hasRequired_memoizeCapped;function require_memoizeCapped(){if(hasRequired_memoizeCapped)return _memoizeCapped;hasRequired_memoizeCapped=1;var x=requireMemoize(),d=500;function g(E){var b=x(E,function(C){return w.size===d&&w.clear(),C}),w=b.cache;return b}return _memoizeCapped=g,_memoizeCapped}var _stringToPath,hasRequired_stringToPath;function require_stringToPath(){if(hasRequired_stringToPath)return _stringToPath;hasRequired_stringToPath=1;var x=require_memoizeCapped(),d=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,g=/\\(\\)?/g,E=x(function(b){var w=[];return b.charCodeAt(0)===46&&w.push(""),b.replace(d,function(C,S,P,I){w.push(P?I.replace(g,"$1"):S||C)}),w});return _stringToPath=E,_stringToPath}var _baseToString,hasRequired_baseToString;function require_baseToString(){if(hasRequired_baseToString)return _baseToString;hasRequired_baseToString=1;var x=require_Symbol(),d=require_arrayMap(),g=requireIsArray(),E=requireIsSymbol(),b=x?x.prototype:void 0,w=b?b.toString:void 0;function C(S){if(typeof S=="string")return S;if(g(S))return d(S,C)+"";if(E(S))return w?w.call(S):"";var P=S+"";return P=="0"&&1/S==-1/0?"-0":P}return _baseToString=C,_baseToString}var toString_1,hasRequiredToString;function requireToString(){if(hasRequiredToString)return toString_1;hasRequiredToString=1;var x=require_baseToString();function d(g){return g==null?"":x(g)}return toString_1=d,toString_1}var _castPath,hasRequired_castPath;function require_castPath(){if(hasRequired_castPath)return _castPath;hasRequired_castPath=1;var x=requireIsArray(),d=require_isKey(),g=require_stringToPath(),E=requireToString();function b(w,C){return x(w)?w:d(w,C)?[w]:g(E(w))}return _castPath=b,_castPath}var _toKey,hasRequired_toKey;function require_toKey(){if(hasRequired_toKey)return _toKey;hasRequired_toKey=1;var x=requireIsSymbol();function d(g){if(typeof g=="string"||x(g))return g;var E=g+"";return E=="0"&&1/g==-1/0?"-0":E}return _toKey=d,_toKey}var _baseGet,hasRequired_baseGet;function require_baseGet(){if(hasRequired_baseGet)return _baseGet;hasRequired_baseGet=1;var x=require_castPath(),d=require_toKey();function g(E,b){b=x(b,E);for(var w=0,C=b.length;E!=null&&w<C;)E=E[d(b[w++])];return w&&w==C?E:void 0}return _baseGet=g,_baseGet}var get_1,hasRequiredGet;function requireGet(){if(hasRequiredGet)return get_1;hasRequiredGet=1;var x=require_baseGet();function d(g,E,b){var w=g==null?void 0:x(g,E);return w===void 0?b:w}return get_1=d,get_1}var _baseHasIn,hasRequired_baseHasIn;function require_baseHasIn(){if(hasRequired_baseHasIn)return _baseHasIn;hasRequired_baseHasIn=1;function x(d,g){return d!=null&&g in Object(d)}return _baseHasIn=x,_baseHasIn}var _hasPath,hasRequired_hasPath;function require_hasPath(){if(hasRequired_hasPath)return _hasPath;hasRequired_hasPath=1;var x=require_castPath(),d=requireIsArguments(),g=requireIsArray(),E=require_isIndex(),b=requireIsLength(),w=require_toKey();function C(S,P,I){P=x(P,S);for(var M=-1,D=P.length,k=!1;++M<D;){var H=w(P[M]);if(!(k=S!=null&&I(S,H)))break;S=S[H]}return k||++M!=D?k:(D=S==null?0:S.length,!!D&&b(D)&&E(H,D)&&(g(S)||d(S)))}return _hasPath=C,_hasPath}var hasIn_1,hasRequiredHasIn;function requireHasIn(){if(hasRequiredHasIn)return hasIn_1;hasRequiredHasIn=1;var x=require_baseHasIn(),d=require_hasPath();function g(E,b){return E!=null&&d(E,b,x)}return hasIn_1=g,hasIn_1}var _baseMatchesProperty,hasRequired_baseMatchesProperty;function require_baseMatchesProperty(){if(hasRequired_baseMatchesProperty)return _baseMatchesProperty;hasRequired_baseMatchesProperty=1;var x=require_baseIsEqual(),d=requireGet(),g=requireHasIn(),E=require_isKey(),b=require_isStrictComparable(),w=require_matchesStrictComparable(),C=require_toKey(),S=1,P=2;function I(M,D){return E(M)&&b(D)?w(C(M),D):function(k){var H=d(k,M);return H===void 0&&H===D?g(k,M):x(D,H,S|P)}}return _baseMatchesProperty=I,_baseMatchesProperty}var _baseProperty,hasRequired_baseProperty;function require_baseProperty(){if(hasRequired_baseProperty)return _baseProperty;hasRequired_baseProperty=1;function x(d){return function(g){return g==null?void 0:g[d]}}return _baseProperty=x,_baseProperty}var _basePropertyDeep,hasRequired_basePropertyDeep;function require_basePropertyDeep(){if(hasRequired_basePropertyDeep)return _basePropertyDeep;hasRequired_basePropertyDeep=1;var x=require_baseGet();function d(g){return function(E){return x(E,g)}}return _basePropertyDeep=d,_basePropertyDeep}var property_1,hasRequiredProperty;function requireProperty(){if(hasRequiredProperty)return property_1;hasRequiredProperty=1;var x=require_baseProperty(),d=require_basePropertyDeep(),g=require_isKey(),E=require_toKey();function b(w){return g(w)?x(E(w)):d(w)}return property_1=b,property_1}var _baseIteratee,hasRequired_baseIteratee;function require_baseIteratee(){if(hasRequired_baseIteratee)return _baseIteratee;hasRequired_baseIteratee=1;var x=require_baseMatches(),d=require_baseMatchesProperty(),g=requireIdentity(),E=requireIsArray(),b=requireProperty();function w(C){return typeof C=="function"?C:C==null?g:typeof C=="object"?E(C)?d(C[0],C[1]):x(C):b(C)}return _baseIteratee=w,_baseIteratee}var _createBaseEach,hasRequired_createBaseEach;function require_createBaseEach(){if(hasRequired_createBaseEach)return _createBaseEach;hasRequired_createBaseEach=1;var x=requireIsArrayLike();function d(g,E){return function(b,w){if(b==null)return b;if(!x(b))return g(b,w);for(var C=b.length,S=E?C:-1,P=Object(b);(E?S--:++S<C)&&w(P[S],S,P)!==!1;);return b}}return _createBaseEach=d,_createBaseEach}var _baseEach,hasRequired_baseEach;function require_baseEach(){if(hasRequired_baseEach)return _baseEach;hasRequired_baseEach=1;var x=require_baseForOwn(),d=require_createBaseEach(),g=d(x);return _baseEach=g,_baseEach}var _baseMap,hasRequired_baseMap;function require_baseMap(){if(hasRequired_baseMap)return _baseMap;hasRequired_baseMap=1;var x=require_baseEach(),d=requireIsArrayLike();function g(E,b){var w=-1,C=d(E)?Array(E.length):[];return x(E,function(S,P,I){C[++w]=b(S,P,I)}),C}return _baseMap=g,_baseMap}var map_1,hasRequiredMap;function requireMap(){if(hasRequiredMap)return map_1;hasRequiredMap=1;var x=require_arrayMap(),d=require_baseIteratee(),g=require_baseMap(),E=requireIsArray();function b(w,C){var S=E(w)?x:g;return S(w,d(C,3))}return map_1=b,map_1}var hasRequiredFlattenNames;function requireFlattenNames(){if(hasRequiredFlattenNames)return flattenNames;hasRequiredFlattenNames=1,Object.defineProperty(flattenNames,"__esModule",{value:!0}),flattenNames.flattenNames=void 0;var x=requireIsString(),d=P(x),g=requireForOwn(),E=P(g),b=requireIsPlainObject(),w=P(b),C=requireMap(),S=P(C);function P(M){return M&&M.__esModule?M:{default:M}}var I=flattenNames.flattenNames=function M(){var D=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],k=[];return(0,S.default)(D,function(H){Array.isArray(H)?M(H).map(function(F){return k.push(F)}):(0,w.default)(H)?(0,E.default)(H,function(F,j){F===!0&&k.push(j),k.push(j+"-"+F)}):(0,d.default)(H)&&k.push(H)}),k};return flattenNames.default=I,flattenNames}var mergeClasses={},_arrayEach,hasRequired_arrayEach;function require_arrayEach(){if(hasRequired_arrayEach)return _arrayEach;hasRequired_arrayEach=1;function x(d,g){for(var E=-1,b=d==null?0:d.length;++E<b&&g(d[E],E,d)!==!1;);return d}return _arrayEach=x,_arrayEach}var _defineProperty$1,hasRequired_defineProperty;function require_defineProperty(){if(hasRequired_defineProperty)return _defineProperty$1;hasRequired_defineProperty=1;var x=require_getNative(),d=(function(){try{var g=x(Object,"defineProperty");return g({},"",{}),g}catch{}})();return _defineProperty$1=d,_defineProperty$1}var _baseAssignValue,hasRequired_baseAssignValue;function require_baseAssignValue(){if(hasRequired_baseAssignValue)return _baseAssignValue;hasRequired_baseAssignValue=1;var x=require_defineProperty();function d(g,E,b){E=="__proto__"&&x?x(g,E,{configurable:!0,enumerable:!0,value:b,writable:!0}):g[E]=b}return _baseAssignValue=d,_baseAssignValue}var _assignValue,hasRequired_assignValue;function require_assignValue(){if(hasRequired_assignValue)return _assignValue;hasRequired_assignValue=1;var x=require_baseAssignValue(),d=requireEq(),g=Object.prototype,E=g.hasOwnProperty;function b(w,C,S){var P=w[C];(!(E.call(w,C)&&d(P,S))||S===void 0&&!(C in w))&&x(w,C,S)}return _assignValue=b,_assignValue}var _copyObject,hasRequired_copyObject;function require_copyObject(){if(hasRequired_copyObject)return _copyObject;hasRequired_copyObject=1;var x=require_assignValue(),d=require_baseAssignValue();function g(E,b,w,C){var S=!w;w||(w={});for(var P=-1,I=b.length;++P<I;){var M=b[P],D=C?C(w[M],E[M],M,w,E):void 0;D===void 0&&(D=E[M]),S?d(w,M,D):x(w,M,D)}return w}return _copyObject=g,_copyObject}var _baseAssign,hasRequired_baseAssign;function require_baseAssign(){if(hasRequired_baseAssign)return _baseAssign;hasRequired_baseAssign=1;var x=require_copyObject(),d=requireKeys();function g(E,b){return E&&x(b,d(b),E)}return _baseAssign=g,_baseAssign}var _nativeKeysIn,hasRequired_nativeKeysIn;function require_nativeKeysIn(){if(hasRequired_nativeKeysIn)return _nativeKeysIn;hasRequired_nativeKeysIn=1;function x(d){var g=[];if(d!=null)for(var E in Object(d))g.push(E);return g}return _nativeKeysIn=x,_nativeKeysIn}var _baseKeysIn,hasRequired_baseKeysIn;function require_baseKeysIn(){if(hasRequired_baseKeysIn)return _baseKeysIn;hasRequired_baseKeysIn=1;var x=requireIsObject(),d=require_isPrototype(),g=require_nativeKeysIn(),E=Object.prototype,b=E.hasOwnProperty;function w(C){if(!x(C))return g(C);var S=d(C),P=[];for(var I in C)I=="constructor"&&(S||!b.call(C,I))||P.push(I);return P}return _baseKeysIn=w,_baseKeysIn}var keysIn_1,hasRequiredKeysIn;function requireKeysIn(){if(hasRequiredKeysIn)return keysIn_1;hasRequiredKeysIn=1;var x=require_arrayLikeKeys(),d=require_baseKeysIn(),g=requireIsArrayLike();function E(b){return g(b)?x(b,!0):d(b)}return keysIn_1=E,keysIn_1}var _baseAssignIn,hasRequired_baseAssignIn;function require_baseAssignIn(){if(hasRequired_baseAssignIn)return _baseAssignIn;hasRequired_baseAssignIn=1;var x=require_copyObject(),d=requireKeysIn();function g(E,b){return E&&x(b,d(b),E)}return _baseAssignIn=g,_baseAssignIn}var _cloneBuffer={exports:{}};_cloneBuffer.exports;var hasRequired_cloneBuffer;function require_cloneBuffer(){return hasRequired_cloneBuffer||(hasRequired_cloneBuffer=1,(function(x,d){var g=require_root(),E=d&&!d.nodeType&&d,b=E&&!0&&x&&!x.nodeType&&x,w=b&&b.exports===E,C=w?g.Buffer:void 0,S=C?C.allocUnsafe:void 0;function P(I,M){if(M)return I.slice();var D=I.length,k=S?S(D):new I.constructor(D);return I.copy(k),k}x.exports=P})(_cloneBuffer,_cloneBuffer.exports)),_cloneBuffer.exports}var _copyArray,hasRequired_copyArray;function require_copyArray(){if(hasRequired_copyArray)return _copyArray;hasRequired_copyArray=1;function x(d,g){var E=-1,b=d.length;for(g||(g=Array(b));++E<b;)g[E]=d[E];return g}return _copyArray=x,_copyArray}var _copySymbols,hasRequired_copySymbols;function require_copySymbols(){if(hasRequired_copySymbols)return _copySymbols;hasRequired_copySymbols=1;var x=require_copyObject(),d=require_getSymbols();function g(E,b){return x(E,d(E),b)}return _copySymbols=g,_copySymbols}var _getSymbolsIn,hasRequired_getSymbolsIn;function require_getSymbolsIn(){if(hasRequired_getSymbolsIn)return _getSymbolsIn;hasRequired_getSymbolsIn=1;var x=require_arrayPush(),d=require_getPrototype(),g=require_getSymbols(),E=requireStubArray(),b=Object.getOwnPropertySymbols,w=b?function(C){for(var S=[];C;)x(S,g(C)),C=d(C);return S}:E;return _getSymbolsIn=w,_getSymbolsIn}var _copySymbolsIn,hasRequired_copySymbolsIn;function require_copySymbolsIn(){if(hasRequired_copySymbolsIn)return _copySymbolsIn;hasRequired_copySymbolsIn=1;var x=require_copyObject(),d=require_getSymbolsIn();function g(E,b){return x(E,d(E),b)}return _copySymbolsIn=g,_copySymbolsIn}var _getAllKeysIn,hasRequired_getAllKeysIn;function require_getAllKeysIn(){if(hasRequired_getAllKeysIn)return _getAllKeysIn;hasRequired_getAllKeysIn=1;var x=require_baseGetAllKeys(),d=require_getSymbolsIn(),g=requireKeysIn();function E(b){return x(b,g,d)}return _getAllKeysIn=E,_getAllKeysIn}var _initCloneArray,hasRequired_initCloneArray;function require_initCloneArray(){if(hasRequired_initCloneArray)return _initCloneArray;hasRequired_initCloneArray=1;var x=Object.prototype,d=x.hasOwnProperty;function g(E){var b=E.length,w=new E.constructor(b);return b&&typeof E[0]=="string"&&d.call(E,"index")&&(w.index=E.index,w.input=E.input),w}return _initCloneArray=g,_initCloneArray}var _cloneArrayBuffer,hasRequired_cloneArrayBuffer;function require_cloneArrayBuffer(){if(hasRequired_cloneArrayBuffer)return _cloneArrayBuffer;hasRequired_cloneArrayBuffer=1;var x=require_Uint8Array();function d(g){var E=new g.constructor(g.byteLength);return new x(E).set(new x(g)),E}return _cloneArrayBuffer=d,_cloneArrayBuffer}var _cloneDataView,hasRequired_cloneDataView;function require_cloneDataView(){if(hasRequired_cloneDataView)return _cloneDataView;hasRequired_cloneDataView=1;var x=require_cloneArrayBuffer();function d(g,E){var b=E?x(g.buffer):g.buffer;return new g.constructor(b,g.byteOffset,g.byteLength)}return _cloneDataView=d,_cloneDataView}var _cloneRegExp,hasRequired_cloneRegExp;function require_cloneRegExp(){if(hasRequired_cloneRegExp)return _cloneRegExp;hasRequired_cloneRegExp=1;var x=/\w*$/;function d(g){var E=new g.constructor(g.source,x.exec(g));return E.lastIndex=g.lastIndex,E}return _cloneRegExp=d,_cloneRegExp}var _cloneSymbol,hasRequired_cloneSymbol;function require_cloneSymbol(){if(hasRequired_cloneSymbol)return _cloneSymbol;hasRequired_cloneSymbol=1;var x=require_Symbol(),d=x?x.prototype:void 0,g=d?d.valueOf:void 0;function E(b){return g?Object(g.call(b)):{}}return _cloneSymbol=E,_cloneSymbol}var _cloneTypedArray,hasRequired_cloneTypedArray;function require_cloneTypedArray(){if(hasRequired_cloneTypedArray)return _cloneTypedArray;hasRequired_cloneTypedArray=1;var x=require_cloneArrayBuffer();function d(g,E){var b=E?x(g.buffer):g.buffer;return new g.constructor(b,g.byteOffset,g.length)}return _cloneTypedArray=d,_cloneTypedArray}var _initCloneByTag,hasRequired_initCloneByTag;function require_initCloneByTag(){if(hasRequired_initCloneByTag)return _initCloneByTag;hasRequired_initCloneByTag=1;var x=require_cloneArrayBuffer(),d=require_cloneDataView(),g=require_cloneRegExp(),E=require_cloneSymbol(),b=require_cloneTypedArray(),w="[object Boolean]",C="[object Date]",S="[object Map]",P="[object Number]",I="[object RegExp]",M="[object Set]",D="[object String]",k="[object Symbol]",H="[object ArrayBuffer]",F="[object DataView]",j="[object Float32Array]",$="[object Float64Array]",z="[object Int8Array]",U="[object Int16Array]",W="[object Int32Array]",q="[object Uint8Array]",Z="[object Uint8ClampedArray]",X="[object Uint16Array]",K="[object Uint32Array]";function ee(te,ce,Q){var se=te.constructor;switch(ce){case H:return x(te);case w:case C:return new se(+te);case F:return d(te,Q);case j:case $:case z:case U:case W:case q:case Z:case X:case K:return b(te,Q);case S:return new se;case P:case D:return new se(te);case I:return g(te);case M:return new se;case k:return E(te)}}return _initCloneByTag=ee,_initCloneByTag}var _baseCreate,hasRequired_baseCreate;function require_baseCreate(){if(hasRequired_baseCreate)return _baseCreate;hasRequired_baseCreate=1;var x=requireIsObject(),d=Object.create,g=(function(){function E(){}return function(b){if(!x(b))return{};if(d)return d(b);E.prototype=b;var w=new E;return E.prototype=void 0,w}})();return _baseCreate=g,_baseCreate}var _initCloneObject,hasRequired_initCloneObject;function require_initCloneObject(){if(hasRequired_initCloneObject)return _initCloneObject;hasRequired_initCloneObject=1;var x=require_baseCreate(),d=require_getPrototype(),g=require_isPrototype();function E(b){return typeof b.constructor=="function"&&!g(b)?x(d(b)):{}}return _initCloneObject=E,_initCloneObject}var _baseIsMap,hasRequired_baseIsMap;function require_baseIsMap(){if(hasRequired_baseIsMap)return _baseIsMap;hasRequired_baseIsMap=1;var x=require_getTag(),d=requireIsObjectLike(),g="[object Map]";function E(b){return d(b)&&x(b)==g}return _baseIsMap=E,_baseIsMap}var isMap_1,hasRequiredIsMap;function requireIsMap(){if(hasRequiredIsMap)return isMap_1;hasRequiredIsMap=1;var x=require_baseIsMap(),d=require_baseUnary(),g=require_nodeUtil(),E=g&&g.isMap,b=E?d(E):x;return isMap_1=b,isMap_1}var _baseIsSet,hasRequired_baseIsSet;function require_baseIsSet(){if(hasRequired_baseIsSet)return _baseIsSet;hasRequired_baseIsSet=1;var x=require_getTag(),d=requireIsObjectLike(),g="[object Set]";function E(b){return d(b)&&x(b)==g}return _baseIsSet=E,_baseIsSet}var isSet_1,hasRequiredIsSet;function requireIsSet(){if(hasRequiredIsSet)return isSet_1;hasRequiredIsSet=1;var x=require_baseIsSet(),d=require_baseUnary(),g=require_nodeUtil(),E=g&&g.isSet,b=E?d(E):x;return isSet_1=b,isSet_1}var _baseClone,hasRequired_baseClone;function require_baseClone(){if(hasRequired_baseClone)return _baseClone;hasRequired_baseClone=1;var x=require_Stack(),d=require_arrayEach(),g=require_assignValue(),E=require_baseAssign(),b=require_baseAssignIn(),w=require_cloneBuffer(),C=require_copyArray(),S=require_copySymbols(),P=require_copySymbolsIn(),I=require_getAllKeys(),M=require_getAllKeysIn(),D=require_getTag(),k=require_initCloneArray(),H=require_initCloneByTag(),F=require_initCloneObject(),j=requireIsArray(),$=requireIsBuffer(),z=requireIsMap(),U=requireIsObject(),W=requireIsSet(),q=requireKeys(),Z=requireKeysIn(),X=1,K=2,ee=4,te="[object Arguments]",ce="[object Array]",Q="[object Boolean]",se="[object Date]",ge="[object Error]",Ce="[object Function]",oe="[object GeneratorFunction]",he="[object Map]",de="[object Number]",re="[object Object]",ae="[object RegExp]",pe="[object Set]",J="[object String]",ue="[object Symbol]",Te="[object WeakMap]",xe="[object ArrayBuffer]",we="[object DataView]",Re="[object Float32Array]",De="[object Float64Array]",Ae="[object Int8Array]",Be="[object Int16Array]",We="[object Int32Array]",Fe="[object Uint8Array]",ze="[object Uint8ClampedArray]",ct="[object Uint16Array]",rt="[object Uint32Array]",Le={};Le[te]=Le[ce]=Le[xe]=Le[we]=Le[Q]=Le[se]=Le[Re]=Le[De]=Le[Ae]=Le[Be]=Le[We]=Le[he]=Le[de]=Le[re]=Le[ae]=Le[pe]=Le[J]=Le[ue]=Le[Fe]=Le[ze]=Le[ct]=Le[rt]=!0,Le[ge]=Le[Ce]=Le[Te]=!1;function nt(qe,dt,ht,st,be,lt){var et,tt=dt&X,xt=dt&K,Ke=dt&ee;if(ht&&(et=be?ht(qe,st,be,lt):ht(qe)),et!==void 0)return et;if(!U(qe))return qe;var ft=j(qe);if(ft){if(et=k(qe),!tt)return C(qe,et)}else{var ot=D(qe),vt=ot==Ce||ot==oe;if($(qe))return w(qe,tt);if(ot==re||ot==te||vt&&!be){if(et=xt||vt?{}:F(qe),!tt)return xt?P(qe,b(et,qe)):S(qe,E(et,qe))}else{if(!Le[ot])return be?qe:{};et=H(qe,ot,tt)}}lt||(lt=new x);var pt=lt.get(qe);if(pt)return pt;lt.set(qe,et),W(qe)?qe.forEach(function(He){et.add(nt(He,dt,ht,He,qe,lt))}):z(qe)&&qe.forEach(function(He,Ye){et.set(Ye,nt(He,dt,ht,Ye,qe,lt))});var Ze=Ke?xt?M:I:xt?Z:q,Ne=ft?void 0:Ze(qe);return d(Ne||qe,function(He,Ye){Ne&&(Ye=He,He=qe[Ye]),g(et,Ye,nt(He,dt,ht,Ye,qe,lt))}),et}return _baseClone=nt,_baseClone}var cloneDeep_1,hasRequiredCloneDeep;function requireCloneDeep(){if(hasRequiredCloneDeep)return cloneDeep_1;hasRequiredCloneDeep=1;var x=require_baseClone(),d=1,g=4;function E(b){return x(b,d|g)}return cloneDeep_1=E,cloneDeep_1}var hasRequiredMergeClasses;function requireMergeClasses(){if(hasRequiredMergeClasses)return mergeClasses;hasRequiredMergeClasses=1,Object.defineProperty(mergeClasses,"__esModule",{value:!0}),mergeClasses.mergeClasses=void 0;var x=requireForOwn(),d=w(x),g=requireCloneDeep(),E=w(g),b=Object.assign||function(S){for(var P=1;P<arguments.length;P++){var I=arguments[P];for(var M in I)Object.prototype.hasOwnProperty.call(I,M)&&(S[M]=I[M])}return S};function w(S){return S&&S.__esModule?S:{default:S}}var C=mergeClasses.mergeClasses=function(P){var I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],M=P.default&&(0,E.default)(P.default)||{};return I.map(function(D){var k=P[D];return k&&(0,d.default)(k,function(H,F){M[F]||(M[F]={}),M[F]=b({},M[F],k[F])}),D}),M};return mergeClasses.default=C,mergeClasses}var autoprefix={},hasRequiredAutoprefix;function requireAutoprefix(){if(hasRequiredAutoprefix)return autoprefix;hasRequiredAutoprefix=1,Object.defineProperty(autoprefix,"__esModule",{value:!0}),autoprefix.autoprefix=void 0;var x=requireForOwn(),d=E(x),g=Object.assign||function(C){for(var S=1;S<arguments.length;S++){var P=arguments[S];for(var I in P)Object.prototype.hasOwnProperty.call(P,I)&&(C[I]=P[I])}return C};function E(C){return C&&C.__esModule?C:{default:C}}var b={borderRadius:function(S){return{msBorderRadius:S,MozBorderRadius:S,OBorderRadius:S,WebkitBorderRadius:S,borderRadius:S}},boxShadow:function(S){return{msBoxShadow:S,MozBoxShadow:S,OBoxShadow:S,WebkitBoxShadow:S,boxShadow:S}},userSelect:function(S){return{WebkitTouchCallout:S,KhtmlUserSelect:S,MozUserSelect:S,msUserSelect:S,WebkitUserSelect:S,userSelect:S}},flex:function(S){return{WebkitBoxFlex:S,MozBoxFlex:S,WebkitFlex:S,msFlex:S,flex:S}},flexBasis:function(S){return{WebkitFlexBasis:S,flexBasis:S}},justifyContent:function(S){return{WebkitJustifyContent:S,justifyContent:S}},transition:function(S){return{msTransition:S,MozTransition:S,OTransition:S,WebkitTransition:S,transition:S}},transform:function(S){return{msTransform:S,MozTransform:S,OTransform:S,WebkitTransform:S,transform:S}},absolute:function(S){var P=S&&S.split(" ");return{position:"absolute",top:P&&P[0],right:P&&P[1],bottom:P&&P[2],left:P&&P[3]}},extend:function(S,P){var I=P[S];return I||{extend:S}}},w=autoprefix.autoprefix=function(S){var P={};return(0,d.default)(S,function(I,M){var D={};(0,d.default)(I,function(k,H){var F=b[H];F?D=g({},D,F(k)):D[H]=k}),P[M]=D}),P};return autoprefix.default=w,autoprefix}var hover={},hasRequiredHover;function requireHover(){if(hasRequiredHover)return hover;hasRequiredHover=1,Object.defineProperty(hover,"__esModule",{value:!0}),hover.hover=void 0;var x=Object.assign||function(P){for(var I=1;I<arguments.length;I++){var M=arguments[I];for(var D in M)Object.prototype.hasOwnProperty.call(M,D)&&(P[D]=M[D])}return P},d=requireReact(),g=E(d);function E(P){return P&&P.__esModule?P:{default:P}}function b(P,I){if(!(P instanceof I))throw new TypeError("Cannot call a class as a function")}function w(P,I){if(!P)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return I&&(typeof I=="object"||typeof I=="function")?I:P}function C(P,I){if(typeof I!="function"&&I!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof I);P.prototype=Object.create(I&&I.prototype,{constructor:{value:P,enumerable:!1,writable:!0,configurable:!0}}),I&&(Object.setPrototypeOf?Object.setPrototypeOf(P,I):P.__proto__=I)}var S=hover.hover=function(I){var M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"span";return(function(D){C(k,D);function k(){var H,F,j,$;b(this,k);for(var z=arguments.length,U=Array(z),W=0;W<z;W++)U[W]=arguments[W];return $=(F=(j=w(this,(H=k.__proto__||Object.getPrototypeOf(k)).call.apply(H,[this].concat(U))),j),j.state={hover:!1},j.handleMouseOver=function(){return j.setState({hover:!0})},j.handleMouseOut=function(){return j.setState({hover:!1})},j.render=function(){return g.default.createElement(M,{onMouseOver:j.handleMouseOver,onMouseOut:j.handleMouseOut},g.default.createElement(I,x({},j.props,j.state)))},F),w(j,$)}return k})(g.default.Component)};return hover.default=S,hover}var active={},hasRequiredActive;function requireActive(){if(hasRequiredActive)return active;hasRequiredActive=1,Object.defineProperty(active,"__esModule",{value:!0}),active.active=void 0;var x=Object.assign||function(P){for(var I=1;I<arguments.length;I++){var M=arguments[I];for(var D in M)Object.prototype.hasOwnProperty.call(M,D)&&(P[D]=M[D])}return P},d=requireReact(),g=E(d);function E(P){return P&&P.__esModule?P:{default:P}}function b(P,I){if(!(P instanceof I))throw new TypeError("Cannot call a class as a function")}function w(P,I){if(!P)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return I&&(typeof I=="object"||typeof I=="function")?I:P}function C(P,I){if(typeof I!="function"&&I!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof I);P.prototype=Object.create(I&&I.prototype,{constructor:{value:P,enumerable:!1,writable:!0,configurable:!0}}),I&&(Object.setPrototypeOf?Object.setPrototypeOf(P,I):P.__proto__=I)}var S=active.active=function(I){var M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"span";return(function(D){C(k,D);function k(){var H,F,j,$;b(this,k);for(var z=arguments.length,U=Array(z),W=0;W<z;W++)U[W]=arguments[W];return $=(F=(j=w(this,(H=k.__proto__||Object.getPrototypeOf(k)).call.apply(H,[this].concat(U))),j),j.state={active:!1},j.handleMouseDown=function(){return j.setState({active:!0})},j.handleMouseUp=function(){return j.setState({active:!1})},j.render=function(){return g.default.createElement(M,{onMouseDown:j.handleMouseDown,onMouseUp:j.handleMouseUp},g.default.createElement(I,x({},j.props,j.state)))},F),w(j,$)}return k})(g.default.Component)};return active.default=S,active}var loop={},hasRequiredLoop;function requireLoop(){if(hasRequiredLoop)return loop;hasRequiredLoop=1,Object.defineProperty(loop,"__esModule",{value:!0});var x=function(g,E){var b={},w=function(S){var P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;b[S]=P};return g===0&&w("first-child"),g===E-1&&w("last-child"),(g===0||g%2===0)&&w("even"),Math.abs(g%2)===1&&w("odd"),w("nth-child",g),b};return loop.default=x,loop}var hasRequiredLib;function requireLib(){if(hasRequiredLib)return lib;hasRequiredLib=1,Object.defineProperty(lib,"__esModule",{value:!0}),lib.ReactCSS=lib.loop=lib.handleActive=lib.handleHover=lib.hover=void 0;var x=requireFlattenNames(),d=k(x),g=requireMergeClasses(),E=k(g),b=requireAutoprefix(),w=k(b),C=requireHover(),S=k(C),P=requireActive(),I=k(P),M=requireLoop(),D=k(M);function k(F){return F&&F.__esModule?F:{default:F}}lib.hover=S.default,lib.handleHover=S.default,lib.handleActive=I.default,lib.loop=D.default;var H=lib.ReactCSS=function(j){for(var $=arguments.length,z=Array($>1?$-1:0),U=1;U<$;U++)z[U-1]=arguments[U];var W=(0,d.default)(z),q=(0,E.default)(j,W);return(0,w.default)(q)};return lib.default=H,lib}var libExports=requireLib();const reactCSS=getDefaultExportFromCjs(libExports);var calculateChange$2=function x(d,g,E,b,w){var C=w.clientWidth,S=w.clientHeight,P=typeof d.pageX=="number"?d.pageX:d.touches[0].pageX,I=typeof d.pageY=="number"?d.pageY:d.touches[0].pageY,M=P-(w.getBoundingClientRect().left+window.pageXOffset),D=I-(w.getBoundingClientRect().top+window.pageYOffset);if(E==="vertical"){var k=void 0;if(D<0?k=0:D>S?k=1:k=Math.round(D*100/S)/100,g.a!==k)return{h:g.h,s:g.s,l:g.l,a:k,source:"rgb"}}else{var H=void 0;if(M<0?H=0:M>C?H=1:H=Math.round(M*100/C)/100,b!==H)return{h:g.h,s:g.s,l:g.l,a:H,source:"rgb"}}return null},checkboardCache={},render=function x(d,g,E,b){if(typeof document>"u"&&!b)return null;var w=b?new b:document.createElement("canvas");w.width=E*2,w.height=E*2;var C=w.getContext("2d");return C?(C.fillStyle=d,C.fillRect(0,0,w.width,w.height),C.fillStyle=g,C.fillRect(0,0,E,E),C.translate(E,E),C.fillRect(0,0,E,E),w.toDataURL()):null},get$1=function x(d,g,E,b){var w=d+"-"+g+"-"+E+(b?"-server":"");if(checkboardCache[w])return checkboardCache[w];var C=render(d,g,E,b);return checkboardCache[w]=C,C},_extends$8=Object.assign||function(x){for(var d=1;d<arguments.length;d++){var g=arguments[d];for(var E in g)Object.prototype.hasOwnProperty.call(g,E)&&(x[E]=g[E])}return x},Checkboard=function x(d){var g=d.white,E=d.grey,b=d.size,w=d.renderers,C=d.borderRadius,S=d.boxShadow,P=d.children,I=reactCSS({default:{grid:{borderRadius:C,boxShadow:S,absolute:"0px 0px 0px 0px",background:"url("+get$1(g,E,b,w.canvas)+") center left"}}});return reactExports.isValidElement(P)?React.cloneElement(P,_extends$8({},P.props,{style:_extends$8({},P.props.style,I.grid)})):React.createElement("div",{style:I.grid})};Checkboard.defaultProps={size:8,white:"transparent",grey:"rgba(0,0,0,.08)",renderers:{}};var _extends$7=Object.assign||function(x){for(var d=1;d<arguments.length;d++){var g=arguments[d];for(var E in g)Object.prototype.hasOwnProperty.call(g,E)&&(x[E]=g[E])}return x},_createClass$7=(function(){function x(d,g){for(var E=0;E<g.length;E++){var b=g[E];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(d,b.key,b)}}return function(d,g,E){return g&&x(d.prototype,g),E&&x(d,E),d}})();function _classCallCheck$7(x,d){if(!(x instanceof d))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn$7(x,d){if(!x)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return d&&(typeof d=="object"||typeof d=="function")?d:x}function _inherits$7(x,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof d);x.prototype=Object.create(d&&d.prototype,{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),d&&(Object.setPrototypeOf?Object.setPrototypeOf(x,d):x.__proto__=d)}var Alpha=(function(x){_inherits$7(d,x);function d(){var g,E,b,w;_classCallCheck$7(this,d);for(var C=arguments.length,S=Array(C),P=0;P<C;P++)S[P]=arguments[P];return w=(E=(b=_possibleConstructorReturn$7(this,(g=d.__proto__||Object.getPrototypeOf(d)).call.apply(g,[this].concat(S))),b),b.handleChange=function(I){var M=calculateChange$2(I,b.props.hsl,b.props.direction,b.props.a,b.container);M&&typeof b.props.onChange=="function"&&b.props.onChange(M,I)},b.handleMouseDown=function(I){b.handleChange(I),window.addEventListener("mousemove",b.handleChange),window.addEventListener("mouseup",b.handleMouseUp)},b.handleMouseUp=function(){b.unbindEventListeners()},b.unbindEventListeners=function(){window.removeEventListener("mousemove",b.handleChange),window.removeEventListener("mouseup",b.handleMouseUp)},E),_possibleConstructorReturn$7(b,w)}return _createClass$7(d,[{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"render",value:function(){var E=this,b=this.props.rgb,w=reactCSS({default:{alpha:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius},checkboard:{absolute:"0px 0px 0px 0px",overflow:"hidden",borderRadius:this.props.radius},gradient:{absolute:"0px 0px 0px 0px",background:"linear-gradient(to right, rgba("+b.r+","+b.g+","+b.b+`, 0) 0%,
           rgba(`+b.r+","+b.g+","+b.b+", 1) 100%)",boxShadow:this.props.shadow,borderRadius:this.props.radius},container:{position:"relative",height:"100%",margin:"0 3px"},pointer:{position:"absolute",left:b.a*100+"%"},slider:{width:"4px",borderRadius:"1px",height:"8px",boxShadow:"0 0 2px rgba(0, 0, 0, .6)",background:"#fff",marginTop:"1px",transform:"translateX(-2px)"}},vertical:{gradient:{background:"linear-gradient(to bottom, rgba("+b.r+","+b.g+","+b.b+`, 0) 0%,
           rgba(`+b.r+","+b.g+","+b.b+", 1) 100%)"},pointer:{left:0,top:b.a*100+"%"}},overwrite:_extends$7({},this.props.style)},{vertical:this.props.direction==="vertical",overwrite:!0});return React.createElement("div",{style:w.alpha},React.createElement("div",{style:w.checkboard},React.createElement(Checkboard,{renderers:this.props.renderers})),React.createElement("div",{style:w.gradient}),React.createElement("div",{style:w.container,ref:function(S){return E.container=S},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},React.createElement("div",{style:w.pointer},this.props.pointer?React.createElement(this.props.pointer,this.props):React.createElement("div",{style:w.slider}))))}}]),d})(reactExports.PureComponent||reactExports.Component),_createClass$6=(function(){function x(d,g){for(var E=0;E<g.length;E++){var b=g[E];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(d,b.key,b)}}return function(d,g,E){return g&&x(d.prototype,g),E&&x(d,E),d}})();function _defineProperty(x,d,g){return d in x?Object.defineProperty(x,d,{value:g,enumerable:!0,configurable:!0,writable:!0}):x[d]=g,x}function _classCallCheck$6(x,d){if(!(x instanceof d))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn$6(x,d){if(!x)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return d&&(typeof d=="object"||typeof d=="function")?d:x}function _inherits$6(x,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof d);x.prototype=Object.create(d&&d.prototype,{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),d&&(Object.setPrototypeOf?Object.setPrototypeOf(x,d):x.__proto__=d)}var DEFAULT_ARROW_OFFSET=1,UP_KEY_CODE=38,DOWN_KEY_CODE=40,VALID_KEY_CODES=[UP_KEY_CODE,DOWN_KEY_CODE],isValidKeyCode=function x(d){return VALID_KEY_CODES.indexOf(d)>-1},getNumberValue=function x(d){return Number(String(d).replace(/%/g,""))},idCounter=1,EditableInput=(function(x){_inherits$6(d,x);function d(g){_classCallCheck$6(this,d);var E=_possibleConstructorReturn$6(this,(d.__proto__||Object.getPrototypeOf(d)).call(this));return E.handleBlur=function(){E.state.blurValue&&E.setState({value:E.state.blurValue,blurValue:null})},E.handleChange=function(b){E.setUpdatedValue(b.target.value,b)},E.handleKeyDown=function(b){var w=getNumberValue(b.target.value);if(!isNaN(w)&&isValidKeyCode(b.keyCode)){var C=E.getArrowOffset(),S=b.keyCode===UP_KEY_CODE?w+C:w-C;E.setUpdatedValue(S,b)}},E.handleDrag=function(b){if(E.props.dragLabel){var w=Math.round(E.props.value+b.movementX);w>=0&&w<=E.props.dragMax&&E.props.onChange&&E.props.onChange(E.getValueObjectWithLabel(w),b)}},E.handleMouseDown=function(b){E.props.dragLabel&&(b.preventDefault(),E.handleDrag(b),window.addEventListener("mousemove",E.handleDrag),window.addEventListener("mouseup",E.handleMouseUp))},E.handleMouseUp=function(){E.unbindEventListeners()},E.unbindEventListeners=function(){window.removeEventListener("mousemove",E.handleDrag),window.removeEventListener("mouseup",E.handleMouseUp)},E.state={value:String(g.value).toUpperCase(),blurValue:String(g.value).toUpperCase()},E.inputId="rc-editable-input-"+idCounter++,E}return _createClass$6(d,[{key:"componentDidUpdate",value:function(E,b){this.props.value!==this.state.value&&(E.value!==this.props.value||b.value!==this.state.value)&&(this.input===document.activeElement?this.setState({blurValue:String(this.props.value).toUpperCase()}):this.setState({value:String(this.props.value).toUpperCase(),blurValue:!this.state.blurValue&&String(this.props.value).toUpperCase()}))}},{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"getValueObjectWithLabel",value:function(E){return _defineProperty({},this.props.label,E)}},{key:"getArrowOffset",value:function(){return this.props.arrowOffset||DEFAULT_ARROW_OFFSET}},{key:"setUpdatedValue",value:function(E,b){var w=this.props.label?this.getValueObjectWithLabel(E):E;this.props.onChange&&this.props.onChange(w,b),this.setState({value:E})}},{key:"render",value:function(){var E=this,b=reactCSS({default:{wrap:{position:"relative"}},"user-override":{wrap:this.props.style&&this.props.style.wrap?this.props.style.wrap:{},input:this.props.style&&this.props.style.input?this.props.style.input:{},label:this.props.style&&this.props.style.label?this.props.style.label:{}},"dragLabel-true":{label:{cursor:"ew-resize"}}},{"user-override":!0},this.props);return React.createElement("div",{style:b.wrap},React.createElement("input",{id:this.inputId,style:b.input,ref:function(C){return E.input=C},value:this.state.value,onKeyDown:this.handleKeyDown,onChange:this.handleChange,onBlur:this.handleBlur,placeholder:this.props.placeholder,spellCheck:"false"}),this.props.label&&!this.props.hideLabel?React.createElement("label",{htmlFor:this.inputId,style:b.label,onMouseDown:this.handleMouseDown},this.props.label):null)}}]),d})(reactExports.PureComponent||reactExports.Component),calculateChange$1=function x(d,g,E,b){var w=b.clientWidth,C=b.clientHeight,S=typeof d.pageX=="number"?d.pageX:d.touches[0].pageX,P=typeof d.pageY=="number"?d.pageY:d.touches[0].pageY,I=S-(b.getBoundingClientRect().left+window.pageXOffset),M=P-(b.getBoundingClientRect().top+window.pageYOffset);if(g==="vertical"){var D=void 0;if(M<0)D=359;else if(M>C)D=0;else{var k=-(M*100/C)+100;D=360*k/100}if(E.h!==D)return{h:D,s:E.s,l:E.l,a:E.a,source:"hsl"}}else{var H=void 0;if(I<0)H=0;else if(I>w)H=359;else{var F=I*100/w;H=360*F/100}if(E.h!==H)return{h:H,s:E.s,l:E.l,a:E.a,source:"hsl"}}return null},_createClass$5=(function(){function x(d,g){for(var E=0;E<g.length;E++){var b=g[E];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(d,b.key,b)}}return function(d,g,E){return g&&x(d.prototype,g),E&&x(d,E),d}})();function _classCallCheck$5(x,d){if(!(x instanceof d))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn$5(x,d){if(!x)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return d&&(typeof d=="object"||typeof d=="function")?d:x}function _inherits$5(x,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof d);x.prototype=Object.create(d&&d.prototype,{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),d&&(Object.setPrototypeOf?Object.setPrototypeOf(x,d):x.__proto__=d)}var Hue=(function(x){_inherits$5(d,x);function d(){var g,E,b,w;_classCallCheck$5(this,d);for(var C=arguments.length,S=Array(C),P=0;P<C;P++)S[P]=arguments[P];return w=(E=(b=_possibleConstructorReturn$5(this,(g=d.__proto__||Object.getPrototypeOf(d)).call.apply(g,[this].concat(S))),b),b.handleChange=function(I){var M=calculateChange$1(I,b.props.direction,b.props.hsl,b.container);M&&typeof b.props.onChange=="function"&&b.props.onChange(M,I)},b.handleMouseDown=function(I){b.handleChange(I),window.addEventListener("mousemove",b.handleChange),window.addEventListener("mouseup",b.handleMouseUp)},b.handleMouseUp=function(){b.unbindEventListeners()},E),_possibleConstructorReturn$5(b,w)}return _createClass$5(d,[{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"unbindEventListeners",value:function(){window.removeEventListener("mousemove",this.handleChange),window.removeEventListener("mouseup",this.handleMouseUp)}},{key:"render",value:function(){var E=this,b=this.props.direction,w=b===void 0?"horizontal":b,C=reactCSS({default:{hue:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius,boxShadow:this.props.shadow},container:{padding:"0 2px",position:"relative",height:"100%",borderRadius:this.props.radius},pointer:{position:"absolute",left:this.props.hsl.h*100/360+"%"},slider:{marginTop:"1px",width:"4px",borderRadius:"1px",height:"8px",boxShadow:"0 0 2px rgba(0, 0, 0, .6)",background:"#fff",transform:"translateX(-2px)"}},vertical:{pointer:{left:"0px",top:-(this.props.hsl.h*100/360)+100+"%"}}},{vertical:w==="vertical"});return React.createElement("div",{style:C.hue},React.createElement("div",{className:"hue-"+w,style:C.container,ref:function(P){return E.container=P},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},React.createElement("style",null,`
            .hue-horizontal {
              background: linear-gradient(to right, #f00 0%, #ff0 17%, #0f0
                33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
              background: -webkit-linear-gradient(to right, #f00 0%, #ff0
                17%, #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
            }

            .hue-vertical {
              background: linear-gradient(to top, #f00 0%, #ff0 17%, #0f0 33%,
                #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
              background: -webkit-linear-gradient(to top, #f00 0%, #ff0 17%,
                #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
            }
          `),React.createElement("div",{style:C.pointer},this.props.pointer?React.createElement(this.props.pointer,this.props):React.createElement("div",{style:C.slider}))))}}]),d})(reactExports.PureComponent||reactExports.Component);function listCacheClear(){this.__data__=[],this.size=0}function eq(x,d){return x===d||x!==x&&d!==d}function assocIndexOf(x,d){for(var g=x.length;g--;)if(eq(x[g][0],d))return g;return-1}var arrayProto=Array.prototype,splice=arrayProto.splice;function listCacheDelete(x){var d=this.__data__,g=assocIndexOf(d,x);if(g<0)return!1;var E=d.length-1;return g==E?d.pop():splice.call(d,g,1),--this.size,!0}function listCacheGet(x){var d=this.__data__,g=assocIndexOf(d,x);return g<0?void 0:d[g][1]}function listCacheHas(x){return assocIndexOf(this.__data__,x)>-1}function listCacheSet(x,d){var g=this.__data__,E=assocIndexOf(g,x);return E<0?(++this.size,g.push([x,d])):g[E][1]=d,this}function ListCache(x){var d=-1,g=x==null?0:x.length;for(this.clear();++d<g;){var E=x[d];this.set(E[0],E[1])}}ListCache.prototype.clear=listCacheClear;ListCache.prototype.delete=listCacheDelete;ListCache.prototype.get=listCacheGet;ListCache.prototype.has=listCacheHas;ListCache.prototype.set=listCacheSet;function stackClear(){this.__data__=new ListCache,this.size=0}function stackDelete(x){var d=this.__data__,g=d.delete(x);return this.size=d.size,g}function stackGet(x){return this.__data__.get(x)}function stackHas(x){return this.__data__.has(x)}var freeGlobal=typeof global=="object"&&global&&global.Object===Object&&global,freeSelf=typeof self=="object"&&self&&self.Object===Object&&self,root=freeGlobal||freeSelf||Function("return this")(),Symbol$1=root.Symbol,objectProto$e=Object.prototype,hasOwnProperty$b=objectProto$e.hasOwnProperty,nativeObjectToString$1=objectProto$e.toString,symToStringTag$1=Symbol$1?Symbol$1.toStringTag:void 0;function getRawTag(x){var d=hasOwnProperty$b.call(x,symToStringTag$1),g=x[symToStringTag$1];try{x[symToStringTag$1]=void 0;var E=!0}catch{}var b=nativeObjectToString$1.call(x);return E&&(d?x[symToStringTag$1]=g:delete x[symToStringTag$1]),b}var objectProto$d=Object.prototype,nativeObjectToString=objectProto$d.toString;function objectToString(x){return nativeObjectToString.call(x)}var nullTag="[object Null]",undefinedTag="[object Undefined]",symToStringTag=Symbol$1?Symbol$1.toStringTag:void 0;function baseGetTag(x){return x==null?x===void 0?undefinedTag:nullTag:symToStringTag&&symToStringTag in Object(x)?getRawTag(x):objectToString(x)}function isObject(x){var d=typeof x;return x!=null&&(d=="object"||d=="function")}var asyncTag="[object AsyncFunction]",funcTag$1="[object Function]",genTag="[object GeneratorFunction]",proxyTag="[object Proxy]";function isFunction(x){if(!isObject(x))return!1;var d=baseGetTag(x);return d==funcTag$1||d==genTag||d==asyncTag||d==proxyTag}var coreJsData=root["__core-js_shared__"],maskSrcKey=(function(){var x=/[^.]+$/.exec(coreJsData&&coreJsData.keys&&coreJsData.keys.IE_PROTO||"");return x?"Symbol(src)_1."+x:""})();function isMasked(x){return!!maskSrcKey&&maskSrcKey in x}var funcProto$2=Function.prototype,funcToString$2=funcProto$2.toString;function toSource(x){if(x!=null){try{return funcToString$2.call(x)}catch{}try{return x+""}catch{}}return""}var reRegExpChar=/[\\^$.*+?()[\]{}|]/g,reIsHostCtor=/^\[object .+?Constructor\]$/,funcProto$1=Function.prototype,objectProto$c=Object.prototype,funcToString$1=funcProto$1.toString,hasOwnProperty$a=objectProto$c.hasOwnProperty,reIsNative=RegExp("^"+funcToString$1.call(hasOwnProperty$a).replace(reRegExpChar,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function baseIsNative(x){if(!isObject(x)||isMasked(x))return!1;var d=isFunction(x)?reIsNative:reIsHostCtor;return d.test(toSource(x))}function getValue(x,d){return x==null?void 0:x[d]}function getNative(x,d){var g=getValue(x,d);return baseIsNative(g)?g:void 0}var Map$1=getNative(root,"Map"),nativeCreate=getNative(Object,"create");function hashClear(){this.__data__=nativeCreate?nativeCreate(null):{},this.size=0}function hashDelete(x){var d=this.has(x)&&delete this.__data__[x];return this.size-=d?1:0,d}var HASH_UNDEFINED$2="__lodash_hash_undefined__",objectProto$b=Object.prototype,hasOwnProperty$9=objectProto$b.hasOwnProperty;function hashGet(x){var d=this.__data__;if(nativeCreate){var g=d[x];return g===HASH_UNDEFINED$2?void 0:g}return hasOwnProperty$9.call(d,x)?d[x]:void 0}var objectProto$a=Object.prototype,hasOwnProperty$8=objectProto$a.hasOwnProperty;function hashHas(x){var d=this.__data__;return nativeCreate?d[x]!==void 0:hasOwnProperty$8.call(d,x)}var HASH_UNDEFINED$1="__lodash_hash_undefined__";function hashSet(x,d){var g=this.__data__;return this.size+=this.has(x)?0:1,g[x]=nativeCreate&&d===void 0?HASH_UNDEFINED$1:d,this}function Hash(x){var d=-1,g=x==null?0:x.length;for(this.clear();++d<g;){var E=x[d];this.set(E[0],E[1])}}Hash.prototype.clear=hashClear;Hash.prototype.delete=hashDelete;Hash.prototype.get=hashGet;Hash.prototype.has=hashHas;Hash.prototype.set=hashSet;function mapCacheClear(){this.size=0,this.__data__={hash:new Hash,map:new(Map$1||ListCache),string:new Hash}}function isKeyable(x){var d=typeof x;return d=="string"||d=="number"||d=="symbol"||d=="boolean"?x!=="__proto__":x===null}function getMapData(x,d){var g=x.__data__;return isKeyable(d)?g[typeof d=="string"?"string":"hash"]:g.map}function mapCacheDelete(x){var d=getMapData(this,x).delete(x);return this.size-=d?1:0,d}function mapCacheGet(x){return getMapData(this,x).get(x)}function mapCacheHas(x){return getMapData(this,x).has(x)}function mapCacheSet(x,d){var g=getMapData(this,x),E=g.size;return g.set(x,d),this.size+=g.size==E?0:1,this}function MapCache(x){var d=-1,g=x==null?0:x.length;for(this.clear();++d<g;){var E=x[d];this.set(E[0],E[1])}}MapCache.prototype.clear=mapCacheClear;MapCache.prototype.delete=mapCacheDelete;MapCache.prototype.get=mapCacheGet;MapCache.prototype.has=mapCacheHas;MapCache.prototype.set=mapCacheSet;var LARGE_ARRAY_SIZE=200;function stackSet(x,d){var g=this.__data__;if(g instanceof ListCache){var E=g.__data__;if(!Map$1||E.length<LARGE_ARRAY_SIZE-1)return E.push([x,d]),this.size=++g.size,this;g=this.__data__=new MapCache(E)}return g.set(x,d),this.size=g.size,this}function Stack(x){var d=this.__data__=new ListCache(x);this.size=d.size}Stack.prototype.clear=stackClear;Stack.prototype.delete=stackDelete;Stack.prototype.get=stackGet;Stack.prototype.has=stackHas;Stack.prototype.set=stackSet;var defineProperty=(function(){try{var x=getNative(Object,"defineProperty");return x({},"",{}),x}catch{}})();function baseAssignValue(x,d,g){d=="__proto__"&&defineProperty?defineProperty(x,d,{configurable:!0,enumerable:!0,value:g,writable:!0}):x[d]=g}function assignMergeValue(x,d,g){(g!==void 0&&!eq(x[d],g)||g===void 0&&!(d in x))&&baseAssignValue(x,d,g)}function createBaseFor(x){return function(d,g,E){for(var b=-1,w=Object(d),C=E(d),S=C.length;S--;){var P=C[++b];if(g(w[P],P,w)===!1)break}return d}}var baseFor=createBaseFor(),freeExports$2=typeof exports=="object"&&exports&&!exports.nodeType&&exports,freeModule$2=freeExports$2&&typeof module=="object"&&module&&!module.nodeType&&module,moduleExports$2=freeModule$2&&freeModule$2.exports===freeExports$2,Buffer$1=moduleExports$2?root.Buffer:void 0;Buffer$1&&Buffer$1.allocUnsafe;function cloneBuffer(x,d){return x.slice()}var Uint8Array$1=root.Uint8Array;function cloneArrayBuffer(x){var d=new x.constructor(x.byteLength);return new Uint8Array$1(d).set(new Uint8Array$1(x)),d}function cloneTypedArray(x,d){var g=cloneArrayBuffer(x.buffer);return new x.constructor(g,x.byteOffset,x.length)}function copyArray(x,d){var g=-1,E=x.length;for(d||(d=Array(E));++g<E;)d[g]=x[g];return d}var objectCreate=Object.create,baseCreate=(function(){function x(){}return function(d){if(!isObject(d))return{};if(objectCreate)return objectCreate(d);x.prototype=d;var g=new x;return x.prototype=void 0,g}})();function overArg(x,d){return function(g){return x(d(g))}}var getPrototype=overArg(Object.getPrototypeOf,Object),objectProto$9=Object.prototype;function isPrototype(x){var d=x&&x.constructor,g=typeof d=="function"&&d.prototype||objectProto$9;return x===g}function initCloneObject(x){return typeof x.constructor=="function"&&!isPrototype(x)?baseCreate(getPrototype(x)):{}}function isObjectLike(x){return x!=null&&typeof x=="object"}var argsTag$2="[object Arguments]";function baseIsArguments(x){return isObjectLike(x)&&baseGetTag(x)==argsTag$2}var objectProto$8=Object.prototype,hasOwnProperty$7=objectProto$8.hasOwnProperty,propertyIsEnumerable$1=objectProto$8.propertyIsEnumerable,isArguments=baseIsArguments((function(){return arguments})())?baseIsArguments:function(x){return isObjectLike(x)&&hasOwnProperty$7.call(x,"callee")&&!propertyIsEnumerable$1.call(x,"callee")},isArray=Array.isArray,MAX_SAFE_INTEGER$1=9007199254740991;function isLength(x){return typeof x=="number"&&x>-1&&x%1==0&&x<=MAX_SAFE_INTEGER$1}function isArrayLike(x){return x!=null&&isLength(x.length)&&!isFunction(x)}function isArrayLikeObject(x){return isObjectLike(x)&&isArrayLike(x)}function stubFalse(){return!1}var freeExports$1=typeof exports=="object"&&exports&&!exports.nodeType&&exports,freeModule$1=freeExports$1&&typeof module=="object"&&module&&!module.nodeType&&module,moduleExports$1=freeModule$1&&freeModule$1.exports===freeExports$1,Buffer=moduleExports$1?root.Buffer:void 0,nativeIsBuffer=Buffer?Buffer.isBuffer:void 0,isBuffer=nativeIsBuffer||stubFalse,objectTag$3="[object Object]",funcProto=Function.prototype,objectProto$7=Object.prototype,funcToString=funcProto.toString,hasOwnProperty$6=objectProto$7.hasOwnProperty,objectCtorString=funcToString.call(Object);function isPlainObject(x){if(!isObjectLike(x)||baseGetTag(x)!=objectTag$3)return!1;var d=getPrototype(x);if(d===null)return!0;var g=hasOwnProperty$6.call(d,"constructor")&&d.constructor;return typeof g=="function"&&g instanceof g&&funcToString.call(g)==objectCtorString}var argsTag$1="[object Arguments]",arrayTag$1="[object Array]",boolTag$1="[object Boolean]",dateTag$1="[object Date]",errorTag$1="[object Error]",funcTag="[object Function]",mapTag$2="[object Map]",numberTag$1="[object Number]",objectTag$2="[object Object]",regexpTag$1="[object RegExp]",setTag$2="[object Set]",stringTag$1="[object String]",weakMapTag$1="[object WeakMap]",arrayBufferTag$1="[object ArrayBuffer]",dataViewTag$2="[object DataView]",float32Tag="[object Float32Array]",float64Tag="[object Float64Array]",int8Tag="[object Int8Array]",int16Tag="[object Int16Array]",int32Tag="[object Int32Array]",uint8Tag="[object Uint8Array]",uint8ClampedTag="[object Uint8ClampedArray]",uint16Tag="[object Uint16Array]",uint32Tag="[object Uint32Array]",typedArrayTags={};typedArrayTags[float32Tag]=typedArrayTags[float64Tag]=typedArrayTags[int8Tag]=typedArrayTags[int16Tag]=typedArrayTags[int32Tag]=typedArrayTags[uint8Tag]=typedArrayTags[uint8ClampedTag]=typedArrayTags[uint16Tag]=typedArrayTags[uint32Tag]=!0;typedArrayTags[argsTag$1]=typedArrayTags[arrayTag$1]=typedArrayTags[arrayBufferTag$1]=typedArrayTags[boolTag$1]=typedArrayTags[dataViewTag$2]=typedArrayTags[dateTag$1]=typedArrayTags[errorTag$1]=typedArrayTags[funcTag]=typedArrayTags[mapTag$2]=typedArrayTags[numberTag$1]=typedArrayTags[objectTag$2]=typedArrayTags[regexpTag$1]=typedArrayTags[setTag$2]=typedArrayTags[stringTag$1]=typedArrayTags[weakMapTag$1]=!1;function baseIsTypedArray(x){return isObjectLike(x)&&isLength(x.length)&&!!typedArrayTags[baseGetTag(x)]}function baseUnary(x){return function(d){return x(d)}}var freeExports=typeof exports=="object"&&exports&&!exports.nodeType&&exports,freeModule=freeExports&&typeof module=="object"&&module&&!module.nodeType&&module,moduleExports=freeModule&&freeModule.exports===freeExports,freeProcess=moduleExports&&freeGlobal.process,nodeUtil=(function(){try{var x=freeModule&&freeModule.require&&freeModule.require("util").types;return x||freeProcess&&freeProcess.binding&&freeProcess.binding("util")}catch{}})(),nodeIsTypedArray=nodeUtil&&nodeUtil.isTypedArray,isTypedArray=nodeIsTypedArray?baseUnary(nodeIsTypedArray):baseIsTypedArray;function safeGet(x,d){if(!(d==="constructor"&&typeof x[d]=="function")&&d!="__proto__")return x[d]}var objectProto$6=Object.prototype,hasOwnProperty$5=objectProto$6.hasOwnProperty;function assignValue(x,d,g){var E=x[d];(!(hasOwnProperty$5.call(x,d)&&eq(E,g))||g===void 0&&!(d in x))&&baseAssignValue(x,d,g)}function copyObject(x,d,g,E){var b=!g;g||(g={});for(var w=-1,C=d.length;++w<C;){var S=d[w],P=void 0;P===void 0&&(P=x[S]),b?baseAssignValue(g,S,P):assignValue(g,S,P)}return g}function baseTimes(x,d){for(var g=-1,E=Array(x);++g<x;)E[g]=d(g);return E}var MAX_SAFE_INTEGER=9007199254740991,reIsUint=/^(?:0|[1-9]\d*)$/;function isIndex(x,d){var g=typeof x;return d=d??MAX_SAFE_INTEGER,!!d&&(g=="number"||g!="symbol"&&reIsUint.test(x))&&x>-1&&x%1==0&&x<d}var objectProto$5=Object.prototype,hasOwnProperty$4=objectProto$5.hasOwnProperty;function arrayLikeKeys(x,d){var g=isArray(x),E=!g&&isArguments(x),b=!g&&!E&&isBuffer(x),w=!g&&!E&&!b&&isTypedArray(x),C=g||E||b||w,S=C?baseTimes(x.length,String):[],P=S.length;for(var I in x)(d||hasOwnProperty$4.call(x,I))&&!(C&&(I=="length"||b&&(I=="offset"||I=="parent")||w&&(I=="buffer"||I=="byteLength"||I=="byteOffset")||isIndex(I,P)))&&S.push(I);return S}function nativeKeysIn(x){var d=[];if(x!=null)for(var g in Object(x))d.push(g);return d}var objectProto$4=Object.prototype,hasOwnProperty$3=objectProto$4.hasOwnProperty;function baseKeysIn(x){if(!isObject(x))return nativeKeysIn(x);var d=isPrototype(x),g=[];for(var E in x)E=="constructor"&&(d||!hasOwnProperty$3.call(x,E))||g.push(E);return g}function keysIn(x){return isArrayLike(x)?arrayLikeKeys(x,!0):baseKeysIn(x)}function toPlainObject(x){return copyObject(x,keysIn(x))}function baseMergeDeep(x,d,g,E,b,w,C){var S=safeGet(x,g),P=safeGet(d,g),I=C.get(P);if(I){assignMergeValue(x,g,I);return}var M=w?w(S,P,g+"",x,d,C):void 0,D=M===void 0;if(D){var k=isArray(P),H=!k&&isBuffer(P),F=!k&&!H&&isTypedArray(P);M=P,k||H||F?isArray(S)?M=S:isArrayLikeObject(S)?M=copyArray(S):H?(D=!1,M=cloneBuffer(P)):F?(D=!1,M=cloneTypedArray(P)):M=[]:isPlainObject(P)||isArguments(P)?(M=S,isArguments(S)?M=toPlainObject(S):(!isObject(S)||isFunction(S))&&(M=initCloneObject(P))):D=!1}D&&(C.set(P,M),b(M,P,E,w,C),C.delete(P)),assignMergeValue(x,g,M)}function baseMerge(x,d,g,E,b){x!==d&&baseFor(d,function(w,C){if(b||(b=new Stack),isObject(w))baseMergeDeep(x,d,C,g,baseMerge,E,b);else{var S=E?E(safeGet(x,C),w,C+"",x,d,b):void 0;S===void 0&&(S=w),assignMergeValue(x,C,S)}},keysIn)}function identity(x){return x}function apply(x,d,g){switch(g.length){case 0:return x.call(d);case 1:return x.call(d,g[0]);case 2:return x.call(d,g[0],g[1]);case 3:return x.call(d,g[0],g[1],g[2])}return x.apply(d,g)}var nativeMax$1=Math.max;function overRest(x,d,g){return d=nativeMax$1(d===void 0?x.length-1:d,0),function(){for(var E=arguments,b=-1,w=nativeMax$1(E.length-d,0),C=Array(w);++b<w;)C[b]=E[d+b];b=-1;for(var S=Array(d+1);++b<d;)S[b]=E[b];return S[d]=g(C),apply(x,this,S)}}function constant(x){return function(){return x}}var baseSetToString=defineProperty?function(x,d){return defineProperty(x,"toString",{configurable:!0,enumerable:!1,value:constant(d),writable:!0})}:identity,HOT_COUNT=800,HOT_SPAN=16,nativeNow=Date.now;function shortOut(x){var d=0,g=0;return function(){var E=nativeNow(),b=HOT_SPAN-(E-g);if(g=E,b>0){if(++d>=HOT_COUNT)return arguments[0]}else d=0;return x.apply(void 0,arguments)}}var setToString=shortOut(baseSetToString);function baseRest(x,d){return setToString(overRest(x,d,identity),x+"")}function isIterateeCall(x,d,g){if(!isObject(g))return!1;var E=typeof d;return(E=="number"?isArrayLike(g)&&isIndex(d,g.length):E=="string"&&d in g)?eq(g[d],x):!1}function createAssigner(x){return baseRest(function(d,g){var E=-1,b=g.length,w=b>1?g[b-1]:void 0,C=b>2?g[2]:void 0;for(w=x.length>3&&typeof w=="function"?(b--,w):void 0,C&&isIterateeCall(g[0],g[1],C)&&(w=b<3?void 0:w,b=1),d=Object(d);++E<b;){var S=g[E];S&&x(d,S,E,w)}return d})}var merge=createAssigner(function(x,d,g){baseMerge(x,d,g)}),Raised=function x(d){var g=d.zDepth,E=d.radius,b=d.background,w=d.children,C=d.styles,S=C===void 0?{}:C,P=reactCSS(merge({default:{wrap:{position:"relative",display:"inline-block"},content:{position:"relative"},bg:{absolute:"0px 0px 0px 0px",boxShadow:"0 "+g+"px "+g*4+"px rgba(0,0,0,.24)",borderRadius:E,background:b}},"zDepth-0":{bg:{boxShadow:"none"}},"zDepth-1":{bg:{boxShadow:"0 2px 10px rgba(0,0,0,.12), 0 2px 5px rgba(0,0,0,.16)"}},"zDepth-2":{bg:{boxShadow:"0 6px 20px rgba(0,0,0,.19), 0 8px 17px rgba(0,0,0,.2)"}},"zDepth-3":{bg:{boxShadow:"0 17px 50px rgba(0,0,0,.19), 0 12px 15px rgba(0,0,0,.24)"}},"zDepth-4":{bg:{boxShadow:"0 25px 55px rgba(0,0,0,.21), 0 16px 28px rgba(0,0,0,.22)"}},"zDepth-5":{bg:{boxShadow:"0 40px 77px rgba(0,0,0,.22), 0 27px 24px rgba(0,0,0,.2)"}},square:{bg:{borderRadius:"0"}},circle:{bg:{borderRadius:"50%"}}},S),{"zDepth-1":g===1});return React.createElement("div",{style:P.wrap},React.createElement("div",{style:P.bg}),React.createElement("div",{style:P.content},w))};Raised.propTypes={background:PropTypes.string,zDepth:PropTypes.oneOf([0,1,2,3,4,5]),radius:PropTypes.number,styles:PropTypes.object};Raised.defaultProps={background:"#fff",zDepth:1,radius:2,styles:{}};var now=function(){return root.Date.now()},reWhitespace=/\s/;function trimmedEndIndex(x){for(var d=x.length;d--&&reWhitespace.test(x.charAt(d)););return d}var reTrimStart=/^\s+/;function baseTrim(x){return x&&x.slice(0,trimmedEndIndex(x)+1).replace(reTrimStart,"")}var symbolTag$1="[object Symbol]";function isSymbol(x){return typeof x=="symbol"||isObjectLike(x)&&baseGetTag(x)==symbolTag$1}var NAN=NaN,reIsBadHex=/^[-+]0x[0-9a-f]+$/i,reIsBinary=/^0b[01]+$/i,reIsOctal=/^0o[0-7]+$/i,freeParseInt=parseInt;function toNumber(x){if(typeof x=="number")return x;if(isSymbol(x))return NAN;if(isObject(x)){var d=typeof x.valueOf=="function"?x.valueOf():x;x=isObject(d)?d+"":d}if(typeof x!="string")return x===0?x:+x;x=baseTrim(x);var g=reIsBinary.test(x);return g||reIsOctal.test(x)?freeParseInt(x.slice(2),g?2:8):reIsBadHex.test(x)?NAN:+x}var FUNC_ERROR_TEXT$2="Expected a function",nativeMax=Math.max,nativeMin=Math.min;function debounce(x,d,g){var E,b,w,C,S,P,I=0,M=!1,D=!1,k=!0;if(typeof x!="function")throw new TypeError(FUNC_ERROR_TEXT$2);d=toNumber(d)||0,isObject(g)&&(M=!!g.leading,D="maxWait"in g,w=D?nativeMax(toNumber(g.maxWait)||0,d):w,k="trailing"in g?!!g.trailing:k);function H(X){var K=E,ee=b;return E=b=void 0,I=X,C=x.apply(ee,K),C}function F(X){return I=X,S=setTimeout(z,d),M?H(X):C}function j(X){var K=X-P,ee=X-I,te=d-K;return D?nativeMin(te,w-ee):te}function $(X){var K=X-P,ee=X-I;return P===void 0||K>=d||K<0||D&&ee>=w}function z(){var X=now();if($(X))return U(X);S=setTimeout(z,j(X))}function U(X){return S=void 0,k&&E?H(X):(E=b=void 0,C)}function W(){S!==void 0&&clearTimeout(S),I=0,E=P=b=S=void 0}function q(){return S===void 0?C:U(now())}function Z(){var X=now(),K=$(X);if(E=arguments,b=this,P=X,K){if(S===void 0)return F(P);if(D)return clearTimeout(S),S=setTimeout(z,d),H(P)}return S===void 0&&(S=setTimeout(z,d)),C}return Z.cancel=W,Z.flush=q,Z}var FUNC_ERROR_TEXT$1="Expected a function";function throttle(x,d,g){var E=!0,b=!0;if(typeof x!="function")throw new TypeError(FUNC_ERROR_TEXT$1);return isObject(g)&&(E="leading"in g?!!g.leading:E,b="trailing"in g?!!g.trailing:b),debounce(x,d,{leading:E,maxWait:d,trailing:b})}var calculateChange=function x(d,g,E){var b=E.getBoundingClientRect(),w=b.width,C=b.height,S=typeof d.pageX=="number"?d.pageX:d.touches[0].pageX,P=typeof d.pageY=="number"?d.pageY:d.touches[0].pageY,I=S-(E.getBoundingClientRect().left+window.pageXOffset),M=P-(E.getBoundingClientRect().top+window.pageYOffset);I<0?I=0:I>w&&(I=w),M<0?M=0:M>C&&(M=C);var D=I/w,k=1-M/C;return{h:g.h,s:D,v:k,a:g.a,source:"hsv"}},_createClass$4=(function(){function x(d,g){for(var E=0;E<g.length;E++){var b=g[E];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(d,b.key,b)}}return function(d,g,E){return g&&x(d.prototype,g),E&&x(d,E),d}})();function _classCallCheck$4(x,d){if(!(x instanceof d))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn$4(x,d){if(!x)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return d&&(typeof d=="object"||typeof d=="function")?d:x}function _inherits$4(x,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof d);x.prototype=Object.create(d&&d.prototype,{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),d&&(Object.setPrototypeOf?Object.setPrototypeOf(x,d):x.__proto__=d)}var Saturation=(function(x){_inherits$4(d,x);function d(g){_classCallCheck$4(this,d);var E=_possibleConstructorReturn$4(this,(d.__proto__||Object.getPrototypeOf(d)).call(this,g));return E.handleChange=function(b){typeof E.props.onChange=="function"&&E.throttle(E.props.onChange,calculateChange(b,E.props.hsl,E.container),b)},E.handleMouseDown=function(b){E.handleChange(b);var w=E.getContainerRenderWindow();w.addEventListener("mousemove",E.handleChange),w.addEventListener("mouseup",E.handleMouseUp)},E.handleMouseUp=function(){E.unbindEventListeners()},E.throttle=throttle(function(b,w,C){b(w,C)},50),E}return _createClass$4(d,[{key:"componentWillUnmount",value:function(){this.throttle.cancel(),this.unbindEventListeners()}},{key:"getContainerRenderWindow",value:function(){for(var E=this.container,b=window;!b.document.contains(E)&&b.parent!==b;)b=b.parent;return b}},{key:"unbindEventListeners",value:function(){var E=this.getContainerRenderWindow();E.removeEventListener("mousemove",this.handleChange),E.removeEventListener("mouseup",this.handleMouseUp)}},{key:"render",value:function(){var E=this,b=this.props.style||{},w=b.color,C=b.white,S=b.black,P=b.pointer,I=b.circle,M=reactCSS({default:{color:{absolute:"0px 0px 0px 0px",background:"hsl("+this.props.hsl.h+",100%, 50%)",borderRadius:this.props.radius},white:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius},black:{absolute:"0px 0px 0px 0px",boxShadow:this.props.shadow,borderRadius:this.props.radius},pointer:{position:"absolute",top:-(this.props.hsv.v*100)+100+"%",left:this.props.hsv.s*100+"%",cursor:"default"},circle:{width:"4px",height:"4px",boxShadow:`0 0 0 1.5px #fff, inset 0 0 1px 1px rgba(0,0,0,.3),
            0 0 1px 2px rgba(0,0,0,.4)`,borderRadius:"50%",cursor:"hand",transform:"translate(-2px, -2px)"}},custom:{color:w,white:C,black:S,pointer:P,circle:I}},{custom:!!this.props.style});return React.createElement("div",{style:M.color,ref:function(k){return E.container=k},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},React.createElement("style",null,`
          .saturation-white {
            background: -webkit-linear-gradient(to right, #fff, rgba(255,255,255,0));
            background: linear-gradient(to right, #fff, rgba(255,255,255,0));
          }
          .saturation-black {
            background: -webkit-linear-gradient(to top, #000, rgba(0,0,0,0));
            background: linear-gradient(to top, #000, rgba(0,0,0,0));
          }
        `),React.createElement("div",{style:M.white,className:"saturation-white"},React.createElement("div",{style:M.black,className:"saturation-black"}),React.createElement("div",{style:M.pointer},this.props.pointer?React.createElement(this.props.pointer,this.props):React.createElement("div",{style:M.circle}))))}}]),d})(reactExports.PureComponent||reactExports.Component);function arrayEach(x,d){for(var g=-1,E=x==null?0:x.length;++g<E&&d(x[g],g,x)!==!1;);return x}var nativeKeys=overArg(Object.keys,Object),objectProto$3=Object.prototype,hasOwnProperty$2=objectProto$3.hasOwnProperty;function baseKeys(x){if(!isPrototype(x))return nativeKeys(x);var d=[];for(var g in Object(x))hasOwnProperty$2.call(x,g)&&g!="constructor"&&d.push(g);return d}function keys(x){return isArrayLike(x)?arrayLikeKeys(x):baseKeys(x)}function baseForOwn(x,d){return x&&baseFor(x,d,keys)}function createBaseEach(x,d){return function(g,E){if(g==null)return g;if(!isArrayLike(g))return x(g,E);for(var b=g.length,w=-1,C=Object(g);++w<b&&E(C[w],w,C)!==!1;);return g}}var baseEach=createBaseEach(baseForOwn);function castFunction(x){return typeof x=="function"?x:identity}function forEach(x,d){var g=isArray(x)?arrayEach:baseEach;return g(x,castFunction(d))}function _typeof(x){"@babel/helpers - typeof";return _typeof=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(d){return typeof d}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":typeof d},_typeof(x)}var trimLeft=/^\s+/,trimRight=/\s+$/;function tinycolor(x,d){if(x=x||"",d=d||{},x instanceof tinycolor)return x;if(!(this instanceof tinycolor))return new tinycolor(x,d);var g=inputToRGB(x);this._originalInput=x,this._r=g.r,this._g=g.g,this._b=g.b,this._a=g.a,this._roundA=Math.round(100*this._a)/100,this._format=d.format||g.format,this._gradientType=d.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=g.ok}tinycolor.prototype={isDark:function x(){return this.getBrightness()<128},isLight:function x(){return!this.isDark()},isValid:function x(){return this._ok},getOriginalInput:function x(){return this._originalInput},getFormat:function x(){return this._format},getAlpha:function x(){return this._a},getBrightness:function x(){var d=this.toRgb();return(d.r*299+d.g*587+d.b*114)/1e3},getLuminance:function x(){var d=this.toRgb(),g,E,b,w,C,S;return g=d.r/255,E=d.g/255,b=d.b/255,g<=.03928?w=g/12.92:w=Math.pow((g+.055)/1.055,2.4),E<=.03928?C=E/12.92:C=Math.pow((E+.055)/1.055,2.4),b<=.03928?S=b/12.92:S=Math.pow((b+.055)/1.055,2.4),.2126*w+.7152*C+.0722*S},setAlpha:function x(d){return this._a=boundAlpha(d),this._roundA=Math.round(100*this._a)/100,this},toHsv:function x(){var d=rgbToHsv(this._r,this._g,this._b);return{h:d.h*360,s:d.s,v:d.v,a:this._a}},toHsvString:function x(){var d=rgbToHsv(this._r,this._g,this._b),g=Math.round(d.h*360),E=Math.round(d.s*100),b=Math.round(d.v*100);return this._a==1?"hsv("+g+", "+E+"%, "+b+"%)":"hsva("+g+", "+E+"%, "+b+"%, "+this._roundA+")"},toHsl:function x(){var d=rgbToHsl(this._r,this._g,this._b);return{h:d.h*360,s:d.s,l:d.l,a:this._a}},toHslString:function x(){var d=rgbToHsl(this._r,this._g,this._b),g=Math.round(d.h*360),E=Math.round(d.s*100),b=Math.round(d.l*100);return this._a==1?"hsl("+g+", "+E+"%, "+b+"%)":"hsla("+g+", "+E+"%, "+b+"%, "+this._roundA+")"},toHex:function x(d){return rgbToHex(this._r,this._g,this._b,d)},toHexString:function x(d){return"#"+this.toHex(d)},toHex8:function x(d){return rgbaToHex(this._r,this._g,this._b,this._a,d)},toHex8String:function x(d){return"#"+this.toHex8(d)},toRgb:function x(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function x(){return this._a==1?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function x(){return{r:Math.round(bound01(this._r,255)*100)+"%",g:Math.round(bound01(this._g,255)*100)+"%",b:Math.round(bound01(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function x(){return this._a==1?"rgb("+Math.round(bound01(this._r,255)*100)+"%, "+Math.round(bound01(this._g,255)*100)+"%, "+Math.round(bound01(this._b,255)*100)+"%)":"rgba("+Math.round(bound01(this._r,255)*100)+"%, "+Math.round(bound01(this._g,255)*100)+"%, "+Math.round(bound01(this._b,255)*100)+"%, "+this._roundA+")"},toName:function x(){return this._a===0?"transparent":this._a<1?!1:hexNames[rgbToHex(this._r,this._g,this._b,!0)]||!1},toFilter:function x(d){var g="#"+rgbaToArgbHex(this._r,this._g,this._b,this._a),E=g,b=this._gradientType?"GradientType = 1, ":"";if(d){var w=tinycolor(d);E="#"+rgbaToArgbHex(w._r,w._g,w._b,w._a)}return"progid:DXImageTransform.Microsoft.gradient("+b+"startColorstr="+g+",endColorstr="+E+")"},toString:function x(d){var g=!!d;d=d||this._format;var E=!1,b=this._a<1&&this._a>=0,w=!g&&b&&(d==="hex"||d==="hex6"||d==="hex3"||d==="hex4"||d==="hex8"||d==="name");return w?d==="name"&&this._a===0?this.toName():this.toRgbString():(d==="rgb"&&(E=this.toRgbString()),d==="prgb"&&(E=this.toPercentageRgbString()),(d==="hex"||d==="hex6")&&(E=this.toHexString()),d==="hex3"&&(E=this.toHexString(!0)),d==="hex4"&&(E=this.toHex8String(!0)),d==="hex8"&&(E=this.toHex8String()),d==="name"&&(E=this.toName()),d==="hsl"&&(E=this.toHslString()),d==="hsv"&&(E=this.toHsvString()),E||this.toHexString())},clone:function x(){return tinycolor(this.toString())},_applyModification:function x(d,g){var E=d.apply(null,[this].concat([].slice.call(g)));return this._r=E._r,this._g=E._g,this._b=E._b,this.setAlpha(E._a),this},lighten:function x(){return this._applyModification(_lighten,arguments)},brighten:function x(){return this._applyModification(_brighten,arguments)},darken:function x(){return this._applyModification(_darken,arguments)},desaturate:function x(){return this._applyModification(_desaturate,arguments)},saturate:function x(){return this._applyModification(_saturate,arguments)},greyscale:function x(){return this._applyModification(_greyscale,arguments)},spin:function x(){return this._applyModification(_spin,arguments)},_applyCombination:function x(d,g){return d.apply(null,[this].concat([].slice.call(g)))},analogous:function x(){return this._applyCombination(_analogous,arguments)},complement:function x(){return this._applyCombination(_complement,arguments)},monochromatic:function x(){return this._applyCombination(_monochromatic,arguments)},splitcomplement:function x(){return this._applyCombination(_splitcomplement,arguments)},triad:function x(){return this._applyCombination(polyad,[3])},tetrad:function x(){return this._applyCombination(polyad,[4])}};tinycolor.fromRatio=function(x,d){if(_typeof(x)=="object"){var g={};for(var E in x)x.hasOwnProperty(E)&&(E==="a"?g[E]=x[E]:g[E]=convertToPercentage(x[E]));x=g}return tinycolor(x,d)};function inputToRGB(x){var d={r:0,g:0,b:0},g=1,E=null,b=null,w=null,C=!1,S=!1;return typeof x=="string"&&(x=stringInputToObject(x)),_typeof(x)=="object"&&(isValidCSSUnit(x.r)&&isValidCSSUnit(x.g)&&isValidCSSUnit(x.b)?(d=rgbToRgb(x.r,x.g,x.b),C=!0,S=String(x.r).substr(-1)==="%"?"prgb":"rgb"):isValidCSSUnit(x.h)&&isValidCSSUnit(x.s)&&isValidCSSUnit(x.v)?(E=convertToPercentage(x.s),b=convertToPercentage(x.v),d=hsvToRgb(x.h,E,b),C=!0,S="hsv"):isValidCSSUnit(x.h)&&isValidCSSUnit(x.s)&&isValidCSSUnit(x.l)&&(E=convertToPercentage(x.s),w=convertToPercentage(x.l),d=hslToRgb(x.h,E,w),C=!0,S="hsl"),x.hasOwnProperty("a")&&(g=x.a)),g=boundAlpha(g),{ok:C,format:x.format||S,r:Math.min(255,Math.max(d.r,0)),g:Math.min(255,Math.max(d.g,0)),b:Math.min(255,Math.max(d.b,0)),a:g}}function rgbToRgb(x,d,g){return{r:bound01(x,255)*255,g:bound01(d,255)*255,b:bound01(g,255)*255}}function rgbToHsl(x,d,g){x=bound01(x,255),d=bound01(d,255),g=bound01(g,255);var E=Math.max(x,d,g),b=Math.min(x,d,g),w,C,S=(E+b)/2;if(E==b)w=C=0;else{var P=E-b;switch(C=S>.5?P/(2-E-b):P/(E+b),E){case x:w=(d-g)/P+(d<g?6:0);break;case d:w=(g-x)/P+2;break;case g:w=(x-d)/P+4;break}w/=6}return{h:w,s:C,l:S}}function hslToRgb(x,d,g){var E,b,w;x=bound01(x,360),d=bound01(d,100),g=bound01(g,100);function C(I,M,D){return D<0&&(D+=1),D>1&&(D-=1),D<1/6?I+(M-I)*6*D:D<1/2?M:D<2/3?I+(M-I)*(2/3-D)*6:I}if(d===0)E=b=w=g;else{var S=g<.5?g*(1+d):g+d-g*d,P=2*g-S;E=C(P,S,x+1/3),b=C(P,S,x),w=C(P,S,x-1/3)}return{r:E*255,g:b*255,b:w*255}}function rgbToHsv(x,d,g){x=bound01(x,255),d=bound01(d,255),g=bound01(g,255);var E=Math.max(x,d,g),b=Math.min(x,d,g),w,C,S=E,P=E-b;if(C=E===0?0:P/E,E==b)w=0;else{switch(E){case x:w=(d-g)/P+(d<g?6:0);break;case d:w=(g-x)/P+2;break;case g:w=(x-d)/P+4;break}w/=6}return{h:w,s:C,v:S}}function hsvToRgb(x,d,g){x=bound01(x,360)*6,d=bound01(d,100),g=bound01(g,100);var E=Math.floor(x),b=x-E,w=g*(1-d),C=g*(1-b*d),S=g*(1-(1-b)*d),P=E%6,I=[g,C,w,w,S,g][P],M=[S,g,g,C,w,w][P],D=[w,w,S,g,g,C][P];return{r:I*255,g:M*255,b:D*255}}function rgbToHex(x,d,g,E){var b=[pad2(Math.round(x).toString(16)),pad2(Math.round(d).toString(16)),pad2(Math.round(g).toString(16))];return E&&b[0].charAt(0)==b[0].charAt(1)&&b[1].charAt(0)==b[1].charAt(1)&&b[2].charAt(0)==b[2].charAt(1)?b[0].charAt(0)+b[1].charAt(0)+b[2].charAt(0):b.join("")}function rgbaToHex(x,d,g,E,b){var w=[pad2(Math.round(x).toString(16)),pad2(Math.round(d).toString(16)),pad2(Math.round(g).toString(16)),pad2(convertDecimalToHex(E))];return b&&w[0].charAt(0)==w[0].charAt(1)&&w[1].charAt(0)==w[1].charAt(1)&&w[2].charAt(0)==w[2].charAt(1)&&w[3].charAt(0)==w[3].charAt(1)?w[0].charAt(0)+w[1].charAt(0)+w[2].charAt(0)+w[3].charAt(0):w.join("")}function rgbaToArgbHex(x,d,g,E){var b=[pad2(convertDecimalToHex(E)),pad2(Math.round(x).toString(16)),pad2(Math.round(d).toString(16)),pad2(Math.round(g).toString(16))];return b.join("")}tinycolor.equals=function(x,d){return!x||!d?!1:tinycolor(x).toRgbString()==tinycolor(d).toRgbString()};tinycolor.random=function(){return tinycolor.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})};function _desaturate(x,d){d=d===0?0:d||10;var g=tinycolor(x).toHsl();return g.s-=d/100,g.s=clamp01(g.s),tinycolor(g)}function _saturate(x,d){d=d===0?0:d||10;var g=tinycolor(x).toHsl();return g.s+=d/100,g.s=clamp01(g.s),tinycolor(g)}function _greyscale(x){return tinycolor(x).desaturate(100)}function _lighten(x,d){d=d===0?0:d||10;var g=tinycolor(x).toHsl();return g.l+=d/100,g.l=clamp01(g.l),tinycolor(g)}function _brighten(x,d){d=d===0?0:d||10;var g=tinycolor(x).toRgb();return g.r=Math.max(0,Math.min(255,g.r-Math.round(255*-(d/100)))),g.g=Math.max(0,Math.min(255,g.g-Math.round(255*-(d/100)))),g.b=Math.max(0,Math.min(255,g.b-Math.round(255*-(d/100)))),tinycolor(g)}function _darken(x,d){d=d===0?0:d||10;var g=tinycolor(x).toHsl();return g.l-=d/100,g.l=clamp01(g.l),tinycolor(g)}function _spin(x,d){var g=tinycolor(x).toHsl(),E=(g.h+d)%360;return g.h=E<0?360+E:E,tinycolor(g)}function _complement(x){var d=tinycolor(x).toHsl();return d.h=(d.h+180)%360,tinycolor(d)}function polyad(x,d){if(isNaN(d)||d<=0)throw new Error("Argument to polyad must be a positive number");for(var g=tinycolor(x).toHsl(),E=[tinycolor(x)],b=360/d,w=1;w<d;w++)E.push(tinycolor({h:(g.h+w*b)%360,s:g.s,l:g.l}));return E}function _splitcomplement(x){var d=tinycolor(x).toHsl(),g=d.h;return[tinycolor(x),tinycolor({h:(g+72)%360,s:d.s,l:d.l}),tinycolor({h:(g+216)%360,s:d.s,l:d.l})]}function _analogous(x,d,g){d=d||6,g=g||30;var E=tinycolor(x).toHsl(),b=360/g,w=[tinycolor(x)];for(E.h=(E.h-(b*d>>1)+720)%360;--d;)E.h=(E.h+b)%360,w.push(tinycolor(E));return w}function _monochromatic(x,d){d=d||6;for(var g=tinycolor(x).toHsv(),E=g.h,b=g.s,w=g.v,C=[],S=1/d;d--;)C.push(tinycolor({h:E,s:b,v:w})),w=(w+S)%1;return C}tinycolor.mix=function(x,d,g){g=g===0?0:g||50;var E=tinycolor(x).toRgb(),b=tinycolor(d).toRgb(),w=g/100,C={r:(b.r-E.r)*w+E.r,g:(b.g-E.g)*w+E.g,b:(b.b-E.b)*w+E.b,a:(b.a-E.a)*w+E.a};return tinycolor(C)};tinycolor.readability=function(x,d){var g=tinycolor(x),E=tinycolor(d);return(Math.max(g.getLuminance(),E.getLuminance())+.05)/(Math.min(g.getLuminance(),E.getLuminance())+.05)};tinycolor.isReadable=function(x,d,g){var E=tinycolor.readability(x,d),b,w;switch(w=!1,b=validateWCAG2Parms(g),b.level+b.size){case"AAsmall":case"AAAlarge":w=E>=4.5;break;case"AAlarge":w=E>=3;break;case"AAAsmall":w=E>=7;break}return w};tinycolor.mostReadable=function(x,d,g){var E=null,b=0,w,C,S,P;g=g||{},C=g.includeFallbackColors,S=g.level,P=g.size;for(var I=0;I<d.length;I++)w=tinycolor.readability(x,d[I]),w>b&&(b=w,E=tinycolor(d[I]));return tinycolor.isReadable(x,E,{level:S,size:P})||!C?E:(g.includeFallbackColors=!1,tinycolor.mostReadable(x,["#fff","#000"],g))};var names=tinycolor.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},hexNames=tinycolor.hexNames=flip(names);function flip(x){var d={};for(var g in x)x.hasOwnProperty(g)&&(d[x[g]]=g);return d}function boundAlpha(x){return x=parseFloat(x),(isNaN(x)||x<0||x>1)&&(x=1),x}function bound01(x,d){isOnePointZero(x)&&(x="100%");var g=isPercentage(x);return x=Math.min(d,Math.max(0,parseFloat(x))),g&&(x=parseInt(x*d,10)/100),Math.abs(x-d)<1e-6?1:x%d/parseFloat(d)}function clamp01(x){return Math.min(1,Math.max(0,x))}function parseIntFromHex(x){return parseInt(x,16)}function isOnePointZero(x){return typeof x=="string"&&x.indexOf(".")!=-1&&parseFloat(x)===1}function isPercentage(x){return typeof x=="string"&&x.indexOf("%")!=-1}function pad2(x){return x.length==1?"0"+x:""+x}function convertToPercentage(x){return x<=1&&(x=x*100+"%"),x}function convertDecimalToHex(x){return Math.round(parseFloat(x)*255).toString(16)}function convertHexToDecimal(x){return parseIntFromHex(x)/255}var matchers=(function(){var x="[-\\+]?\\d+%?",d="[-\\+]?\\d*\\.\\d+%?",g="(?:"+d+")|(?:"+x+")",E="[\\s|\\(]+("+g+")[,|\\s]+("+g+")[,|\\s]+("+g+")\\s*\\)?",b="[\\s|\\(]+("+g+")[,|\\s]+("+g+")[,|\\s]+("+g+")[,|\\s]+("+g+")\\s*\\)?";return{CSS_UNIT:new RegExp(g),rgb:new RegExp("rgb"+E),rgba:new RegExp("rgba"+b),hsl:new RegExp("hsl"+E),hsla:new RegExp("hsla"+b),hsv:new RegExp("hsv"+E),hsva:new RegExp("hsva"+b),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}})();function isValidCSSUnit(x){return!!matchers.CSS_UNIT.exec(x)}function stringInputToObject(x){x=x.replace(trimLeft,"").replace(trimRight,"").toLowerCase();var d=!1;if(names[x])x=names[x],d=!0;else if(x=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var g;return(g=matchers.rgb.exec(x))?{r:g[1],g:g[2],b:g[3]}:(g=matchers.rgba.exec(x))?{r:g[1],g:g[2],b:g[3],a:g[4]}:(g=matchers.hsl.exec(x))?{h:g[1],s:g[2],l:g[3]}:(g=matchers.hsla.exec(x))?{h:g[1],s:g[2],l:g[3],a:g[4]}:(g=matchers.hsv.exec(x))?{h:g[1],s:g[2],v:g[3]}:(g=matchers.hsva.exec(x))?{h:g[1],s:g[2],v:g[3],a:g[4]}:(g=matchers.hex8.exec(x))?{r:parseIntFromHex(g[1]),g:parseIntFromHex(g[2]),b:parseIntFromHex(g[3]),a:convertHexToDecimal(g[4]),format:d?"name":"hex8"}:(g=matchers.hex6.exec(x))?{r:parseIntFromHex(g[1]),g:parseIntFromHex(g[2]),b:parseIntFromHex(g[3]),format:d?"name":"hex"}:(g=matchers.hex4.exec(x))?{r:parseIntFromHex(g[1]+""+g[1]),g:parseIntFromHex(g[2]+""+g[2]),b:parseIntFromHex(g[3]+""+g[3]),a:convertHexToDecimal(g[4]+""+g[4]),format:d?"name":"hex8"}:(g=matchers.hex3.exec(x))?{r:parseIntFromHex(g[1]+""+g[1]),g:parseIntFromHex(g[2]+""+g[2]),b:parseIntFromHex(g[3]+""+g[3]),format:d?"name":"hex"}:!1}function validateWCAG2Parms(x){var d,g;return x=x||{level:"AA",size:"small"},d=(x.level||"AA").toUpperCase(),g=(x.size||"small").toLowerCase(),d!=="AA"&&d!=="AAA"&&(d="AA"),g!=="small"&&g!=="large"&&(g="small"),{level:d,size:g}}var simpleCheckForValidColor=function x(d){var g=["r","g","b","a","h","s","l","v"],E=0,b=0;return forEach(g,function(w){if(d[w]&&(E+=1,isNaN(d[w])||(b+=1),w==="s"||w==="l")){var C=/^\d+%$/;C.test(d[w])&&(b+=1)}}),E===b?d:!1},toState=function x(d,g){var E=d.hex?tinycolor(d.hex):tinycolor(d),b=E.toHsl(),w=E.toHsv(),C=E.toRgb(),S=E.toHex();b.s===0&&(b.h=g||0,w.h=g||0);var P=S==="000000"&&C.a===0;return{hsl:b,hex:P?"transparent":"#"+S,rgb:C,hsv:w,oldHue:d.h||g||b.h,source:d.source}},isValidHex=function x(d){if(d==="transparent")return!0;var g=String(d).charAt(0)==="#"?1:0;return d.length!==4+g&&d.length<7+g&&tinycolor(d).isValid()},getContrastingColor=function x(d){if(!d)return"#fff";var g=toState(d);if(g.hex==="transparent")return"rgba(0,0,0,0.4)";var E=(g.rgb.r*299+g.rgb.g*587+g.rgb.b*114)/1e3;return E>=128?"#000":"#fff"},isvalidColorString=function x(d,g){var E=d.replace("","");return tinycolor(g+" ("+E+")")._ok},_extends$6=Object.assign||function(x){for(var d=1;d<arguments.length;d++){var g=arguments[d];for(var E in g)Object.prototype.hasOwnProperty.call(g,E)&&(x[E]=g[E])}return x},_createClass$3=(function(){function x(d,g){for(var E=0;E<g.length;E++){var b=g[E];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(d,b.key,b)}}return function(d,g,E){return g&&x(d.prototype,g),E&&x(d,E),d}})();function _classCallCheck$3(x,d){if(!(x instanceof d))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn$3(x,d){if(!x)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return d&&(typeof d=="object"||typeof d=="function")?d:x}function _inherits$3(x,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof d);x.prototype=Object.create(d&&d.prototype,{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),d&&(Object.setPrototypeOf?Object.setPrototypeOf(x,d):x.__proto__=d)}var ColorWrap=function x(d){var g=(function(E){_inherits$3(b,E);function b(w){_classCallCheck$3(this,b);var C=_possibleConstructorReturn$3(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));return C.handleChange=function(S,P){var I=simpleCheckForValidColor(S);if(I){var M=toState(S,S.h||C.state.oldHue);C.setState(M),C.props.onChangeComplete&&C.debounce(C.props.onChangeComplete,M,P),C.props.onChange&&C.props.onChange(M,P)}},C.handleSwatchHover=function(S,P){var I=simpleCheckForValidColor(S);if(I){var M=toState(S,S.h||C.state.oldHue);C.props.onSwatchHover&&C.props.onSwatchHover(M,P)}},C.state=_extends$6({},toState(w.color,0)),C.debounce=debounce(function(S,P,I){S(P,I)},100),C}return _createClass$3(b,[{key:"render",value:function(){var C={};return this.props.onSwatchHover&&(C.onSwatchHover=this.handleSwatchHover),React.createElement(d,_extends$6({},this.props,this.state,{onChange:this.handleChange},C))}}],[{key:"getDerivedStateFromProps",value:function(C,S){return _extends$6({},toState(C.color,S.oldHue))}}]),b})(reactExports.PureComponent||reactExports.Component);return g.propTypes=_extends$6({},d.propTypes),g.defaultProps=_extends$6({},d.defaultProps,{color:{h:250,s:.5,l:.2,a:1}}),g},_extends$5=Object.assign||function(x){for(var d=1;d<arguments.length;d++){var g=arguments[d];for(var E in g)Object.prototype.hasOwnProperty.call(g,E)&&(x[E]=g[E])}return x},_createClass$2=(function(){function x(d,g){for(var E=0;E<g.length;E++){var b=g[E];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(d,b.key,b)}}return function(d,g,E){return g&&x(d.prototype,g),E&&x(d,E),d}})();function _classCallCheck$2(x,d){if(!(x instanceof d))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn$2(x,d){if(!x)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return d&&(typeof d=="object"||typeof d=="function")?d:x}function _inherits$2(x,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof d);x.prototype=Object.create(d&&d.prototype,{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),d&&(Object.setPrototypeOf?Object.setPrototypeOf(x,d):x.__proto__=d)}var handleFocus=function x(d){var g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"span";return(function(E){_inherits$2(b,E);function b(){var w,C,S,P;_classCallCheck$2(this,b);for(var I=arguments.length,M=Array(I),D=0;D<I;D++)M[D]=arguments[D];return P=(C=(S=_possibleConstructorReturn$2(this,(w=b.__proto__||Object.getPrototypeOf(b)).call.apply(w,[this].concat(M))),S),S.state={focus:!1},S.handleFocus=function(){return S.setState({focus:!0})},S.handleBlur=function(){return S.setState({focus:!1})},C),_possibleConstructorReturn$2(S,P)}return _createClass$2(b,[{key:"render",value:function(){return React.createElement(g,{onFocus:this.handleFocus,onBlur:this.handleBlur},React.createElement(d,_extends$5({},this.props,this.state)))}}]),b})(React.Component)},_extends$4=Object.assign||function(x){for(var d=1;d<arguments.length;d++){var g=arguments[d];for(var E in g)Object.prototype.hasOwnProperty.call(g,E)&&(x[E]=g[E])}return x},ENTER=13,Swatch=function x(d){var g=d.color,E=d.style,b=d.onClick,w=b===void 0?function(){}:b,C=d.onHover,S=d.title,P=S===void 0?g:S,I=d.children,M=d.focus,D=d.focusStyle,k=D===void 0?{}:D,H=g==="transparent",F=reactCSS({default:{swatch:_extends$4({background:g,height:"100%",width:"100%",cursor:"pointer",position:"relative",outline:"none"},E,M?k:{})}}),j=function(q){return w(g,q)},$=function(q){return q.keyCode===ENTER&&w(g,q)},z=function(q){return C(g,q)},U={};return C&&(U.onMouseOver=z),React.createElement("div",_extends$4({style:F.swatch,onClick:j,title:P,tabIndex:0,onKeyDown:$},U),I,H&&React.createElement(Checkboard,{borderRadius:F.swatch.borderRadius,boxShadow:"inset 0 0 0 1px rgba(0,0,0,0.1)"}))};const Swatch$1=handleFocus(Swatch);var AlphaPointer=function x(d){var g=d.direction,E=reactCSS({default:{picker:{width:"18px",height:"18px",borderRadius:"50%",transform:"translate(-9px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}},vertical:{picker:{transform:"translate(-3px, -9px)"}}},{vertical:g==="vertical"});return React.createElement("div",{style:E.picker})},_extends$3=Object.assign||function(x){for(var d=1;d<arguments.length;d++){var g=arguments[d];for(var E in g)Object.prototype.hasOwnProperty.call(g,E)&&(x[E]=g[E])}return x},AlphaPicker=function x(d){var g=d.rgb,E=d.hsl,b=d.width,w=d.height,C=d.onChange,S=d.direction,P=d.style,I=d.renderers,M=d.pointer,D=d.className,k=D===void 0?"":D,H=reactCSS({default:{picker:{position:"relative",width:b,height:w},alpha:{radius:"2px",style:P}}});return React.createElement("div",{style:H.picker,className:"alpha-picker "+k},React.createElement(Alpha,_extends$3({},H.alpha,{rgb:g,hsl:E,pointer:M,renderers:I,onChange:C,direction:S})))};AlphaPicker.defaultProps={width:"316px",height:"16px",direction:"horizontal",pointer:AlphaPointer};ColorWrap(AlphaPicker);function arrayMap(x,d){for(var g=-1,E=x==null?0:x.length,b=Array(E);++g<E;)b[g]=d(x[g],g,x);return b}var HASH_UNDEFINED="__lodash_hash_undefined__";function setCacheAdd(x){return this.__data__.set(x,HASH_UNDEFINED),this}function setCacheHas(x){return this.__data__.has(x)}function SetCache(x){var d=-1,g=x==null?0:x.length;for(this.__data__=new MapCache;++d<g;)this.add(x[d])}SetCache.prototype.add=SetCache.prototype.push=setCacheAdd;SetCache.prototype.has=setCacheHas;function arraySome(x,d){for(var g=-1,E=x==null?0:x.length;++g<E;)if(d(x[g],g,x))return!0;return!1}function cacheHas(x,d){return x.has(d)}var COMPARE_PARTIAL_FLAG$5=1,COMPARE_UNORDERED_FLAG$3=2;function equalArrays(x,d,g,E,b,w){var C=g&COMPARE_PARTIAL_FLAG$5,S=x.length,P=d.length;if(S!=P&&!(C&&P>S))return!1;var I=w.get(x),M=w.get(d);if(I&&M)return I==d&&M==x;var D=-1,k=!0,H=g&COMPARE_UNORDERED_FLAG$3?new SetCache:void 0;for(w.set(x,d),w.set(d,x);++D<S;){var F=x[D],j=d[D];if(E)var $=C?E(j,F,D,d,x,w):E(F,j,D,x,d,w);if($!==void 0){if($)continue;k=!1;break}if(H){if(!arraySome(d,function(z,U){if(!cacheHas(H,U)&&(F===z||b(F,z,g,E,w)))return H.push(U)})){k=!1;break}}else if(!(F===j||b(F,j,g,E,w))){k=!1;break}}return w.delete(x),w.delete(d),k}function mapToArray(x){var d=-1,g=Array(x.size);return x.forEach(function(E,b){g[++d]=[b,E]}),g}function setToArray(x){var d=-1,g=Array(x.size);return x.forEach(function(E){g[++d]=E}),g}var COMPARE_PARTIAL_FLAG$4=1,COMPARE_UNORDERED_FLAG$2=2,boolTag="[object Boolean]",dateTag="[object Date]",errorTag="[object Error]",mapTag$1="[object Map]",numberTag="[object Number]",regexpTag="[object RegExp]",setTag$1="[object Set]",stringTag="[object String]",symbolTag="[object Symbol]",arrayBufferTag="[object ArrayBuffer]",dataViewTag$1="[object DataView]",symbolProto$1=Symbol$1?Symbol$1.prototype:void 0,symbolValueOf=symbolProto$1?symbolProto$1.valueOf:void 0;function equalByTag(x,d,g,E,b,w,C){switch(g){case dataViewTag$1:if(x.byteLength!=d.byteLength||x.byteOffset!=d.byteOffset)return!1;x=x.buffer,d=d.buffer;case arrayBufferTag:return!(x.byteLength!=d.byteLength||!w(new Uint8Array$1(x),new Uint8Array$1(d)));case boolTag:case dateTag:case numberTag:return eq(+x,+d);case errorTag:return x.name==d.name&&x.message==d.message;case regexpTag:case stringTag:return x==d+"";case mapTag$1:var S=mapToArray;case setTag$1:var P=E&COMPARE_PARTIAL_FLAG$4;if(S||(S=setToArray),x.size!=d.size&&!P)return!1;var I=C.get(x);if(I)return I==d;E|=COMPARE_UNORDERED_FLAG$2,C.set(x,d);var M=equalArrays(S(x),S(d),E,b,w,C);return C.delete(x),M;case symbolTag:if(symbolValueOf)return symbolValueOf.call(x)==symbolValueOf.call(d)}return!1}function arrayPush(x,d){for(var g=-1,E=d.length,b=x.length;++g<E;)x[b+g]=d[g];return x}function baseGetAllKeys(x,d,g){var E=d(x);return isArray(x)?E:arrayPush(E,g(x))}function arrayFilter(x,d){for(var g=-1,E=x==null?0:x.length,b=0,w=[];++g<E;){var C=x[g];d(C,g,x)&&(w[b++]=C)}return w}function stubArray(){return[]}var objectProto$2=Object.prototype,propertyIsEnumerable=objectProto$2.propertyIsEnumerable,nativeGetSymbols=Object.getOwnPropertySymbols,getSymbols=nativeGetSymbols?function(x){return x==null?[]:(x=Object(x),arrayFilter(nativeGetSymbols(x),function(d){return propertyIsEnumerable.call(x,d)}))}:stubArray;function getAllKeys(x){return baseGetAllKeys(x,keys,getSymbols)}var COMPARE_PARTIAL_FLAG$3=1,objectProto$1=Object.prototype,hasOwnProperty$1=objectProto$1.hasOwnProperty;function equalObjects(x,d,g,E,b,w){var C=g&COMPARE_PARTIAL_FLAG$3,S=getAllKeys(x),P=S.length,I=getAllKeys(d),M=I.length;if(P!=M&&!C)return!1;for(var D=P;D--;){var k=S[D];if(!(C?k in d:hasOwnProperty$1.call(d,k)))return!1}var H=w.get(x),F=w.get(d);if(H&&F)return H==d&&F==x;var j=!0;w.set(x,d),w.set(d,x);for(var $=C;++D<P;){k=S[D];var z=x[k],U=d[k];if(E)var W=C?E(U,z,k,d,x,w):E(z,U,k,x,d,w);if(!(W===void 0?z===U||b(z,U,g,E,w):W)){j=!1;break}$||($=k=="constructor")}if(j&&!$){var q=x.constructor,Z=d.constructor;q!=Z&&"constructor"in x&&"constructor"in d&&!(typeof q=="function"&&q instanceof q&&typeof Z=="function"&&Z instanceof Z)&&(j=!1)}return w.delete(x),w.delete(d),j}var DataView$1=getNative(root,"DataView"),Promise$1=getNative(root,"Promise"),Set$1=getNative(root,"Set"),WeakMap$1=getNative(root,"WeakMap"),mapTag="[object Map]",objectTag$1="[object Object]",promiseTag="[object Promise]",setTag="[object Set]",weakMapTag="[object WeakMap]",dataViewTag="[object DataView]",dataViewCtorString=toSource(DataView$1),mapCtorString=toSource(Map$1),promiseCtorString=toSource(Promise$1),setCtorString=toSource(Set$1),weakMapCtorString=toSource(WeakMap$1),getTag=baseGetTag;(DataView$1&&getTag(new DataView$1(new ArrayBuffer(1)))!=dataViewTag||Map$1&&getTag(new Map$1)!=mapTag||Promise$1&&getTag(Promise$1.resolve())!=promiseTag||Set$1&&getTag(new Set$1)!=setTag||WeakMap$1&&getTag(new WeakMap$1)!=weakMapTag)&&(getTag=function(x){var d=baseGetTag(x),g=d==objectTag$1?x.constructor:void 0,E=g?toSource(g):"";if(E)switch(E){case dataViewCtorString:return dataViewTag;case mapCtorString:return mapTag;case promiseCtorString:return promiseTag;case setCtorString:return setTag;case weakMapCtorString:return weakMapTag}return d});var COMPARE_PARTIAL_FLAG$2=1,argsTag="[object Arguments]",arrayTag="[object Array]",objectTag="[object Object]",objectProto=Object.prototype,hasOwnProperty=objectProto.hasOwnProperty;function baseIsEqualDeep(x,d,g,E,b,w){var C=isArray(x),S=isArray(d),P=C?arrayTag:getTag(x),I=S?arrayTag:getTag(d);P=P==argsTag?objectTag:P,I=I==argsTag?objectTag:I;var M=P==objectTag,D=I==objectTag,k=P==I;if(k&&isBuffer(x)){if(!isBuffer(d))return!1;C=!0,M=!1}if(k&&!M)return w||(w=new Stack),C||isTypedArray(x)?equalArrays(x,d,g,E,b,w):equalByTag(x,d,P,g,E,b,w);if(!(g&COMPARE_PARTIAL_FLAG$2)){var H=M&&hasOwnProperty.call(x,"__wrapped__"),F=D&&hasOwnProperty.call(d,"__wrapped__");if(H||F){var j=H?x.value():x,$=F?d.value():d;return w||(w=new Stack),b(j,$,g,E,w)}}return k?(w||(w=new Stack),equalObjects(x,d,g,E,b,w)):!1}function baseIsEqual(x,d,g,E,b){return x===d?!0:x==null||d==null||!isObjectLike(x)&&!isObjectLike(d)?x!==x&&d!==d:baseIsEqualDeep(x,d,g,E,baseIsEqual,b)}var COMPARE_PARTIAL_FLAG$1=1,COMPARE_UNORDERED_FLAG$1=2;function baseIsMatch(x,d,g,E){var b=g.length,w=b;if(x==null)return!w;for(x=Object(x);b--;){var C=g[b];if(C[2]?C[1]!==x[C[0]]:!(C[0]in x))return!1}for(;++b<w;){C=g[b];var S=C[0],P=x[S],I=C[1];if(C[2]){if(P===void 0&&!(S in x))return!1}else{var M=new Stack,D;if(!(D===void 0?baseIsEqual(I,P,COMPARE_PARTIAL_FLAG$1|COMPARE_UNORDERED_FLAG$1,E,M):D))return!1}}return!0}function isStrictComparable(x){return x===x&&!isObject(x)}function getMatchData(x){for(var d=keys(x),g=d.length;g--;){var E=d[g],b=x[E];d[g]=[E,b,isStrictComparable(b)]}return d}function matchesStrictComparable(x,d){return function(g){return g==null?!1:g[x]===d&&(d!==void 0||x in Object(g))}}function baseMatches(x){var d=getMatchData(x);return d.length==1&&d[0][2]?matchesStrictComparable(d[0][0],d[0][1]):function(g){return g===x||baseIsMatch(g,x,d)}}var reIsDeepProp=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,reIsPlainProp=/^\w*$/;function isKey(x,d){if(isArray(x))return!1;var g=typeof x;return g=="number"||g=="symbol"||g=="boolean"||x==null||isSymbol(x)?!0:reIsPlainProp.test(x)||!reIsDeepProp.test(x)||d!=null&&x in Object(d)}var FUNC_ERROR_TEXT="Expected a function";function memoize(x,d){if(typeof x!="function"||d!=null&&typeof d!="function")throw new TypeError(FUNC_ERROR_TEXT);var g=function(){var E=arguments,b=d?d.apply(this,E):E[0],w=g.cache;if(w.has(b))return w.get(b);var C=x.apply(this,E);return g.cache=w.set(b,C)||w,C};return g.cache=new(memoize.Cache||MapCache),g}memoize.Cache=MapCache;var MAX_MEMOIZE_SIZE=500;function memoizeCapped(x){var d=memoize(x,function(E){return g.size===MAX_MEMOIZE_SIZE&&g.clear(),E}),g=d.cache;return d}var rePropName=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,reEscapeChar=/\\(\\)?/g,stringToPath=memoizeCapped(function(x){var d=[];return x.charCodeAt(0)===46&&d.push(""),x.replace(rePropName,function(g,E,b,w){d.push(b?w.replace(reEscapeChar,"$1"):E||g)}),d}),symbolProto=Symbol$1?Symbol$1.prototype:void 0,symbolToString=symbolProto?symbolProto.toString:void 0;function baseToString(x){if(typeof x=="string")return x;if(isArray(x))return arrayMap(x,baseToString)+"";if(isSymbol(x))return symbolToString?symbolToString.call(x):"";var d=x+"";return d=="0"&&1/x==-1/0?"-0":d}function toString(x){return x==null?"":baseToString(x)}function castPath(x,d){return isArray(x)?x:isKey(x,d)?[x]:stringToPath(toString(x))}function toKey(x){if(typeof x=="string"||isSymbol(x))return x;var d=x+"";return d=="0"&&1/x==-1/0?"-0":d}function baseGet(x,d){d=castPath(d,x);for(var g=0,E=d.length;x!=null&&g<E;)x=x[toKey(d[g++])];return g&&g==E?x:void 0}function get(x,d,g){var E=x==null?void 0:baseGet(x,d);return E===void 0?g:E}function baseHasIn(x,d){return x!=null&&d in Object(x)}function hasPath(x,d,g){d=castPath(d,x);for(var E=-1,b=d.length,w=!1;++E<b;){var C=toKey(d[E]);if(!(w=x!=null&&g(x,C)))break;x=x[C]}return w||++E!=b?w:(b=x==null?0:x.length,!!b&&isLength(b)&&isIndex(C,b)&&(isArray(x)||isArguments(x)))}function hasIn(x,d){return x!=null&&hasPath(x,d,baseHasIn)}var COMPARE_PARTIAL_FLAG=1,COMPARE_UNORDERED_FLAG=2;function baseMatchesProperty(x,d){return isKey(x)&&isStrictComparable(d)?matchesStrictComparable(toKey(x),d):function(g){var E=get(g,x);return E===void 0&&E===d?hasIn(g,x):baseIsEqual(d,E,COMPARE_PARTIAL_FLAG|COMPARE_UNORDERED_FLAG)}}function baseProperty(x){return function(d){return d==null?void 0:d[x]}}function basePropertyDeep(x){return function(d){return baseGet(d,x)}}function property(x){return isKey(x)?baseProperty(toKey(x)):basePropertyDeep(x)}function baseIteratee(x){return typeof x=="function"?x:x==null?identity:typeof x=="object"?isArray(x)?baseMatchesProperty(x[0],x[1]):baseMatches(x):property(x)}function baseMap(x,d){var g=-1,E=isArrayLike(x)?Array(x.length):[];return baseEach(x,function(b,w,C){E[++g]=d(b,w,C)}),E}function map(x,d){var g=isArray(x)?arrayMap:baseMap;return g(x,baseIteratee(d))}var BlockSwatches=function x(d){var g=d.colors,E=d.onClick,b=d.onSwatchHover,w=reactCSS({default:{swatches:{marginRight:"-10px"},swatch:{width:"22px",height:"22px",float:"left",marginRight:"10px",marginBottom:"10px",borderRadius:"4px"},clear:{clear:"both"}}});return React.createElement("div",{style:w.swatches},map(g,function(C){return React.createElement(Swatch$1,{key:C,color:C,style:w.swatch,onClick:E,onHover:b,focusStyle:{boxShadow:"0 0 4px "+C}})}),React.createElement("div",{style:w.clear}))},Block=function x(d){var g=d.onChange,E=d.onSwatchHover,b=d.hex,w=d.colors,C=d.width,S=d.triangle,P=d.styles,I=P===void 0?{}:P,M=d.className,D=M===void 0?"":M,k=b==="transparent",H=function($,z){isValidHex($)&&g({hex:$,source:"hex"},z)},F=reactCSS(merge({default:{card:{width:C,background:"#fff",boxShadow:"0 1px rgba(0,0,0,.1)",borderRadius:"6px",position:"relative"},head:{height:"110px",background:b,borderRadius:"6px 6px 0 0",display:"flex",alignItems:"center",justifyContent:"center",position:"relative"},body:{padding:"10px"},label:{fontSize:"18px",color:getContrastingColor(b),position:"relative"},triangle:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 10px 10px 10px",borderColor:"transparent transparent "+b+" transparent",position:"absolute",top:"-10px",left:"50%",marginLeft:"-10px"},input:{width:"100%",fontSize:"12px",color:"#666",border:"0px",outline:"none",height:"22px",boxShadow:"inset 0 0 0 1px #ddd",borderRadius:"4px",padding:"0 7px",boxSizing:"border-box"}},"hide-triangle":{triangle:{display:"none"}}},I),{"hide-triangle":S==="hide"});return React.createElement("div",{style:F.card,className:"block-picker "+D},React.createElement("div",{style:F.triangle}),React.createElement("div",{style:F.head},k&&React.createElement(Checkboard,{borderRadius:"6px 6px 0 0"}),React.createElement("div",{style:F.label},b)),React.createElement("div",{style:F.body},React.createElement(BlockSwatches,{colors:w,onClick:H,onSwatchHover:E}),React.createElement(EditableInput,{style:{input:F.input},value:b,onChange:H})))};Block.propTypes={width:PropTypes.oneOfType([PropTypes.string,PropTypes.number]),colors:PropTypes.arrayOf(PropTypes.string),triangle:PropTypes.oneOf(["top","hide"]),styles:PropTypes.object};Block.defaultProps={width:170,colors:["#D9E3F0","#F47373","#697689","#37D67A","#2CCCE4","#555555","#dce775","#ff8a65","#ba68c8"],triangle:"top",styles:{}};ColorWrap(Block);var red={100:"#ffcdd2",300:"#e57373",500:"#f44336",700:"#d32f2f",900:"#b71c1c"},pink={100:"#f8bbd0",300:"#f06292",500:"#e91e63",700:"#c2185b",900:"#880e4f"},purple={100:"#e1bee7",300:"#ba68c8",500:"#9c27b0",700:"#7b1fa2",900:"#4a148c"},deepPurple={100:"#d1c4e9",300:"#9575cd",500:"#673ab7",700:"#512da8",900:"#311b92"},indigo={100:"#c5cae9",300:"#7986cb",500:"#3f51b5",700:"#303f9f",900:"#1a237e"},blue={100:"#bbdefb",300:"#64b5f6",500:"#2196f3",700:"#1976d2",900:"#0d47a1"},lightBlue={100:"#b3e5fc",300:"#4fc3f7",500:"#03a9f4",700:"#0288d1",900:"#01579b"},cyan={100:"#b2ebf2",300:"#4dd0e1",500:"#00bcd4",700:"#0097a7",900:"#006064"},teal={100:"#b2dfdb",300:"#4db6ac",500:"#009688",700:"#00796b",900:"#004d40"},green={100:"#c8e6c9",300:"#81c784",500:"#4caf50",700:"#388e3c"},lightGreen={100:"#dcedc8",300:"#aed581",500:"#8bc34a",700:"#689f38",900:"#33691e"},lime={100:"#f0f4c3",300:"#dce775",500:"#cddc39",700:"#afb42b",900:"#827717"},yellow={100:"#fff9c4",300:"#fff176",500:"#ffeb3b",700:"#fbc02d",900:"#f57f17"},amber={100:"#ffecb3",300:"#ffd54f",500:"#ffc107",700:"#ffa000",900:"#ff6f00"},orange={100:"#ffe0b2",300:"#ffb74d",500:"#ff9800",700:"#f57c00",900:"#e65100"},deepOrange={100:"#ffccbc",300:"#ff8a65",500:"#ff5722",700:"#e64a19",900:"#bf360c"},brown={100:"#d7ccc8",300:"#a1887f",500:"#795548",700:"#5d4037",900:"#3e2723"},blueGrey={100:"#cfd8dc",300:"#90a4ae",500:"#607d8b",700:"#455a64",900:"#263238"},CircleSwatch=function x(d){var g=d.color,E=d.onClick,b=d.onSwatchHover,w=d.hover,C=d.active,S=d.circleSize,P=d.circleSpacing,I=reactCSS({default:{swatch:{width:S,height:S,marginRight:P,marginBottom:P,transform:"scale(1)",transition:"100ms transform ease"},Swatch:{borderRadius:"50%",background:"transparent",boxShadow:"inset 0 0 0 "+(S/2+1)+"px "+g,transition:"100ms box-shadow ease"}},hover:{swatch:{transform:"scale(1.2)"}},active:{Swatch:{boxShadow:"inset 0 0 0 3px "+g}}},{hover:w,active:C});return React.createElement("div",{style:I.swatch},React.createElement(Swatch$1,{style:I.Swatch,color:g,onClick:E,onHover:b,focusStyle:{boxShadow:I.Swatch.boxShadow+", 0 0 5px "+g}}))};CircleSwatch.defaultProps={circleSize:28,circleSpacing:14};const CircleSwatch$1=libExports.handleHover(CircleSwatch);var Circle=function x(d){var g=d.width,E=d.onChange,b=d.onSwatchHover,w=d.colors,C=d.hex,S=d.circleSize,P=d.styles,I=P===void 0?{}:P,M=d.circleSpacing,D=d.className,k=D===void 0?"":D,H=reactCSS(merge({default:{card:{width:g,display:"flex",flexWrap:"wrap",marginRight:-M,marginBottom:-M}}},I)),F=function($,z){return E({hex:$,source:"hex"},z)};return React.createElement("div",{style:H.card,className:"circle-picker "+k},map(w,function(j){return React.createElement(CircleSwatch$1,{key:j,color:j,onClick:F,onSwatchHover:b,active:C===j.toLowerCase(),circleSize:S,circleSpacing:M})}))};Circle.propTypes={width:PropTypes.oneOfType([PropTypes.string,PropTypes.number]),circleSize:PropTypes.number,circleSpacing:PropTypes.number,styles:PropTypes.object};Circle.defaultProps={width:252,circleSize:28,circleSpacing:14,colors:[red[500],pink[500],purple[500],deepPurple[500],indigo[500],blue[500],lightBlue[500],cyan[500],teal[500],green[500],lightGreen[500],lime[500],yellow[500],amber[500],orange[500],deepOrange[500],brown[500],blueGrey[500]],styles:{}};ColorWrap(Circle);function isUndefined(x){return x===void 0}var UnfoldMoreHorizontalIcon$1={},hasRequiredUnfoldMoreHorizontalIcon;function requireUnfoldMoreHorizontalIcon(){if(hasRequiredUnfoldMoreHorizontalIcon)return UnfoldMoreHorizontalIcon$1;hasRequiredUnfoldMoreHorizontalIcon=1,Object.defineProperty(UnfoldMoreHorizontalIcon$1,"__esModule",{value:!0});var x=Object.assign||function(C){for(var S=1;S<arguments.length;S++){var P=arguments[S];for(var I in P)Object.prototype.hasOwnProperty.call(P,I)&&(C[I]=P[I])}return C},d=requireReact(),g=E(d);function E(C){return C&&C.__esModule?C:{default:C}}function b(C,S){var P={};for(var I in C)S.indexOf(I)>=0||Object.prototype.hasOwnProperty.call(C,I)&&(P[I]=C[I]);return P}var w=24;return UnfoldMoreHorizontalIcon$1.default=function(C){var S=C.fill,P=S===void 0?"currentColor":S,I=C.width,M=I===void 0?w:I,D=C.height,k=D===void 0?w:D,H=C.style,F=H===void 0?{}:H,j=b(C,["fill","width","height","style"]);return g.default.createElement("svg",x({viewBox:"0 0 "+w+" "+w,style:x({fill:P,width:M,height:k},F)},j),g.default.createElement("path",{d:"M12,18.17L8.83,15L7.42,16.41L12,21L16.59,16.41L15.17,15M12,5.83L15.17,9L16.58,7.59L12,3L7.41,7.59L8.83,9L12,5.83Z"}))},UnfoldMoreHorizontalIcon$1}var UnfoldMoreHorizontalIconExports=requireUnfoldMoreHorizontalIcon();const UnfoldMoreHorizontalIcon=getDefaultExportFromCjs(UnfoldMoreHorizontalIconExports);var _createClass$1=(function(){function x(d,g){for(var E=0;E<g.length;E++){var b=g[E];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(d,b.key,b)}}return function(d,g,E){return g&&x(d.prototype,g),E&&x(d,E),d}})();function _classCallCheck$1(x,d){if(!(x instanceof d))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn$1(x,d){if(!x)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return d&&(typeof d=="object"||typeof d=="function")?d:x}function _inherits$1(x,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof d);x.prototype=Object.create(d&&d.prototype,{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),d&&(Object.setPrototypeOf?Object.setPrototypeOf(x,d):x.__proto__=d)}var ChromeFields=(function(x){_inherits$1(d,x);function d(g){_classCallCheck$1(this,d);var E=_possibleConstructorReturn$1(this,(d.__proto__||Object.getPrototypeOf(d)).call(this));return E.toggleViews=function(){E.state.view==="hex"?E.setState({view:"rgb"}):E.state.view==="rgb"?E.setState({view:"hsl"}):E.state.view==="hsl"&&(E.props.hsl.a===1?E.setState({view:"hex"}):E.setState({view:"rgb"}))},E.handleChange=function(b,w){b.hex?isValidHex(b.hex)&&E.props.onChange({hex:b.hex,source:"hex"},w):b.r||b.g||b.b?E.props.onChange({r:b.r||E.props.rgb.r,g:b.g||E.props.rgb.g,b:b.b||E.props.rgb.b,source:"rgb"},w):b.a?(b.a<0?b.a=0:b.a>1&&(b.a=1),E.props.onChange({h:E.props.hsl.h,s:E.props.hsl.s,l:E.props.hsl.l,a:Math.round(b.a*100)/100,source:"rgb"},w)):(b.h||b.s||b.l)&&(typeof b.s=="string"&&b.s.includes("%")&&(b.s=b.s.replace("%","")),typeof b.l=="string"&&b.l.includes("%")&&(b.l=b.l.replace("%","")),b.s==1?b.s=.01:b.l==1&&(b.l=.01),E.props.onChange({h:b.h||E.props.hsl.h,s:Number(isUndefined(b.s)?E.props.hsl.s:b.s),l:Number(isUndefined(b.l)?E.props.hsl.l:b.l),source:"hsl"},w))},E.showHighlight=function(b){b.currentTarget.style.background="#eee"},E.hideHighlight=function(b){b.currentTarget.style.background="transparent"},g.hsl.a!==1&&g.view==="hex"?E.state={view:"rgb"}:E.state={view:g.view},E}return _createClass$1(d,[{key:"render",value:function(){var E=this,b=reactCSS({default:{wrap:{paddingTop:"16px",display:"flex"},fields:{flex:"1",display:"flex",marginLeft:"-6px"},field:{paddingLeft:"6px",width:"100%"},alpha:{paddingLeft:"6px",width:"100%"},toggle:{width:"32px",textAlign:"right",position:"relative"},icon:{marginRight:"-4px",marginTop:"12px",cursor:"pointer",position:"relative"},iconHighlight:{position:"absolute",width:"24px",height:"28px",background:"#eee",borderRadius:"4px",top:"10px",left:"12px",display:"none"},input:{fontSize:"11px",color:"#333",width:"100%",borderRadius:"2px",border:"none",boxShadow:"inset 0 0 0 1px #dadada",height:"21px",textAlign:"center"},label:{textTransform:"uppercase",fontSize:"11px",lineHeight:"11px",color:"#969696",textAlign:"center",display:"block",marginTop:"12px"},svg:{fill:"#333",width:"24px",height:"24px",border:"1px transparent solid",borderRadius:"5px"}},disableAlpha:{alpha:{display:"none"}}},this.props,this.state),w=void 0;return this.state.view==="hex"?w=React.createElement("div",{style:b.fields,className:"flexbox-fix"},React.createElement("div",{style:b.field},React.createElement(EditableInput,{style:{input:b.input,label:b.label},label:"hex",value:this.props.hex,onChange:this.handleChange}))):this.state.view==="rgb"?w=React.createElement("div",{style:b.fields,className:"flexbox-fix"},React.createElement("div",{style:b.field},React.createElement(EditableInput,{style:{input:b.input,label:b.label},label:"r",value:this.props.rgb.r,onChange:this.handleChange})),React.createElement("div",{style:b.field},React.createElement(EditableInput,{style:{input:b.input,label:b.label},label:"g",value:this.props.rgb.g,onChange:this.handleChange})),React.createElement("div",{style:b.field},React.createElement(EditableInput,{style:{input:b.input,label:b.label},label:"b",value:this.props.rgb.b,onChange:this.handleChange})),React.createElement("div",{style:b.alpha},React.createElement(EditableInput,{style:{input:b.input,label:b.label},label:"a",value:this.props.rgb.a,arrowOffset:.01,onChange:this.handleChange}))):this.state.view==="hsl"&&(w=React.createElement("div",{style:b.fields,className:"flexbox-fix"},React.createElement("div",{style:b.field},React.createElement(EditableInput,{style:{input:b.input,label:b.label},label:"h",value:Math.round(this.props.hsl.h),onChange:this.handleChange})),React.createElement("div",{style:b.field},React.createElement(EditableInput,{style:{input:b.input,label:b.label},label:"s",value:Math.round(this.props.hsl.s*100)+"%",onChange:this.handleChange})),React.createElement("div",{style:b.field},React.createElement(EditableInput,{style:{input:b.input,label:b.label},label:"l",value:Math.round(this.props.hsl.l*100)+"%",onChange:this.handleChange})),React.createElement("div",{style:b.alpha},React.createElement(EditableInput,{style:{input:b.input,label:b.label},label:"a",value:this.props.hsl.a,arrowOffset:.01,onChange:this.handleChange})))),React.createElement("div",{style:b.wrap,className:"flexbox-fix"},w,React.createElement("div",{style:b.toggle},React.createElement("div",{style:b.icon,onClick:this.toggleViews,ref:function(S){return E.icon=S}},React.createElement(UnfoldMoreHorizontalIcon,{style:b.svg,onMouseOver:this.showHighlight,onMouseEnter:this.showHighlight,onMouseOut:this.hideHighlight}))))}}],[{key:"getDerivedStateFromProps",value:function(E,b){return E.hsl.a!==1&&b.view==="hex"?{view:"rgb"}:null}}]),d})(React.Component);ChromeFields.defaultProps={view:"hex"};var ChromePointer=function x(){var d=reactCSS({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",transform:"translate(-6px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}}});return React.createElement("div",{style:d.picker})},ChromePointerCircle=function x(){var d=reactCSS({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",boxShadow:"inset 0 0 0 1px #fff",transform:"translate(-6px, -6px)"}}});return React.createElement("div",{style:d.picker})},Chrome=function x(d){var g=d.width,E=d.onChange,b=d.disableAlpha,w=d.rgb,C=d.hsl,S=d.hsv,P=d.hex,I=d.renderers,M=d.styles,D=M===void 0?{}:M,k=d.className,H=k===void 0?"":k,F=d.defaultView,j=reactCSS(merge({default:{picker:{width:g,background:"#fff",borderRadius:"2px",boxShadow:"0 0 2px rgba(0,0,0,.3), 0 4px 8px rgba(0,0,0,.3)",boxSizing:"initial",fontFamily:"Menlo"},saturation:{width:"100%",paddingBottom:"55%",position:"relative",borderRadius:"2px 2px 0 0",overflow:"hidden"},Saturation:{radius:"2px 2px 0 0"},body:{padding:"16px 16px 12px"},controls:{display:"flex"},color:{width:"32px"},swatch:{marginTop:"6px",width:"16px",height:"16px",borderRadius:"8px",position:"relative",overflow:"hidden"},active:{absolute:"0px 0px 0px 0px",borderRadius:"8px",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.1)",background:"rgba("+w.r+", "+w.g+", "+w.b+", "+w.a+")",zIndex:"2"},toggles:{flex:"1"},hue:{height:"10px",position:"relative",marginBottom:"8px"},Hue:{radius:"2px"},alpha:{height:"10px",position:"relative"},Alpha:{radius:"2px"}},disableAlpha:{color:{width:"22px"},alpha:{display:"none"},hue:{marginBottom:"0px"},swatch:{width:"10px",height:"10px",marginTop:"0px"}}},D),{disableAlpha:b});return React.createElement("div",{style:j.picker,className:"chrome-picker "+H},React.createElement("div",{style:j.saturation},React.createElement(Saturation,{style:j.Saturation,hsl:C,hsv:S,pointer:ChromePointerCircle,onChange:E})),React.createElement("div",{style:j.body},React.createElement("div",{style:j.controls,className:"flexbox-fix"},React.createElement("div",{style:j.color},React.createElement("div",{style:j.swatch},React.createElement("div",{style:j.active}),React.createElement(Checkboard,{renderers:I}))),React.createElement("div",{style:j.toggles},React.createElement("div",{style:j.hue},React.createElement(Hue,{style:j.Hue,hsl:C,pointer:ChromePointer,onChange:E})),React.createElement("div",{style:j.alpha},React.createElement(Alpha,{style:j.Alpha,rgb:w,hsl:C,pointer:ChromePointer,renderers:I,onChange:E})))),React.createElement(ChromeFields,{rgb:w,hsl:C,hex:P,view:F,onChange:E,disableAlpha:b})))};Chrome.propTypes={width:PropTypes.oneOfType([PropTypes.string,PropTypes.number]),disableAlpha:PropTypes.bool,styles:PropTypes.object,defaultView:PropTypes.oneOf(["hex","rgb","hsl"])};Chrome.defaultProps={width:225,disableAlpha:!1,styles:{}};ColorWrap(Chrome);var CompactColor=function x(d){var g=d.color,E=d.onClick,b=E===void 0?function(){}:E,w=d.onSwatchHover,C=d.active,S=reactCSS({default:{color:{background:g,width:"15px",height:"15px",float:"left",marginRight:"5px",marginBottom:"5px",position:"relative",cursor:"pointer"},dot:{absolute:"5px 5px 5px 5px",background:getContrastingColor(g),borderRadius:"50%",opacity:"0"}},active:{dot:{opacity:"1"}},"color-#FFFFFF":{color:{boxShadow:"inset 0 0 0 1px #ddd"},dot:{background:"#000"}},transparent:{dot:{background:"#000"}}},{active:C,"color-#FFFFFF":g==="#FFFFFF",transparent:g==="transparent"});return React.createElement(Swatch$1,{style:S.color,color:g,onClick:b,onHover:w,focusStyle:{boxShadow:"0 0 4px "+g}},React.createElement("div",{style:S.dot}))},CompactFields=function x(d){var g=d.hex,E=d.rgb,b=d.onChange,w=reactCSS({default:{fields:{display:"flex",paddingBottom:"6px",paddingRight:"5px",position:"relative"},active:{position:"absolute",top:"6px",left:"5px",height:"9px",width:"9px",background:g},HEXwrap:{flex:"6",position:"relative"},HEXinput:{width:"80%",padding:"0px",paddingLeft:"20%",border:"none",outline:"none",background:"none",fontSize:"12px",color:"#333",height:"16px"},HEXlabel:{display:"none"},RGBwrap:{flex:"3",position:"relative"},RGBinput:{width:"70%",padding:"0px",paddingLeft:"30%",border:"none",outline:"none",background:"none",fontSize:"12px",color:"#333",height:"16px"},RGBlabel:{position:"absolute",top:"3px",left:"0px",lineHeight:"16px",textTransform:"uppercase",fontSize:"12px",color:"#999"}}}),C=function(P,I){P.r||P.g||P.b?b({r:P.r||E.r,g:P.g||E.g,b:P.b||E.b,source:"rgb"},I):b({hex:P.hex,source:"hex"},I)};return React.createElement("div",{style:w.fields,className:"flexbox-fix"},React.createElement("div",{style:w.active}),React.createElement(EditableInput,{style:{wrap:w.HEXwrap,input:w.HEXinput,label:w.HEXlabel},label:"hex",value:g,onChange:C}),React.createElement(EditableInput,{style:{wrap:w.RGBwrap,input:w.RGBinput,label:w.RGBlabel},label:"r",value:E.r,onChange:C}),React.createElement(EditableInput,{style:{wrap:w.RGBwrap,input:w.RGBinput,label:w.RGBlabel},label:"g",value:E.g,onChange:C}),React.createElement(EditableInput,{style:{wrap:w.RGBwrap,input:w.RGBinput,label:w.RGBlabel},label:"b",value:E.b,onChange:C}))},Compact=function x(d){var g=d.onChange,E=d.onSwatchHover,b=d.colors,w=d.hex,C=d.rgb,S=d.styles,P=S===void 0?{}:S,I=d.className,M=I===void 0?"":I,D=reactCSS(merge({default:{Compact:{background:"#f6f6f6",radius:"4px"},compact:{paddingTop:"5px",paddingLeft:"5px",boxSizing:"initial",width:"240px"},clear:{clear:"both"}}},P)),k=function(F,j){F.hex?isValidHex(F.hex)&&g({hex:F.hex,source:"hex"},j):g(F,j)};return React.createElement(Raised,{style:D.Compact,styles:P},React.createElement("div",{style:D.compact,className:"compact-picker "+M},React.createElement("div",null,map(b,function(H){return React.createElement(CompactColor,{key:H,color:H,active:H.toLowerCase()===w,onClick:k,onSwatchHover:E})}),React.createElement("div",{style:D.clear})),React.createElement(CompactFields,{hex:w,rgb:C,onChange:k})))};Compact.propTypes={colors:PropTypes.arrayOf(PropTypes.string),styles:PropTypes.object};Compact.defaultProps={colors:["#4D4D4D","#999999","#FFFFFF","#F44E3B","#FE9200","#FCDC00","#DBDF00","#A4DD00","#68CCCA","#73D8FF","#AEA1FF","#FDA1FF","#333333","#808080","#cccccc","#D33115","#E27300","#FCC400","#B0BC00","#68BC00","#16A5A5","#009CE0","#7B64FF","#FA28FF","#000000","#666666","#B3B3B3","#9F0500","#C45100","#FB9E00","#808900","#194D33","#0C797D","#0062B1","#653294","#AB149E"],styles:{}};const CompactPicker=ColorWrap(Compact);var GithubSwatch=function x(d){var g=d.hover,E=d.color,b=d.onClick,w=d.onSwatchHover,C={position:"relative",zIndex:"2",outline:"2px solid #fff",boxShadow:"0 0 5px 2px rgba(0,0,0,0.25)"},S=reactCSS({default:{swatch:{width:"25px",height:"25px",fontSize:"0"}},hover:{swatch:C}},{hover:g});return React.createElement("div",{style:S.swatch},React.createElement(Swatch$1,{color:E,onClick:b,onHover:w,focusStyle:C}))};const GithubSwatch$1=libExports.handleHover(GithubSwatch);var Github=function x(d){var g=d.width,E=d.colors,b=d.onChange,w=d.onSwatchHover,C=d.triangle,S=d.styles,P=S===void 0?{}:S,I=d.className,M=I===void 0?"":I,D=reactCSS(merge({default:{card:{width:g,background:"#fff",border:"1px solid rgba(0,0,0,0.2)",boxShadow:"0 3px 12px rgba(0,0,0,0.15)",borderRadius:"4px",position:"relative",padding:"5px",display:"flex",flexWrap:"wrap"},triangle:{position:"absolute",border:"7px solid transparent",borderBottomColor:"#fff"},triangleShadow:{position:"absolute",border:"8px solid transparent",borderBottomColor:"rgba(0,0,0,0.15)"}},"hide-triangle":{triangle:{display:"none"},triangleShadow:{display:"none"}},"top-left-triangle":{triangle:{top:"-14px",left:"10px"},triangleShadow:{top:"-16px",left:"9px"}},"top-right-triangle":{triangle:{top:"-14px",right:"10px"},triangleShadow:{top:"-16px",right:"9px"}},"bottom-left-triangle":{triangle:{top:"35px",left:"10px",transform:"rotate(180deg)"},triangleShadow:{top:"37px",left:"9px",transform:"rotate(180deg)"}},"bottom-right-triangle":{triangle:{top:"35px",right:"10px",transform:"rotate(180deg)"},triangleShadow:{top:"37px",right:"9px",transform:"rotate(180deg)"}}},P),{"hide-triangle":C==="hide","top-left-triangle":C==="top-left","top-right-triangle":C==="top-right","bottom-left-triangle":C==="bottom-left","bottom-right-triangle":C==="bottom-right"}),k=function(F,j){return b({hex:F,source:"hex"},j)};return React.createElement("div",{style:D.card,className:"github-picker "+M},React.createElement("div",{style:D.triangleShadow}),React.createElement("div",{style:D.triangle}),map(E,function(H){return React.createElement(GithubSwatch$1,{color:H,key:H,onClick:k,onSwatchHover:w})}))};Github.propTypes={width:PropTypes.oneOfType([PropTypes.string,PropTypes.number]),colors:PropTypes.arrayOf(PropTypes.string),triangle:PropTypes.oneOf(["hide","top-left","top-right","bottom-left","bottom-right"]),styles:PropTypes.object};Github.defaultProps={width:200,colors:["#B80000","#DB3E00","#FCCB00","#008B02","#006B76","#1273DE","#004DCF","#5300EB","#EB9694","#FAD0C3","#FEF3BD","#C1E1C5","#BEDADC","#C4DEF6","#BED3F3","#D4C4FB"],triangle:"top-left",styles:{}};ColorWrap(Github);var SliderPointer$1=function x(d){var g=d.direction,E=reactCSS({default:{picker:{width:"18px",height:"18px",borderRadius:"50%",transform:"translate(-9px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}},vertical:{picker:{transform:"translate(-3px, -9px)"}}},{vertical:g==="vertical"});return React.createElement("div",{style:E.picker})},_extends$2=Object.assign||function(x){for(var d=1;d<arguments.length;d++){var g=arguments[d];for(var E in g)Object.prototype.hasOwnProperty.call(g,E)&&(x[E]=g[E])}return x},HuePicker=function x(d){var g=d.width,E=d.height,b=d.onChange,w=d.hsl,C=d.direction,S=d.pointer,P=d.styles,I=P===void 0?{}:P,M=d.className,D=M===void 0?"":M,k=reactCSS(merge({default:{picker:{position:"relative",width:g,height:E},hue:{radius:"2px"}}},I)),H=function(j){return b({a:1,h:j.h,l:.5,s:1})};return React.createElement("div",{style:k.picker,className:"hue-picker "+D},React.createElement(Hue,_extends$2({},k.hue,{hsl:w,pointer:S,onChange:H,direction:C})))};HuePicker.propTypes={styles:PropTypes.object};HuePicker.defaultProps={width:"316px",height:"16px",direction:"horizontal",pointer:SliderPointer$1,styles:{}};ColorWrap(HuePicker);var Material=function x(d){var g=d.onChange,E=d.hex,b=d.rgb,w=d.styles,C=w===void 0?{}:w,S=d.className,P=S===void 0?"":S,I=reactCSS(merge({default:{material:{width:"98px",height:"98px",padding:"16px",fontFamily:"Roboto"},HEXwrap:{position:"relative"},HEXinput:{width:"100%",marginTop:"12px",fontSize:"15px",color:"#333",padding:"0px",border:"0px",borderBottom:"2px solid "+E,outline:"none",height:"30px"},HEXlabel:{position:"absolute",top:"0px",left:"0px",fontSize:"11px",color:"#999999",textTransform:"capitalize"},Hex:{style:{}},RGBwrap:{position:"relative"},RGBinput:{width:"100%",marginTop:"12px",fontSize:"15px",color:"#333",padding:"0px",border:"0px",borderBottom:"1px solid #eee",outline:"none",height:"30px"},RGBlabel:{position:"absolute",top:"0px",left:"0px",fontSize:"11px",color:"#999999",textTransform:"capitalize"},split:{display:"flex",marginRight:"-10px",paddingTop:"11px"},third:{flex:"1",paddingRight:"10px"}}},C)),M=function(k,H){k.hex?isValidHex(k.hex)&&g({hex:k.hex,source:"hex"},H):(k.r||k.g||k.b)&&g({r:k.r||b.r,g:k.g||b.g,b:k.b||b.b,source:"rgb"},H)};return React.createElement(Raised,{styles:C},React.createElement("div",{style:I.material,className:"material-picker "+P},React.createElement(EditableInput,{style:{wrap:I.HEXwrap,input:I.HEXinput,label:I.HEXlabel},label:"hex",value:E,onChange:M}),React.createElement("div",{style:I.split,className:"flexbox-fix"},React.createElement("div",{style:I.third},React.createElement(EditableInput,{style:{wrap:I.RGBwrap,input:I.RGBinput,label:I.RGBlabel},label:"r",value:b.r,onChange:M})),React.createElement("div",{style:I.third},React.createElement(EditableInput,{style:{wrap:I.RGBwrap,input:I.RGBinput,label:I.RGBlabel},label:"g",value:b.g,onChange:M})),React.createElement("div",{style:I.third},React.createElement(EditableInput,{style:{wrap:I.RGBwrap,input:I.RGBinput,label:I.RGBlabel},label:"b",value:b.b,onChange:M})))))};ColorWrap(Material);var PhotoshopPicker=function x(d){var g=d.onChange,E=d.rgb,b=d.hsv,w=d.hex,C=reactCSS({default:{fields:{paddingTop:"5px",paddingBottom:"9px",width:"80px",position:"relative"},divider:{height:"5px"},RGBwrap:{position:"relative"},RGBinput:{marginLeft:"40%",width:"40%",height:"18px",border:"1px solid #888888",boxShadow:"inset 0 1px 1px rgba(0,0,0,.1), 0 1px 0 0 #ECECEC",marginBottom:"5px",fontSize:"13px",paddingLeft:"3px",marginRight:"10px"},RGBlabel:{left:"0px",top:"0px",width:"34px",textTransform:"uppercase",fontSize:"13px",height:"18px",lineHeight:"22px",position:"absolute"},HEXwrap:{position:"relative"},HEXinput:{marginLeft:"20%",width:"80%",height:"18px",border:"1px solid #888888",boxShadow:"inset 0 1px 1px rgba(0,0,0,.1), 0 1px 0 0 #ECECEC",marginBottom:"6px",fontSize:"13px",paddingLeft:"3px"},HEXlabel:{position:"absolute",top:"0px",left:"0px",width:"14px",textTransform:"uppercase",fontSize:"13px",height:"18px",lineHeight:"22px"},fieldSymbols:{position:"absolute",top:"5px",right:"-7px",fontSize:"13px"},symbol:{height:"20px",lineHeight:"22px",paddingBottom:"7px"}}}),S=function(I,M){I["#"]?isValidHex(I["#"])&&g({hex:I["#"],source:"hex"},M):I.r||I.g||I.b?g({r:I.r||E.r,g:I.g||E.g,b:I.b||E.b,source:"rgb"},M):(I.h||I.s||I.v)&&g({h:I.h||b.h,s:I.s||b.s,v:I.v||b.v,source:"hsv"},M)};return React.createElement("div",{style:C.fields},React.createElement(EditableInput,{style:{wrap:C.RGBwrap,input:C.RGBinput,label:C.RGBlabel},label:"h",value:Math.round(b.h),onChange:S}),React.createElement(EditableInput,{style:{wrap:C.RGBwrap,input:C.RGBinput,label:C.RGBlabel},label:"s",value:Math.round(b.s*100),onChange:S}),React.createElement(EditableInput,{style:{wrap:C.RGBwrap,input:C.RGBinput,label:C.RGBlabel},label:"v",value:Math.round(b.v*100),onChange:S}),React.createElement("div",{style:C.divider}),React.createElement(EditableInput,{style:{wrap:C.RGBwrap,input:C.RGBinput,label:C.RGBlabel},label:"r",value:E.r,onChange:S}),React.createElement(EditableInput,{style:{wrap:C.RGBwrap,input:C.RGBinput,label:C.RGBlabel},label:"g",value:E.g,onChange:S}),React.createElement(EditableInput,{style:{wrap:C.RGBwrap,input:C.RGBinput,label:C.RGBlabel},label:"b",value:E.b,onChange:S}),React.createElement("div",{style:C.divider}),React.createElement(EditableInput,{style:{wrap:C.HEXwrap,input:C.HEXinput,label:C.HEXlabel},label:"#",value:w.replace("#",""),onChange:S}),React.createElement("div",{style:C.fieldSymbols},React.createElement("div",{style:C.symbol},""),React.createElement("div",{style:C.symbol},"%"),React.createElement("div",{style:C.symbol},"%")))},PhotoshopPointerCircle$1=function x(d){var g=d.hsl,E=reactCSS({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",boxShadow:"inset 0 0 0 1px #fff",transform:"translate(-6px, -6px)"}},"black-outline":{picker:{boxShadow:"inset 0 0 0 1px #000"}}},{"black-outline":g.l>.5});return React.createElement("div",{style:E.picker})},PhotoshopPointerCircle=function x(){var d=reactCSS({default:{triangle:{width:0,height:0,borderStyle:"solid",borderWidth:"4px 0 4px 6px",borderColor:"transparent transparent transparent #fff",position:"absolute",top:"1px",left:"1px"},triangleBorder:{width:0,height:0,borderStyle:"solid",borderWidth:"5px 0 5px 8px",borderColor:"transparent transparent transparent #555"},left:{Extend:"triangleBorder",transform:"translate(-13px, -4px)"},leftInside:{Extend:"triangle",transform:"translate(-8px, -5px)"},right:{Extend:"triangleBorder",transform:"translate(20px, -14px) rotate(180deg)"},rightInside:{Extend:"triangle",transform:"translate(-8px, -5px)"}}});return React.createElement("div",{style:d.pointer},React.createElement("div",{style:d.left},React.createElement("div",{style:d.leftInside})),React.createElement("div",{style:d.right},React.createElement("div",{style:d.rightInside})))},PhotoshopButton=function x(d){var g=d.onClick,E=d.label,b=d.children,w=d.active,C=reactCSS({default:{button:{backgroundImage:"linear-gradient(-180deg, #FFFFFF 0%, #E6E6E6 100%)",border:"1px solid #878787",borderRadius:"2px",height:"20px",boxShadow:"0 1px 0 0 #EAEAEA",fontSize:"14px",color:"#000",lineHeight:"20px",textAlign:"center",marginBottom:"10px",cursor:"pointer"}},active:{button:{boxShadow:"0 0 0 1px #878787"}}},{active:w});return React.createElement("div",{style:C.button,onClick:g},E||b)},PhotoshopPreviews=function x(d){var g=d.rgb,E=d.currentColor,b=reactCSS({default:{swatches:{border:"1px solid #B3B3B3",borderBottom:"1px solid #F0F0F0",marginBottom:"2px",marginTop:"1px"},new:{height:"34px",background:"rgb("+g.r+","+g.g+", "+g.b+")",boxShadow:"inset 1px 0 0 #000, inset -1px 0 0 #000, inset 0 1px 0 #000"},current:{height:"34px",background:E,boxShadow:"inset 1px 0 0 #000, inset -1px 0 0 #000, inset 0 -1px 0 #000"},label:{fontSize:"14px",color:"#000",textAlign:"center"}}});return React.createElement("div",null,React.createElement("div",{style:b.label},"new"),React.createElement("div",{style:b.swatches},React.createElement("div",{style:b.new}),React.createElement("div",{style:b.current})),React.createElement("div",{style:b.label},"current"))},_createClass=(function(){function x(d,g){for(var E=0;E<g.length;E++){var b=g[E];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(d,b.key,b)}}return function(d,g,E){return g&&x(d.prototype,g),E&&x(d,E),d}})();function _classCallCheck(x,d){if(!(x instanceof d))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(x,d){if(!x)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return d&&(typeof d=="object"||typeof d=="function")?d:x}function _inherits(x,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof d);x.prototype=Object.create(d&&d.prototype,{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),d&&(Object.setPrototypeOf?Object.setPrototypeOf(x,d):x.__proto__=d)}var Photoshop=(function(x){_inherits(d,x);function d(g){_classCallCheck(this,d);var E=_possibleConstructorReturn(this,(d.__proto__||Object.getPrototypeOf(d)).call(this));return E.state={currentColor:g.hex},E}return _createClass(d,[{key:"render",value:function(){var E=this.props,b=E.styles,w=b===void 0?{}:b,C=E.className,S=C===void 0?"":C,P=reactCSS(merge({default:{picker:{background:"#DCDCDC",borderRadius:"4px",boxShadow:"0 0 0 1px rgba(0,0,0,.25), 0 8px 16px rgba(0,0,0,.15)",boxSizing:"initial",width:"513px"},head:{backgroundImage:"linear-gradient(-180deg, #F0F0F0 0%, #D4D4D4 100%)",borderBottom:"1px solid #B1B1B1",boxShadow:"inset 0 1px 0 0 rgba(255,255,255,.2), inset 0 -1px 0 0 rgba(0,0,0,.02)",height:"23px",lineHeight:"24px",borderRadius:"4px 4px 0 0",fontSize:"13px",color:"#4D4D4D",textAlign:"center"},body:{padding:"15px 15px 0",display:"flex"},saturation:{width:"256px",height:"256px",position:"relative",border:"2px solid #B3B3B3",borderBottom:"2px solid #F0F0F0",overflow:"hidden"},hue:{position:"relative",height:"256px",width:"19px",marginLeft:"10px",border:"2px solid #B3B3B3",borderBottom:"2px solid #F0F0F0"},controls:{width:"180px",marginLeft:"10px"},top:{display:"flex"},previews:{width:"60px"},actions:{flex:"1",marginLeft:"20px"}}},w));return React.createElement("div",{style:P.picker,className:"photoshop-picker "+S},React.createElement("div",{style:P.head},this.props.header),React.createElement("div",{style:P.body,className:"flexbox-fix"},React.createElement("div",{style:P.saturation},React.createElement(Saturation,{hsl:this.props.hsl,hsv:this.props.hsv,pointer:PhotoshopPointerCircle$1,onChange:this.props.onChange})),React.createElement("div",{style:P.hue},React.createElement(Hue,{direction:"vertical",hsl:this.props.hsl,pointer:PhotoshopPointerCircle,onChange:this.props.onChange})),React.createElement("div",{style:P.controls},React.createElement("div",{style:P.top,className:"flexbox-fix"},React.createElement("div",{style:P.previews},React.createElement(PhotoshopPreviews,{rgb:this.props.rgb,currentColor:this.state.currentColor})),React.createElement("div",{style:P.actions},React.createElement(PhotoshopButton,{label:"OK",onClick:this.props.onAccept,active:!0}),React.createElement(PhotoshopButton,{label:"Cancel",onClick:this.props.onCancel}),React.createElement(PhotoshopPicker,{onChange:this.props.onChange,rgb:this.props.rgb,hsv:this.props.hsv,hex:this.props.hex}))))))}}]),d})(React.Component);Photoshop.propTypes={header:PropTypes.string,styles:PropTypes.object};Photoshop.defaultProps={header:"Color Picker",styles:{}};ColorWrap(Photoshop);var SketchFields=function x(d){var g=d.onChange,E=d.rgb,b=d.hsl,w=d.hex,C=d.disableAlpha,S=reactCSS({default:{fields:{display:"flex",paddingTop:"4px"},single:{flex:"1",paddingLeft:"6px"},alpha:{flex:"1",paddingLeft:"6px"},double:{flex:"2"},input:{width:"80%",padding:"4px 10% 3px",border:"none",boxShadow:"inset 0 0 0 1px #ccc",fontSize:"11px"},label:{display:"block",textAlign:"center",fontSize:"11px",color:"#222",paddingTop:"3px",paddingBottom:"4px",textTransform:"capitalize"}},disableAlpha:{alpha:{display:"none"}}},{disableAlpha:C}),P=function(M,D){M.hex?isValidHex(M.hex)&&g({hex:M.hex,source:"hex"},D):M.r||M.g||M.b?g({r:M.r||E.r,g:M.g||E.g,b:M.b||E.b,a:E.a,source:"rgb"},D):M.a&&(M.a<0?M.a=0:M.a>100&&(M.a=100),M.a/=100,g({h:b.h,s:b.s,l:b.l,a:M.a,source:"rgb"},D))};return React.createElement("div",{style:S.fields,className:"flexbox-fix"},React.createElement("div",{style:S.double},React.createElement(EditableInput,{style:{input:S.input,label:S.label},label:"hex",value:w.replace("#",""),onChange:P})),React.createElement("div",{style:S.single},React.createElement(EditableInput,{style:{input:S.input,label:S.label},label:"r",value:E.r,onChange:P,dragLabel:"true",dragMax:"255"})),React.createElement("div",{style:S.single},React.createElement(EditableInput,{style:{input:S.input,label:S.label},label:"g",value:E.g,onChange:P,dragLabel:"true",dragMax:"255"})),React.createElement("div",{style:S.single},React.createElement(EditableInput,{style:{input:S.input,label:S.label},label:"b",value:E.b,onChange:P,dragLabel:"true",dragMax:"255"})),React.createElement("div",{style:S.alpha},React.createElement(EditableInput,{style:{input:S.input,label:S.label},label:"a",value:Math.round(E.a*100),onChange:P,dragLabel:"true",dragMax:"100"})))},_extends$1=Object.assign||function(x){for(var d=1;d<arguments.length;d++){var g=arguments[d];for(var E in g)Object.prototype.hasOwnProperty.call(g,E)&&(x[E]=g[E])}return x},SketchPresetColors=function x(d){var g=d.colors,E=d.onClick,b=E===void 0?function(){}:E,w=d.onSwatchHover,C=reactCSS({default:{colors:{margin:"0 -10px",padding:"10px 0 0 10px",borderTop:"1px solid #eee",display:"flex",flexWrap:"wrap",position:"relative"},swatchWrap:{width:"16px",height:"16px",margin:"0 10px 10px 0"},swatch:{borderRadius:"3px",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15)"}},"no-presets":{colors:{display:"none"}}},{"no-presets":!g||!g.length}),S=function(I,M){b({hex:I,source:"hex"},M)};return React.createElement("div",{style:C.colors,className:"flexbox-fix"},g.map(function(P){var I=typeof P=="string"?{color:P}:P,M=""+I.color+(I.title||"");return React.createElement("div",{key:M,style:C.swatchWrap},React.createElement(Swatch$1,_extends$1({},I,{style:C.swatch,onClick:S,onHover:w,focusStyle:{boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15), 0 0 4px "+I.color}})))}))};SketchPresetColors.propTypes={colors:PropTypes.arrayOf(PropTypes.oneOfType([PropTypes.string,PropTypes.shape({color:PropTypes.string,title:PropTypes.string})])).isRequired};var _extends=Object.assign||function(x){for(var d=1;d<arguments.length;d++){var g=arguments[d];for(var E in g)Object.prototype.hasOwnProperty.call(g,E)&&(x[E]=g[E])}return x},Sketch=function x(d){var g=d.width,E=d.rgb,b=d.hex,w=d.hsv,C=d.hsl,S=d.onChange,P=d.onSwatchHover,I=d.disableAlpha,M=d.presetColors,D=d.renderers,k=d.styles,H=k===void 0?{}:k,F=d.className,j=F===void 0?"":F,$=reactCSS(merge({default:_extends({picker:{width:g,padding:"10px 10px 0",boxSizing:"initial",background:"#fff",borderRadius:"4px",boxShadow:"0 0 0 1px rgba(0,0,0,.15), 0 8px 16px rgba(0,0,0,.15)"},saturation:{width:"100%",paddingBottom:"75%",position:"relative",overflow:"hidden"},Saturation:{radius:"3px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},controls:{display:"flex"},sliders:{padding:"4px 0",flex:"1"},color:{width:"24px",height:"24px",position:"relative",marginTop:"4px",marginLeft:"4px",borderRadius:"3px"},activeColor:{absolute:"0px 0px 0px 0px",borderRadius:"2px",background:"rgba("+E.r+","+E.g+","+E.b+","+E.a+")",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},hue:{position:"relative",height:"10px",overflow:"hidden"},Hue:{radius:"2px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},alpha:{position:"relative",height:"10px",marginTop:"4px",overflow:"hidden"},Alpha:{radius:"2px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"}},H),disableAlpha:{color:{height:"10px"},hue:{height:"10px"},alpha:{display:"none"}}},H),{disableAlpha:I});return React.createElement("div",{style:$.picker,className:"sketch-picker "+j},React.createElement("div",{style:$.saturation},React.createElement(Saturation,{style:$.Saturation,hsl:C,hsv:w,onChange:S})),React.createElement("div",{style:$.controls,className:"flexbox-fix"},React.createElement("div",{style:$.sliders},React.createElement("div",{style:$.hue},React.createElement(Hue,{style:$.Hue,hsl:C,onChange:S})),React.createElement("div",{style:$.alpha},React.createElement(Alpha,{style:$.Alpha,rgb:E,hsl:C,renderers:D,onChange:S}))),React.createElement("div",{style:$.color},React.createElement(Checkboard,null),React.createElement("div",{style:$.activeColor}))),React.createElement(SketchFields,{rgb:E,hsl:C,hex:b,onChange:S,disableAlpha:I}),React.createElement(SketchPresetColors,{colors:M,onClick:S,onSwatchHover:P}))};Sketch.propTypes={disableAlpha:PropTypes.bool,width:PropTypes.oneOfType([PropTypes.string,PropTypes.number]),styles:PropTypes.object};Sketch.defaultProps={disableAlpha:!1,width:200,styles:{},presetColors:["#D0021B","#F5A623","#F8E71C","#8B572A","#7ED321","#417505","#BD10E0","#9013FE","#4A90E2","#50E3C2","#B8E986","#000000","#4A4A4A","#9B9B9B","#FFFFFF"]};ColorWrap(Sketch);var SliderSwatch=function x(d){var g=d.hsl,E=d.offset,b=d.onClick,w=b===void 0?function(){}:b,C=d.active,S=d.first,P=d.last,I=reactCSS({default:{swatch:{height:"12px",background:"hsl("+g.h+", 50%, "+E*100+"%)",cursor:"pointer"}},first:{swatch:{borderRadius:"2px 0 0 2px"}},last:{swatch:{borderRadius:"0 2px 2px 0"}},active:{swatch:{transform:"scaleY(1.8)",borderRadius:"3.6px/2px"}}},{active:C,first:S,last:P}),M=function(k){return w({h:g.h,s:.5,l:E,source:"hsl"},k)};return React.createElement("div",{style:I.swatch,onClick:M})},SliderSwatches=function x(d){var g=d.onClick,E=d.hsl,b=reactCSS({default:{swatches:{marginTop:"20px"},swatch:{boxSizing:"border-box",width:"20%",paddingRight:"1px",float:"left"},clear:{clear:"both"}}}),w=.1;return React.createElement("div",{style:b.swatches},React.createElement("div",{style:b.swatch},React.createElement(SliderSwatch,{hsl:E,offset:".80",active:Math.abs(E.l-.8)<w&&Math.abs(E.s-.5)<w,onClick:g,first:!0})),React.createElement("div",{style:b.swatch},React.createElement(SliderSwatch,{hsl:E,offset:".65",active:Math.abs(E.l-.65)<w&&Math.abs(E.s-.5)<w,onClick:g})),React.createElement("div",{style:b.swatch},React.createElement(SliderSwatch,{hsl:E,offset:".50",active:Math.abs(E.l-.5)<w&&Math.abs(E.s-.5)<w,onClick:g})),React.createElement("div",{style:b.swatch},React.createElement(SliderSwatch,{hsl:E,offset:".35",active:Math.abs(E.l-.35)<w&&Math.abs(E.s-.5)<w,onClick:g})),React.createElement("div",{style:b.swatch},React.createElement(SliderSwatch,{hsl:E,offset:".20",active:Math.abs(E.l-.2)<w&&Math.abs(E.s-.5)<w,onClick:g,last:!0})),React.createElement("div",{style:b.clear}))},SliderPointer=function x(){var d=reactCSS({default:{picker:{width:"14px",height:"14px",borderRadius:"6px",transform:"translate(-7px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}}});return React.createElement("div",{style:d.picker})},Slider=function x(d){var g=d.hsl,E=d.onChange,b=d.pointer,w=d.styles,C=w===void 0?{}:w,S=d.className,P=S===void 0?"":S,I=reactCSS(merge({default:{hue:{height:"12px",position:"relative"},Hue:{radius:"2px"}}},C));return React.createElement("div",{style:I.wrap||{},className:"slider-picker "+P},React.createElement("div",{style:I.hue},React.createElement(Hue,{style:I.Hue,hsl:g,pointer:b,onChange:E})),React.createElement("div",{style:I.swatches},React.createElement(SliderSwatches,{hsl:g,onClick:E})))};Slider.propTypes={styles:PropTypes.object};Slider.defaultProps={pointer:SliderPointer,styles:{}};ColorWrap(Slider);var CheckIcon$1={},hasRequiredCheckIcon;function requireCheckIcon(){if(hasRequiredCheckIcon)return CheckIcon$1;hasRequiredCheckIcon=1,Object.defineProperty(CheckIcon$1,"__esModule",{value:!0});var x=Object.assign||function(C){for(var S=1;S<arguments.length;S++){var P=arguments[S];for(var I in P)Object.prototype.hasOwnProperty.call(P,I)&&(C[I]=P[I])}return C},d=requireReact(),g=E(d);function E(C){return C&&C.__esModule?C:{default:C}}function b(C,S){var P={};for(var I in C)S.indexOf(I)>=0||Object.prototype.hasOwnProperty.call(C,I)&&(P[I]=C[I]);return P}var w=24;return CheckIcon$1.default=function(C){var S=C.fill,P=S===void 0?"currentColor":S,I=C.width,M=I===void 0?w:I,D=C.height,k=D===void 0?w:D,H=C.style,F=H===void 0?{}:H,j=b(C,["fill","width","height","style"]);return g.default.createElement("svg",x({viewBox:"0 0 "+w+" "+w,style:x({fill:P,width:M,height:k},F)},j),g.default.createElement("path",{d:"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"}))},CheckIcon$1}var CheckIconExports=requireCheckIcon();const CheckIcon=getDefaultExportFromCjs(CheckIconExports);var SwatchesColor=function x(d){var g=d.color,E=d.onClick,b=E===void 0?function(){}:E,w=d.onSwatchHover,C=d.first,S=d.last,P=d.active,I=reactCSS({default:{color:{width:"40px",height:"24px",cursor:"pointer",background:g,marginBottom:"1px"},check:{color:getContrastingColor(g),marginLeft:"8px",display:"none"}},first:{color:{overflow:"hidden",borderRadius:"2px 2px 0 0"}},last:{color:{overflow:"hidden",borderRadius:"0 0 2px 2px"}},active:{check:{display:"block"}},"color-#FFFFFF":{color:{boxShadow:"inset 0 0 0 1px #ddd"},check:{color:"#333"}},transparent:{check:{color:"#333"}}},{first:C,last:S,active:P,"color-#FFFFFF":g==="#FFFFFF",transparent:g==="transparent"});return React.createElement(Swatch$1,{color:g,style:I.color,onClick:b,onHover:w,focusStyle:{boxShadow:"0 0 4px "+g}},React.createElement("div",{style:I.check},React.createElement(CheckIcon,null)))},SwatchesGroup=function x(d){var g=d.onClick,E=d.onSwatchHover,b=d.group,w=d.active,C=reactCSS({default:{group:{paddingBottom:"10px",width:"40px",float:"left",marginRight:"10px"}}});return React.createElement("div",{style:C.group},map(b,function(S,P){return React.createElement(SwatchesColor,{key:S,color:S,active:S.toLowerCase()===w,first:P===0,last:P===b.length-1,onClick:g,onSwatchHover:E})}))},Swatches=function x(d){var g=d.width,E=d.height,b=d.onChange,w=d.onSwatchHover,C=d.colors,S=d.hex,P=d.styles,I=P===void 0?{}:P,M=d.className,D=M===void 0?"":M,k=reactCSS(merge({default:{picker:{width:g,height:E},overflow:{height:E,overflowY:"scroll"},body:{padding:"16px 0 6px 16px"},clear:{clear:"both"}}},I)),H=function(j,$){return b({hex:j,source:"hex"},$)};return React.createElement("div",{style:k.picker,className:"swatches-picker "+D},React.createElement(Raised,null,React.createElement("div",{style:k.overflow},React.createElement("div",{style:k.body},map(C,function(F){return React.createElement(SwatchesGroup,{key:F.toString(),group:F,active:S,onClick:H,onSwatchHover:w})}),React.createElement("div",{style:k.clear})))))};Swatches.propTypes={width:PropTypes.oneOfType([PropTypes.string,PropTypes.number]),height:PropTypes.oneOfType([PropTypes.string,PropTypes.number]),colors:PropTypes.arrayOf(PropTypes.arrayOf(PropTypes.string)),styles:PropTypes.object};Swatches.defaultProps={width:320,height:240,colors:[[red[900],red[700],red[500],red[300],red[100]],[pink[900],pink[700],pink[500],pink[300],pink[100]],[purple[900],purple[700],purple[500],purple[300],purple[100]],[deepPurple[900],deepPurple[700],deepPurple[500],deepPurple[300],deepPurple[100]],[indigo[900],indigo[700],indigo[500],indigo[300],indigo[100]],[blue[900],blue[700],blue[500],blue[300],blue[100]],[lightBlue[900],lightBlue[700],lightBlue[500],lightBlue[300],lightBlue[100]],[cyan[900],cyan[700],cyan[500],cyan[300],cyan[100]],[teal[900],teal[700],teal[500],teal[300],teal[100]],["#194D33",green[700],green[500],green[300],green[100]],[lightGreen[900],lightGreen[700],lightGreen[500],lightGreen[300],lightGreen[100]],[lime[900],lime[700],lime[500],lime[300],lime[100]],[yellow[900],yellow[700],yellow[500],yellow[300],yellow[100]],[amber[900],amber[700],amber[500],amber[300],amber[100]],[orange[900],orange[700],orange[500],orange[300],orange[100]],[deepOrange[900],deepOrange[700],deepOrange[500],deepOrange[300],deepOrange[100]],[brown[900],brown[700],brown[500],brown[300],brown[100]],[blueGrey[900],blueGrey[700],blueGrey[500],blueGrey[300],blueGrey[100]],["#000000","#525252","#969696","#D9D9D9","#FFFFFF"]],styles:{}};ColorWrap(Swatches);var Twitter=function x(d){var g=d.onChange,E=d.onSwatchHover,b=d.hex,w=d.colors,C=d.width,S=d.triangle,P=d.styles,I=P===void 0?{}:P,M=d.className,D=M===void 0?"":M,k=reactCSS(merge({default:{card:{width:C,background:"#fff",border:"0 solid rgba(0,0,0,0.25)",boxShadow:"0 1px 4px rgba(0,0,0,0.25)",borderRadius:"4px",position:"relative"},body:{padding:"15px 9px 9px 15px"},label:{fontSize:"18px",color:"#fff"},triangle:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 9px 10px 9px",borderColor:"transparent transparent #fff transparent",position:"absolute"},triangleShadow:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 9px 10px 9px",borderColor:"transparent transparent rgba(0,0,0,.1) transparent",position:"absolute"},hash:{background:"#F0F0F0",height:"30px",width:"30px",borderRadius:"4px 0 0 4px",float:"left",color:"#98A1A4",display:"flex",alignItems:"center",justifyContent:"center"},input:{width:"100px",fontSize:"14px",color:"#666",border:"0px",outline:"none",height:"28px",boxShadow:"inset 0 0 0 1px #F0F0F0",boxSizing:"content-box",borderRadius:"0 4px 4px 0",float:"left",paddingLeft:"8px"},swatch:{width:"30px",height:"30px",float:"left",borderRadius:"4px",margin:"0 6px 6px 0"},clear:{clear:"both"}},"hide-triangle":{triangle:{display:"none"},triangleShadow:{display:"none"}},"top-left-triangle":{triangle:{top:"-10px",left:"12px"},triangleShadow:{top:"-11px",left:"12px"}},"top-right-triangle":{triangle:{top:"-10px",right:"12px"},triangleShadow:{top:"-11px",right:"12px"}}},I),{"hide-triangle":S==="hide","top-left-triangle":S==="top-left","top-right-triangle":S==="top-right"}),H=function(j,$){isValidHex(j)&&g({hex:j,source:"hex"},$)};return React.createElement("div",{style:k.card,className:"twitter-picker "+D},React.createElement("div",{style:k.triangleShadow}),React.createElement("div",{style:k.triangle}),React.createElement("div",{style:k.body},map(w,function(F,j){return React.createElement(Swatch$1,{key:j,color:F,hex:F,style:k.swatch,onClick:H,onHover:E,focusStyle:{boxShadow:"0 0 4px "+F}})}),React.createElement("div",{style:k.hash},"#"),React.createElement(EditableInput,{label:null,style:{input:k.input},value:b.replace("#",""),onChange:H}),React.createElement("div",{style:k.clear})))};Twitter.propTypes={width:PropTypes.oneOfType([PropTypes.string,PropTypes.number]),triangle:PropTypes.oneOf(["hide","top-left","top-right"]),colors:PropTypes.arrayOf(PropTypes.string),styles:PropTypes.object};Twitter.defaultProps={width:276,colors:["#FF6900","#FCB900","#7BDCB5","#00D084","#8ED1FC","#0693E3","#ABB8C3","#EB144C","#F78DA7","#9900EF"],triangle:"top-left",styles:{}};ColorWrap(Twitter);var GooglePointerCircle=function x(d){var g=reactCSS({default:{picker:{width:"20px",height:"20px",borderRadius:"22px",border:"2px #fff solid",transform:"translate(-12px, -13px)",background:"hsl("+Math.round(d.hsl.h)+", "+Math.round(d.hsl.s*100)+"%, "+Math.round(d.hsl.l*100)+"%)"}}});return React.createElement("div",{style:g.picker})};GooglePointerCircle.propTypes={hsl:PropTypes.shape({h:PropTypes.number,s:PropTypes.number,l:PropTypes.number,a:PropTypes.number})};GooglePointerCircle.defaultProps={hsl:{a:1,h:249.94,l:.2,s:.5}};var GooglePointer=function x(d){var g=reactCSS({default:{picker:{width:"20px",height:"20px",borderRadius:"22px",transform:"translate(-10px, -7px)",background:"hsl("+Math.round(d.hsl.h)+", 100%, 50%)",border:"2px white solid"}}});return React.createElement("div",{style:g.picker})};GooglePointer.propTypes={hsl:PropTypes.shape({h:PropTypes.number,s:PropTypes.number,l:PropTypes.number,a:PropTypes.number})};GooglePointer.defaultProps={hsl:{a:1,h:249.94,l:.2,s:.5}};var GoogleFields=function x(d){var g=d.onChange,E=d.rgb,b=d.hsl,w=d.hex,C=d.hsv,S=function(H,F){if(H.hex)isValidHex(H.hex)&&g({hex:H.hex,source:"hex"},F);else if(H.rgb){var j=H.rgb.split(",");isvalidColorString(H.rgb,"rgb")&&g({r:j[0],g:j[1],b:j[2],a:1,source:"rgb"},F)}else if(H.hsv){var $=H.hsv.split(",");isvalidColorString(H.hsv,"hsv")&&($[2]=$[2].replace("%",""),$[1]=$[1].replace("%",""),$[0]=$[0].replace("",""),$[1]==1?$[1]=.01:$[2]==1&&($[2]=.01),g({h:Number($[0]),s:Number($[1]),v:Number($[2]),source:"hsv"},F))}else if(H.hsl){var z=H.hsl.split(",");isvalidColorString(H.hsl,"hsl")&&(z[2]=z[2].replace("%",""),z[1]=z[1].replace("%",""),z[0]=z[0].replace("",""),D[1]==1?D[1]=.01:D[2]==1&&(D[2]=.01),g({h:Number(z[0]),s:Number(z[1]),v:Number(z[2]),source:"hsl"},F))}},P=reactCSS({default:{wrap:{display:"flex",height:"100px",marginTop:"4px"},fields:{width:"100%"},column:{paddingTop:"10px",display:"flex",justifyContent:"space-between"},double:{padding:"0px 4.4px",boxSizing:"border-box"},input:{width:"100%",height:"38px",boxSizing:"border-box",padding:"4px 10% 3px",textAlign:"center",border:"1px solid #dadce0",fontSize:"11px",textTransform:"lowercase",borderRadius:"5px",outline:"none",fontFamily:"Roboto,Arial,sans-serif"},input2:{height:"38px",width:"100%",border:"1px solid #dadce0",boxSizing:"border-box",fontSize:"11px",textTransform:"lowercase",borderRadius:"5px",outline:"none",paddingLeft:"10px",fontFamily:"Roboto,Arial,sans-serif"},label:{textAlign:"center",fontSize:"12px",background:"#fff",position:"absolute",textTransform:"uppercase",color:"#3c4043",width:"35px",top:"-6px",left:"0",right:"0",marginLeft:"auto",marginRight:"auto",fontFamily:"Roboto,Arial,sans-serif"},label2:{left:"10px",textAlign:"center",fontSize:"12px",background:"#fff",position:"absolute",textTransform:"uppercase",color:"#3c4043",width:"32px",top:"-6px",fontFamily:"Roboto,Arial,sans-serif"},single:{flexGrow:"1",margin:"0px 4.4px"}}}),I=E.r+", "+E.g+", "+E.b,M=Math.round(b.h)+", "+Math.round(b.s*100)+"%, "+Math.round(b.l*100)+"%",D=Math.round(C.h)+", "+Math.round(C.s*100)+"%, "+Math.round(C.v*100)+"%";return React.createElement("div",{style:P.wrap,className:"flexbox-fix"},React.createElement("div",{style:P.fields},React.createElement("div",{style:P.double},React.createElement(EditableInput,{style:{input:P.input,label:P.label},label:"hex",value:w,onChange:S})),React.createElement("div",{style:P.column},React.createElement("div",{style:P.single},React.createElement(EditableInput,{style:{input:P.input2,label:P.label2},label:"rgb",value:I,onChange:S})),React.createElement("div",{style:P.single},React.createElement(EditableInput,{style:{input:P.input2,label:P.label2},label:"hsv",value:D,onChange:S})),React.createElement("div",{style:P.single},React.createElement(EditableInput,{style:{input:P.input2,label:P.label2},label:"hsl",value:M,onChange:S})))))},Google=function x(d){var g=d.width,E=d.onChange,b=d.rgb,w=d.hsl,C=d.hsv,S=d.hex,P=d.header,I=d.styles,M=I===void 0?{}:I,D=d.className,k=D===void 0?"":D,H=reactCSS(merge({default:{picker:{width:g,background:"#fff",border:"1px solid #dfe1e5",boxSizing:"initial",display:"flex",flexWrap:"wrap",borderRadius:"8px 8px 0px 0px"},head:{height:"57px",width:"100%",paddingTop:"16px",paddingBottom:"16px",paddingLeft:"16px",fontSize:"20px",boxSizing:"border-box",fontFamily:"Roboto-Regular,HelveticaNeue,Arial,sans-serif"},saturation:{width:"70%",padding:"0px",position:"relative",overflow:"hidden"},swatch:{width:"30%",height:"228px",padding:"0px",background:"rgba("+b.r+", "+b.g+", "+b.b+", 1)",position:"relative",overflow:"hidden"},body:{margin:"auto",width:"95%"},controls:{display:"flex",boxSizing:"border-box",height:"52px",paddingTop:"22px"},color:{width:"32px"},hue:{height:"8px",position:"relative",margin:"0px 16px 0px 16px",width:"100%"},Hue:{radius:"2px"}}},M));return React.createElement("div",{style:H.picker,className:"google-picker "+k},React.createElement("div",{style:H.head},P),React.createElement("div",{style:H.swatch}),React.createElement("div",{style:H.saturation},React.createElement(Saturation,{hsl:w,hsv:C,pointer:GooglePointerCircle,onChange:E})),React.createElement("div",{style:H.body},React.createElement("div",{style:H.controls,className:"flexbox-fix"},React.createElement("div",{style:H.hue},React.createElement(Hue,{style:H.Hue,hsl:w,radius:"4px",pointer:GooglePointer,onChange:E}))),React.createElement(GoogleFields,{rgb:b,hsl:w,hex:S,hsv:C,onChange:E})))};Google.propTypes={width:PropTypes.oneOfType([PropTypes.string,PropTypes.number]),styles:PropTypes.object,header:PropTypes.string};Google.defaultProps={width:652,styles:{},header:"Color picker"};ColorWrap(Google);const ColorPicker=({selectedColor:x,onColorChange:d,className:g})=>{const[E,b]=reactExports.useState(!1),w=()=>{b(!E)};return jsxRuntimeExports.jsxs("div",{className:g,children:[E&&jsxRuntimeExports.jsx("div",{style:{position:"absolute",top:"10px",right:"250px"},children:jsxRuntimeExports.jsx(CompactPicker,{color:x,onChangeComplete:d})}),jsxRuntimeExports.jsx(Button,{className:"w-100",onClick:w,size:"sm",variant:"secondary",children:E?"Hide colour":"Select colour"})]})},ColorButtons=({graph:x})=>{const[d,g]=reactExports.useState("#ffffff"),{dispatch:E}=useFileContext(),b=C=>{x.getDataModel().beginUpdate();try{x.getSelectionCells().forEach(S=>{var M;const P=S.getId(),I=(M=parseGoalRefId(P))==null?void 0:M[0].instanceId;I&&E(updateColorForInstanceId({instanceId:I,color:C}))})}finally{x.getDataModel().endUpdate()}},w=C=>{g(C.hex),b(C.hex)};return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs(ButtonGroup,{vertical:!0,className:"w-100",children:[jsxRuntimeExports.jsx(Button,{variant:"danger",onClick:()=>b("#DB3545"),children:"High"}),jsxRuntimeExports.jsx(Button,{variant:"warning",onClick:()=>b("#FFC107"),children:"Medium"}),jsxRuntimeExports.jsx(Button,{variant:"success",onClick:()=>b("#198754"),children:"Low"})]}),jsxRuntimeExports.jsx(ColorPicker,{selectedColor:d,onColorChange:w,className:"pt-1"})]})},ZoomButtons=({recentreView:x})=>{const{graph:d}=useGraph();return jsxRuntimeExports.jsxs(ButtonGroup,{className:"w-100",size:"sm",children:[jsxRuntimeExports.jsx(Button,{variant:"light",onClick:()=>d==null?void 0:d.zoomIn(),children:jsxRuntimeExports.jsx(BsZoomIn,{})}),jsxRuntimeExports.jsx(Button,{variant:"light",onClick:()=>x(),children:jsxRuntimeExports.jsx(BsStopCircle,{})}),jsxRuntimeExports.jsx(Button,{variant:"light",onClick:()=>d==null?void 0:d.zoomOut(),children:jsxRuntimeExports.jsx(BsZoomOut,{})})]})},ScaleTextButton=()=>{const{graph:x}=useGraph(),[d,g]=reactExports.useState(12);reactExports.useEffect(()=>{if(!x)return;const b=()=>{if(!x)return;const C=x.getSelectionCells();if(C.length>0){const P=x.getCellStyle(C[0]).fontSize||12;g(P)}},w=()=>{b()};return x.getSelectionModel().addListener("change",w),()=>{x.getSelectionModel().removeListener(w)}},[x]);const E=b=>{const w=parseInt(b,10);if(isNaN(w)){g(12);return}if(g(w),!x||w<8||w>40)return;const C=x.getSelectionCells();x.getDataModel().beginUpdate();try{C.forEach(S=>{const P=x.getCellStyle(S);P.fontSize=w,x.getDataModel().setStyle(S,P)})}finally{x.getDataModel().endUpdate(),x.refresh()}};return jsxRuntimeExports.jsx(FormControl$1,{type:"number",value:d,onChange:b=>E(b.target.value),min:8,max:40})},CollapsibleSidebarCard=({title:x,isOpen:d=!1,children:g})=>{const[E,b]=reactExports.useState(d);return jsxRuntimeExports.jsx(Card$1,{children:jsxRuntimeExports.jsxs(Card$1.Body,{className:"p-1",children:[jsxRuntimeExports.jsxs(Card$1.Subtitle,{onClick:()=>b(!E),style:{cursor:"pointer"},children:[E?jsxRuntimeExports.jsx(BsCaretDownFill,{}):jsxRuntimeExports.jsx(BsCaretRightFill,{}),x]}),jsxRuntimeExports.jsx(Collapse,{in:E,children:jsxRuntimeExports.jsx(Card$1.Text,{className:"border p-1",children:g})})]})})},SidebarBody=({graph:x,recentreView:d,className:g})=>x?jsxRuntimeExports.jsxs("div",{className:`border border-black p-1 rounded ${g}`,children:[jsxRuntimeExports.jsx(CollapsibleSidebarCard,{isOpen:!0,title:"Zoom",children:jsxRuntimeExports.jsx(ZoomButtons,{recentreView:d})}),jsxRuntimeExports.jsx(CollapsibleSidebarCard,{title:"Colour",children:jsxRuntimeExports.jsx(ColorButtons,{graph:x})}),jsxRuntimeExports.jsx(CollapsibleSidebarCard,{title:"Font size",children:jsxRuntimeExports.jsx(ScaleTextButton,{})})]}):null,SidebarItems=({graph:x,className:d=""})=>{const g=reactExports.useRef(null),{dispatch:E}=useFileContext(),b=(w,C,S,P,I,M)=>{let D;if(M)D=new Cell(null,new Geometry(0,0,P,I)),D.geometry&&(D.geometry.relative=!0,D.setEdge(!0));else{const j=Object.entries(SYMBOL_CONFIGS).find(([,W])=>W.imagePath===S);if(!j){console.warn(`No symbol config found for image path: ${S}`);return}const[$,z]=j;let U={fontSize:VERTEX_FONT.size,fontColor:VERTEX_FONT.color,shape:z.shape};w.getStylesheet().putCellStyle("minWidth",U),w.getStylesheet().putCellStyle("minHeight",U),$==="STAKEHOLDER"?U={...U,verticalAlign:"top",verticalLabelPosition:"bottom",autoSize:!1}:$==="NEGATIVE"&&(U={...U,fillColor:"grey"}),D=new Cell(null,new Geometry(0,0,P,I),U),D.setVertex(!0)}const k=(j,$,z,U,W)=>{var Z;j.stopEditing(!1),j.getPointForEvent($);const q=j.cloneCell(D);if(q){const X=newTreeItem({type:(Z=getSymbolConfigByShape(String(q.style.shape)))==null?void 0:Z.label});E(addGoal(X)),E(addGoalToTree(X))}},H=(j,$,z,U,W)=>{j.stopEditing(!1);const q=j.getPointForEvent($),Z=j.cloneCell(D);Z&&Z.geometry&&(Z.geometry.setTerminalPoint(new Point(q.x,q.y),!0),Z.geometry.setTerminalPoint(new Point(q.x+LINE_SIZE,q.y+LINE_SIZE),!1),Z.parent=j.getDefaultParent(),j.importCells([Z],0,0,z))},F=C.addMode(null,S,k,S);F.style.width="60px",S==SYMBOL_CONFIGS.STAKEHOLDER.imagePath&&(F.style.width="30px"),M?(makeDraggable(F,w,H),F.style.width="50px"):makeDraggable(F,w,k)};return reactExports.useEffect(()=>{if(!g.current)return;const w=new MaxToolbar(g.current);w.enabled=!1,Object.values(SYMBOL_CONFIGS).filter(C=>C.type!=="Crowd").forEach(C=>{b(x,w,C.imagePath,SYMBOL_WIDTH*C.scale.width,SYMBOL_HEIGHT*C.scale.height,!1)}),b(x,w,LINE_IMAGE_PATH,LINE_SIZE,LINE_SIZE,!0)},[x]),jsxRuntimeExports.jsx("div",{className:`border border-black p-1 rounded ${d}`,ref:g})},GraphSidebar=({graph:x,recentreView:d})=>jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(SidebarBody,{graph:x,recentreView:d,className:"mt-1"}),x&&jsxRuntimeExports.jsx(SidebarItems,{className:"mt-1",graph:x})]}),WarningMessage=({message:x})=>jsxRuntimeExports.jsx("span",{className:"text-warning",style:{bottom:"10px",right:"10px",padding:"10px",borderRadius:"5px",zIndex:5},children:x}),GRAPH_DIV_ID="graphContainer",DELETE_KEYBINDING=8,DELETE_KEYBINDING2=46,recentreView=x=>{x.fit(),x.center()},GraphWorker=({showGraphSection:x=!1})=>{const d=reactExports.useRef(null),{cluster:g,dispatch:E,treeIds:b}=useFileContext(),{graph:w,setGraph:C}=useGraph(),S=reactExports.useRef(b);S.current=b;const P=Q=>Q.ClusterGoals.some(se=>se.GoalType==="Functional"),I=reactExports.useMemo(()=>P(g),[g]),[M,D]=reactExports.useState({show:!1,title:"",message:"",onHide:()=>D(Q=>({...Q,show:!1}))}),[k,H]=reactExports.useState(!1),[F,j]=reactExports.useState(!1),[$,z]=reactExports.useState(null),U=(Q,se)=>Q.getOutgoingEdges(se,null).filter(Ce=>(Ce==null?void 0:Ce.target)!==se),W=(Q,se,ge)=>{if(!ge||!Q)return;const Ce=new Set,oe=J=>{if(Ce.has(J))return;Ce.add(J);const ue=Q.getOutgoingEdges(J,null)||[];se&&ue.length&&ue.forEach(Te=>{Te.target&&oe(Te.target)})};ge.forEach(oe);const he=Array.from(Ce),de=[],re=new Map;if(he.forEach(J=>{const ue=J.getId();try{parseGoalRefId(ue).forEach(({goalId:xe,instanceId:we})=>{re.set(ue,{goalId:xe,instanceId:we})})}catch(Te){de.push({id:ue??"unknown",reason:Te instanceof Error?Te.message:"Unknown parsing error"})}}),de.length>0){const J=de.map(ue=>ue.reason).join(`

`);D({show:!0,title:"Invalid Cell IDs",message:J,onHide:()=>D(ue=>({...ue,show:!1}))});return}const ae=[],pe=J=>{const ue=Q.getOutgoingEdges(J,null)||[];se&&ue.length&&ue.forEach(xe=>{xe.target&&pe(xe.target)});const Te=Q.removeCells([J],se)||[];ae.push(...Te)};ge.forEach(J=>pe(J)),ae.forEach(J=>{const ue=J.getId();if(!ue)return;const Te=re.get(ue);if(!Te){console.warn("Deleted cell has no parsed info (unexpected):",ue);return}E(removeGoalIdFromTree({id:Te.goalId,instanceId:Te.instanceId,removeChildren:se}))}),H(!1)};reactExports.useRef(!1),reactExports.useRef(g.ClusterGoals.length);const q=(Q,se,ge,Ce,oe)=>{const he=Q.fontSize;let de,re;if(he)se/ge>1.4?re=he/ge:re=he/se,Ce/oe>1.4?de=re*oe:de=re*Ce;else return he;return de},Z=Q=>{Q.setCellsEditable(!0),Q.setPanning(!0),Q.setCellsResizable(!0),Q.setCellsMovable(!0),Q.setCellsSelectable(!0);const se=Q.getStylesheet().getDefaultEdgeStyle();se.strokeColor="black",se.fontColor="black",se.endArrow="none",se.strokeWidth=2,se.editable=!0,Q.getStylesheet().putDefaultEdgeStyle(se);const ge=Q.getStylesheet().getDefaultVertexStyle();ge.fillColor="#ffffff",ge.strokeColor="#000000",ge.strokeWidth=2,ge.autoSize=!1,ge.resizable=!0,ge.fontSize=VERTEX_FONT.size,ge.fontColor=VERTEX_FONT.color,ge.editable=!0,ge.shape="image",ge.imageAspect=!1,Q.getStylesheet().putDefaultVertexStyle(ge)};w&&(w.addListener(InternalEvent.CLICK,(Q,se)=>{!se.getProperty("cell")&&!w.isEditing()&&returnFocusToGraph()}),w.getSelectionModel().addListener(InternalEvent.CHANGE,()=>{w.isEditing()||returnFocusToGraph()}));const X=reactExports.useCallback(Q=>{const se={};Q.getDataModel().addListener(InternalEvent.CHANGE,(ge,Ce)=>{var oe,he;Q.getDataModel().beginUpdate(),Ce.consume();try{const de=Ce.getProperty("edit").changes;for(let re=0;re<de.length;re++){const ae=de[re];if(ae.constructor.name=="GeometryChange"){const pe=de[re].cell,J=pe.getId(),ue=pe.getStyle(),Te=(oe=pe.getGeometry())==null?void 0:oe.height,xe=(he=pe.getGeometry())==null?void 0:he.width;if(J!=null&&se[J]==null)se[J]=[Te,xe];else if(J!=null){const we=se[J][0],Re=se[J][1];if(we&&Re&&Te&&xe){let De=q(ue,we,Re,Te,xe)||1;const Ae=10,Be=30;De=Math.max(Ae,De),De=Math.min(Be,De);const We=ue;We.fontSize=De,Q.getDataModel().setStyle(pe,We)}}J&&(se[J]=[Te,xe])}else if(ae.constructor.name=="ValueChange"){const pe=ae.cell;if(isGoalNameEmpty(ae.value)){Q.getDataModel().setValue(pe,ae.previous),D({show:!0,title:"Input Error",message:"Goal name cannot be empty.",onHide:()=>D(xe=>({...xe,show:!1}))});return}const J=getCellNumericIds(pe),ue=ae.value.split(","),Te=J.length;Te!==ue.length?(Q.getDataModel().setValue(pe,ae.previous),D({show:!0,title:"Input Error",message:`Please provide ${Te} ${Te===1?"item":"items"} separated by commas`,onHide:()=>D(xe=>({...xe,show:!1}))})):J.forEach((xe,we)=>{E(updateTextForInstanceId({instanceId:xe,text:ue[we]}))})}}}finally{Q.getDataModel().endUpdate(),Q.refresh()}})},[E]),K=Q=>{const se=new KeyHandler(Q);se.bindKey(DELETE_KEYBINDING,()=>{if(Q.isEnabled()){const he=Q.getSelectionCells();if(!he||he.length===0)return;z(he),U(Q,he[0]).length>0?H(!0):W(Q,!1,he)}}),se.bindKey(DELETE_KEYBINDING2,()=>{if(Q.isEnabled()){const he=Q.removeCells();Q.removeStateForCell(he[0])}});const ge=new UndoManager,Ce=(he,de)=>{ge.undoableEditHappened(de.getProperty("edit"))};Q.getDataModel().addListener(InternalEvent.UNDO,Ce),Q.getView().addListener(InternalEvent.UNDO,Ce);const oe=new KeyHandler(Q);oe.getFunction=he=>(Client.IS_MAC&&he.metaKey?he.code==="KeyZ"&&ge.indexOfNextAdd>1&&ge.undo():Client.IS_WIN&&he.ctrlKey&&he.code==="KeyZ"&&ge.indexOfNextAdd>1&&ge.undo(),null)};DragSource.prototype.getDropTarget=(Q,se,ge)=>{const Ce=Q.getCellAt(se,ge);return Ce&&!Q.isValidDropTarget(Ce)?Ce:null};const ee=(Q,se,ge,Ce,oe,he)=>{Q.removeCells(Q.getChildVertices(Q.getDefaultParent())),Q.removeCells(Q.getChildEdges(Q.getDefaultParent())),se.value=null,Object.keys(ge).forEach(de=>delete ge[de]),Object.keys(Ce).forEach(de=>delete Ce[de]),Object.keys(oe).forEach(de=>delete oe[de]),Object.keys(he).forEach(de=>delete he[de])},te=reactExports.useCallback(()=>{if(!w)return;let Q=null;const se={value:null},ge={},Ce={},oe={},he={};if(ee(w,se,ge,Ce,oe,he),!Client.isBrowserSupported()){error("Browser not supported!",200);return}w.getDataModel().beginUpdate(),renderGoals(g.ClusterGoals,w,null,se,ge,Ce,oe,he),Q=se.value,layoutFunctions(w,Q),associateNonFunctions(g.ClusterGoals,w,Q,ge,Ce,oe,he),w.getDataModel().endUpdate()},[w,g]);reactExports.useEffect(()=>{const Q=d.current||void 0;if(Q){InternalEvent.disableContextMenu(Q);const se=[...getDefaultPlugins(),RubberBandHandler],ge=new Graph(Q,void 0,se);return Z(ge),X(ge),fixEditorPosition(ge),K(ge),registerCustomShapes(),C(ge),()=>{ge&&ge.destroy(),C(null)}}},[X,C]),reactExports.useEffect(()=>{w&&(g.ClusterGoals.length>0?te():w.getDataModel().clear())},[g,w,te]),reactExports.useEffect(()=>{if(!x||!w||g.ClusterGoals.length===0)return;let Q=0;const se=20,ge=()=>{const Ce=w.getGraphBounds();Ce&&Ce.width>0&&Ce.height>0?recentreView(w):Q<se&&(Q++,requestAnimationFrame(ge))};requestAnimationFrame(ge)},[x,w,g.ClusterGoals.length]);const ce=$&&w?U(w,$[0]).length:0;return jsxRuntimeExports.jsxs("div",{style:{position:"relative",width:"100%",height:"100%"},children:[jsxRuntimeExports.jsx(ErrorModal,{...M}),jsxRuntimeExports.jsx(ConfirmModal,{show:k,title:"Delete goal with children",message:jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:["The selected goal has ",ce," associated ",ce===1?"goal":"goals",jsxRuntimeExports.jsx("br",{}),"Choose below if you also want to delete them."]}),onHide:()=>H(!1),onConfirm:()=>{w&&$?W(w,F,$):console.warn("Graph not initialized yet"),H(!1)},extraContent:jsxRuntimeExports.jsx(Form$1.Check,{type:"checkbox",label:"Delete associated goal(s)",checked:F,onChange:Q=>j(Q.target.checked)})}),jsxRuntimeExports.jsxs(Container,{children:[jsxRuntimeExports.jsxs(Row,{className:"row",children:[jsxRuntimeExports.jsx(Col,{md:10,children:jsxRuntimeExports.jsx("div",{id:GRAPH_DIV_ID,"data-cy":"graph-canvas",ref:d,tabIndex:0,style:{outline:"none"}})}),jsxRuntimeExports.jsx(Col,{md:2,children:jsxRuntimeExports.jsx(GraphSidebar,{graph:w,recentreView:()=>w&&recentreView(w)})})]}),g.ClusterGoals.length>0&&!I&&jsxRuntimeExports.jsx(WarningMessage,{message:"No functional goals found"})]})]})},defaultStyle={display:"flex",alignItems:"flex-start",justifyContent:"center",borderStyle:"solid",borderColor:"lightgrey",borderWidth:"1px",borderRadius:"3px"},DEFINED_PROPORTIONS={maxWidth:"80%",minWidth:"10%"},INITIAL_PROPORTIONS={sectionOne:.5,sectionThree:.63,sectionsCombine:{sectionOne:.2,sectionThree:.5}},DEFAULT_HEIGHT="800px",SectionPanel=({showGoalSection:x,showGraphSection:d,setShowGoalSection:g,paddingX:E})=>{const[b,w]=reactExports.useState(0),[C,S]=reactExports.useState(0),[P,I]=reactExports.useState(0),[M,D]=reactExports.useState(null),{dispatch:k,tree:H}=useFileContext(),[F,j]=reactExports.useState([]),[$,z]=reactExports.useState([]),[U,W]=reactExports.useState([]),[q,Z]=reactExports.useState(!1),X=reactExports.useRef(null),K=reactExports.useRef(null),ee=reactExports.useRef(null),te=reactExports.useRef(null),ce=(de,re,ae)=>{w(ae.offsetWidth),X.current&&ae.offsetWidth+X.current.offsetWidth+C>=P&&S(P-ae.offsetWidth-X.current.offsetWidth)};reactExports.useEffect(()=>()=>{te.current!==null&&clearTimeout(te.current)},[]);const Q=(de,re,ae)=>{S(ae.offsetWidth),X.current&&b+X.current.offsetWidth+ae.offsetWidth>=P&&w(P-ae.offsetWidth-X.current.offsetWidth),console.log(b)},se=()=>{te.current!==null&&clearTimeout(te.current),te.current=setTimeout(()=>{z([]),j([]),Z(!1)},1500)},ge=de=>{if(de.preventDefault(),F.length>1){Ce();return}M&&M.content&&(H.map(re=>re.goalId).includes(M.id)?(z([...$,M.id]),Z(!0),se()):k(addGoalToTree(M)))},Ce=()=>{const de=F.filter(ae=>!H.some(pe=>pe.goalId===ae.id));if(de.length===0){z([...F.map(ae=>ae.id)]),Z(!0),se();return}de.filter(ae=>!isEmptyGoal(ae)).forEach(ae=>{k(addGoalToTree(ae))}),j([])},oe=()=>{z([]),Z(!1),j([])},he=(de,re)=>{k(updateTextForGoalId({id:de.id,text:re}))};return reactExports.useEffect(()=>{if(K.current){const de=K.current.clientWidth-E*2;I(de),x&&d?(w(de*INITIAL_PROPORTIONS.sectionsCombine.sectionOne),S(de*INITIAL_PROPORTIONS.sectionsCombine.sectionThree)):x?w(de*INITIAL_PROPORTIONS.sectionOne):(d||w(de*INITIAL_PROPORTIONS.sectionOne),S(de*INITIAL_PROPORTIONS.sectionThree))}},[E,x,d]),jsxRuntimeExports.jsxs("div",{style:{width:"100%",height:"100%",display:"flex",padding:E},ref:K,children:[jsxRuntimeExports.jsx(ErrorModal,{show:q,title:"Drop Failed",message:`The selected ${F.length>1?"goals":"goal"} already ${F.length>1?"exist":"exists"}.`,onHide:oe}),jsxRuntimeExports.jsx(Resizable,{handleClasses:{right:"right-handler"},enable:{right:!0},style:{...defaultStyle,backgroundColor:"rgb(236, 244, 244)",display:x?"flex":"none"},size:{width:b,height:"100%"},maxWidth:DEFINED_PROPORTIONS.maxWidth,minWidth:DEFINED_PROPORTIONS.minWidth,minHeight:DEFAULT_HEIGHT,onResize:ce,children:jsxRuntimeExports.jsx(GoalList,{ref:ee,setDraggedItem:D,groupSelected:F,setGroupSelected:j,handleSynTableTree:(de,re)=>k(updateTextForGoalId({id:de.id,text:re})),handleDropGroupSelected:Ce})}),jsxRuntimeExports.jsx("div",{style:{...defaultStyle,width:"100%",minWidth:DEFINED_PROPORTIONS.minWidth,minHeight:DEFAULT_HEIGHT,height:DEFAULT_HEIGHT,padding:"10px",backgroundColor:"rgba(35, 144, 231, 0.1)",overflow:"auto"},onDrop:ge,onDragOver:de=>de.preventDefault(),ref:X,children:jsxRuntimeExports.jsx(Tree,{handleSynTableTree:he,existingGoalReferenceInstanceId:U,setExistingGoalReferenceInstanceId:W})}),jsxRuntimeExports.jsx(Resizable,{handleClasses:{left:"left-handler"},enable:{left:!0},style:{...defaultStyle,backgroundColor:"rgb(236, 244, 244)",display:d?"flex":"none"},size:{width:C,height:"100%"},maxWidth:DEFINED_PROPORTIONS.maxWidth,minWidth:DEFINED_PROPORTIONS.minWidth,minHeight:DEFAULT_HEIGHT,onResize:Q,children:jsxRuntimeExports.jsx(GraphWorker,{showGraphSection:d})})]})},GraphUsageInfo=()=>jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("strong",{children:"Hierarchy View:"}),jsxRuntimeExports.jsx("br",{})," Drag a goal in the left section to adjust the hierarchy",jsxRuntimeExports.jsx("br",{})," Hover over a goal and click ",jsxRuntimeExports.jsx(BsPencilSquare,{})," to edit its name",jsxRuntimeExports.jsx("br",{})," Hover over a goal and click ",jsxRuntimeExports.jsx(BsFillTrash3Fill,{})," to delete the goal",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("strong",{children:"Model View:"}),jsxRuntimeExports.jsx("br",{})," Select and drag a goal to adjust its position on the graph",jsxRuntimeExports.jsx("br",{})," Drag elements from the right toolbar onto the graph to add a goal",jsxRuntimeExports.jsx("br",{})," Double-click the text under a goal in the graph to edit the goal name"]}),ClusterUsageInfo=()=>jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("strong",{children:"Goal List:"}),jsxRuntimeExports.jsx("br",{})," Click ",jsxRuntimeExports.jsx(BsFillTrash3Fill,{})," or"," ",jsxRuntimeExports.jsx("strong",{children:jsxRuntimeExports.jsx("code",{children:"[Delete Selected]"})})," to delete a goal",jsxRuntimeExports.jsx("br",{})," Click ",jsxRuntimeExports.jsx(BsPlus,{})," or click the last goal entry in the goal list and press"," ",jsxRuntimeExports.jsx("strong",{children:jsxRuntimeExports.jsx("code",{children:"[Enter]"})})," to create a new goal",jsxRuntimeExports.jsx("br",{})," To add goals to the hierarchy view, drag a goal from the goal list",jsxRuntimeExports.jsx("br",{}),"and drop it into the cluster on the right, or select goals and click the"," ",jsxRuntimeExports.jsx("strong",{children:jsxRuntimeExports.jsx("code",{children:"[Add Group]"})})," button",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("strong",{children:"Hierarchy View:"}),jsxRuntimeExports.jsx("br",{})," Drag a goal in the left section to adjust the hierarchy",jsxRuntimeExports.jsx("br",{})," Drag a goal within the cluster to the left or right to create a hierarchical structure",jsxRuntimeExports.jsx("br",{})," Hide or expand sub-goals by clicking the  / + icon",jsxRuntimeExports.jsx("br",{})," Hover over a goal and click ",jsxRuntimeExports.jsx(BsPencilSquare,{})," to edit its name",jsxRuntimeExports.jsx("br",{})," Hover over a goal and click ",jsxRuntimeExports.jsx(BsFillTrash3Fill,{})," to delete the goal"]}),ShowGoalSectionButton=({onClick:x,showGoalSection:d,className:g,variant:E="outline-primary",size:b})=>{const w=b==="xs"?{size:"sm",style:{"--bs-btn-padding-y":".0rem","--bs-btn-padding-x":".5rem","--bs-btn-font-size":".7rem"}}:{size:b};return jsxRuntimeExports.jsx(Button,{variant:E,onClick:x,className:g,...w,children:d?"Hide goal list":"Show goal list"})},ProgressBar=({showGoalSection:x,setShowGoalSection:d,setShowGraphSection:g})=>{const[E,b]=reactExports.useState(0),w=()=>{b(0),d(!0),g(!1)},C=()=>{b(1),d(!1),g(!0)};return jsxRuntimeExports.jsx("div",{style:{width:"auto",minWidth:"1280px",overflowY:"hidden",maxWidth:"100%"},children:jsxRuntimeExports.jsxs("div",{className:"arrow-steps clearfix mb-1",children:[jsxRuntimeExports.jsx("div",{className:`step ${E===0?"current":""}`,id:"clusterTab",onClick:w,children:jsxRuntimeExports.jsxs("span",{children:["Enter Goals / Arrange Hierarchy",jsxRuntimeExports.jsx(OverlayTrigger,{trigger:"click",placement:"left",rootClose:!0,overlay:jsxRuntimeExports.jsx(Popover$1,{children:jsxRuntimeExports.jsx(Popover$1.Body,{children:jsxRuntimeExports.jsx(ClusterUsageInfo,{})})}),children:jsxRuntimeExports.jsx("span",{children:jsxRuntimeExports.jsx(BsInfoCircleFill,{className:"ms-1"})})})]})}),jsxRuntimeExports.jsx("div",{className:`step ${E===1?"current":""}`,id:"graphTab",onClick:C,children:jsxRuntimeExports.jsxs("span",{children:["Arrange Hierarchy / Render Model",jsxRuntimeExports.jsx(OverlayTrigger,{trigger:"click",placement:"left",rootClose:!0,overlay:jsxRuntimeExports.jsx(Popover$1,{children:jsxRuntimeExports.jsx(Popover$1.Body,{children:jsxRuntimeExports.jsx(GraphUsageInfo,{})})}),children:jsxRuntimeExports.jsx("span",{children:jsxRuntimeExports.jsx(BsInfoCircleFill,{className:"ms-1"})})}),jsxRuntimeExports.jsx(ShowGoalSectionButton,{showGoalSection:x,onClick:S=>{d(!x),S.stopPropagation()},variant:E===1?"info":void 0,size:"xs",className:"ms-1"})]})})]})})},ProjectEdit=()=>{const[x,d]=reactExports.useState(!0),[g,E]=reactExports.useState(!1);return jsxRuntimeExports.jsxs(GraphProvider,{children:[jsxRuntimeExports.jsx(ProjectEditHeader,{showGoalSection:x,setShowGoalSection:d,showGraphSection:g}),jsxRuntimeExports.jsx(ProgressBar,{showGoalSection:x,setShowGoalSection:d,setShowGraphSection:E}),jsxRuntimeExports.jsx(SectionPanel,{showGoalSection:x,showGraphSection:g,setShowGoalSection:d,paddingX:15})]})},version="2025.1",pkg={version},Footer=()=>jsxRuntimeExports.jsx("div",{className:"mt-auto",children:jsxRuntimeExports.jsxs("p",{className:"text-center",children:["Version: ",pkg.version,jsxRuntimeExports.jsx("br",{}),"",jsxRuntimeExports.jsx("em",{children:"2018-2025 Queue Solutions Pty Ltd"}),jsxRuntimeExports.jsx("br",{}),"All rights reserved",jsxRuntimeExports.jsx("br",{})]})}),Layout=({children:x})=>jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{style:{minHeight:"100vh"},children:x}),jsxRuntimeExports.jsx(Footer,{})]}),App=()=>jsxRuntimeExports.jsx(BrowserRouter,{basename:"/mm-local-editor/",children:jsxRuntimeExports.jsx(Layout,{children:jsxRuntimeExports.jsxs(Routes,{children:[jsxRuntimeExports.jsx(Route,{path:"/",element:jsxRuntimeExports.jsx(Welcome,{})}),jsxRuntimeExports.jsx(Route,{path:"/papers",element:jsxRuntimeExports.jsx(Papers,{})}),jsxRuntimeExports.jsx(Route,{path:"/projectEdit",element:jsxRuntimeExports.jsx(ProjectEdit,{})})]})})});enableMapSet();const rootContainer=document.getElementById("root");ReactDOM$1.createRoot(rootContainer).render(jsxRuntimeExports.jsx(FileProvider,{children:jsxRuntimeExports.jsx(App,{})}))});export default Bh();
